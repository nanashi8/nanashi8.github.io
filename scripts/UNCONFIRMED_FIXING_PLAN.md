# (要確認)単語修正計画

## 現状分析

- **総単語数**: 8,842語
- **意味あり**: 5,205語 (58.9%)
- **(要確認)**: 3,636語 (41.1%)
- **パッセージファイル内の(要確認)出現**: 7,679回

## 問題の性質

1. **辞書に登録済み**: 3,636語が辞書に存在するが、意味が"(要確認)"
2. **パッセージへの影響**: 7,679箇所で単語の意味が表示できない
3. **学習アプリの致命的問題**: 意味がない単語があると学習できない

## 段階的修正計画

### 第1段階: 高頻度単語の優先対応（目標: 500-800語）

**対象**: 複数パッセージで使用される重要単語

**方法**:
1. 出現頻度10回以上の単語を抽出（約200-300語と推定）
2. 基本的な英単語辞書を拡張して自動マッピング
3. 複数形・過去形・ing形などの活用形を原形から推論

**スクリプト**: `fix_high_frequency_unconfirmed.py`（新規作成）

**期待効果**: 
- 頻出単語を優先的に修正することで、最大3,000-4,000箇所の修正が期待できる
- 学習者が最も頻繁に出会う単語から改善

---

### 第2段階: 活用形・派生語の自動推論（目標: 1,000-1,500語）

**対象**: 既に辞書に原形がある単語の活用形

**方法**:
1. 辞書内の既存単語から活用形パターンを検出
   - 複数形: -s, -es, -ies
   - 過去形: -ed, -ied
   - 現在分詞: -ing
   - 副詞形: -ly
2. (要確認)単語が既知の単語の活用形か判定
3. 原形の意味を基に活用形の意味を生成

**スクリプト**: `infer_word_forms.py`（新規作成）

**期待効果**:
- "play → players", "challenge → challenged"など自動推論可能
- 文法的に正確な意味を付与

---

### 第3段階: 文脈からの意味推論（目標: 500-800語）

**対象**: パッセージの日本語訳から意味を推論できる単語

**方法**:
1. 各(要確認)単語が出現するフレーズの英文と日本語訳を収集
2. 英文中の単語位置と日本語訳の対応関係を分析
3. ルールベースで意味を抽出
   - カタカナ部分の検出
   - 品詞マーカーの利用（「〜する」「〜な」など）
   - 前後の訳語との整合性チェック

**スクリプト**: `infer_from_context_enhanced.py`（新規作成）

**期待効果**:
- fix_unregistered_words.pyで成功した手法の改良版
- より高精度な推論

---

### 第4段階: カテゴリ別の一括定義（目標: 300-500語）

**対象**: 特定のカテゴリに属する単語群

**方法**:
1. 同じカテゴリの単語をグループ化
   - 数字・序数詞（ji, p など）
   - 職業名の複数形（lawyers, players）
   - 食材・材料（ingredients）
   - 場所の複数形（beaches）
2. カテゴリごとに一括で意味パターンを適用

**スクリプト**: `fix_by_category.py`（新規作成）

**期待効果**:
- パターンが明確な単語群を効率的に処理

---

### 第5段階: 残存単語の手動リスト作成（目標: 残り全て）

**対象**: 自動処理できなかった単語

**方法**:
1. 第1-4段階で処理できなかった単語リストを生成
2. 各単語の使用例と文脈を一覧化
3. 手動で意味を入力できるCSV/TSVファイルを生成
4. 手動編集後、一括更新

**スクリプト**: `generate_manual_fix_list.py`（新規作成）

**期待効果**:
- 残り500-1,000語程度を効率的に手動処理可能

---

## 実装優先順位

1. **第1段階**: 高頻度単語（最優先・即効性大）
2. **第2段階**: 活用形推論（効率的・確実性高）
3. **第3段階**: 文脈推論（時間かかるが重要）
4. **第4段階**: カテゴリ別（追加の効率化）
5. **第5段階**: 手動処理（最後の仕上げ）

## 想定スケジュール

- 第1段階: 30分（スクリプト作成15分 + 実行・検証15分）
- 第2段階: 45分（スクリプト作成30分 + 実行・検証15分）
- 第3段階: 60分（スクリプト作成40分 + 実行・検証20分）
- 第4段階: 30分（スクリプト作成15分 + 実行・検証15分）
- 第5段階: 変動（手動作業の規模による）

**合計**: 約3-4時間（手動作業除く）

## 成功指標

- **完成率**: 95%以上（8,400語/8,842語）
- **重要単語カバー率**: 高頻度単語（10回以上出現）の100%修正
- **パッセージカバー率**: 各パッセージで90%以上の単語に意味がある

## リスク管理

1. **既存の正しい意味の上書き**: 処理前に必ずバックアップ
2. **誤った意味の推論**: 信頼度スコアを付与し、低い場合は手動確認
3. **活用形の誤判定**: 辞書の原形と照合して確認

## 備考

- APIキーなしで実装可能な方法のみを採用
- すべてルールベース＋既存データ活用
- 段階的に実行し、各段階で結果を検証
