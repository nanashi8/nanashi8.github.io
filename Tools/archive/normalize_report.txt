中学語彙CSV 関連分野 正規化レポート
作成日: 2025-10-13

概要:
- 目的: 全CSVの「関連分野」を作成要領に基づき共通の約20カテゴリに統一し、粒度を揃える。
- 実施: `Tools/normalize_related_fields.py` を作成して実行しました。実行時に各CSVのバックアップ（.bak）を作成しています。

処理済みファイルと結果サマリ:
1) SimpleWord/SimpleWord/Resources/中学英単語.csv
   - 行数: 118
   - 正規化後のユニークカテゴリ数: 19
   - 関連分野出現総数: 216
   - 現在存在するカテゴリ: ['交通・移動', '仕事・職業', '住居・建物', '公共・サービス', '動物', '医療・健康', '商業・買い物', '天体・天気', '学校・学習', '家族・人間関係', '感情・思考・認知', '文化・芸術・娯楽', '文法・表現', '方角・場所・地理', '日常', '植物', '物理・状態', '自然', '食べ物・飲食']
   - 欠けているカテゴリ数: 1

2) SimpleWord/SimpleWord/Resources/中学英会話.csv
   - 行数: 156
   - 正規化後のユニークカテゴリ数: 9
   - 関連分野出現総数: 180
   - 現在存在するカテゴリ: ['交通・移動', '仕事・職業', '住居・建物', '公共・サービス', '医療・健康', '商業・買い物', '学校・学習', '文化・芸術・娯楽', '日常']
   - 欠けているカテゴリ数: 11

3) SimpleWord/SimpleWord/Resources/中学古典単語.csv
   - 行数: 15
   - 正規化後のユニークカテゴリ数: 3
   - 関連分野出現総数: 21
   - 現在存在するカテゴリ: ['文法・表現', '日常', '時間・頻度']
   - 欠けているカテゴリ数: 17

4) SimpleWord/SimpleWord/Resources/中学英熟語.csv
   - 行数: 198
   - 正規化後のユニークカテゴリ数: 2
   - 関連分野出現総数: 198
   - 現在存在するカテゴリ: ['学校・学習', '日常']
   - 欠けているカテゴリ数: 18

5) SimpleWord/changes/中学英単語_meaning_changes.csv
   - 行数: 102
   - 正規化後のユニークカテゴリ数: 0 (関連分野列は存在するが空)
   - 関連分野出現総数: 0
   - 備考: このファイルは変更履歴系で関連分野が未利用の可能性があります。処理対象から除外するか、別途補完が必要です。

注意事項・推奨事項:
- 現在、すべてのCSVで使用しているカテゴリは共通の20カテゴリセット（定義済）に基づいています。これにより「粒度は全てのCSVで同程度」に揃っています（カテゴリの定義は統一されました）。
- ただし、個々のCSVに現実的に出現するカテゴリ数はコンテンツ量と性質によって異なります。例: `中学古典単語.csv` は行数が15のため、ユニークカテゴリを20に増やすことは実用的ではありません（人工的にタグを追加すれば可能ですが、意味のある分類にはならない恐れがあります）。
- `changes/中学英単語_meaning_changes.csv` は関連分野が空です。変更履歴用ファイルならこのまま保管し、教材CSVのみ正規化するのが合理的です。
- もし「各CSVで必ず約20のカテゴリを持たせる」ことを厳密要件とするなら、方針を決める必要があります（例: 小さいCSVへ外部からカテゴリを付与する、あるいは1行に複数カテゴリを付けて総数を稼ぐ等）。一般的にはカテゴリ定義を統一するだけで十分です。

次のアクション候補（選択してください）:
A) このまま最終化（カテゴリ定義は共通化済、バックアップあり）。これで完了報告を出します。
B) 正規化ルール（MAPPING）を微調整して、特定の語や表記を別カテゴリへ再マップする（例: "方角・場所・地理" と "地理" の扱い等）。変更後に再実行します。
C) 各CSVの "欠けているカテゴリ" を埋めるために、手動で（またはルールで）追加タグを付与する（大きな変更）。
D) `changes/中学英単語_meaning_changes.csv` を処理対象から除外して残りの4ファイルのみを最終化する。
E) 正規化の詳細レポート（元のセル値 -> マップ先カテゴリの一覧、各行の差分など）を作成して確認用ファイルを出力する（推奨）。

提案（推奨順）:
1) E: まず詳細レポートを出力し、どの語がどのカテゴリにマップされたかを目視で確認して決定する（安全）。
2) B: 報告を見て気になるマッピングの微調整を行う。
3) A または D: 最終化して完了。

どのアクションを進めますか？（複数選択可）
