# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆæ–¹é‡

**ä½œæˆæ—¥**: 2025-11-08  
**æœ€çµ‚æ›´æ–°**: 2025-11-08  
**å¯¾å¿œå†…å®¹**: ã‚»ã‚­ãƒ¥ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°åŸå‰‡ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ã®å®šç¾©

---


> ğŸ“– **é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**  
> - **[02-01_ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„.md](02-01_ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„.md)** - åŸºæœ¬æ–¹é‡ã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡  
> - **[02-02_ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„.md](02-02_ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„.md)** - è©³ç´°ãªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«  
> - **[01-02_ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä»•æ§˜.md](../01_ä»•æ§˜æ›¸/01-02_ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä»•æ§˜.md)** - Feature-First Architecture

---


## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [æ—¢å­˜è¨­è¨ˆæ€æƒ³ã¨ã®çµ±åˆ](#æ—¢å­˜è¨­è¨ˆæ€æƒ³ã¨ã®çµ±åˆ)
3. [14ã®å¿…é ˆè¦ä»¶](#14ã®å¿…é ˆè¦ä»¶)
4. [ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ](#ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ)
5. [çµ¶å¯¾ç¦æ­¢äº‹é …](#çµ¶å¯¾ç¦æ­¢äº‹é …)

---

## æ¦‚è¦

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã‚»ã‚­ãƒ¥ã‚¢ã§é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãªã‚³ãƒ¼ãƒ‰ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®14ã®å¿…é ˆè¦ä»¶ã‚’å³å®ˆã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯å˜ãªã‚‹ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã¯ãªãã€**ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã§éµå®ˆã™ã¹ãå¿…é ˆè¦ä»¶**ã§ã™ã€‚

### åŸºæœ¬æ–¹é‡

- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’ä½œã‚Šè¾¼ã¾ãªã„
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é‡è¦–**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’æãªã‚ãªã„é«˜é€Ÿãªå‡¦ç†
- **ä¿å®ˆæ€§ã®ç¢ºä¿**: æ˜ç¤ºçš„ã§ç†è§£ã—ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰
- **Swift 6.0ã®æ´»ç”¨**: æœ€æ–°ã®è¨€èªæ©Ÿèƒ½ã§å®‰å…¨æ€§ã‚’ç¢ºä¿
- **æ—¢å­˜è¨­è¨ˆã¨ã®èª¿å’Œ**: ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸå‰‡ã‚’å°Šé‡


---

## æ—¢å­˜è¨­è¨ˆæ€æƒ³ã¨ã®çµ±åˆ

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ—¢å­˜è¨­è¨ˆæ€æƒ³ã¨å®Œå…¨ã«çµ±åˆã•ã‚Œã¦ã„ã¾ã™ã€‚

### Feature-First Architectureã¨ã®çµ±åˆ

**æ—¢å­˜è¨­è¨ˆ**: æ©Ÿèƒ½ã”ã¨ã«å‚ç›´åˆ†å‰²ã—ã€å„æ©Ÿèƒ½ãŒè‡ªå·±å®Œçµ  
**çµ±åˆæ–¹é‡**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ã‚’å„æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å†…ã§å®Ÿè£…

```swift
// Feature-First Architectureã‚’å°Šé‡ã—ã¤ã¤ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã‚’é©ç”¨
Features/
â”œâ”€â”€ Quiz/
â”‚   â”œâ”€â”€ Views/
â”‚   â”‚   â””â”€â”€ QuizView.swift          // @MainActorã§UIæ›´æ–°ã‚’ä¿è¨¼
â”‚   â”œâ”€â”€ Logic/
â”‚   â”‚   â””â”€â”€ QuizSession.swift       // actorã§ãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚’é˜²æ­¢
â”‚   â””â”€â”€ Models/
â”‚       â””â”€â”€ QuestionItem.swift      // Sendableãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§å®‰å…¨æ€§ã‚’ä¿è¨¼
```

### å˜ä¸€è²¬ä»»ã®åŸå‰‡ã¨ã®çµ±åˆ

**æ—¢å­˜è¨­è¨ˆ**: å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å˜ä¸€ã®è²¬å‹™ã®ã¿ã‚’æŒã¤  
**çµ±åˆæ–¹é‡**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚‚å˜ä¸€è²¬ä»»ã®ä¸€éƒ¨ã¨ã—ã¦å®Ÿè£…

```swift
// SRPã‚’å®ˆã‚Šã¤ã¤ã€ã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚’é©åˆ‡ã«å®Ÿè£…
class CSVLoader {
    func load(from url: URL) throws -> [QuestionItem] {
        do {
            let data = try Data(contentsOf: url)
            return try parseCSV(data: data)
        } catch let error as CSVError {
            logger.error("CSVèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: \(error.localizedDescription)")
            throw error
        }
    }
}
```

### æ—¢å­˜è³‡ç”£ã®å„ªå…ˆåˆ©ç”¨ã¨ã®çµ±åˆ

**æ—¢å­˜è¨­è¨ˆ**: æ—¢å­˜ã®è¨­è¨ˆãƒ»ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å„ªå…ˆçš„ã«åˆ©ç”¨  
**çµ±åˆæ–¹é‡**: ã‚»ã‚­ãƒ¥ã‚¢ãªæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨æ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ´»ç”¨

```swift
// æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ´»ç”¨ã—ã¤ã¤ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æ˜ç¤º
func formatDate(_ date: Date) -> String {
    let formatter = DateFormatter()
    formatter.dateFormat = "yyyy-MM-dd HH:mm:ss"
    formatter.timeZone = TimeZone(identifier: "Asia/Tokyo")!
    formatter.locale = Locale(identifier: "ja_JP")
    return formatter.string(from: date)
}
```

### ã‚·ãƒ³ãƒ—ãƒ«ã•ã¨ã®çµ±åˆ

**æ—¢å­˜è¨­è¨ˆ**: ã‚ªãƒ¼ãƒãƒ¼ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã‚’é¿ã‘ã€ã‚·ãƒ³ãƒ—ãƒ«ã•ã‚’å„ªå…ˆ  
**çµ±åˆæ–¹é‡**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã‚’æº€ãŸã—ã¤ã¤ã€éåº¦ã«è¤‡é›‘ã«ã—ãªã„

```swift
// âœ… ã‚·ãƒ³ãƒ—ãƒ«ã ãŒã‚»ã‚­ãƒ¥ã‚¢ãªå®Ÿè£…
func shuffleChoices(_ choices: [String]) -> [String] {
    return choices.shuffled()  // SystemRandomNumberGeneratorã§ååˆ†
}

// âŒ éåº¦ã«è¤‡é›‘ãªå®Ÿè£…ã¯é¿ã‘ã‚‹
class RandomGeneratorFactory {
    func createGenerator(type: RandomType) -> RandomGenerator { ... }
}
```


## 14ã®å¿…é ˆè¦ä»¶

### 1. Swift 6.0ã®ä½¿ç”¨ã¨ä¸¦è¡Œæ€§

**è¦ä»¶**: Swift 6.0ã®ä¸¦è¡Œæ€§æ©Ÿèƒ½ï¼ˆactorã€async/awaitã€@MainActorï¼‰ã‚’é©åˆ‡ã«ä½¿ç”¨ã—ã€ãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚’é˜²æ­¢ã™ã‚‹ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// actorã§ãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚’é˜²æ­¢
actor QuizSessionStore {
    private var sessions: [String: QuizSession] = [:]
    
    func addSession(_ session: QuizSession) {
        sessions[session.id] = session
    }
}

// @MainActorã§UIæ›´æ–°ã‚’ä¿è¨¼
@MainActor
class QuizViewModel: ObservableObject {
    @Published var currentQuestion: QuestionItem?
    
    func loadQuestion() async {
        let question = await generateQuestion()
        self.currentQuestion = question
    }
}
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// ãƒ‡ãƒ¼ã‚¿ç«¶åˆã®å¯èƒ½æ€§
class QuizSessionStore {
    var sessions: [String: QuizSession] = [:]  // å±é™ºï¼
}
```

---

### 2. é›‘ãªä¾‹å¤–å‡¦ç†ã‚’ç¦æ­¢

**è¦ä»¶**: `try?`ã‚„`try!`ã«ã‚ˆã‚‹é›‘ãªã‚¨ãƒ©ãƒ¼ç„¡è¦–ã‚’ç¦æ­¢ã—ã€é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å®Ÿè£…ã™ã‚‹ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼å‹ã®å®šç¾©
enum CSVError: LocalizedError {
    case fileNotFound(String)
    case invalidFormat(String)
    
    var errorDescription: String? {
        switch self {
        case .fileNotFound(let name):
            return "CSVãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: \(name)"
        case .invalidFormat(let detail):
            return "CSVãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒä¸æ­£ã§ã™: \(detail)"
        }
    }
}

// é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
func loadCSVData(filename: String) throws -> [QuestionItem] {
    do {
        let data = try loadData(from: filename)
        return try parseCSV(data: data)
    } catch let error as CSVError {
        logger.error("CSVèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: \(error.localizedDescription)")
        throw error
    }
}
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–
let data = try? loadData(from: filename)  // ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–
return try! parseCSV(data: data)  // ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã®å¯èƒ½æ€§
```

---

### 3. å¯å¤‰å¼•æ•°ã‚’ä½¿ç”¨ã—ãªã„

**è¦ä»¶**: å¯å¤‰å¼•æ•°ï¼ˆ`...`ï¼‰ã¯å‹å®‰å…¨æ€§ãŒå¤±ã‚ã‚Œã‚‹ãŸã‚ä½¿ç”¨ç¦æ­¢ã€‚æ˜ç¤ºçš„ãªé…åˆ—ã¾ãŸã¯ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// æ˜ç¤ºçš„ãªé…åˆ—
func processItems(_ items: [QuestionItem]) {
    for item in items {
        process(item)
    }
}

// ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã§å‹å®‰å…¨æ€§ã‚’ä¿è¨¼
func processItems<T: Identifiable>(_ items: [T]) {
    for item in items {
        logger.debug("å‡¦ç†ä¸­ã®ID: \(item.id)")
    }
}
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// å¯å¤‰å¼•æ•°ã¯ç¦æ­¢
func processItems(_ items: Any...) {  // å±é™ºï¼
}
```

---

### 4. ä»»æ„ã®ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œãƒ»SQLæ–‡å®Ÿè¡Œã®ç¦æ­¢

**è¦ä»¶**: ä»»æ„ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã‚„SQLæ–‡ã®ç›´æ¥å®Ÿè¡Œã‚’ç¦æ­¢ã€‚æ˜ç¤ºçš„ãªé–¢æ•°å‘¼ã³å‡ºã—ã¨CoreDataã®ã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ãªAPIã®ã¿ä½¿ç”¨ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// æ˜ç¤ºçš„ãªã‚³ãƒãƒ³ãƒ‰å®šç¾©
enum QuizCommand {
    case start
    case submit(answerId: Int)
    case skip
}

// CoreDataã®ã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ãªAPI
func fetchQuizSessions(for userId: String) throws -> [QuizSessionEntity] {
    let request: NSFetchRequest<QuizSessionEntity> = QuizSessionEntity.fetchRequest()
    request.predicate = NSPredicate(format: "userId == %@", userId)
    return try context.fetch(request)
}
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// ä»»æ„ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã¯ç¦æ­¢
func executeCommand(_ command: String) {
    Process().launch()  // å±é™ºï¼
}

// SQLæ–‡ã®ç›´æ¥å®Ÿè¡Œã¯ç¦æ­¢
let sql = "SELECT * FROM sessions WHERE user_id = '\(userId)'"  // SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã®å±é™º
```

---

### 5. ãƒ­ã‚°ã«å†…éƒ¨æƒ…å ±ãƒ»å€‹äººæƒ…å ±ã‚’å‡ºåŠ›ã—ãªã„

**è¦ä»¶**: ãƒ­ã‚°ã«å€‹äººæƒ…å ±ã€èªè¨¼æƒ…å ±ã€å†…éƒ¨å®Ÿè£…ã®è©³ç´°ã‚’å‡ºåŠ›ã—ãªã„ã€‚å¿…è¦ãªå ´åˆã¯ãƒã‚¹ã‚­ãƒ³ã‚°ã™ã‚‹ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// å€‹äººæƒ…å ±ã®ãƒã‚¹ã‚­ãƒ³ã‚°
extension String {
    func masked() -> String {
        guard count > 4 else { return "****" }
        let start = prefix(2)
        let end = suffix(2)
        return "\(start)***\(end)"
    }
}

// å®‰å…¨ãªãƒ­ã‚°å‡ºåŠ›
func logUserAction(userId: String, action: String) {
    logger.info("ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³: \(action), ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: \(userId.masked())")
}

// OSLogã®privacyåˆ¶å¾¡ã‚’æ´»ç”¨
import OSLog
let logger = Logger(subsystem: "com.example.SimpleWord", category: "Quiz")
logger.info("ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹: \(sessionId, privacy: .public)")
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// å€‹äººæƒ…å ±ã‚’ãã®ã¾ã¾å‡ºåŠ›
logger.debug("ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: \(userId), ãƒ¡ãƒ¼ãƒ«: \(email)")  // å±é™ºï¼
```

---

### 6. æ™‚åˆ»ã¯ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¨­å®šã™ã‚‹

**è¦ä»¶**: æ—¥æ™‚å‡¦ç†ã§ã¯å¿…ãšã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¨ãƒ­ã‚±ãƒ¼ãƒ«ã‚’æ˜ç¤ºçš„ã«è¨­å®šã™ã‚‹ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¨ãƒ­ã‚±ãƒ¼ãƒ«ã‚’æ˜ç¤º
func formatDate(_ date: Date) -> String {
    let formatter = DateFormatter()
    formatter.dateFormat = "yyyy-MM-dd HH:mm:ss"
    formatter.timeZone = TimeZone(identifier: "Asia/Tokyo")!
    formatter.locale = Locale(identifier: "ja_JP")
    return formatter.string(from: date)
}

// ISO8601å½¢å¼ã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
func formatDateISO(_ date: Date) -> String {
    let formatter = ISO8601DateFormatter()
    formatter.timeZone = TimeZone(secondsFromGMT: 0)
    return formatter.string(from: date)
}
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æœªæŒ‡å®š
let formatter = DateFormatter()
formatter.dateFormat = "yyyy-MM-dd HH:mm:ss"
// ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãŒæœªæŒ‡å®š â†’ ç’°å¢ƒä¾å­˜
```

---

### 7. æµ®å‹•å°æ•°ç‚¹ã®ä¸¸ã‚æ–¹ã‚’çµ±ä¸€ã™ã‚‹

**è¦ä»¶**: æµ®å‹•å°æ•°ç‚¹ã®ä¸¸ã‚æ–¹ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã—ã€çµ±ä¸€ã™ã‚‹ã€‚é‡‘é¡ãªã©æ­£ç¢ºæ€§ãŒå¿…è¦ãªå ´åˆã¯Decimalå‹ã‚’ä½¿ç”¨ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// æ˜ç¤ºçš„ãªä¸¸ã‚æ–¹
extension Double {
    func rounded(toPlaces places: Int, rule: FloatingPointRoundingRule = .toNearestOrAwayFromZero) -> Double {
        let divisor = pow(10.0, Double(places))
        return (self * divisor).rounded(rule) / divisor
    }
}

let score = 85.6789
let roundedScore = score.rounded(toPlaces: 2)  // 85.68ï¼ˆå››æ¨äº”å…¥ï¼‰

// é‡‘é¡ãªã©æ­£ç¢ºæ€§ãŒå¿…è¦ãªå ´åˆã¯Decimalå‹
let price = Decimal(string: "1234.56")!
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// ä¸¸ã‚æ–¹ãŒä¸æ˜ç¢º
func calculateScore(_ points: Double) -> Int {
    return Int(points)  // åˆ‡ã‚Šæ¨ã¦ï¼Ÿå››æ¨äº”å…¥ï¼Ÿ
}
```

---

### 8. ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è­¦å‘Šã‚’ç„¡è¦–ã—ãªã„

**è¦ä»¶**: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è­¦å‘Šã‚’ç„¡è¦–ã›ãšã€ã™ã¹ã¦å¯¾å¿œã™ã‚‹ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã‚’æ­£ã—ãä½¿ç”¨
@available(iOS 16.0, *)
func newAPIFeature() {
    // iOS 16ä»¥é™ã®æ©Ÿèƒ½
}

func compatibleFeature() {
    if #available(iOS 16.0, *) {
        newAPIFeature()
    } else {
        legacyFeature()
    }
}
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// è­¦å‘Šã‚’æ”¾ç½®
@available(iOS 15, *)  // iOS 16ä»¥é™ãªã®ã«æ”¾ç½®
```

---

### 9. åŒæœŸãƒ»éåŒæœŸãŒæ©Ÿèƒ½åœæ­¢ã‚’å¼•ãèµ·ã“ã•ãªã„

**è¦ä»¶**: åŒæœŸå‡¦ç†ã¨éåŒæœŸå‡¦ç†ã‚’é©åˆ‡ã«åˆ†é›¢ã—ã€ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ–ãƒ­ãƒƒã‚¯ã‚„ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã‚’é˜²ãã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// éåŒæœŸå‡¦ç†ã‚’é©åˆ‡ã«åˆ†é›¢
class DataLoader {
    func loadData() async throws -> Data {
        return try await URLSession.shared.data(from: url).0
    }
    
    func processData(_ data: Data) -> [QuestionItem] {
        return parseCSV(data: data)
    }
}

// ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã§ã®é‡ã„å‡¦ç†ã‚’é¿ã‘ã‚‹
@MainActor
class ViewModel: ObservableObject {
    func reload() async {
        let newItems = await Task.detached {
            return self.loadAndProcessData()
        }.value
        self.items = newItems
    }
}
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã§é‡ã„åŒæœŸå‡¦ç†
@MainActor
func loadAndProcessData() {
    let data = loadDataSync()  // UIã‚’ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹
}
```

---

### 10. ãƒªã‚½ãƒ¼ã‚¹ã‚’è§£æ”¾ã™ã‚‹

**è¦ä»¶**: ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ³ãƒ‰ãƒ«ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãªã©ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ç¢ºå®Ÿã«è§£æ”¾ã™ã‚‹ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// deferã§ãƒªã‚½ãƒ¼ã‚¹ã‚’ç¢ºå®Ÿã«è§£æ”¾
func processFile(at url: URL) throws {
    let fileHandle = try FileHandle(forReadingFrom: url)
    defer {
        try? fileHandle.close()
    }
    let data = fileHandle.readDataToEndOfFile()
}

// ãƒ¡ãƒ¢ãƒªé›†ç´„çš„ãªå‡¦ç†ã§autoreleasepool
func processManyItems(_ items: [QuestionItem]) {
    for item in items {
        autoreleasepool {
            let processed = processItem(item)
            saveToDatabase(processed)
        }
    }
}
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// ãƒªã‚½ãƒ¼ã‚¹ãƒªãƒ¼ã‚¯
func processFile(at url: URL) throws {
    let fileHandle = try FileHandle(forReadingFrom: url)
    // closeã‚’å‘¼ã³å¿˜ã‚Œã‚‹
}
```

---

### 11. ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã—ãªã„

**è¦ä»¶**: è¨­å®šå€¤ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã›ãšã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚„å®šæ•°å®šç¾©ã§ç®¡ç†ã™ã‚‹ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†
struct AppConfig {
    static let shared = AppConfig()
    let maxBatchSize: Int
    let defaultDifficulty: Int
    
    private init() {
        if let path = Bundle.main.path(forResource: "Config", ofType: "plist"),
           let config = NSDictionary(contentsOfFile: path) {
            self.maxBatchSize = config["MaxBatchSize"] as? Int ?? 20
            self.defaultDifficulty = config["DefaultDifficulty"] as? Int ?? 1
        } else {
            self.maxBatchSize = 20
            self.defaultDifficulty = 1
        }
    }
}

// å®šæ•°å®šç¾©
enum Constants {
    enum Quiz {
        static let maxQuestions = 20
        static let timeLimit: TimeInterval = 300
    }
}
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
func loadQuestions() -> [QuestionItem] {
    return Array(questions.prefix(20))  // ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼
}
```

---

### 12. é…ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‹ãªã„

**è¦ä»¶**: è¨ˆç®—é‡ã‚’è€ƒæ…®ã—ã€åŠ¹ç‡çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ä½¿ç”¨ã™ã‚‹ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
// O(n)ã§å‡¦ç†
func findDuplicates(_ items: [QuestionItem]) -> [QuestionItem] {
    var seen = Set<String>()
    var duplicates: [QuestionItem] = []
    for item in items {
        if seen.contains(item.id) {
            duplicates.append(item)
        } else {
            seen.insert(item.id)
        }
    }
    return duplicates
}

// è¾æ›¸ã§é«˜é€Ÿæ¤œç´¢ï¼ˆO(1)ï¼‰
let itemsDict = Dictionary(uniqueKeysWithValues: items.map { ($0.id, $0) })
let item = itemsDict[id]  // O(1)
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// O(nÂ²)ã®ä¸è¦ãªãƒ«ãƒ¼ãƒ—
func findDuplicates(_ items: [QuestionItem]) -> [QuestionItem] {
    for i in 0..<items.count {
        for j in (i+1)..<items.count {  // å±é™ºï¼
            // ...
        }
    }
}
```

---

### 13. ä¸€èˆ¬ä¹±æ•°ã‚’ä½¿ç”¨ã—ãªã„

**è¦ä»¶**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç”¨é€”ã§ã¯CryptoKitã®ä¹±æ•°ã‚’ä½¿ç”¨ã€‚ã‚¯ã‚¤ã‚ºã®ã‚·ãƒ£ãƒƒãƒ•ãƒ«ãªã©ã«ã¯é€šå¸¸ã®ä¹±æ•°ã§ååˆ†ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
import CryptoKit

// ã‚»ã‚­ãƒ¥ã‚¢ãªä¹±æ•°ç”Ÿæˆï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç”¨é€”ï¼‰
func generateSecureToken() -> String {
    let data = Data((0..<32).map { _ in UInt8.random(in: 0...255) })
    return data.base64EncodedString()
}

// é€šå¸¸ã®ä¹±æ•°ï¼ˆã‚¯ã‚¤ã‚ºã®ã‚·ãƒ£ãƒƒãƒ•ãƒ«ç­‰ï¼‰
func shuffleChoices(_ choices: [String]) -> [String] {
    return choices.shuffled()  // SystemRandomNumberGeneratorã‚’ä½¿ç”¨
}
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç”¨é€”ã§äºˆæ¸¬å¯èƒ½ãªä¹±æ•°ã‚’ä½¿ç”¨
func generateToken() -> String {
    let random = Int.random(in: 0..<1000000)  // äºˆæ¸¬å¯èƒ½
    return "\(random)"
}
```

---

### 14. ãƒ­ã‚°å‡ºåŠ›ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è½ã¨ã•ãªã„

**è¦ä»¶**: ãƒ­ã‚°å‡ºåŠ›ãŒé‡ã„å‡¦ç†ã«ãªã‚‰ãªã„ã‚ˆã†ã€ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã®ãƒã‚§ãƒƒã‚¯ã¨OSLogã®æ´»ç”¨ã‚’å¾¹åº•ã™ã‚‹ã€‚

#### âœ… æ­£ã—ã„å®Ÿè£…

```swift
import OSLog

// OSLogã‚’ä½¿ç”¨ï¼ˆåŠ¹ç‡çš„ï¼‰
let logger = Logger(subsystem: "com.example.SimpleWord", category: "Quiz")

func logSessionStart(sessionId: String) {
    logger.debug("ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹: \(sessionId, privacy: .public)")
}

// é‡ã„å‡¦ç†ã‚’å«ã‚€å ´åˆã¯ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
#if DEBUG
if logger.isLoggingEnabled(for: .debug) {
    let description = items.map { $0.description }.joined()
    logger.debug("å…¨ã‚¢ã‚¤ãƒ†ãƒ : \(description)")
}
#endif
```

#### âŒ é–“é•ã£ãŸå®Ÿè£…

```swift
// é‡ã„å‡¦ç†ã‚’ãƒ­ã‚°ã«å«ã‚ã‚‹
logger.debug("å…¨ã‚¢ã‚¤ãƒ†ãƒ : \(items.map { $0.description }.joined())")
// ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã«é–¢ä¿‚ãªãå‡¦ç†ã•ã‚Œã‚‹
```

---

## ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„å®Ÿè£…æ™‚ã«ä»¥ä¸‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ï¼š

### Swift 6.0ã¨ä¸¦è¡Œæ€§
- [ ] actorã‚’é©åˆ‡ã«ä½¿ç”¨ã—ã¦ã„ã‚‹
- [ ] async/awaitã‚’æ­£ã—ãä½¿ç”¨ã—ã¦ã„ã‚‹
- [ ] @MainActorã§UIæ›´æ–°ã‚’ä¿è­·ã—ã¦ã„ã‚‹
- [ ] åŒæœŸãƒ»éåŒæœŸã®æ··åœ¨ã§åœæ­¢ãŒç™ºç”Ÿã—ãªã„

### ã‚¨ãƒ©ãƒ¼å‡¦ç†
- [ ] try?/try!ã‚’å®‰æ˜“ã«ä½¿ç”¨ã—ã¦ã„ãªã„
- [ ] ã‚¨ãƒ©ãƒ¼ã‚’é©åˆ‡ã«ä¼æ’­ã—ã¦ã„ã‚‹
- [ ] ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼å‹ã‚’å®šç¾©ã—ã¦ã„ã‚‹

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- [ ] å¯å¤‰å¼•æ•°ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„
- [ ] ä»»æ„ã®ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œã®å¯èƒ½æ€§ãŒãªã„
- [ ] SQLæ–‡ã®ç›´æ¥å®Ÿè¡Œã‚’ã—ã¦ã„ãªã„
- [ ] å€‹äººæƒ…å ±ãƒ»å†…éƒ¨æƒ…å ±ã‚’ãƒ­ã‚°ã«å‡ºåŠ›ã—ã¦ã„ãªã„

### æ™‚åˆ»ã¨ãƒ­ã‚±ãƒ¼ãƒ«
- [ ] ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æ˜ç¤ºçš„ã«è¨­å®šã—ã¦ã„ã‚‹
- [ ] ãƒ­ã‚±ãƒ¼ãƒ«ã‚’æ˜ç¤ºçš„ã«è¨­å®šã—ã¦ã„ã‚‹

### æ•°å€¤æ¼”ç®—
- [ ] æµ®å‹•å°æ•°ç‚¹ã®ä¸¸ã‚æ–¹ã‚’æ˜ç¤ºã—ã¦ã„ã‚‹
- [ ] é‡‘é¡è¨ˆç®—ã§Decimalå‹ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹

### ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†
- [ ] deferã§ãƒªã‚½ãƒ¼ã‚¹ã‚’ç¢ºå®Ÿã«è§£æ”¾ã—ã¦ã„ã‚‹
- [ ] autoreleasepoolã‚’é©åˆ‡ã«ä½¿ç”¨ã—ã¦ã„ã‚‹

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- [ ] è¨ˆç®—é‡ãŒO(n)ã¾ãŸã¯O(n log n)ä»¥ä¸‹
- [ ] è¾æ›¸ã‚„Setã‚’é©åˆ‡ã«æ´»ç”¨ã—ã¦ã„ã‚‹

### ãã®ä»–
- [ ] ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’é¿ã‘ã¦ã„ã‚‹
- [ ] ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è­¦å‘Šã«å¯¾å¿œã—ã¦ã„ã‚‹
- [ ] ãƒ­ã‚°å‡ºåŠ›ãŒåŠ¹ç‡çš„

---

## çµ¶å¯¾ç¦æ­¢äº‹é …

ä»¥ä¸‹ã¯**çµ¶å¯¾ã«å®Ÿè£…ã—ã¦ã¯ã„ã‘ã¾ã›ã‚“**ï¼š

1. âŒ **try?/try!ã«ã‚ˆã‚‹é›‘ãªã‚¨ãƒ©ãƒ¼ç„¡è¦–**
2. âŒ **å¯å¤‰å¼•æ•°ã®ä½¿ç”¨**
3. âŒ **ä»»æ„ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ**ï¼ˆProcess.launch()ç­‰ï¼‰
4. âŒ **SQLæ–‡ã®ç›´æ¥å®Ÿè¡Œ**ï¼ˆCoreDataã®ã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•ãªAPIã®ã¿ä½¿ç”¨ï¼‰
5. âŒ **å€‹äººæƒ…å ±ãƒ»å†…éƒ¨æƒ…å ±ã®ãƒ­ã‚°å‡ºåŠ›**
6. âŒ **ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æœªæŒ‡å®šã®æ™‚åˆ»å‡¦ç†**
7. âŒ **O(nÂ²)ä»¥ä¸Šã®ä¸è¦ãªè¨ˆç®—é‡**
8. âŒ **ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸè¨­å®šå€¤**
9. âŒ **ãƒªã‚½ãƒ¼ã‚¹ãƒªãƒ¼ã‚¯**
10. âŒ **ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è­¦å‘Šã®æ”¾ç½®**

---

## ã¾ã¨ã‚

ã“ã‚Œã‚‰ã®14ã®å¿…é ˆè¦ä»¶ã‚’å®ˆã‚‹ã“ã¨ã§ï¼š

- âœ… **ã‚»ã‚­ãƒ¥ã‚¢ãªã‚³ãƒ¼ãƒ‰**: è„†å¼±æ€§ã‚’ä½œã‚Šè¾¼ã¾ãªã„
- âœ… **é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’æãªã‚ãªã„
- âœ… **ä¿å®ˆæ€§ã®é«˜ã„ã‚³ãƒ¼ãƒ‰**: ç†è§£ã—ã‚„ã™ãã€å¤‰æ›´ã—ã‚„ã™ã„
- âœ… **ä¿¡é ¼æ€§ã®é«˜ã„ã‚³ãƒ¼ãƒ‰**: ã‚¨ãƒ©ãƒ¼ãŒé©åˆ‡ã«å‡¦ç†ã•ã‚Œã‚‹

**ã™ã¹ã¦ã®å®Ÿè£…ã§ã“ã‚Œã‚‰ã®åŸå‰‡ã‚’éµå®ˆã—ã¦ãã ã•ã„ã€‚**

---

**å‚è€ƒè³‡æ–™**:
- [Swift 6.0 Documentation](https://docs.swift.org/swift-book/)
- [Apple Security Coding Guide](https://developer.apple.com/library/archive/documentation/Security/Conceptual/SecureCodingGuide/)
- [Swift Performance Tips](https://github.com/apple/swift/blob/main/docs/OptimizationTips.rst)
