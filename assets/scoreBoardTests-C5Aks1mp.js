import{l as S,a as B,b as s,g as p,c as y,d as h,e as C,f as R,h as A,i as v,j as w,k as F}from"./index-vASP4HX8.js";import"./chart-vendor-Dg0f91xX.js";import"./react-vendor-wGySg1uH.js";function T(e,t,n=Date.now()){if(!t)return{word:e,retentionScore:0,confidence:1,lastCalculated:n,forgettingCurveParams:{initialStrength:0,decayRate:.5,reinforcementCount:0},nextReviewTime:n,reviewInterval:0,reviewHistory:[]};const a=t.correctCount+t.incorrectCount,r=a>0?t.correctCount/a:0,o=(n-t.lastStudied)/(1e3*60*60*24),l=Math.min(100,r*100*.6+t.consecutiveCorrect*10),c=t.averageResponseTime||3e3,i=Math.min(1,c/5e3),d=.3+(a>0?t.incorrectCount/a:.5)*.4+i*.3,g=t.correctCount,m=1+Math.log1p(g),f=Math.max(0,Math.min(100,l*Math.exp(-o*d/m))),W=Math.min(1,a/10),{nextReviewTime:b,reviewInterval:x}=E(f,g,d,n);return{word:e,retentionScore:Math.round(f*10)/10,confidence:W,lastCalculated:n,forgettingCurveParams:{initialStrength:l,decayRate:d,reinforcementCount:g},nextReviewTime:b,reviewInterval:x,reviewHistory:O(t)}}function E(e,t,n,a){if(e<70)return{nextReviewTime:a,reviewInterval:0};const o=1+Math.log1p(t),l=Math.log(e/70)*o/n,i=Math.max(.04,Math.min(30,l))*24*60*60*1e3;return{nextReviewTime:a+i,reviewInterval:i}}function O(e){const t=[],n=e.correctCount+e.incorrectCount;if(n===0)return t;const a=e.correctCount/n;return t.push({timestamp:e.lastStudied,wasCorrect:e.consecutiveCorrect>0,responseTime:e.averageResponseTime||3e3,confidence:a>.8?"high":a>.5?"medium":"low",retentionScoreBefore:a*80,retentionScoreAfter:a*100}),t}function V(){const e=[],t=U();e.push(...t);const n=G();return e.push(...n),e.sort((a,r)=>{const o={critical:0,high:1,medium:2,low:3};return o[a.urgency]-o[r.urgency]})}function U(){const e=S(),t=[],n=Date.now();return Object.entries(e.wordProgress).forEach(([a,r])=>{if(r.correctCount+r.incorrectCount===0)return;const o=T(a,r,n),l=M(r,1),c=M(r,7),i=I(r,o.retentionScore);let u=null,d="",g="";o.retentionScore<50?(u="critical",d=`„Äå${a}„Äç„ÅÆÂÆöÁùÄÂ∫¶„Åå${Math.round(o.retentionScore)}%„Åæ„Åß‰Ωé‰∏ã„Åó„Å¶„ÅÑ„Åæ„ÅôÔºÅ`,g="‰ªä„Åô„ÅêÂæ©Áøí„Åó„Å¶„Åè„Å†„Åï„ÅÑ"):l<50?(u="high",d=`„Äå${a}„Äç„ÅØÊòéÊó•„Åæ„Åß„Å´Âæ©Áøí„Åó„Å™„ÅÑ„Å®ÂÆöÁùÄÂ∫¶„Åå50%‰ª•‰∏ã„Å´‰Ωé‰∏ã„Åó„Åæ„Åô`,g="Êú¨Êó•‰∏≠„Å´Âæ©Áøí„Åô„Çã„Åì„Å®„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô"):c<50?(u="medium",d=`„Äå${a}„Äç„ÅØ${i}Êó•Âæå„Å´Âæ©Áøí„ÅåÂøÖË¶Å„Å´„Å™„Çä„Åæ„Åô`,g=`${i}Êó•‰ª•ÂÜÖ„Å´Âæ©Áøí„Åó„Å¶„Åè„Å†„Åï„ÅÑ`):o.retentionScore<70&&c<70&&(u="low",d=`„Äå${a}„Äç„ÅÆÂÆöÁùÄÂ∫¶„ÅØ${Math.round(o.retentionScore)}%„Åß„Åô`,g="‰ªäÈÄ±‰∏≠„Å´Âæ©Áøí„Åô„Çã„Å®ÂäπÊûúÁöÑ„Åß„Åô"),u&&t.push({type:"word",word:a,currentRetention:Math.round(o.retentionScore),predictedRetention24h:Math.round(l),predictedRetention7d:Math.round(c),urgency:u,message:d,recommendedAction:g,daysUntilCritical:i})}),t}function G(){const e=B(),t=[],n=S();return e.filter(a=>a.needsReview).slice(0,5).forEach(a=>{let r=0,o=0,l=100;if(a.words.forEach(g=>{const m=n.wordProgress[g];if(m&&m.correctCount+m.incorrectCount>0){const f=T(g,m);r+=f.retentionScore,l=Math.min(l,f.retentionScore),o++}}),o===0)return;const c=r/o;let i;l<50||c<55?i="critical":c<65?i="high":c<75?i="medium":i="low";const u=`Ê∑∑Âêå„Åó„ÇÑ„Åô„ÅÑÂçòË™û„Ç∞„É´„Éº„Éó„Äå${a.words.join(", ")}„Äç„ÅÆÂÆöÁùÄÂ∫¶„Åå‰Ωé‰∏ã„Åó„Å¶„ÅÑ„Åæ„Åô`;t.push({type:"group",group:a,currentRetention:Math.round(c),predictedRetention24h:Math.round(c*.95),predictedRetention7d:Math.round(c*.85),urgency:i,message:u,recommendedAction:"Âå∫Âà•„ÇíÊÑèË≠ò„Åó„Å™„Åå„ÇâÈõÜ‰∏≠ÁöÑ„Å´Âæ©Áøí„Åó„Å¶„Åè„Å†„Åï„ÅÑ",daysUntilCritical:Math.max(1,Math.floor((c-50)/5))})}),t}function M(e,t){const n=e.correctCount+e.incorrectCount;if(n===0)return 0;const r=e.correctCount/n*100,l=.3+e.incorrectCount/n*.4,c=1+Math.log1p(e.correctCount),i=r*Math.exp(-t*l/c);return Math.max(0,Math.min(100,i))}function I(e,t){if(t<50)return 0;const n=e.correctCount+e.incorrectCount;if(n===0)return 999;const r=.3+e.incorrectCount/n*.4,o=1+Math.log1p(e.correctCount),l=Math.log(t/50)*o/r;return Math.max(1,Math.ceil(l))}function $(e){return V().filter(t=>t.urgency===e)}function P(){const e=$("critical"),t=$("high"),n=new Set;return[...e,...t].forEach(a=>{a.type==="word"&&a.word?n.add(a.word):a.type==="group"&&a.group&&a.group.words.forEach(r=>n.add(r))}),Array.from(n)}function D(){const e=V();return{total:e.length,critical:e.filter(t=>t.urgency==="critical").length,high:e.filter(t=>t.urgency==="high").length,medium:e.filter(t=>t.urgency==="medium").length,low:e.filter(t=>t.urgency==="low").length,todayReviewCount:P().length}}function k(){s.log(`=== „Çπ„Ç≥„Ç¢„Éú„Éº„ÉâË°®Á§∫ÂÜÖÂÆπ„ÉÜ„Çπ„ÉàÈñãÂßã ===
`);const e=[];e.push(j()),e.push(q()),e.push(H()),e.push(L()),e.push(Q()),e.push(N()),e.push(z()),e.push(X()),e.push(_()),e.push(J()),s.log(`
=== „ÉÜ„Çπ„ÉàÁµêÊûú„Çµ„Éû„É™„Éº ===`);const t=e.filter(r=>r.passed).length,n=e.filter(r=>!r.passed).length;s.log(`‚úÖ ÊàêÂäü: ${t}‰ª∂`),s.log(`‚ùå Â§±Êïó: ${n}‰ª∂`),s.log(`üìä ÂêàË®à: ${e.length}‰ª∂
`);const a=e.filter(r=>!r.passed);a.length>0&&(s.log("=== Â§±Êïó„Åó„Åü„ÉÜ„Çπ„Éà ==="),a.forEach(r=>{s.error(`‚ùå ${r.name}`),s.error(`   ${r.message}`),r.data&&s.error("   „Éá„Éº„Çø:",r.data)})),s.log(`
=== ÂÖ®„Éá„Éº„Çø„ÉÄ„É≥„Éó ===`),e.forEach(r=>{r.data&&s.log(`${r.name}:`,r.data)})}function j(){try{const e=p("translation"),t=p("spelling"),n=p("reading");return e.todayAccuracy>=0&&e.todayAccuracy<=100&&e.todayTotalAnswered>=0&&t.todayAccuracy>=0&&t.todayAccuracy<=100&&t.todayTotalAnswered>=0&&n.todayAccuracy>=0&&n.todayAccuracy<=100&&n.todayTotalAnswered>=0?{name:"Êú¨Êó•Áµ±Ë®à„ÅÆÂèñÂæó",passed:!0,message:"‚úÖ Ê≠£Â∏∏„Å´ÂèñÂæó„Åß„Åç„Åæ„Åó„Åü",data:{translationStats:e,spellingStats:t,readingStats:n}}:{name:"Êú¨Êó•Áµ±Ë®à„ÅÆÂèñÂæó",passed:!1,message:"Ê≠£Á≠îÁéá„Åå0-100%„ÅÆÁØÑÂõ≤Â§ñ„ÄÅ„Åæ„Åü„ÅØÂõûÁ≠îÊï∞„ÅåË≤†„ÅÆÂÄ§",data:{translationStats:e,spellingStats:t,readingStats:n}}}catch(e){return{name:"Êú¨Êó•Áµ±Ë®à„ÅÆÂèñÂæó",passed:!1,message:`„Ç®„É©„Éº: ${e}`,data:null}}}function q(){try{const e=y("translation"),t=y("spelling"),n=y("reading");return e>=0&&t>=0&&n>=0?{name:"Á¥ØË®àÂõûÁ≠îÊï∞„ÅÆÂèñÂæó",passed:!0,message:"‚úÖ Ê≠£Â∏∏„Å´ÂèñÂæó„Åß„Åç„Åæ„Åó„Åü",data:{translationCount:e,spellingCount:t,readingCount:n}}:{name:"Á¥ØË®àÂõûÁ≠îÊï∞„ÅÆÂèñÂæó",passed:!1,message:"ÂõûÁ≠îÊï∞„ÅåË≤†„ÅÆÂÄ§",data:{translationCount:e,spellingCount:t,readingCount:n}}}catch(e){return{name:"Á¥ØË®àÂõûÁ≠îÊï∞„ÅÆÂèñÂæó",passed:!1,message:`„Ç®„É©„Éº: ${e}`,data:null}}}function H(){try{const e=h(),t=w();return e>=0&&t>=0&&e<=t?{name:"ÂÆöÁùÄÊï∞„ÅÆÂèñÂæó",passed:!0,message:"‚úÖ Ê≠£Â∏∏„Å´ÂèñÂæó„Åß„Åç„Åæ„Åó„Åü",data:{masteredCount:e,uniqueQuestionedCount:t}}:{name:"ÂÆöÁùÄÊï∞„ÅÆÂèñÂæó",passed:!1,message:"ÂÆöÁùÄÊï∞„ÅåÂá∫È°åÊï∞„ÇíË∂Ö„Åà„Å¶„ÅÑ„Çã„ÄÅ„Åæ„Åü„ÅØË≤†„ÅÆÂÄ§",data:{masteredCount:e,uniqueQuestionedCount:t}}}catch(e){return{name:"ÂÆöÁùÄÊï∞„ÅÆÂèñÂæó",passed:!1,message:`„Ç®„É©„Éº: ${e}`,data:null}}}function L(){try{const{retentionRate:e,appearedCount:t}=C(),n=h();if(!(e>=0&&e<=100&&t>=0&&n<=t))return{name:"ÂÆöÁùÄÁéá„ÅÆË®àÁÆó",passed:!1,message:"ÂÆöÁùÄÁéá„Åå0-100%„ÅÆÁØÑÂõ≤Â§ñ„ÄÅ„Åæ„Åü„ÅØÂÆöÁùÄÊï∞„ÅåÂá∫ÁèæÊï∞„ÇíË∂Ö„Åà„Å¶„ÅÑ„Çã",data:{retentionRate:e,appearedCount:t,masteredCount:n}};const r=t>0?Math.round(n/t*100):0;return Math.abs(e-r)>1?{name:"ÂÆöÁùÄÁéá„ÅÆË®àÁÆó",passed:!1,message:`ÂÆöÁùÄÁéá„ÅÆË®àÁÆó„Åå‰∏çÊ≠£Á¢∫: ÊúüÂæÖÂÄ§=${r}%, ÂÆüÈöõ=${e}%`,data:{retentionRate:e,expectedRate:r,appearedCount:t,masteredCount:n}}:{name:"ÂÆöÁùÄÁéá„ÅÆË®àÁÆó",passed:!0,message:"‚úÖ Ê≠£Â∏∏„Å´Ë®àÁÆó„Åï„Çå„Åæ„Åó„Åü",data:{retentionRate:e,appearedCount:t,masteredCount:n}}}catch(e){return{name:"ÂÆöÁùÄÁéá„ÅÆË®àÁÆó",passed:!1,message:`„Ç®„É©„Éº: ${e}`,data:null}}}function Q(){try{const e=R(),t=e.masteredPercentage+e.learningPercentage+e.strugglingPercentage,n=e.masteredCount+e.learningCount+e.strugglingCount;return e.appearedWords>=0&&e.masteredCount>=0&&e.learningCount>=0&&e.strugglingCount>=0&&e.basicRetentionRate>=0&&e.basicRetentionRate<=100&&e.weightedRetentionRate>=0&&e.weightedRetentionRate<=100&&n===e.appearedWords&&Math.abs(t-100)<=1?{name:"Ë©≥Á¥∞„Å™ÂÆöÁùÄÁéáÁµ±Ë®à",passed:!0,message:"‚úÖ Ê≠£Â∏∏„Å´ÂèñÂæó„Åß„Åç„Åæ„Åó„Åü",data:e}:{name:"Ë©≥Á¥∞„Å™ÂÆöÁùÄÁéáÁµ±Ë®à",passed:!1,message:`„Éá„Éº„Çø„ÅÆÊï¥ÂêàÊÄß„Ç®„É©„Éº: „Éë„Éº„Çª„É≥„ÉÜ„Éº„Ç∏ÂêàË®à=${t}%, „Ç´„Ç¶„É≥„ÉàÂêàË®à=${n}, Âá∫ÁèæÂçòË™û=${e.appearedWords}`,data:e}}catch(e){return{name:"Ë©≥Á¥∞„Å™ÂÆöÁùÄÁéáÁµ±Ë®à",passed:!1,message:`„Ç®„É©„Éº: ${e}`,data:null}}}function N(){try{const e=A();return e.nearMasteryCount>=0&&e.longTermMemoryCount>=0&&e.superMemoryCount>=0?{name:"ÂÆöÁùÄ‰∫àÊ∏¨Áµ±Ë®à",passed:!0,message:"‚úÖ Ê≠£Â∏∏„Å´ÂèñÂæó„Åß„Åç„Åæ„Åó„Åü",data:e}:{name:"ÂÆöÁùÄ‰∫àÊ∏¨Áµ±Ë®à",passed:!1,message:"„Ç´„Ç¶„É≥„ÉàÂÄ§„ÅåË≤†„ÅÆÂÄ§",data:e}}catch(e){return{name:"ÂÆöÁùÄ‰∫àÊ∏¨Áµ±Ë®à",passed:!1,message:`„Ç®„É©„Éº: ${e}`,data:null}}}function z(){try{const e=v(),t=F(!1);return e.overallProgress>=0&&e.overallProgress<=100&&e.estimatedDaysToAchieve>=0&&e.goal.name.length>0&&t.length>0?{name:"ÁõÆÊ®ôÈÅîÊàêÊÉÖÂ†±",passed:!0,message:"‚úÖ Ê≠£Â∏∏„Å´ÂèñÂæó„Åß„Åç„Åæ„Åó„Åü",data:{progress:e,message:t}}:{name:"ÁõÆÊ®ôÈÅîÊàêÊÉÖÂ†±",passed:!1,message:"ÈÄ≤ÊçóÁéá„Åå0-100%„ÅÆÁØÑÂõ≤Â§ñ„ÄÅ„Åæ„Åü„ÅØÊé®ÂÆöÊó•Êï∞„ÅåË≤†„ÅÆÂÄ§",data:{progress:e,message:t}}}catch(e){return{name:"ÁõÆÊ®ôÈÅîÊàêÊÉÖÂ†±",passed:!1,message:`„Ç®„É©„Éº: ${e}`,data:null}}}function X(){try{const e=D();return e.todayReviewCount>=0&&e.critical>=0&&e.total>=0?{name:"ÂøòÂç¥„Ç¢„É©„Éº„Éà",passed:!0,message:"‚úÖ Ê≠£Â∏∏„Å´ÂèñÂæó„Åß„Åç„Åæ„Åó„Åü",data:e}:{name:"ÂøòÂç¥„Ç¢„É©„Éº„Éà",passed:!1,message:"„Ç´„Ç¶„É≥„ÉàÂÄ§„ÅåË≤†„ÅÆÂÄ§",data:e}}catch(e){return{name:"ÂøòÂç¥„Ç¢„É©„Éº„Éà",passed:!1,message:`„Ç®„É©„Éº: ${e}`,data:null}}}function _(){try{const e=R(),{retentionRate:t,appearedCount:n}=C(),a=h(),r=n>0?Math.round(a/n*100):0,o=Math.abs(e.basicRetentionRate-r)<=1,l=Math.abs(t-r)<=1;return!o||!l?{name:"„Éë„Éº„Çª„É≥„ÉÜ„Éº„Ç∏„ÅÆ‰∏ÄË≤´ÊÄß",passed:!1,message:`ÂÆöÁùÄÁéá„ÅÆË®àÁÆó„Å´ÁüõÁõæ: Âü∫Êú¨=${e.basicRetentionRate}%, „É°„Ç§„É≥=${t}%, Ë®àÁÆóÂÄ§=${r}%`,data:{detailedStats:e,retentionRate:t,calculatedRate:r,masteredCount:a,appearedCount:n}}:{name:"„Éë„Éº„Çª„É≥„ÉÜ„Éº„Ç∏„ÅÆ‰∏ÄË≤´ÊÄß",passed:!0,message:"‚úÖ ‰∏ÄË≤´ÊÄß„ÅåÁ¢∫Ë™ç„Åï„Çå„Åæ„Åó„Åü",data:{basicRate:e.basicRetentionRate,mainRate:t,calculatedRate:r}}}catch(e){return{name:"„Éë„Éº„Çª„É≥„ÉÜ„Éº„Ç∏„ÅÆ‰∏ÄË≤´ÊÄß",passed:!1,message:`„Ç®„É©„Éº: ${e}`,data:null}}}function J(){try{const e=R(),{appearedCount:t}=C(),n=w(),a=h(),r=4700;return t<=r&&n<=r&&a<=r&&e.appearedWords<=r?a<=t&&t<=n?{name:"„Éá„Éº„ÇøÁØÑÂõ≤„ÅÆÂ¶•ÂΩìÊÄß",passed:!0,message:"‚úÖ „Éá„Éº„ÇøÁØÑÂõ≤„ÅåÂ¶•ÂΩì„Åß„Åô",data:{masteredCount:a,appearedCount:t,uniqueQuestionedCount:n}}:{name:"„Éá„Éº„ÇøÁØÑÂõ≤„ÅÆÂ¶•ÂΩìÊÄß",passed:!1,message:"ÂÆöÁùÄÊï∞„ÄÅÂá∫ÁèæÊï∞„ÄÅÂá∫È°åÊï∞„ÅÆÈñ¢‰øÇ„Åå‰∏çÊ≠£",data:{masteredCount:a,appearedCount:t,uniqueQuestionedCount:n}}:{name:"„Éá„Éº„ÇøÁØÑÂõ≤„ÅÆÂ¶•ÂΩìÊÄß",passed:!1,message:`ÂçòË™ûÊï∞„Åå‰∏äÈôê(${r})„ÇíË∂Ö„Åà„Å¶„ÅÑ„Çã`,data:{appearedCount:t,uniqueQuestionedCount:n,masteredCount:a,detailedAppearedWords:e.appearedWords}}}catch(e){return{name:"„Éá„Éº„ÇøÁØÑÂõ≤„ÅÆÂ¶•ÂΩìÊÄß",passed:!1,message:`„Ç®„É©„Éº: ${e}`,data:null}}}function K(e="translation"){s.log(`
=== „Çπ„Ç≥„Ç¢„Éú„Éº„ÉâË°®Á§∫ÂÜÖÂÆπÁ¢∫Ë™ç (${e}„É¢„Éº„Éâ) ===
`);const{todayAccuracy:t,todayTotalAnswered:n}=p(e),a=y(e),r=h(),{retentionRate:o,appearedCount:l}=C(),c=R(),i=A(),u=v(),d=D();s.log("üìä Âü∫Êú¨Áµ±Ë®à„Çø„Éñ:"),s.log(`  Êú¨Êó•Ê≠£Á≠îÁéá: ${t}% (${n}Âïè)`),s.log(`  ÂÆöÁùÄÁéá: ${o}% (${r}/${l})`),s.log(`  Á¥ØË®àÂõûÁ≠î: ${a}`),s.log(""),s.log("üìä Â≠¶ÁøíÁä∂Ê≥Å„ÅÆÂÜÖË®≥:"),s.log(`  üü¢ ÂÆåÂÖ®ÂÆöÁùÄ: ${c.masteredCount}Ë™û (${c.masteredPercentage}%)`),s.log(`  üü° Â≠¶Áøí‰∏≠: ${c.learningCount}Ë™û (${c.learningPercentage}%)`),s.log(`  üî¥ Ë¶ÅÂæ©Áøí: ${c.strugglingCount}Ë™û (${c.strugglingPercentage}%)`),s.log(`  üí° Âä†ÈáçÂÆöÁùÄÁéá: ${c.weightedRetentionRate}%`),s.log(""),s.log("üéØ ÁõÆÊ®ô„ÉªÈÄ≤Êçó„Çø„Éñ:"),i.nearMasteryCount>0&&s.log(`  üéØ ÂÆöÁùÄÈñìËøë: ${i.nearMasteryCount}ÂÄã`),i.longTermMemoryCount>0&&s.log(`  üß† Èï∑ÊúüË®òÊÜ∂: ${i.longTermMemoryCount}ÂÄã`),i.superMemoryCount>0&&s.log(`  ‚ú® ÂÆåÂÖ®ÂÆöÁùÄ: ${i.superMemoryCount}ÂÄã`),s.log(`  ${u.goal.icon} ÁõÆÊ®ôÈÄ≤Êçó: ${u.overallProgress}% (${u.goal.name})`),d.todayReviewCount>=1&&s.log(`  ‚è∞ Ë¶ÅÂæ©Áøí: ${d.todayReviewCount}ÂÄã`),s.log("")}typeof window<"u"&&(window.runScoreBoardTests=k,window.checkCurrentScoreBoardDisplay=K,s.log("‚úÖ „ÉÜ„Çπ„ÉàÈñ¢Êï∞„ÇíÂÖ¨Èñã„Åó„Åæ„Åó„Åü:"),s.log("  - window.runScoreBoardTests()"),s.log('  - window.checkCurrentScoreBoardDisplay("translation")'));export{K as checkCurrentScoreBoardDisplay,k as runScoreBoardTests};
//# sourceMappingURL=scoreBoardTests-C5Aks1mp.js.map
