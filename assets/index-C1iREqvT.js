const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/scoreBoardTests-BE5P4cth.js","assets/chart-vendor-Dg0f91xX.js","assets/react-vendor-wGySg1uH.js"])))=>i.map(i=>d[i]);
import{j as e}from"./chart-vendor-Dg0f91xX.js";import{a as Sr,r as m,R as kr}from"./react-vendor-wGySg1uH.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Bt={},js=Sr;Bt.createRoot=js.createRoot,Bt.hydrateRoot=js.hydrateRoot;const Cr="modulepreload",Dr=function(s){return"/"+s},Ns={},Ve=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(r.map(c=>{if(c=Dr(c),c in Ns)return;Ns[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":Cr,d||(g.as="script"),g.crossOrigin="",g.href=c,o&&g.setAttribute("nonce",o),document.head.appendChild(g),d)return new Promise((x,S)=>{g.addEventListener("load",x),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return n.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},Ls=["è¨€èªåŸºæœ¬","å­¦æ ¡ãƒ»å­¦ç¿’","æ—¥å¸¸ç”Ÿæ´»","äººãƒ»ç¤¾ä¼š","è‡ªç„¶ãƒ»ç’°å¢ƒ","é£Ÿãƒ»å¥åº·","é‹å‹•ãƒ»å¨¯æ¥½","å ´æ‰€ãƒ»ç§»å‹•","æ™‚é–“ãƒ»æ•°é‡","ç§‘å­¦ãƒ»æŠ€è¡“"];function Mr(s){return Ls.includes(s)}const ft=typeof window<"u"&&new URLSearchParams(window.location.search).get("debug")==="true",p={log:(...s)=>{ft&&console.log(...s)},warn:(...s)=>{ft&&console.warn(...s)},error:(...s)=>{console.error(...s)},debug:(...s)=>{ft&&console.debug(...s)},info:(...s)=>{ft&&console.info(...s)}},Os="QuizAppDB",$r=1,_e={PROGRESS:"progress",SESSION_HISTORY:"sessionHistory",DAILY_STATS:"dailyStats",SETTINGS:"settings"};function Pt(){try{return"indexedDB"in window&&indexedDB!==null}catch{return!1}}let st=null;function Qt(){return new Promise((s,t)=>{if(st){s(st);return}if(!Pt()){t(new Error("IndexedDB is not supported"));return}const r=indexedDB.open(Os,$r);r.onerror=()=>{p.error("IndexedDB open error:",r.error),t(r.error)},r.onsuccess=()=>{st=r.result,p.log("âœ… IndexedDB initialized successfully"),s(st)},r.onupgradeneeded=a=>{const n=a.target.result;if(n.objectStoreNames.contains(_e.PROGRESS)||n.createObjectStore(_e.PROGRESS),!n.objectStoreNames.contains(_e.SESSION_HISTORY)){const i=n.createObjectStore(_e.SESSION_HISTORY,{keyPath:"id",autoIncrement:!0});i.createIndex("mode","mode",{unique:!1}),i.createIndex("timestamp","timestamp",{unique:!1}),i.createIndex("modeTimestamp",["mode","timestamp"],{unique:!1})}n.objectStoreNames.contains(_e.DAILY_STATS)||n.createObjectStore(_e.DAILY_STATS,{keyPath:"date"}).createIndex("date","date",{unique:!0}),n.objectStoreNames.contains(_e.SETTINGS)||n.createObjectStore(_e.SETTINGS),p.log("ğŸ“¦ IndexedDB stores created")}})}async function Gt(s,t){try{const r=await Qt();return new Promise((a,n)=>{const o=r.transaction(s,"readonly").objectStore(s).get(t);o.onsuccess=()=>a(o.result||null),o.onerror=()=>n(o.error)})}catch(r){return p.error("getFromDB error:",r),null}}async function Ge(s,t,r){try{const a=await Qt();return new Promise((n,i)=>{const o=a.transaction(s,"readwrite").objectStore(s),c=r!==void 0?o.put(t,r):o.put(t);c.onsuccess=()=>n(!0),c.onerror=()=>i(c.error)})}catch(a){return p.error("putToDB error:",a),!1}}async function Pr(){return new Promise(s=>{st&&(st.close(),st=null);const t=indexedDB.deleteDatabase(Os);t.onsuccess=()=>{p.log("ğŸ—‘ï¸ Database deleted"),s(!0)},t.onerror=()=>{p.error("Database delete error"),s(!1)}})}const zs="indexeddb-migration-completed",Fs="1.1";function Ut(){try{return localStorage.getItem(zs)===Fs}catch{return!1}}function zt(){try{localStorage.setItem(zs,Fs),p.log("âœ… Migration flag set")}catch(s){p.error("Failed to set migration flag:",s)}}function At(s){try{const t=localStorage.getItem(s);return!t||s.includes("lastLogin")||s.includes("Date")||s.includes("daily-plan")||s.includes("score-board")?null:JSON.parse(t)}catch{return p.warn(`${s} is not valid JSON (skipping)`),null}}function Ar(s){try{return localStorage.getItem(s)}catch(t){return p.error(`Failed to get ${s} from localStorage:`,t),null}}async function Ir(){try{const s=At("progress-data");if(s)return s.wordProgress||(s.wordProgress={}),s.results||(s.results=[]),s.statistics||(s.statistics={totalQuizzes:0,totalQuestions:0,totalCorrect:0,averageScore:0,bestScore:0,streakDays:0,lastStudyDate:0,studyDates:[]}),s.questionSetStats||(s.questionSetStats={}),await Ge(_e.PROGRESS,s,"main"),p.log("ğŸ“¦ Progress data migrated:",Object.keys(s.wordProgress||{}).length,"words"),!0;p.log("â„¹ï¸ No progress data to migrate, creating initial data");const t={wordProgress:{},results:[],statistics:{totalQuizzes:0,totalQuestions:0,totalCorrect:0,averageScore:0,bestScore:0,streakDays:0,lastStudyDate:0,studyDates:[]},questionSetStats:{}};return await Ge(_e.PROGRESS,t,"main"),!0}catch(s){return p.error("Progress data migration error:",s),!1}}async function _r(){try{const s=["translation","spelling"];let t=0;for(const r of s){const a=`session-history-${r}`,n=At(a);if(n&&Array.isArray(n))for(const i of n)await Ge(_e.SESSION_HISTORY,{mode:r,status:i.status,word:i.word,timestamp:i.timestamp}),t++}return t>0&&p.log("ğŸ“œ Session history migrated:",t,"items"),!0}catch(s){return p.error("Session history migration error:",s),!1}}async function Tr(){try{const s=new Date,t=new Date(s.getTime()-90*24*60*60*1e3);let r=0,a=0;for(let n=0;n<localStorage.length;n++){const i=localStorage.key(n);if(i&&i.startsWith("studyStats-")){const l=i.replace("studyStats-","");if(new Date(l)>=t){const c=At(i);c&&(await Ge(_e.DAILY_STATS,{date:l,...c}),r++)}else localStorage.removeItem(i),a++}}return(r>0||a>0)&&p.log(`ğŸ“Š Daily stats: migrated ${r}, cleaned ${a}`),!0}catch(s){return p.error("Daily stats migration error:",s),!1}}async function Er(){try{const s=["user-goal-level","loginStreak","radar-improvement-progress","skip-exclude-groups"],t=["lastLoginDate","lastLoginData"];let r=0;for(const n of s)try{if(n.includes("lastLogin")){p.warn(`Skipping ${n} from JSON migration`);continue}const i=At(n);i!==null&&(await Ge(_e.SETTINGS,i,n),r++)}catch(i){p.warn(`Failed to migrate ${n}:`,i)}for(const n of t)try{const i=Ar(n);i!==null&&(await Ge(_e.SETTINGS,i,n),r++)}catch(i){p.warn(`Failed to migrate ${n}:`,i)}const a=["translation","spelling","reading"];for(const n of a){const i=`daily-plan-target-${n}`,l=`score-board-goal-${n}`;try{const o=localStorage.getItem(i);o&&(await Ge(_e.SETTINGS,o,i),r++)}catch(o){p.warn(`Failed to migrate ${i}:`,o)}try{const o=localStorage.getItem(l);o&&(await Ge(_e.SETTINGS,o,l),r++)}catch(o){p.warn(`Failed to migrate ${l}:`,o)}}return r>0&&p.log("âš™ï¸ Settings migrated:",r,"items"),!0}catch(s){return p.error("Settings migration error:",s),!1}}async function Rr(){try{const s=await Gt(_e.PROGRESS,"main");return s?!s.wordProgress||typeof s.wordProgress!="object"?(p.warn("âš ï¸ Progress data verification failed - invalid wordProgress"),!1):(p.log("âœ… Migration verification passed"),!0):(p.warn("âš ï¸ Progress data verification failed - no data found"),!1)}catch(s){return p.error("Migration verification error:",s),!1}}async function Wr(){if(Ut())return p.log("â„¹ï¸ Migration already completed"),!0;if(!Pt())return p.warn("âš ï¸ IndexedDB not supported, using localStorage"),!1;p.log("ğŸš€ Starting data migration to IndexedDB...");try{await Qt();const s=await Promise.all([Ir(),_r(),Tr(),Er()]),t=["Progress","SessionHistory","DailyStats","Settings"];return s.forEach((a,n)=>{a||p.warn(`âš ï¸ ${t[n]} migration incomplete (may be empty)`)}),s[0]||s.some(a=>a)?await Rr()?(zt(),p.log("ğŸ‰ Migration completed successfully!"),!0):(p.warn("âš ï¸ Migration verification failed, but marking as complete"),zt(),!0):(p.warn("âš ï¸ All migrations returned false, marking as complete anyway"),zt(),!0)}catch(s){return p.error("âŒ Migration failed:",s),!1}}let ct=!1;function Lr(){ct=Pt()&&Ut(),p.log(`ğŸ“¦ Storage strategy: ${ct?"IndexedDB":"localStorage"}`)}async function Or(s){try{return ct?await Ge(_e.PROGRESS,s,"main"):(localStorage.setItem("progress-data",JSON.stringify(s)),!0)}catch(t){p.error("saveProgressData error:",t);try{return localStorage.setItem("progress-data",JSON.stringify(s)),!0}catch(r){return p.error("localStorage fallback failed:",r),!1}}}async function zr(){try{if(ct){const s=await Gt(_e.PROGRESS,"main");if(s)return s;const t=localStorage.getItem("progress-data");return t?JSON.parse(t):null}else{const s=localStorage.getItem("progress-data");return s?JSON.parse(s):null}}catch(s){return p.error("loadProgressData error:",s),null}}async function It(s,t){try{return ct?await Ge(_e.SETTINGS,t,s):(localStorage.setItem(s,typeof t=="string"?t:JSON.stringify(t)),!0)}catch(r){p.error(`saveSetting(${s}) error:`,r);try{return localStorage.setItem(s,typeof t=="string"?t:JSON.stringify(t)),!0}catch{return!1}}}async function _t(s){try{if(ct){const t=await Gt(_e.SETTINGS,s);return t!==null?t:localStorage.getItem(s)||null}else return localStorage.getItem(s)||null}catch(t){return p.error(`loadSetting(${s}) error:`,t),null}}const Ss={maxReviewCount:10};function Ht(){try{const s=localStorage.getItem("study-settings");if(s)return{maxReviewCount:JSON.parse(s).maxReviewCount??Ss.maxReviewCount}}catch(s){p.error("å­¦ç¿’è¨­å®šã®å–å¾—ã‚¨ãƒ©ãƒ¼:",s)}return{...Ss}}const Fr="session-history",qr=50;async function dt(s,t){const r=Pt()&&Ut();try{if(r)await Ge(_e.SESSION_HISTORY,{mode:t,status:s.status,word:s.word,timestamp:s.timestamp});else{const a=`${Fr}-${t}`,n=localStorage.getItem(a),i=n?JSON.parse(n):[];i.push(s),i.length>qr&&i.shift(),localStorage.setItem(a,JSON.stringify(i))}}catch(a){p.error("ã‚»ãƒƒã‚·ãƒ§ãƒ³å±¥æ­´ã®ä¿å­˜ã‚¨ãƒ©ãƒ¼:",a)}}function jt(){const s=ye(),t=new Date().toLocaleDateString("ja-JP"),r=new Set;return s.results.forEach(a=>{new Date(a.date).toLocaleDateString("ja-JP")===t&&a.incorrectWords.forEach(n=>r.add(n))}),Array.from(r)}function Vt(s){const t=ye(),r=new Date().setHours(0,0,0,0),a=r+24*60*60*1e3;let n=t.results.filter(c=>c.date>=r&&c.date<a);s&&(n=n.filter(c=>c.mode===s));const i=n.reduce((c,d)=>c+d.score,0),l=n.reduce((c,d)=>c+d.total,0),o=l>0?Math.round(i/l*100):0;return{todayCorrectCount:i,todayTotalAnswered:l,todayAccuracy:o}}function Jt(){const s=ye(),t=new Date,r=t.getDay(),a=r===0?-6:1-r,n=new Date(t);n.setDate(t.getDate()+a),n.setHours(0,0,0,0);const i=new Date(n);i.setDate(n.getDate()+7);const l=new Date(n);l.setDate(n.getDate()-7);const o=new Date(n),c=s.results.filter(D=>D.date>=n.getTime()&&D.date<i.getTime()),d=s.results.filter(D=>D.date>=l.getTime()&&D.date<o.getTime()),u=new Set;c.forEach(D=>{const A=new Date(D.date).toISOString().split("T")[0];u.add(A)});const g=c.reduce((D,A)=>D+A.total,0),x=c.reduce((D,A)=>D+A.score,0),S=g>0?x/g*100:0,N=d.reduce((D,A)=>D+A.total,0),w=d.reduce((D,A)=>D+A.score,0),b=N>0?w/N*100:0;let k=0;return Object.values(s.wordProgress).forEach(D=>{D.masteryLevel==="mastered"&&D.lastStudied>=n.getTime()&&k++}),{studyDays:u.size,totalDays:7,totalAnswered:g,accuracy:S,newMastered:k,previousWeekAccuracy:b}}function Yt(){const s=ye(),t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1);r.setHours(0,0,0,0);const a=new Date(t.getFullYear(),t.getMonth()+1,0);a.setHours(23,59,59,999);const n=s.results.filter(g=>g.date>=r.getTime()&&g.date<=a.getTime()),i=new Set;n.forEach(g=>{const x=new Date(g.date).toISOString().split("T")[0];i.add(x)});const l=n.reduce((g,x)=>g+x.total,0),o=n.reduce((g,x)=>g+x.score,0),c=l>0?o/l*100:0;let d=0;Object.values(s.wordProgress).forEach(g=>{g.masteryLevel==="mastered"&&g.lastStudied>=r.getTime()&&d++});const u=a.getDate();return{studyDays:i.size,totalDays:u,totalAnswered:l,accuracy:c,newMastered:d}}function Nt(){const s=ye(),t=Object.values(s.wordProgress),r=t.filter(c=>c.correctCount+c.incorrectCount>0);let a=0,n=0,i=0;r.forEach(c=>{const d=c.correctCount+c.incorrectCount,u=d>0?c.correctCount/d*100:0;d===1&&c.correctCount===1||c.consecutiveCorrect>=3||c.consecutiveCorrect>=2&&u>=80?a++:u>=50?n++:i++});const l=r.length,o=a*1+n*.5;return{totalWords:t.length,appearedWords:l,masteredCount:a,learningCount:n,strugglingCount:i,basicRetentionRate:l>0?Math.round(a/l*100):0,weightedRetentionRate:l>0?Math.round(o/l*100):0,masteredPercentage:l>0?Math.round(a/l*100):0,learningPercentage:l>0?Math.round(n/l*100):0,strugglingPercentage:l>0?Math.round(i/l*100):0,masteredWords:a,learningWords:n,newWords:t.length-l,retentionRate:l>0?Math.round(a/l*100):0,averageAttempts:0,categoryBreakdown:{},difficultyBreakdown:{}}}function qs(){const s=ye();let t=0,r=0,a=0,n=0,i=0;return Object.values(s.wordProgress).forEach(l=>{const o=l.correctCount+l.incorrectCount;if(o===0)return;if(Et(l,!0).isMastered){l.consecutiveCorrect>=7?i++:l.consecutiveCorrect>=5&&n++;return}r++;const{consecutiveCorrect:d}=l,u=l.correctCount/o;d===2||u>=.9&&d===1&&o>=2||o>=4&&u>=.75?(t++,a+=1):a+=Math.max(1,3-d)}),{nearMasteryCount:t,learningCount:r,averageRemainingAnswers:r>0?Math.round(a/r*10)/10:0,longTermMemoryCount:n,superMemoryCount:i}}function Kt(s=7,t=10){const r=ye(),a=Date.now()-s*24*60*60*1e3;return Object.entries(r.wordProgress).filter(([i,l])=>l.masteryLevel==="mastered"&&l.lastStudied>=a).map(([i,l])=>({word:i,masteredDate:l.lastStudied,totalAttempts:l.correctCount+l.incorrectCount})).sort((i,l)=>l.masteredDate-i.masteredDate).slice(0,t)}function St(){const s=ye(),r=Object.values(s.wordProgress).filter(d=>d.grammarAttempts&&d.grammarAttempts>0||d.word.startsWith("grammar_")||d.word.includes("_g")),a=r.filter(d=>d.grammarAttempts&&d.grammarAttempts>0||d.correctCount+d.incorrectCount>0);let n=0,i=0,l=0;a.forEach(d=>{const u=d.grammarAttempts||d.correctCount+d.incorrectCount,g=d.grammarCorrect||d.correctCount,x=d.grammarStreak||d.consecutiveCorrect,S=u>0?g/u*100:0;u===1&&g===1||x>=3||x>=2&&S>=80?n++:S>=50?i++:l++});const o=a.length,c=n*1+i*.5;return{totalWords:r.length,appearedWords:o,masteredCount:n,learningCount:i,strugglingCount:l,basicRetentionRate:o>0?Math.round(n/o*100):0,weightedRetentionRate:o>0?Math.round(c/o*100):0,masteredPercentage:o>0?Math.round(n/o*100):0,learningPercentage:o>0?Math.round(i/o*100):0,strugglingPercentage:o>0?Math.round(l/o*100):0,masteredWords:n,learningWords:i,newWords:r.length-o,retentionRate:o>0?Math.round(n/o*100):0,averageAttempts:0,categoryBreakdown:{},difficultyBreakdown:{}}}function gt(){const s=ye(),t=Object.values(s.wordProgress),r=t.filter(c=>c.memorizationAttempts&&c.memorizationAttempts>0);let a=0,n=0,i=0;r.forEach(c=>{const d=c.memorizationAttempts||0,u=c.memorizationCorrect||0,g=c.memorizationStreak||0,x=d>0?u/d*100:0;d===1&&u===1||g>=3||g>=2&&x>=80?a++:x>=50?n++:i++});const l=r.length,o=a*1+n*.5;return{totalWords:t.length,appearedWords:l,masteredCount:a,learningCount:n,strugglingCount:i,basicRetentionRate:l>0?Math.round(a/l*100):0,weightedRetentionRate:l>0?Math.round(o/l*100):0,masteredPercentage:l>0?Math.round(a/l*100):0,learningPercentage:l>0?Math.round(n/l*100):0,strugglingPercentage:l>0?Math.round(i/l*100):0,masteredWords:a,learningWords:n,newWords:t.length-l,retentionRate:l>0?Math.round(a/l*100):0,averageAttempts:0,categoryBreakdown:{},difficultyBreakdown:{}}}function Xt(){const s=ye(),t=Object.entries(s.wordProgress).filter(([n,i])=>n.startsWith("grammar_")),r=new Map;t.forEach(([n,i])=>{const l=n.match(/grammar_g(\d+)-u(\d+)/);if(!l)return;const o=l[1],c=l[2],d=`ä¸­${o}_Unit${c}`;r.has(d)||r.set(d,{questions:[],answered:[],correct:0,incorrect:0,mastered:0});const u=r.get(d);u.questions.push([n,i]);const g=i.grammarAttempts||i.correctCount+i.incorrectCount;if(g>0){u.answered.push([n,i]);const x=i.grammarCorrect||i.correctCount,S=g-x;u.correct+=x,u.incorrect+=S;const N=i.grammarStreak||i.consecutiveCorrect,w=g>0?x/g*100:0,b=i.masteryLevel==="mastered",k=g===1&&x===1,D=g>=3&&w>=85;(b||k||D||N>=3)&&u.mastered++}});const a=Array.from(r.entries()).map(([n,i])=>{const l=i.correct+i.incorrect,o=l>0?i.correct/l*100:0,c=i.questions.length>0?i.answered.length/i.questions.length*100:0;return{unit:n,totalQuestions:i.questions.length,answeredQuestions:i.answered.length,correctCount:i.correct,incorrectCount:i.incorrect,masteredCount:i.mastered,accuracy:Math.round(o),progress:Math.round(c)}});return a.sort((n,i)=>n.unit.localeCompare(i.unit)),a}const Bs="progress-data",ks=300,Cs=2e3,Ds=3;function rt(){return{results:[],statistics:{totalQuizzes:0,totalQuestions:0,totalCorrect:0,averageScore:0,bestScore:0,streakDays:0,lastStudyDate:0,studyDates:[]},questionSetStats:{},categoryStats:{},difficultyStats:{},wordProgress:{}}}async function Be(){try{const s=await zr();if(!s){const a=rt();return Ke(a),a}const t=s,r={results:t.results||[],statistics:t.statistics||{totalQuizzes:0,totalQuestions:0,totalCorrect:0,averageScore:0,bestScore:0,streakDays:0,lastStudyDate:0,studyDates:[]},questionSetStats:t.questionSetStats||{},categoryStats:{},difficultyStats:{},wordProgress:t.wordProgress||{}};return r.statistics||(r.statistics={totalQuizzes:0,totalQuestions:0,totalCorrect:0,averageScore:0,bestScore:0,streakDays:0,lastStudyDate:0,studyDates:[]}),r.questionSetStats||(r.questionSetStats={}),r.wordProgress||(r.wordProgress={}),r.results||(r.results=[]),Zt(r),Ke(r),r}catch(s){p.error("é€²æ—ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",s);const t=rt();return Ke(t),t}}let Qe=null;function Br(){return Qe||(Qe=rt(),p.log("ğŸ“¦ Progress cache initialized with default data")),Qe}function ye(){if(Qe)return Qe.statistics||(p.warn("âš ï¸ Cache missing statistics, reinitializing"),Qe=rt()),Qe;Br();try{const s=localStorage.getItem(Bs);if(!s){const r=rt();return Qe=r,r}const t=JSON.parse(s);return t.statistics||(t.statistics={totalQuizzes:0,totalQuestions:0,totalCorrect:0,averageScore:0,bestScore:0,streakDays:0,lastStudyDate:0,studyDates:[]}),t.questionSetStats||(t.questionSetStats={}),t.wordProgress||(t.wordProgress={}),t.results||(t.results=[]),t.results||(t.results=[]),Zt(t),Qe=t,t}catch(s){p.error("é€²æ—ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",s);const t=rt();return Qe=t,t}}function Ke(s){Qe=s,p.log("ğŸ”„ progressCacheæ›´æ–° - resultsä»¶æ•°:",s.results.length)}async function Xe(s){try{Zt(s),Ke(s);try{localStorage.setItem(Bs,JSON.stringify(s))}catch(a){p.warn("LocalStorageä¿å­˜å¤±æ•—ï¼ˆå®¹é‡ä¸è¶³ã®å¯èƒ½æ€§ï¼‰:",a)}const t={quizzes:{},lastUpdated:Date.now(),totalAnswered:{},totalMastered:{},results:s.results,statistics:s.statistics,questionSetStats:s.questionSetStats,wordProgress:s.wordProgress};await Or(t)||p.error("ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ")}catch(t){p.error("é€²æ—ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—:",t)}}function Zt(s){s.results.length>ks&&(s.results.sort((r,a)=>a.date-r.date),s.results=s.results.slice(0,ks));const t=Object.entries(s.wordProgress);t.length>Cs&&(t.sort((r,a)=>a[1].lastStudied-r[1].lastStudied),s.wordProgress=Object.fromEntries(t.slice(0,Cs))),Object.values(s.wordProgress).forEach(r=>{r.responseTimes&&r.responseTimes.length>Ds&&(r.responseTimes=r.responseTimes.slice(-Ds))})}async function ht(s){const t=await Be();t.results.push(s),p.log("âœ… addQuizResultå‘¼ã³å‡ºã—:",{mode:s.mode,score:s.score,total:s.total,date:new Date(s.date).toISOString(),resultsCount:t.results.length}),Qr(t,s),await Xe(t),p.log("ğŸ’¾ saveProgresså®Œäº† - resultsä»¶æ•°:",t.results.length);try{if(typeof window<"u"){const r=new CustomEvent(lt,{detail:{result:s}});window.dispatchEvent(r)}}catch{}}function Qr(s,t){const r=s.statistics;r.totalQuizzes++,r.totalQuestions+=t.total,r.totalCorrect+=t.score,r.averageScore=r.totalQuestions>0?r.totalCorrect/r.totalQuestions*100:0,r.bestScore=Math.max(r.bestScore,t.percentage),r.lastStudyDate=t.date;const a=new Date(t.date).setHours(0,0,0,0);r.studyDates.includes(a)||(r.studyDates.push(a),r.studyDates.sort((o,c)=>c-o)),r.streakDays=Gr(r.studyDates),s.questionSetStats[t.questionSetId]||(s.questionSetStats[t.questionSetId]={attempts:0,bestScore:0,averageScore:0,lastAttempt:0,totalTimeSpent:0});const n=s.questionSetStats[t.questionSetId];n.attempts++,n.bestScore=Math.max(n.bestScore,t.percentage),n.lastAttempt=t.date,n.totalTimeSpent+=t.timeSpent;const i=s.results.filter(o=>o.questionSetId===t.questionSetId),l=i.reduce((o,c)=>o+c.percentage,0);n.averageScore=l/i.length}function Gr(s){if(s.length===0)return 0;const t=new Date().setHours(0,0,0,0),r=t-24*60*60*1e3,a=s[0];if(a!==t&&a!==r)return 0;let n=1;for(let i=1;i<s.length&&(s[i-1]-s[i])/(24*60*60*1e3)===1;i++)n++;return n}function es(s=10){const t=ye(),r=new Map;t.results.forEach(n=>{n.incorrectWords.forEach(i=>{r.set(i,(r.get(i)||0)+1)})});const a=[];return r.forEach((n,i)=>{if(n<5)return;const l=t.wordProgress[i];if(!l)return;const o=l.correctCount+l.incorrectCount;if(o===0)return;const c=l.correctCount/o*100,d=c>=80,g=o===1&&l.correctCount===1||l.consecutiveCorrect>=3||c>=85;if(d&&g){const x=n*c;a.push({word:i,totalMistakes:n,recentAccuracy:Math.round(c),overcomeScore:x})}}),a.sort((n,i)=>i.overcomeScore-n.overcomeScore).slice(0,s)}function Tt(s=10){const t=ye(),r=new Map;t.results.forEach(n=>{n.incorrectWords.forEach(i=>{r.set(i,(r.get(i)||0)+1)})});const a=[];return r.forEach((n,i)=>{const l=t.wordProgress[i];if(!l){a.push({word:i,mistakes:n,recentAccuracy:0,meaning:void 0,reading:void 0});return}const o=l.correctCount+l.incorrectCount,c=o>0?l.correctCount/o*100:0,d=o===1&&l.correctCount===1;n>=5&&c>=80&&(d||l.consecutiveCorrect>=3||c>=85)||a.push({word:i,mistakes:n,recentAccuracy:Math.round(c),meaning:l.meaning,reading:l.reading})}),a.sort((n,i)=>i.mistakes-n.mistakes).slice(0,s)}function Qs(s){return{word:s,correctCount:0,incorrectCount:0,consecutiveCorrect:0,consecutiveIncorrect:0,lastStudied:0,totalResponseTime:0,averageResponseTime:0,difficultyScore:50,masteryLevel:"new",responseTimes:[]}}function Ur(s){const t=s.correctCount+s.incorrectCount;if(t===0)return 50;const a=(1-s.correctCount/t)*100,n=Math.min(s.consecutiveIncorrect*5,20),i=s.averageResponseTime/1e3,l=Math.min(i>5?(i-5)*3:0,15),o=s.userDifficultyRating?(s.userDifficultyRating-5.5)*5:0,c=a+n+l+o;return Math.max(0,Math.min(100,c))}function Ze(s){const t=[1,1,3,7,14,30,90,180,365];return s>=t.length?365:t[s]||1}function Et(s,t){const r=s.correctCount+s.incorrectCount,a=r>0?s.correctCount/r:0,{consecutiveCorrect:n,lastStudied:i}=s,o=(Date.now()-i)/(1e3*60*60)/24;if(r===1&&t){const c=Ze(1);return{isMastered:!0,excludeDays:c,reason:`1ç™ºæ­£è§£ï¼ˆ${c}æ—¥å¾Œã«å†ç¢ºèªï¼‰`,confidence:.85,masteryLevel:1}}if(n>=2&&t){const c=Ze(n),d=Math.min(7,Math.floor(n/1));let u="";return n>=7?u=`è¶…é•·æœŸè¨˜æ†¶é”æˆï¼ï¼ˆé€£ç¶š${n}å›æ­£è§£ã€${c}æ—¥å¾Œã«å¹´æ¬¡ç¢ºèªï¼‰`:n>=5?u=`é•·æœŸè¨˜æ†¶å®šç€ï¼ˆé€£ç¶š${n}å›æ­£è§£ã€${c}æ—¥å¾Œã«ç¢ºèªï¼‰`:n>=3?u=`çŸ­æœŸâ†’é•·æœŸè¨˜æ†¶ç§»è¡Œï¼ˆé€£ç¶š${n}å›æ­£è§£ã€${c}æ—¥å¾Œã«ç¢ºèªï¼‰`:u=`å­¦ç¿’ä¸­ï¼ˆé€£ç¶š${n}å›æ­£è§£ã€${c}æ—¥å¾Œã«å¾©ç¿’ï¼‰`,{isMastered:!0,excludeDays:c,reason:u,confidence:Math.min(.99,.75+n*.05),masteryLevel:d}}if(r>=3&&a>=.9&&n>=2){const c=Ze(n);return{isMastered:!0,excludeDays:c,reason:`é«˜ç²¾åº¦å®‰å®šå‹ï¼ˆæ­£ç­”ç‡${Math.round(a*100)}%ã€${c}æ—¥å¾Œã«ç¢ºèªï¼‰`,confidence:.88,masteryLevel:2}}if(n>=2&&o>=7&&t){const c=Ze(n),d=Math.floor(c*1.5);return{isMastered:!0,excludeDays:d,reason:`é•·æœŸè¨˜æ†¶å‹ï¼ˆ7æ—¥é–“éš”ã§æ­£è§£ã€${d}æ—¥å¾Œã«ç¢ºèªï¼‰`,confidence:.92,masteryLevel:3}}if(n>=2&&o>=3&&t){const c=Ze(n),d=Math.floor(c*1.2);return{isMastered:!0,excludeDays:d,reason:`ä¸­æœŸè¨˜æ†¶å‹ï¼ˆ3æ—¥é–“éš”ã§æ­£è§£ã€${d}æ—¥å¾Œã«ç¢ºèªï¼‰`,confidence:.85,masteryLevel:2}}if(n>=2&&o<=1&&a>=.85&&r>=4){const c=Ze(n);return{isMastered:!0,excludeDays:c,reason:`çŸ­æœŸå®Œç’§å‹ï¼ˆ24æ™‚é–“å†…ã«é€£ç¶šæ­£è§£ã€${c}æ—¥å¾Œã«ç¢ºèªï¼‰`,confidence:.8,masteryLevel:1}}if(r>=5&&a>=.8&&t){const c=Math.max(7,Ze(2));return{isMastered:!0,excludeDays:c,reason:`é«˜å›æ•°å®‰å®šå‹ï¼ˆ${r}å›æŒ‘æˆ¦ãƒ»æ­£ç­”ç‡${Math.round(a*100)}%ã€${c}æ—¥å¾Œã«ç¢ºèªï¼‰`,confidence:.83,masteryLevel:2}}if(n>=2&&a>=.75&&r>=3&&t){const c=Ze(n);return{isMastered:!0,excludeDays:c,reason:`æ¬¡å›å®šç€é”æˆï¼ˆ${c}æ—¥å¾Œã«ç¢ºèªï¼‰`,confidence:.78,masteryLevel:1}}return{isMastered:!1,excludeDays:0,reason:"æœªå®šç€",confidence:1,masteryLevel:0}}function Hr(s){const t=s.correctCount+s.incorrectCount;if(t===0)return"new";const r=s.correctCount/t,a=t===1&&s.correctCount===1,n=t>=5&&r>=.85,i=t>=3&&r>=.9,l=s.consecutiveCorrect>=5,o=t>=10&&r>=.75&&s.consecutiveCorrect>=2;return a||n||i||l||o?"mastered":"learning"}async function at(s,t,r,a,n,i){const l=await Be();l.wordProgress[s]||(l.wordProgress[s]=Qs(s));const o=l.wordProgress[s];t?(o.correctCount++,o.consecutiveCorrect++,o.consecutiveIncorrect=0):i?(o.incorrectCount++,o.consecutiveCorrect=0,o.consecutiveIncorrect=0):(o.incorrectCount++,o.consecutiveIncorrect++,o.consecutiveCorrect=0);const c=n;c==="translation"?(o.translationAttempts=(o.translationAttempts||0)+1,t?(o.translationCorrect=(o.translationCorrect||0)+1,o.translationStreak=(o.translationStreak||0)+1):o.translationStreak=0):c==="spelling"?(o.spellingAttempts=(o.spellingAttempts||0)+1,t?(o.spellingCorrect=(o.spellingCorrect||0)+1,o.spellingStreak=(o.spellingStreak||0)+1):o.spellingStreak=0):c==="grammar"?(o.grammarAttempts=(o.grammarAttempts||0)+1,t?(o.grammarCorrect=(o.grammarCorrect||0)+1,o.grammarStreak=(o.grammarStreak||0)+1):o.grammarStreak=0):c==="memorization"&&(o.memorizationAttempts=(o.memorizationAttempts||0)+1,t?(o.memorizationCorrect=(o.memorizationCorrect||0)+1,o.memorizationStreak=(o.memorizationStreak||0)+1):o.memorizationStreak=0),o.totalAttempts=(o.translationAttempts||0)+(o.spellingAttempts||0)+(o.grammarAttempts||0)+(o.memorizationAttempts||0),o.totalResponseTime+=r;const d=o.correctCount+o.incorrectCount;o.averageResponseTime=o.totalResponseTime/d,a!==void 0&&(o.userDifficultyRating=a),o.lastStudied=Date.now(),o.learningHistory||(o.learningHistory=[]),o.learningHistory.push({timestamp:Date.now(),wasCorrect:t,responseTime:r,sessionIndex:0}),o.learningHistory.length>20&&(o.learningHistory=o.learningHistory.slice(-20)),o.difficultyScore=Ur(o);const u=o.masteryLevel;o.masteryLevel=Hr(o),u!==o.masteryLevel&&p.log(`ğŸ”„ ${s}: ${u} â†’ ${o.masteryLevel} (æ­£è§£: ${o.correctCount}, ä¸æ­£è§£: ${o.incorrectCount}, é€£ç¶š: ${o.consecutiveCorrect})`);const g=Et(o,t);if(g.isMastered&&(o.skipExcludeUntil=Date.now()+g.excludeDays*24*60*60*1e3,Vr(s),g.reason!=="æœªå®šç€"&&p.log(`âœ… ${s} ãŒå®šç€: ${g.reason} (é™¤å¤–æœŸé–“: ${g.excludeDays}æ—¥)`)),c){const x=c==="translation"?"å’Œè¨³":c==="spelling"?"ã‚¹ãƒšãƒ«":c==="grammar"?"æ–‡æ³•":c==="memorization"?"æš—è¨˜":"èª­è§£";l.results.push({id:`word-${s}-${Date.now()}`,questionSetId:"individual-word",questionSetName:x,score:t?1:0,total:1,percentage:t?100:0,date:Date.now(),timeSpent:r/1e3,incorrectWords:t?[]:[s],mode:c,difficulty:o.difficultyScore>.7?"advanced":o.difficultyScore>.4?"intermediate":"beginner"})}await Xe(l);try{if(typeof window<"u"){const x=new CustomEvent(lt,{detail:{word:s,isCorrect:t,responseTime:r,mode:c}});window.dispatchEvent(x)}}catch{}}function Vr(s){const t="reading-passages-data",r=localStorage.getItem(t);if(r)try{const a=JSON.parse(r);let n=!1;if(a.forEach(i=>{i.phrases&&i.phrases.forEach(l=>{l.segments&&l.segments.forEach(o=>{o.word.toLowerCase()===s.toLowerCase()&&o.isUnknown&&(o.isUnknown=!1,n=!0)})})}),n)try{localStorage.setItem(t,JSON.stringify(a))}catch(i){if(i instanceof DOMException&&i.name==="QuotaExceededError")p.warn("é•·æ–‡èª­è§£ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ï¼ˆå®¹é‡è¶…éï¼‰ã€‚ãƒ‡ãƒ¼ã‚¿ã‚’åœ§ç¸®ã—ã¾ã™ã€‚"),localStorage.removeItem(t),p.log("é•·æ–‡èª­è§£ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚æ¬¡å›èª­ã¿è¾¼ã¿æ™‚ã«å†å–å¾—ã•ã‚Œã¾ã™ã€‚");else throw i}}catch(a){p.error("é•·æ–‡èª­è§£ãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°ã‚¨ãƒ©ãƒ¼:",a)}}function Rt(s,t=30){const r=ye();r.wordProgress[s]||(r.wordProgress[s]=Qs(s));const a=r.wordProgress[s];a.consecutiveCorrect=3,a.masteryLevel="mastered",a.skippedCount=(a.skippedCount||0)+1,a.lastSkipped=Date.now(),a.skipExcludeUntil=Date.now()+t*24*60*60*1e3,Xe(r)}function ts(s){const r=ye().wordProgress[s];return r?!!(r.skipExcludeUntil&&Date.now()<r.skipExcludeUntil||r.masteryLevel==="mastered"&&r.nextReviewDate&&Date.now()<r.nextReviewDate):!1}function ss(s){return s.filter(t=>!ts(t.word))}function nt(){const s=ye();return Object.values(s.wordProgress)}async function rs(s,t){const r=await Be();r.wordProgress[s]||(r.wordProgress[s]={word:s,correctCount:0,incorrectCount:0,consecutiveCorrect:0,consecutiveIncorrect:0,lastStudied:Date.now(),totalResponseTime:0,averageResponseTime:0,difficultyScore:0,masteryLevel:"new",responseTimes:[],confusedWith:[],confusionCount:0,lastConfused:Date.now()});const a=r.wordProgress[s];a.confusedWith||(a.confusedWith=[]),a.confusedWith.push({word:t,timestamp:Date.now()}),a.confusedWith.length>10&&(a.confusedWith=a.confusedWith.slice(-10)),a.confusionCount=(a.confusionCount||0)+1,a.lastConfused=Date.now(),a.difficultyScore=Math.min(100,(a.difficultyScore||0)+5),await Xe(r),Ke(r)}function as(s=20){return nt().filter(r=>(r.confusionCount||0)>0).sort((r,a)=>{const n=(a.confusionCount||0)-(r.confusionCount||0);return n!==0?n:(a.lastConfused||0)-(r.lastConfused||0)}).slice(0,s)}function ns(s){let r=ye().results;return s&&(r=r.filter(a=>a.mode===s)),r.reduce((a,n)=>a+n.total,0)}function Gs(s){const t=ye(),r=new Set;for(const[a,n]of Object.entries(t.wordProgress)){const i=n.correctCount>0||n.incorrectCount>0,l=n.skippedCount&&n.skippedCount>0;(i||l)&&r.add(a)}return r.size}function Wt(){const s=ye();let t=0;for(const r of Object.values(s.wordProgress)){const n=r.correctCount+r.incorrectCount===1&&r.correctCount===1,i=r.consecutiveCorrect>=3,l=r.skippedCount&&r.skippedCount>0;(n||i||l)&&t++}return t}function kt(){const s=ye(),r=Object.values(s.wordProgress).filter(l=>l.correctCount+l.incorrectCount>0);let a=0;r.forEach(l=>{const o=l.correctCount+l.incorrectCount,c=o>0?l.correctCount/o*100:0,d=l.masteryLevel==="mastered",u=o===1&&l.correctCount===1,g=o>=5&&c>=85,x=o>=3&&c>=90,S=l.consecutiveCorrect>=5,N=o>=10&&c>=75;(d||u||g||x||S||N)&&a++});const n=r.length>0?a/r.length*100:0,i=Math.min(100,Math.max(0,n));return{retentionRate:Math.round(i),masteredCount:a,appearedCount:r.length}}async function is(){try{await Pr(),p.log("âœ… IndexedDBå‰Šé™¤å®Œäº†")}catch(r){p.error("IndexedDBå‰Šé™¤ã‚¨ãƒ©ãƒ¼:",r)}const s=[];for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);a&&(a.startsWith("quiz-result-")||a==="quiz-app-user-progress"||a==="progress-data"||a.startsWith("session-history-")||a==="session-history"||a==="skipped-words"||a==="skip-groups"||a==="improvement-progress"||a==="study-settings"||a==="reading-passages-data"||a==="all-questions-cache")&&s.push(a)}s.forEach(r=>{try{localStorage.removeItem(r)}catch(a){p.error(`Failed to remove ${r}:`,a)}});const t=rt();Xe(t),p.log(`âœ… ãƒªã‚»ãƒƒãƒˆå®Œäº†: LocalStorage ${s.length}å€‹ã®ã‚­ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`),window.location.reload()}function os(s=90){const t=ye(),r=new Date,a=[];p.log("ğŸ“Š getStudyCalendarDataå‘¼ã³å‡ºã— - progress.resultsä»¶æ•°:",t.results.length);for(let n=s-1;n>=0;n--){const i=new Date(r);i.setDate(i.getDate()-n);const l=$t(i),o=new Date(i).setHours(0,0,0,0),c=new Date(i).setHours(23,59,59,999),d=t.results.filter(S=>S.date>=o&&S.date<=c);n===0&&p.log("ğŸ“… ä»Šæ—¥ã®ãƒ‡ãƒ¼ã‚¿:",{dateStr:l,dayStart:new Date(o).toISOString(),dayEnd:new Date(c).toISOString(),dayResults:d.length,sampleResults:d.slice(0,3).map(S=>({mode:S.mode,score:S.score,total:S.total,date:new Date(S.date).toISOString()}))});const u=d.reduce((S,N)=>S+N.total,0),g=d.reduce((S,N)=>S+N.score,0),x=u>0?g/u*100:0;a.push({date:l,count:u,accuracy:x})}return a}function ls(s=12){const t=ye(),r=new Date,a=[];let n=0,i=0;for(let l=s-1;l>=0;l--){const o=new Date(r);o.setDate(r.getDate()-l*7),o.setHours(23,59,59,999);const c=new Date(o);c.setDate(o.getDate()-6),c.setHours(0,0,0,0);const u=t.results.filter(S=>S.date>=c.getTime()&&S.date<=o.getTime()).reduce((S,N)=>S+N.total,0);i+=u;let g=0;Object.values(t.wordProgress).forEach(S=>{S.masteryLevel==="mastered"&&S.lastStudied>=c.getTime()&&S.lastStudied<=o.getTime()&&g++}),n+=g;const x=`${c.getMonth()+1}/${c.getDate()}`;a.push({weekLabel:x,cumulativeMastered:n,weeklyMastered:g,cumulativeAnswered:i,weeklyAnswered:u})}return a}function cs(){const s=ye(),t=Date.now(),r=t-7*24*60*60*1e3,a=t-30*24*60*60*1e3,n=new Set,i=new Set,l=new Set,o=new Set,c=new Set,d=new Set;return s.results.forEach(u=>{u.incorrectWords.forEach(g=>{c.add(g),u.date>=a&&l.add(g),u.date>=r&&n.add(g)})}),Object.entries(s.wordProgress).forEach(([u,g])=>{g.masteryLevel==="mastered"&&(d.add(u),g.lastStudied>=a&&o.add(u),g.lastStudied>=r&&i.add(u))}),{last7Days:Math.min(100,Math.max(0,n.size>0?i.size/n.size*100:0)),last30Days:Math.min(100,Math.max(0,l.size>0?o.size/l.size*100:0)),allTime:Math.min(100,Math.max(0,c.size>0?d.size/c.size*100:0))}}function ds(s){const r=ye().wordProgress[s];if(!r)return null;const a=r.correctCount,n=r.correctCount+r.incorrectCount,o=(r.learningHistory||[]).slice(-10).map(x=>x.wasCorrect?"ğŸŸ©":"ğŸŸ¥").join("");let c=0;if(n===0)c=0;else{const x=a/n*70,S=Math.min(20,(r.consecutiveCorrect||0)*5),N=(Date.now()-r.lastStudied)/(24*60*60*1e3),w=Math.min(10,Math.max(0,(N-1)*2));c=Math.min(100,Math.max(0,x+S-w)),r.masteryLevel==="mastered"&&(c=Math.max(90,c))}let d="new",u="æœªå­¦ç¿’",g="âšª";return n===0?(d="new",u="æœªå­¦ç¿’",g="âšª"):r.masteryLevel==="mastered"||c>=80?(d="mastered",u="å®šç€æ¸ˆ",g="ğŸŸ¢"):c>=50?(d="learning",u="å­¦ç¿’ä¸­",g="ğŸŸ¡"):(d="struggling",u="è¦å¾©ç¿’",g="ğŸ”´"),{correctCount:a,totalCount:n,accuracyHistory:o,retentionRate:Math.round(c),status:d,statusLabel:u,statusIcon:g}}async function ms(s){try{await It("memorization-card-settings",s)}catch(t){p.error("ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºè¨­å®šã®ä¿å­˜ã‚¨ãƒ©ãƒ¼:",t),localStorage.setItem("memorization-card-settings",JSON.stringify(s))}}async function us(){try{const s=await _t("memorization-card-settings");return s?typeof s=="string"?JSON.parse(s):typeof s=="object"&&"showFurigana"in s?s:null:null}catch(s){p.error("ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºè¨­å®šã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",s);const t=localStorage.getItem("memorization-card-settings");return t?JSON.parse(t):null}}async function gs(s){try{await It("memorization-settings",s)}catch(t){p.error("æš—è¨˜è¨­å®šã®ä¿å­˜ã‚¨ãƒ©ãƒ¼:",t),localStorage.setItem("memorization-settings",JSON.stringify(s))}}async function hs(){try{const s=await _t("memorization-settings");return s?typeof s=="string"?JSON.parse(s):typeof s=="object"&&"shuffleOrder"in s?s:null:null}catch(s){p.error("æš—è¨˜è¨­å®šã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",s);const t=localStorage.getItem("memorization-settings");return t?JSON.parse(t):null}}async function xs(s){try{const t=await _t("memorization-behaviors"),a=[...t?typeof t=="string"?JSON.parse(t):t:[],s].slice(-1e3);await It("memorization-behaviors",a)}catch(t){p.error("æš—è¨˜è¡Œå‹•è¨˜éŒ²ã®ä¿å­˜ã‚¨ãƒ©ãƒ¼:",t)}}const Us="custom-question-sets";async function Lt(){try{const s=await _t(Us);return s?typeof s=="string"?JSON.parse(s):Array.isArray(s)?s:[]:[]}catch(s){return p.error("ã‚«ã‚¹ã‚¿ãƒ å•é¡Œã‚»ãƒƒãƒˆå–å¾—ã‚¨ãƒ©ãƒ¼:",s),[]}}async function Ct(s){try{const t=await Lt(),r=t.findIndex(a=>a.id===s.id);r>=0?t[r]={...s,updatedAt:Date.now()}:t.push(s),await It(Us,t)}catch(t){throw p.error("ã‚«ã‚¹ã‚¿ãƒ å•é¡Œã‚»ãƒƒãƒˆä¿å­˜ã‚¨ãƒ©ãƒ¼:",t),t}}async function Dt(s,t=20,r=3,a=60,n){const o=Tt(100).filter(d=>d.mistakes>=r&&d.recentAccuracy<=a).slice(0,t).map(d=>{const u=n.find(g=>g.word.toLowerCase()===d.word.toLowerCase());return u||{word:d.word,reading:d.reading||"",meaning:d.meaning||"",etymology:"",relatedWords:"",relatedFields:"",difficulty:"intermediate"}});return{id:`weak-words-${Date.now()}`,name:s,source:"weak-words",questions:o,createdAt:Date.now(),updatedAt:Date.now(),isAutoUpdate:!0,autoUpdateConfig:{limit:t,minMistakes:r,maxAccuracy:a},metadata:{description:`è‹¦æ‰‹èªå¥ã‹ã‚‰è‡ªå‹•ç”Ÿæˆï¼ˆé–“é•ã„${r}å›ä»¥ä¸Šã€æ­£ç­”ç‡${a}%ä»¥ä¸‹ï¼‰`,totalWords:o.length}}}function Mt(){const s=ye(),a=Object.values(s.wordProgress).filter(o=>o.grammarAttempts&&o.grammarAttempts>0||o.word.startsWith("grammar_")||o.word.includes("_g")).filter(o=>o.grammarAttempts&&o.grammarAttempts>0||o.correctCount+o.incorrectCount>0);let n=0;a.forEach(o=>{const c=o.grammarAttempts||o.correctCount+o.incorrectCount,d=o.grammarCorrect||o.correctCount,u=o.grammarStreak||o.consecutiveCorrect,g=c>0?d/c*100:0,x=o.masteryLevel==="mastered",S=c===1&&d===1,N=c>=5&&g>=85,w=c>=3&&g>=90,b=u>=5,k=c>=10&&g>=75;(x||S||N||w||b||k)&&n++});const i=a.length>0?n/a.length*100:0,l=Math.min(100,Math.max(0,i));return{retentionRate:Math.round(l),masteredCount:n,appearedCount:a.length}}async function ps(){const s=Xt();return(await Promise.all(s.map(async r=>{const a=r.unit.match(/ä¸­(\d+)_Unit(\d+)/);if(!a)return null;const n=a[1],i=a[2];try{const l=await fetch(`/data/grammar/grammar_grade${n}_unit${i}.json`);if(l.ok){const o=await l.json();return o.enabled===!1?null:{...r,title:o.title||""}}}catch{return null}return null}))).filter(r=>r!==null)}const Ms=Object.freeze(Object.defineProperty({__proto__:null,addQuizResult:ht,addSessionHistory:dt,checkFlexibleMastery:Et,createWeakWordsQuestionSet:Dt,filterSkippedWords:ss,getAllWordProgress:nt,getConfusedWords:as,getCumulativeProgressData:ls,getCurrentWeakWords:Tt,getCustomQuestionSets:Lt,getDetailedRetentionStats:Nt,getGrammarDetailedRetentionStats:St,getGrammarRetentionRateWithAI:Mt,getGrammarUnitStats:Xt,getGrammarUnitStatsWithTitles:ps,getMemorizationCardSettings:us,getMemorizationDetailedRetentionStats:gt,getMemorizationSettings:hs,getMonthlyStats:Yt,getNearMasteryStats:qs,getOvercomeWeakWords:es,getRecentlyMasteredWords:Kt,getRetentionRateWithAI:kt,getRetentionTrend:cs,getStudyCalendarData:os,getStudySettings:Ht,getTodayIncorrectWords:jt,getTodayStats:Vt,getTotalAnsweredCount:ns,getTotalMasteredWordsCount:Wt,getUniqueQuestionedWordsCount:Gs,getWeeklyStats:Jt,getWordDetailedData:ds,isWordSkipExcluded:ts,loadProgress:Be,loadProgressSync:ye,recordConfusion:rs,recordMemorizationBehavior:xs,recordWordSkip:Rt,resetAllProgress:is,saveCustomQuestionSet:Ct,saveMemorizationCardSettings:ms,saveMemorizationSettings:gs,saveProgress:Xe,updateProgressCache:Ke,updateWordProgress:at},Symbol.toStringTag,{value:"Module"}));function ut(s){const t=s.trim().split(`
`);if(t.length===0)return[];function r(l){const o=[];let c="",d=!1;for(let u=0;u<l.length;u++){const g=l[u],x=l[u+1];g==='"'?d&&x==='"'?(c+='"',u++):d=!d:g===","&&!d?(o.push(c.trim()),c=""):c+=g}return o.push(c.trim()),o}let a=0;const n=t[0].trim();(n.includes("èªå¥")||n.includes("term")||n.includes("èª­ã¿")||n.includes("reading")||n.includes("æ„å‘³")||n.includes("meaning"))&&(a=1);const i=[];for(let l=a;l<t.length;l++){const o=t[l].trim();if(!o||o.startsWith("//")||o.startsWith("#"))continue;const c=r(o);if(c.length>=3){const d=c[0]||"",u=c[1]||"",g=c[2]||"",x=c[3]||"";let S="",N="",w="";c.length>=8?(S=(c[4]||"")+(c[5]||""),N=c[6]||"",w=c[7]||""):(S=c[4]||"",N=c[5]||"",w=c[6]||"");let b="";w.includes("åˆç´š")||w==="beginner"?b="beginner":w.includes("ä¸­ç´š")||w==="intermediate"?b="intermediate":(w.includes("ä¸Šç´š")||w==="advanced")&&(b="advanced"),N&&!Mr(N)&&p.warn(`[ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§è­¦å‘Š] ä¸æ­£ãªã‚«ãƒ†ã‚´ãƒª: "${N}" (å˜èª: "${d}")
æœ‰åŠ¹ãªã‚«ãƒ†ã‚´ãƒª: ${Ls.join(", ")}
å‚ç…§: docs/19-junior-high-vocabulary.md`),d&&g&&i.push({word:d,reading:u,meaning:g,etymology:x,relatedWords:S,relatedFields:N,category:N,difficulty:b})}}return i}function tt(s){const t=[...s];for(let r=t.length-1;r>0;r--){const a=Math.floor(Math.random()*(r+1));[t[r],t[a]]=[t[a],t[r]]}return t}function Hs(s,t,r){const a=[],n=t.filter((o,c)=>c!==r),i=tt(n);for(let o=0;o<i.length&&a.length<2;o++){const c=i[o];c.meaning!==s.meaning&&!a.some(d=>d.meaning===c.meaning)&&a.push(c)}for(;a.length<2;)a.push({word:`ãƒ€ãƒŸãƒ¼${a.length+1}`,meaning:`é¸æŠè‚¢${a.length+1}`,reading:"",etymology:"",relatedWords:"",relatedFields:"",category:"",difficulty:""});return[...tt([{text:s.meaning,question:s},...a.map(o=>({text:o.meaning,question:o}))]),{text:"åˆ†ã‹ã‚‰ãªã„",question:null}]}const Jr="quizApp_questionSets";function Vs(s){try{localStorage.setItem(Jr,JSON.stringify(s))}catch(t){p.error("Failed to save question sets:",t)}}function $t(s){const t=s.getFullYear(),r=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0");return`${t}-${r}-${a}`}const lt="quiz-result-added";function xt(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function Js(s,t=10){const a=nt().filter(i=>i.difficultyScore>=50).sort((i,l)=>l.difficultyScore-i.difficultyScore).map(i=>i.word.toLowerCase()),n=s.filter(i=>a.includes(i.word.toLowerCase()));return tt(n).slice(0,Math.min(t,n.length))}function Ys(s){if(!s.includes(" "))return"word";const t=s.toLowerCase(),r=t.split(" "),a=["get","go","come","take","make","put","look","turn","break","bring","call","carry","check","figure","fill","find","give","hand","hang","hold","keep","knock","lay","let","pass","pick","pull","push","run","set","show","shut","sit","stand","stay","stick","take","talk","think","throw","try","work","write"],n=["up","down","in","out","on","off","away","back","over","through","around","across","along","about","after","for","from","into","to","with"];return r.length>=2&&a.includes(r[0])&&r.slice(1).some(u=>n.includes(u))?"phrasal-verb":[/^a .+ of$/,/^the .+ (of|in)$/,/^(break|beat|hit|kick) (the|a)/,/^(catch|have|take|make) (a|an|the)/,/(eye|eyes|face|hand|tongue|ear|nose|heart|mind|bone)/i,/^once in a/,/^(cost|pay|worth) (an|a)/,/^at .+ (heart|first|last|once)/].some(d=>d.test(t))?"idiom":[/^(in|on|at|by|with|from|to) (the|a|an) /,/^(make|take|do|have|get) (a|an|the) /,/(strong|weak|heavy|light|high|low|good|bad|big|small) /i].some(d=>d.test(t))?"collocation":"other"}function Yr(s,t=90){const r=Math.floor(t/3),a=Math.floor(t*2/3);return s<=r?1:s<=a?2:3}function Kr(s){const t=nt(),r=new Map;return t.forEach(a=>{r.set(a.word.toLowerCase(),a)}),s.filter(a=>{const n=r.get(a.word.toLowerCase());return!n||n.masteryLevel==="new"})}function Xr(s){const t=Date.now(),r=nt(),a=new Map;return r.forEach(n=>{a.set(n.word.toLowerCase(),n)}),s.filter(n=>{const i=a.get(n.word.toLowerCase());if(!i)return!1;const l=(t-i.lastStudied)/(1e3*60*60*24);let o;switch(i.masteryLevel){case"new":o=1;break;case"learning":o=Math.min(7,i.consecutiveCorrect+1);break;case"mastered":o=Math.min(30,i.consecutiveCorrect*2);break;default:o=1}return l>=o})}function Zr(s,t,r){let a;switch(t){case 1:a=s.filter(c=>c.difficulty==="åˆç´š"),a.length<r&&(a=[...a,...s.filter(c=>c.difficulty==="ä¸­ç´š")]);break;case 2:const n=s.filter(c=>c.difficulty==="åˆç´š"),i=s.filter(c=>c.difficulty==="ä¸­ç´š");a=[...n,...i];break;case 3:const l=s.filter(c=>c.difficulty==="ä¸­ç´š"),o=s.filter(c=>c.difficulty==="ä¸Šç´š");a=[...l,...o];break}return tt(a).slice(0,r)}function Ks(s,t){const r=s.currentDay,a=Yr(r,s.totalDays),n=Kr(t),i=Xr(t),l=Math.ceil(s.dailyGoals.newWords*.3),o=Zr(n,a,l),c=Math.ceil(s.dailyGoals.reviewWords*.4),d=Js(i.length>0?i:t,c),u=Math.floor(l*.3),g=Math.ceil(s.dailyGoals.reviewWords*.3),x=[...tt(o).slice(0,u),...tt(i.length>0?i:t).slice(0,g)];return{date:s.startDate+(r-1)*24*60*60*1e3,dayNumber:r,phase:a,morning:{newWords:o,duration:Math.ceil(s.dailyGoals.timeMinutes*.35),mode:"discovery"},afternoon:{reviewWords:d,duration:Math.ceil(s.dailyGoals.timeMinutes*.3),mode:"weakness"},evening:{mixedWords:tt(x),duration:Math.ceil(s.dailyGoals.timeMinutes*.35),mode:"mixed"},completed:!1,actualAccuracy:0}}function Xs(s){const t=nt(),r=t.filter(d=>d.masteryLevel!=="new").length,a=t.reduce((d,u)=>d+u.correctCount+u.incorrectCount,0),n=t.reduce((d,u)=>d+u.correctCount,0),i=a>0?n/a*100:0,l=r/s.currentDay,c=(4700-r)/(l||50);return{totalLearned:r,totalReviewed:a,averageAccuracy:i,estimatedCompletion:Math.ceil(c)}}function Zs(s){const t=Math.ceil(s.currentDay/7),r=s.dailyGoals.newWords*7,a=s.weeklyProgress.find(n=>n.week===t);return a?a.wordsLearned/r*100:0}const ea=Object.freeze(Object.defineProperty({__proto__:null,QUIZ_RESULT_EVENT:lt,calculateProgress:Xs,calculateWeeklyAchievement:Zs,classifyPhraseType:Ys,formatLocalYYYYMMDD:$t,generateChoicesWithQuestions:Hs,generateDailyPlan:Ks,generateId:xt,parseCSV:ut,saveQuestionSets:Vs,selectWeakQuestions:Js,shuffle:tt},Symbol.toStringTag,{value:"Module"}));function ta(){const[s]=m.useState(()=>{const r=localStorage.getItem("autoAdvance");return r?JSON.parse(r):!1}),[t]=m.useState(()=>{const r=localStorage.getItem("autoAdvanceDelay");return r?parseInt(r,10):1500});return{autoAdvance:s,autoAdvanceDelay:t}}function sa(){const[s,t]=m.useState([]),[r,a]=m.useState("all"),[n,i]=m.useState("all"),[l,o]=m.useState("all"),[c,d]=m.useState("all"),[u,g]=m.useState(()=>{const x=localStorage.getItem("selectedDataSource");if(x)try{return JSON.parse(x)}catch{return"all"}return"all"});return{categoryList:s,setCategoryList:t,selectedCategory:r,setSelectedCategory:a,selectedDifficulty:n,setSelectedDifficulty:i,selectedWordPhraseFilter:l,setSelectedWordPhraseFilter:o,selectedPhraseTypeFilter:c,setSelectedPhraseTypeFilter:d,selectedDataSource:u,setSelectedDataSource:g}}function ra(){const[s,t]=m.useState({correct:0,incorrect:0,review:0,mastered:0}),[r,a]=m.useState({questions:[],currentIndex:0,score:0,totalAnswered:0,answered:!1,selectedAnswer:null}),[n,i]=m.useState(!1),[l,o]=m.useState([]),[c,d]=m.useState(new Map);return{sessionStats:s,setSessionStats:t,quizState:r,setQuizState:a,reviewFocusMode:n,setReviewFocusMode:i,reviewQuestionPool:l,setReviewQuestionPool:o,reviewCorrectStreak:c,setReviewCorrectStreak:d}}const er="customQuestionSets";function aa(){try{const s=localStorage.getItem(er);if(s){const t=JSON.parse(s);return{sets:t.sets||[],activeSetId:t.activeSetId||null,recentSetIds:t.recentSetIds||[]}}}catch(s){console.error("Failed to load custom question state:",s)}return{sets:[],activeSetId:null,recentSetIds:[]}}function na(s){try{localStorage.setItem(er,JSON.stringify(s))}catch(t){console.error("Failed to save custom question state:",t)}}function ia(s,t,r,a){const n=new Date().toISOString();return{id:`set_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:s,description:t,words:[],createdAt:n,updatedAt:n,icon:r,color:a}}function oa(s,t,r){const a=s.sets.map(n=>n.id!==t||n.words.some(i=>i.word===r.word)?n:{...n,words:[...n.words,{...r,addedAt:new Date().toISOString()}],updatedAt:new Date().toISOString()});return{...s,sets:a,recentSetIds:ma(s.recentSetIds,t)}}function la(s,t,r){const a=s.sets.map(n=>n.id!==t?n:{...n,words:n.words.filter(i=>i.word!==r.word),updatedAt:new Date().toISOString()});return{...s,sets:a}}function ca(s,t){return{...s,sets:s.sets.filter(r=>r.id!==t),activeSetId:s.activeSetId===t?null:s.activeSetId,recentSetIds:s.recentSetIds.filter(r=>r!==t)}}function da(s,t,r){const a=s.sets.map(n=>n.id!==t?n:{...n,...r,updatedAt:new Date().toISOString()});return{...s,sets:a}}function ma(s,t){const r=s.filter(n=>n!==t);return[t,...r].slice(0,5)}const tr="learning-assistant-skip-groups",ua=5*60*1e3;function fs(){try{const s=localStorage.getItem(tr);return s?JSON.parse(s):[]}catch(s){return p.error("ã‚¹ã‚­ãƒƒãƒ—ã‚°ãƒ«ãƒ¼ãƒ—ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",s),[]}}function ys(s){try{localStorage.setItem(tr,JSON.stringify(s))}catch(t){p.error("ã‚¹ã‚­ãƒƒãƒ—ã‚°ãƒ«ãƒ¼ãƒ—ã®ä¿å­˜ã‚¨ãƒ©ãƒ¼:",t)}}function sr(s){const t=fs(),r=Date.now(),a=t.find(n=>n.verificationStatus==="pending"&&r-n.timestamp<ua);a?a.words.includes(s)||a.words.push(s):t.push({timestamp:r,words:[s],verificationStatus:"pending",suspiciousWords:[]}),ys(t)}function rr(s){const t=fs(),r=ye(),a=t.find(n=>n.words.includes(s));a&&a.verificationStatus==="pending"&&(a.verificationStatus="suspicious",a.suspiciousWords=a.words.filter(n=>n!==s),a.suspiciousWords.forEach(n=>{if(r.wordProgress[n]){const i=r.wordProgress[n];delete i.skipExcludeUntil,i.masteryLevel="learning",i.consecutiveCorrect=0,i.needsVerification=!0,i.verificationReason=`åŒæ™‚æœŸã«ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã€Œ${s}ã€ãŒä¸æ­£è§£ã ã£ãŸãŸã‚`}}),Xe(r),ys(t),p.log(`AIå­¦ç¿’ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ: ã€Œ${s}ã€ãŒä¸æ­£è§£ã§ã—ãŸã€‚åŒæ™‚æœŸã«ã‚¹ã‚­ãƒƒãƒ—ã—ãŸ${a.suspiciousWords.length}å€‹ã®å˜èªã‚’å†å‡ºé¡Œå¯¾è±¡ã«ã—ã¾ã™ã€‚`))}function ar(s){const t=fs(),r=ye(),a=t.find(n=>n.words.includes(s));a&&(a.suspiciousWords=a.suspiciousWords.filter(i=>i!==s),a.words.every(i=>{const l=r.wordProgress[i];return l&&(l.correctCount>0||l.incorrectCount>0)})&&a.suspiciousWords.length===0&&(a.verificationStatus="verified"),r.wordProgress[s]&&(delete r.wordProgress[s].needsVerification,delete r.wordProgress[s].verificationReason),Xe(r),ys(t))}function ga(s,t){const r=ye(),a=new Map;t.forEach(d=>{a.set(d,{correct:0,total:0,mastered:0,wordCount:0})}),r.results.forEach(d=>{if(d.category&&a.has(d.category)){const u=a.get(d.category);u.correct+=d.score,u.total+=d.total}}),s.forEach(d=>{const u=d.category;if(!u||!a.has(u))return;const g=a.get(u);g.wordCount++;const x=r.wordProgress[d.word];if(x){const S=x.correctCount+x.incorrectCount,N=S===1&&x.correctCount===1||x.consecutiveCorrect>=3||x.skippedCount&&x.skippedCount>0,w=S>=3&&x.correctCount/S>=.8&&x.consecutiveCorrect>=2;(N||w)&&g.mastered++}});const n=[],i=[];a.forEach((d,u)=>{if(d.total===0&&d.wordCount===0)return;const g=d.total>0?d.correct/d.total*100:0,x=d.wordCount>0?d.mastered/d.wordCount*100:0,S=g*.6+x*.4;if(S<60){let N,w,b;S<40?(N="critical",w=100,b=14):S<50?(N="moderate",w=70,b=10):(N="minor",w=40,b=7),d.total<10&&(w+=20),n.push({category:u,accuracy:g,totalAttempts:d.total,masteredWords:d.mastered,totalWords:d.wordCount,weaknessLevel:N,priorityScore:w,estimatedImprovementDays:b})}else if(S>=75){let N;S>=90?N="expert":S>=80?N="proficient":N="good",i.push({category:u,accuracy:g,totalAttempts:d.total,masteredWords:d.mastered,totalWords:d.wordCount,strengthLevel:N})}}),n.sort((d,u)=>u.priorityScore-d.priorityScore),i.sort((d,u)=>u.accuracy-d.accuracy);const l=ha(a),o=xa(n),c=pa(n,i,l);return{weakCategories:n,strongCategories:i,balanceScore:l,improvementPlan:o,aiRecommendations:c}}function ha(s){const t=[];if(s.forEach(l=>{if(l.total>0){const o=l.correct/l.total*100;t.push(o)}}),t.length===0)return 50;const r=t.reduce((l,o)=>l+o,0)/t.length,a=t.reduce((l,o)=>l+Math.pow(o-r,2),0)/t.length,n=Math.sqrt(a),i=Math.max(0,Math.min(100,100-n*2));return Math.round(i)}function xa(s){const t=[],r={},a=[],n=s.slice(0,3);n.forEach(l=>{t.push(l.category);let o;l.weaknessLevel==="critical"?o=15:l.weaknessLevel==="moderate"?o=10:o=5,r[l.category]=o;const c={day:Math.ceil(l.estimatedImprovementDays/2),category:l.category,targetAccuracy:Math.min(l.accuracy+20,80),description:`${l.category}ã®æ­£ç­”ç‡ã‚’${Math.round(l.accuracy)}%ã‹ã‚‰${Math.min(l.accuracy+20,80)}%ã«æ”¹å–„`};a.push(c)});const i=n.length>0?Math.max(...n.map(l=>l.estimatedImprovementDays)):0;return{targetCategories:t,dailyQuestions:r,estimatedCompletionDays:i,milestones:a}}function pa(s,t,r){const a=[];if(s.length>0){const i=s[0];a.push(`ğŸ¯ æœ€å„ªå…ˆ: ã€Œ${i.category}ã€ã‚’é‡ç‚¹å­¦ç¿’ã—ã¾ã—ã‚‡ã†ï¼ˆç¾åœ¨${Math.round(i.accuracy)}% â†’ ç›®æ¨™80%ï¼‰`),i.weaknessLevel==="critical"&&a.push(`âš ï¸ ã€Œ${i.category}ã€ã¯é‡è¦ãªå¼±ç‚¹ã§ã™ã€‚æ¯æ—¥15å•ä»¥ä¸Šå–ã‚Šçµ„ã‚€ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™`),s.length>=3&&a.push(`ğŸ“š ${s.length}å€‹ã®å¼±ç‚¹åˆ†é‡ãŒã‚ã‚Šã¾ã™ã€‚1ã¤ãšã¤é›†ä¸­ã—ã¦æ”¹å–„ã—ã¾ã—ã‚‡ã†`)}if(r<50?a.push(`âš–ï¸ å­¦ç¿’ãƒãƒ©ãƒ³ã‚¹ãŒåã£ã¦ã„ã¾ã™ï¼ˆãƒãƒ©ãƒ³ã‚¹ã‚¹ã‚³ã‚¢: ${r}%ï¼‰ã€‚å¼±ç‚¹åˆ†é‡ã«æ™‚é–“ã‚’é…åˆ†ã—ã¾ã—ã‚‡ã†`):r>=80&&a.push(`âœ¨ ç´ æ™´ã‚‰ã—ã„ãƒãƒ©ãƒ³ã‚¹ã§ã™ï¼ï¼ˆãƒãƒ©ãƒ³ã‚¹ã‚¹ã‚³ã‚¢: ${r}%ï¼‰ã“ã®èª¿å­ã§ç¶™ç¶šã—ã¾ã—ã‚‡ã†`),t.length>0&&s.length>0){const i=t[0];a.push(`ğŸ’ª ã€Œ${i.category}ã€ã¯å¾—æ„åˆ†é‡ã§ã™ï¼ˆ${Math.round(i.accuracy)}%ï¼‰ã€‚ã“ã®å­¦ç¿’æ–¹æ³•ã‚’ä»–ã®åˆ†é‡ã«ã‚‚å¿œç”¨ã—ã¾ã—ã‚‡ã†`)}return s.length>0&&a.push("ğŸ§  AIå­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ ãŒå¼±ç‚¹åˆ†é‡ã®å•é¡Œã‚’è‡ªå‹•çš„ã«å„ªå…ˆå‡ºé¡Œã—ã¾ã™"),[...s,...t].reduce((i,l)=>i+l.totalAttempts,0)<50&&a.push("ğŸ“ˆ ã¾ã å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ãŒå°‘ãªã„ã§ã™ã€‚50å•ä»¥ä¸Šè§£ãã¨ã‚ˆã‚Šæ­£ç¢ºãªåˆ†æãŒã§ãã¾ã™"),a}function fa(s,t,r=30){if(t.length===0)return s.slice(0,r);const a=[],n=new Map,i=t.slice(0,3).reduce((g,x)=>g+x.priorityScore,0);t.slice(0,3).forEach(g=>{const x=Math.ceil(g.priorityScore/i*r*.7);n.set(g.category,x)}),t.slice(0,3).forEach(g=>{const x=n.get(g.category)||0,S=s.filter(k=>k.category===g.category),N=ye(),w=S.filter(k=>{const D=N.wordProgress[k.word];return D?D.consecutiveCorrect<3:!0}),b=Ft(w).slice(0,x);a.push(...b)});const l=r-a.length,o=new Set(t.slice(0,3).map(g=>g.category)),c=s.filter(g=>!o.has(g.category||"")),d=new Set(a.map(g=>g.word)),u=c.filter(g=>!d.has(g.word));return a.push(...Ft(u).slice(0,l)),Ft(a)}function Ft(s){const t=[...s];for(let r=t.length-1;r>0;r--){const a=Math.floor(Math.random()*(r+1));[t[r],t[a]]=[t[a],t[r]]}return t}function ya(s){const t={startDate:Date.now(),currentDay:1,targetCategories:s.improvementPlan.targetCategories,initialAccuracies:{},currentAccuracies:{},improvements:{},overallProgress:0,isCompleted:!1};s.weakCategories.forEach(r=>{s.improvementPlan.targetCategories.includes(r.category)&&(t.initialAccuracies[r.category]=r.accuracy,t.currentAccuracies[r.category]=r.accuracy,t.improvements[r.category]=0)}),localStorage.setItem("radar-improvement-progress",JSON.stringify(t))}function nr(){const s=localStorage.getItem("radar-improvement-progress");if(!s)return null;try{return JSON.parse(s)}catch{return null}}function ba(s){const t=nr();if(!t)return;const r=Math.floor((Date.now()-t.startDate)/(1e3*60*60*24));t.currentDay=r+1;let a=0;t.targetCategories.forEach(n=>{const i=s.weakCategories.find(c=>c.category===n),l=(i==null?void 0:i.accuracy)||80;t.currentAccuracies[n]=l;const o=l-t.initialAccuracies[n];t.improvements[n]=o,l>=80&&a++}),t.overallProgress=a/t.targetCategories.length*100,t.isCompleted=a===t.targetCategories.length,localStorage.setItem("radar-improvement-progress",JSON.stringify(t))}function va(s,t,r){const a=wa(r),n=ja(r),i=Na(t,r,a);return{word:s,attempts:r,confusedWith:n,learningCurve:a,predictionModel:i}}function wa(s){if(s.length===0)return{accuracyHistory:[],stabilityScore:0,stage:"initial",forgettingPattern:{typicalDecayDays:7,forgettingCount:0},efficiency:{attemptsToMastery:10,currentProgress:0,estimatedDaysToMastery:30}};const t=[],r=5;for(let k=0;k<s.length;k++){const D=Math.max(0,k-r+1),A=s.slice(D,k+1),j=A.filter(z=>z.wasCorrect).length/A.length*100;t.push({timestamp:s[k].timestamp,accuracy:j})}const a=s.slice(-10),n=a.map((k,D)=>{const A=Math.max(0,a.length-5),j=a.slice(A,D+1);return j.filter(z=>z.wasCorrect).length/j.length*100}),i=n.reduce((k,D)=>k+D,0)/n.length,l=n.reduce((k,D)=>k+Math.pow(D-i,2),0)/n.length,o=Math.sqrt(l),c=Math.max(0,Math.min(100,100-o/30*100)),d=a.filter(k=>k.wasCorrect).length/a.length;let u;s.length<3?u="initial":d<.3?u="struggling":d<.7&&c<50?u="improving":d>=.7&&c>=50?u="consolidating":d>=.9&&c>=80?u="mastered":u="improving";const g=s.filter(k=>!k.wasCorrect),x=g.length;let S=7;if(g.length>=2){const k=[];for(let D=1;D<g.length;D++){const A=(g[D].timestamp-g[D-1].timestamp)/864e5;k.push(A)}S=k.reduce((D,A)=>D+A,0)/k.length}const N=Math.min(100,(d*100+c)/2),w=s.length<5?10:Math.ceil(10/(N/100)),b=Math.max(1,Math.ceil((100-N)/5));return{accuracyHistory:t,stabilityScore:c,stage:u,forgettingPattern:{typicalDecayDays:S,lastForgetDate:g.length>0?g[g.length-1].timestamp:void 0,forgettingCount:x},efficiency:{attemptsToMastery:w,currentProgress:N,estimatedDaysToMastery:b}}}function ja(s){const t=new Map;return s.forEach(r=>{if(!r.wasCorrect&&r.userAnswer){const a=r.userAnswer;if(t.has(a)){const n=t.get(a);n.frequency++,n.lastConfusion=r.timestamp}else t.set(a,{confusedWord:r.userAnswer,frequency:1,lastConfusion:r.timestamp,confusionType:"meaning",similarity:.7})}}),Array.from(t.values()).sort((r,a)=>a.frequency-r.frequency).slice(0,5)}function Na(s,t,r){const a=t.slice(-5),n=a.length>0?a.filter(x=>x.wasCorrect).length/a.length*100:50,i=r.stabilityScore/100,l=t.length>0?(Date.now()-t[t.length-1].timestamp)/(1e3*60*60*24):0,o=t.slice(-10).filter(x=>!x.wasCorrect&&x.userAnswer),c=Math.min(1,o.length/5);let d=n;d+=i*20;const u=Math.exp(-l/r.forgettingPattern.typicalDecayDays);d*=u,d-=c*30,d=Math.max(0,Math.min(100,d));const g=Math.min(1,t.length/10);return{nextCorrectProbability:d,predictors:{recentAccuracy:n,stabilityFactor:i,timeSinceLastStudy:l,confusionRisk:c},confidence:g}}function Sa(s,t,r){const a=[];return s.forEach(n=>{const i=t[n.word],l=r.get(n.word),o=ka(n,i,l);a.push(o)}),a.sort((n,i)=>i.priority-n.priority)}function ka(s,t,r){if(!t||!r)return{word:s.word,priority:50,reason:"æ–°è¦å˜èª",strategy:"new_learning",estimatedSuccessRate:50,learningImpact:60};const a=r.learningCurve,n=r.predictionModel;switch(a.stage){case"struggling":return{word:s.word,priority:90,reason:`è‹¦æˆ¦ä¸­ï¼ˆæ­£ç­”ç‡${n.predictors.recentAccuracy.toFixed(0)}%ï¼‰`,strategy:"immediate_review",estimatedSuccessRate:n.nextCorrectProbability,learningImpact:80};case"improving":{const i=n.predictors.timeSinceLastStudy,l=i>=1&&i<=3;return{word:s.word,priority:l?85:70,reason:`æ”¹å–„ä¸­ï¼ˆ${i.toFixed(1)}æ—¥çµŒéã€æˆåŠŸç‡${n.nextCorrectProbability.toFixed(0)}%ï¼‰`,strategy:l?"consolidation":"spaced_repetition",estimatedSuccessRate:n.nextCorrectProbability,learningImpact:75}}case"consolidating":{const i=a.forgettingPattern.typicalDecayDays*.7,l=n.predictors.timeSinceLastStudy,o=Math.abs(l-i)<2;return{word:s.word,priority:o?60:40,reason:`å®šç€åŒ–ä¸­ï¼ˆæ¬¡å›å¾©ç¿’ã¾ã§${Math.max(0,i-l).toFixed(1)}æ—¥ï¼‰`,strategy:"spaced_repetition",estimatedSuccessRate:n.nextCorrectProbability,learningImpact:50}}case"mastered":return{word:s.word,priority:20,reason:"ç¿’å¾—æ¸ˆã¿ï¼ˆé•·æœŸè¨˜æ†¶ç¢ºèªï¼‰",strategy:"spaced_repetition",estimatedSuccessRate:n.nextCorrectProbability,learningImpact:20};default:return{word:s.word,priority:50,reason:"åˆæœŸæ®µéš",strategy:"new_learning",estimatedSuccessRate:50,learningImpact:60}}}function Ca(s,t){const r=s.filter(o=>o.strategy==="immediate_review");if(r.length===0)return s;const a=[],n=r.slice(0,3);a.push(...n);const i=s.filter(o=>o.strategy==="consolidation");i.length>0&&a.push(i[0]),n.length>0&&t>=10&&a.push(n[0]);const l=s.filter(o=>!a.includes(o));return a.push(...l),a.slice(0,t)}function $s(s,t){const a=(Date.now()-t)/(1e3*60),n=s.slice(-5),i=s.slice(-10),l=n.length>0?n.filter(D=>D.wasCorrect).length/n.length*100:100,o=i.length>0?i.filter(D=>D.wasCorrect).length/i.length*100:100,c=o-l>10,d=s.length>0?s.reduce((D,A)=>D+A.responseTime,0)/s.length:3e3,u=s.slice(-5).map(D=>D.responseTime),g=Da(u);let x=0;x+=Math.min(40,a*2),c&&(x+=25),g>1.3&&(x+=20),s.slice(-3).filter(D=>!D.wasCorrect).length>=2&&(x+=15),x=Math.min(100,Math.max(0,x));const N=100-x,w=new Date().getHours();let b;w>=6&&w<12?b="morning":w>=12&&w<18?b="afternoon":w>=18&&w<22?b="evening":b="night";const k=Ma(x,a,c);return{fatigueLevel:x,concentrationLevel:N,recentPerformance:{last5Accuracy:l,last10Accuracy:o,isDecreasing:c,averageResponseTime:d},sessionStats:{duration:a,questionsAnswered:s.length,correctCount:s.filter(D=>D.wasCorrect).length,startTime:t},breakRecommendation:k,timeOfDay:b}}function Da(s){if(s.length<2)return 1;const t=s.slice(-3),r=s.slice(0,Math.max(1,s.length-3)),a=t.reduce((i,l)=>i+l,0)/t.length,n=r.reduce((i,l)=>i+l,0)/r.length;return n>0?a/n:1}function Ma(s,t,r){if(s>=70)return{shouldBreak:!0,reason:"ç–²åŠ´ãŒè“„ç©ã—ã¦ã„ã¾ã™ã€‚5åˆ†ä¼‘æ†©ã—ã¦é›†ä¸­åŠ›ã‚’å›å¾©ã—ã¾ã—ã‚‡ã†ã€‚",suggestedDuration:5};if(t>=25&&s>=50)return{shouldBreak:!0,reason:"25åˆ†çµŒéã—ã¾ã—ãŸã€‚çŸ­ã„ä¼‘æ†©ã§åŠ¹ç‡ãŒã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚",suggestedDuration:5};if(r&&s>=40)return{shouldBreak:!0,reason:"æ­£ç­”ç‡ãŒä¸‹ãŒã£ã¦ã„ã¾ã™ã€‚ä¸€åº¦ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ã¾ã—ã‚‡ã†ã€‚",suggestedDuration:3}}function $a(s,t){const{fatigueLevel:r,concentrationLevel:a,timeOfDay:n,sessionStats:i}=t;return p.log(`ğŸ§  èªçŸ¥è² è·AI: ç–²åŠ´åº¦${r}%, é›†ä¸­åŠ›${a}%, æ™‚é–“å¸¯: ${n}`),r>=70?(p.log("  ğŸ’¤ ç–²åŠ´åº¦é«˜: ç°¡å˜ãªå¾©ç¿’å•é¡Œã‚’å„ªå…ˆ"),s.filter(l=>l.estimatedSuccessRate>=70||l.strategy==="spaced_repetition").map(l=>({...l,priority:l.priority+(l.estimatedSuccessRate>=80?20:0),reason:l.reason+" (ç–²åŠ´æ™‚ãƒ»æ˜“å•å„ªå…ˆ)"}))):r>=40?(p.log("  ğŸ˜ ç–²åŠ´åº¦ä¸­: ãƒãƒ©ãƒ³ã‚¹é‡è¦–"),s.map(l=>l.estimatedSuccessRate<40?{...l,priority:l.priority-20}:l)):a>=70&&i.duration<15?(p.log("  âš¡ é›†ä¸­åŠ›é«˜: æ–°è¦å˜èªãƒ»é›£å•ã‚’å„ªå…ˆ"),s.map(l=>l.strategy==="new_learning"?{...l,priority:l.priority+30,reason:l.reason+" (é›†ä¸­æ™‚ãƒ»æ–°è¦å„ªå…ˆ)"}:l.strategy==="immediate_review"&&l.estimatedSuccessRate<60?{...l,priority:l.priority+20,reason:l.reason+" (é›†ä¸­æ™‚ãƒ»é›£å•æŒ‘æˆ¦)"}:l)):Pa(s,n)}function Pa(s,t){switch(t){case"morning":return p.log("  ğŸŒ… æœ: æ–°è¦å­¦ç¿’ã‚’å„ªå…ˆ"),s.map(r=>r.strategy==="new_learning"?{...r,priority:r.priority+15,reason:r.reason+" (æœãƒ»æ–°è¦æœ€é©)"}:r);case"afternoon":return p.log("  â˜€ï¸ åˆå¾Œ: ãƒãƒ©ãƒ³ã‚¹å‹"),s;case"evening":return p.log("  ğŸŒ† å¤•æ–¹: å¾©ç¿’ä¸­å¿ƒ"),s.map(r=>r.strategy==="spaced_repetition"||r.strategy==="consolidation"?{...r,priority:r.priority+10,reason:r.reason+" (å¤•æ–¹ãƒ»å¾©ç¿’æœ€é©)"}:r);case"night":return p.log("  ğŸŒ™ å¤œ: è»½ã„å¾©ç¿’ã®ã¿"),s.filter(r=>r.strategy!=="new_learning"||r.estimatedSuccessRate>=60).map(r=>r.estimatedSuccessRate>=70?{...r,priority:r.priority+15,reason:r.reason+" (å¤œãƒ»å¾©ç¿’æ¨å¥¨)"}:r);default:return s}}function Aa(s){const{fatigueLevel:t,breakRecommendation:r}=s;return r!=null&&r.shouldBreak?`ğŸ’¡ ${r.reason}`:t>=60?"ğŸ˜Œ å°‘ã—ç–²ã‚Œã¦ããŸã‹ã‚‚ã€‚ç„¡ç†ã›ãšãƒã‚¤ãƒšãƒ¼ã‚¹ã§ï¼":t<=20?"âœ¨ é›†ä¸­åŠ›ãƒãƒƒãƒãƒªï¼ã“ã®èª¿å­ã§é ‘å¼µã‚ã†ï¼":""}function Ia(s,t){const r=new Map,a=[],n=[];let i=0;const l=t.slice(-10),o=l.length>0?l.filter(g=>!g.wasCorrect).length/l.length*100:0;Object.entries(s).forEach(([g,x])=>{i+=x.incorrectCount,x.learningHistory&&x.learningHistory.filter(N=>!N.wasCorrect).forEach(N=>{if(N.userAnswer&&Ra(g,N.userAnswer)&&r.set("similar_spelling",(r.get("similar_spelling")||0)+1),N.userAnswer){const w=a.find(b=>b.word1===g&&b.word2===N.userAnswer||b.word2===g&&b.word1===N.userAnswer);w?(w.confusionCount++,w.lastConfusion=N.timestamp):N.userAnswer!==g&&a.push({word1:g,word2:N.userAnswer,confusionCount:1,lastConfusion:N.timestamp,pattern:"confusion_pair"})}})});const c=t.slice(-5),d=c.length>0?c.filter(g=>!g.wasCorrect).length/c.length*100:0,u=d<o-10?"improving":d>o+10?"declining":"stable";return{totalErrors:i,errorsByPattern:r,confusionPairs:a.sort((g,x)=>x.confusionCount-g.confusionCount),weakCategories:n,recentErrorRate:o,errorTrend:u}}function _a(s,t,r,a,n){const i=[];let l=30;if(t){const x=t.correctCount+t.incorrectCount;if(x>0){const S=t.incorrectCount/x*100;S>50&&(l+=30,i.push({type:"category_weakness",weight:.3,description:"ã“ã®å˜èªã®éå»ã®èª¤ç­”ç‡ãŒé«˜ã„",evidence:[`èª¤ç­”ç‡: ${S.toFixed(0)}%`]}))}if(t.learningHistory&&t.learningHistory.length>0){const S=t.learningHistory.slice(-3),N=S.filter(w=>!w.wasCorrect).length/S.length*100;N>66&&(l+=25,i.push({type:"timing_based",weight:.25,description:"æœ€è¿‘3å›ã®ã†ã¡2å›ä»¥ä¸Šé–“é•ãˆã¦ã„ã‚‹",evidence:[`ç›´è¿‘3å›ã®èª¤ç­”ç‡: ${N.toFixed(0)}%`]}))}if(t.lastStudied){const S=(Date.now()-t.lastStudied)/864e5;if(S>7){const N=Math.min(20,S*2);l+=N,i.push({type:"timing_based",weight:N/100,description:"å‰å›ã®å¾©ç¿’ã‹ã‚‰æ™‚é–“ãŒçµŒéã—ã¦ã„ã‚‹",evidence:[`${S.toFixed(1)}æ—¥å‰ã«å¾©ç¿’`]})}}}else l+=20,i.push({type:"category_weakness",weight:.2,description:"ã¾ã å­¦ç¿’ã—ãŸã“ã¨ãŒãªã„å˜èª",evidence:["åˆè¦‹"]});const o=r.confusionPairs.find(x=>x.word1===s||x.word2===s);if(o&&o.confusionCount>=2){l+=15;const x=o.word1===s?o.word2:o.word1;i.push({type:"confusion_pair",weight:.15,description:`"${x}"ã¨æ··åŒã—ã‚„ã™ã„`,evidence:[`${o.confusionCount}å›æ··åŒ`]})}if(a>60){const x=(a-60)/2;l+=x,i.push({type:"timing_based",weight:x/100,description:"ç–²åŠ´ã«ã‚ˆã‚Šé›†ä¸­åŠ›ãŒä½ä¸‹ã—ã¦ã„ã‚‹",evidence:[`ç–²åŠ´åº¦: ${a.toFixed(0)}%`]})}r.errorTrend==="declining"&&(l+=10,i.push({type:"category_weakness",weight:.1,description:"å…¨ä½“çš„ã«èª¤ç­”ç‡ãŒä¸Šæ˜‡å‚¾å‘",evidence:[`æœ€è¿‘10å•ã®èª¤ç­”ç‡: ${r.recentErrorRate.toFixed(0)}%`]}));const c=Math.min(100,Math.max(0,l)),d=c>=80?"critical":c>=60?"high":c>=40?"medium":"low",u=Ta(s,c,d,i,o),g=Ea(t,i.length);return{word:s,errorRisk:c,confidence:g,primaryPattern:i.length>0?i[0].type:"category_weakness",riskFactors:i,warningLevel:d,suggestedSupport:u}}function Ta(s,t,r,a,n){const i=[],l=[];let o="",c="";return r==="critical"?(o=`âš ï¸ æ³¨æ„: ã“ã®å•é¡Œã¯é–“é•ãˆã‚„ã™ã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼ˆãƒªã‚¹ã‚¯: ${t.toFixed(0)}%ï¼‰`,c="è½ã¡ç€ã„ã¦ã€ã—ã£ã‹ã‚Šè€ƒãˆã¦ã‹ã‚‰ç­”ãˆã¾ã—ã‚‡ã†ï¼"):r==="high"?(o=`ğŸ”” ã“ã®å•é¡Œã¯å°‘ã—é›£ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼ˆãƒªã‚¹ã‚¯: ${t.toFixed(0)}%ï¼‰`,c="ã‚†ã£ãã‚Šè€ƒãˆã‚Œã°å¤§ä¸ˆå¤«ã§ã™ï¼"):r==="medium"&&(o=`ğŸ’¡ æ…é‡ã«ç­”ãˆã¦ãã ã•ã„ï¼ˆãƒªã‚¹ã‚¯: ${t.toFixed(0)}%ï¼‰`,c="è½ã¡ç€ã„ã¦å–ã‚Šçµ„ã¿ã¾ã—ã‚‡ã†ï¼"),a.forEach(d=>{switch(d.type){case"confusion_pair":if(n){const u=n.word1===s?n.word2:n.word1;i.push(`"${u}"ã¨æ··åŒã—ãªã„ã‚ˆã†ã«æ³¨æ„`),l.push(u)}break;case"similar_spelling":i.push("ç¶´ã‚Šã‚’ã‚ˆãç¢ºèªã—ã¾ã—ã‚‡ã†");break;case"timing_based":d.description.includes("æ™‚é–“ãŒçµŒé")?i.push("å‰å›ã®å¾©ç¿’ã‹ã‚‰æ™‚é–“ãŒçµŒã£ã¦ã„ã¾ã™ã€‚æ„å‘³ã‚’æ€ã„å‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†"):d.description.includes("ç–²åŠ´")&&i.push("ç–²ã‚Œã¦ã„ã‚‹ã¨ãã¯ç„¦ã‚‰ãšã€ã‚†ã£ãã‚Šè€ƒãˆã¾ã—ã‚‡ã†");break;case"category_weakness":i.push("ã“ã®å˜èªã¯éå»ã«é–“é•ãˆã¦ã„ã¾ã™ã€‚æ…é‡ã«ï¼");break}}),{showWarning:r!=="low",warningMessage:o,hints:i.slice(0,2),reviewWords:l,confidenceBooster:c}}function Ea(s,t){let r=50;if(s){const a=s.correctCount+s.incorrectCount;r+=Math.min(30,a*5),s.learningHistory&&s.learningHistory.length>=3&&(r+=10)}return r+=Math.min(10,t*3),Math.min(100,r)}function Ra(s,t){const r=Wa(s.toLowerCase(),t.toLowerCase());return r>0&&r<=2}function Wa(s,t){const r=[];for(let a=0;a<=t.length;a++)r[a]=[a];for(let a=0;a<=s.length;a++)r[0][a]=a;for(let a=1;a<=t.length;a++)for(let n=1;n<=s.length;n++)t.charAt(a-1)===s.charAt(n-1)?r[a][n]=r[a-1][n-1]:r[a][n]=Math.min(r[a-1][n-1]+1,r[a][n-1]+1,r[a-1][n]+1);return r[t.length][s.length]}function La(s,t,r,a,n){const i=new Map;return s.forEach(l=>{const o=_a(l,t[l],r,a);i.set(l,o)}),i}const ir={emotions:{name:"æ„Ÿæƒ…",keywords:["happy","sad","angry","excited","worried","nervous","calm","joy","fear","love","hate","surprise"],relatedCategories:["å½¢å®¹è©"]},movement:{name:"å‹•ä½œãƒ»ç§»å‹•",keywords:["walk","run","jump","fly","swim","climb","move","go","come","enter","leave","return"],relatedCategories:["å‹•è©"]},time:{name:"æ™‚é–“",keywords:["day","night","morning","evening","week","month","year","today","tomorrow","yesterday","always","never","sometimes"],relatedCategories:["åè©","å‰¯è©"]},weather:{name:"å¤©æ°—",keywords:["sunny","rainy","cloudy","windy","snowy","hot","cold","warm","cool","weather","temperature"],relatedCategories:["å½¢å®¹è©","åè©"]},food:{name:"é£Ÿã¹ç‰©",keywords:["food","eat","drink","cook","meal","breakfast","lunch","dinner","hungry","thirsty","delicious"],relatedCategories:["åè©","å‹•è©","å½¢å®¹è©"]},nature:{name:"è‡ªç„¶",keywords:["tree","flower","mountain","river","sea","sky","sun","moon","star","nature","plant","animal"],relatedCategories:["åè©"]},family:{name:"å®¶æ—ãƒ»äººé–“é–¢ä¿‚",keywords:["family","father","mother","brother","sister","parent","child","friend","teacher","student"],relatedCategories:["åè©"]},size:{name:"å¤§ãã•ãƒ»ç¨‹åº¦",keywords:["big","small","large","tiny","huge","long","short","tall","high","low","wide","narrow"],relatedCategories:["å½¢å®¹è©"]},communication:{name:"ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³",keywords:["say","speak","talk","tell","ask","answer","listen","hear","write","read","call","email"],relatedCategories:["å‹•è©"]},learning:{name:"å­¦ç¿’",keywords:["learn","study","teach","understand","know","remember","forget","practice","improve","test","exam"],relatedCategories:["å‹•è©","åè©"]}},or=[["big","small"],["large","small"],["long","short"],["tall","short"],["high","low"],["wide","narrow"],["deep","shallow"],["heavy","light"],["strong","weak"],["hard","soft"],["hot","cold"],["warm","cool"],["fast","slow"],["quick","slow"],["early","late"],["young","old"],["new","old"],["happy","sad"],["good","bad"],["right","wrong"],["easy","difficult"],["simple","complex"],["start","end"],["begin","finish"],["open","close"],["love","hate"],["day","night"],["morning","evening"],["always","never"],["often","rarely"],["many","few"],["much","little"],["more","less"],["increase","decrease"],["rise","fall"],["up","down"],["front","back"],["before","after"],["first","last"],["enter","leave"],["come","go"],["push","pull"],["give","take"],["buy","sell"],["win","lose"],["remember","forget"],["find","lose"]],lr=[["big","large","huge","enormous"],["small","little","tiny"],["happy","glad","joyful","pleased"],["sad","unhappy","sorrowful"],["angry","mad","furious"],["beautiful","pretty","lovely"],["ugly","unattractive"],["important","significant","essential"],["difficult","hard","tough","challenging"],["easy","simple"],["fast","quick","rapid","swift"],["slow","sluggish"],["smart","intelligent","clever","bright"],["stupid","foolish","dumb"],["funny","amusing","humorous"],["boring","dull","tedious"],["interesting","fascinating","engaging"],["tired","exhausted","weary"],["afraid","scared","frightened","terrified"],["brave","courageous","bold"],["kind","nice","gentle","friendly"],["mean","cruel","unkind"],["rich","wealthy","affluent"],["poor","needy"],["famous","well-known","renowned"],["strange","odd","weird","unusual"],["normal","ordinary","common","typical"]];function Oa(s,t){const r=[],a=new Set;Object.entries(ir).forEach(([i,l])=>{const o=s.filter(c=>{const d=c.word.toLowerCase(),u=c.meaning.toLowerCase();return l.keywords.some(g=>d.includes(g)||u.includes(g))&&!a.has(c.word)}).map(c=>c.word);if(o.length>=2){o.forEach(u=>a.add(u));const d=50+o.filter(u=>{const g=t[u];return g&&g.incorrectCount>g.correctCount}).length/o.length*50;r.push({id:`theme_${i}`,name:l.name,theme:i,words:o,relationType:"theme",priority:d})}}),or.forEach((i,l)=>{const[o,c]=i,d=s.filter(u=>{const g=u.word.toLowerCase();return(g===o||g===c)&&!a.has(u.word)}).map(u=>u.word);d.length===2&&(d.forEach(u=>a.add(u)),r.push({id:`antonym_${l}`,name:`å¯¾ç¾©èª: ${o} â‡” ${c}`,theme:"antonyms",words:d,relationType:"antonym",priority:70}))}),lr.forEach((i,l)=>{const o=s.filter(c=>{const d=c.word.toLowerCase();return i.includes(d)&&!a.has(c.word)}).map(c=>c.word);o.length>=2&&(o.forEach(c=>a.add(c)),r.push({id:`synonym_${l}`,name:`é¡ç¾©èª: ${i.join(", ")}`,theme:"synonyms",words:o,relationType:"synonym",priority:60}))});const n=new Map;return s.forEach(i=>{if(!a.has(i.word)&&i.category){const l=n.get(i.category)||[];l.push(i.word),n.set(i.category,l)}}),n.forEach((i,l)=>{i.length>=3&&(i.forEach(o=>a.add(o)),r.push({id:`category_${l}`,name:`ã‚«ãƒ†ã‚´ãƒªãƒ¼: ${l}`,theme:l,words:i,relationType:"category",priority:40}))}),r.sort((i,l)=>l.priority-i.priority)}function za(s,t){const r=s.toLowerCase(),a=t.toLowerCase();for(const n of or)if(n[0]===r&&n[1]===a||n[0]===a&&n[1]===r)return{word1:s,word2:t,relationType:"antonym",strength:.9,description:`"${s}"ã¨"${t}"ã¯å¯¾ç¾©èª`};for(const n of lr)if(n.includes(r)&&n.includes(a))return{word1:s,word2:t,relationType:"synonym",strength:.8,description:`"${s}"ã¨"${t}"ã¯é¡ç¾©èª`};for(const[,n]of Object.entries(ir)){const i=n.keywords.some(o=>r.includes(o)||o.includes(r)),l=n.keywords.some(o=>a.includes(o)||o.includes(a));if(i&&l)return{word1:s,word2:t,relationType:"theme",strength:.6,description:`"${s}"ã¨"${t}"ã¯åŒã˜ãƒ†ãƒ¼ãƒï¼ˆ${n.name}ï¼‰`}}return null}function Fa(s,t,r=[]){const a=Oa(s,t),n=[],i=[],l=new Set;return r.forEach(o=>l.add(o)),a.forEach(o=>{const c=o.words.filter(u=>!l.has(u));if(c.length===0)return;c.sort((u,g)=>{const x=t[u],S=t[g];if(!x&&!S)return 0;if(!x)return-1;if(!S)return 1;const N=x.incorrectCount/(x.correctCount+x.incorrectCount||1);return S.incorrectCount/(S.correctCount+S.incorrectCount||1)-N}).forEach(u=>{if(l.has(u))return;const g=n[n.length-1];if(g){const x=za(g,u);i.push({from:g,to:u,reason:x?x.description:`åŒã˜ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ï¼ˆ${o.name}ï¼‰`})}n.push(u),l.add(u)})}),s.forEach(o=>{l.has(o.word)||(n.push(o.word),l.add(o.word))}),{clusters:a,sequence:n,transitions:i}}function cr(s=Date.now()){const t=new Date(s).getHours();return t>=5&&t<12?"morning":t>=12&&t<17?"afternoon":t>=17&&t<21?"evening":"night"}function qa(s,t,r,a,n,i,l,o){const c=(t-s)/6e4,d=r>0?a/r*100:0;return{sessionId:`session_${s}`,startTime:s,endTime:t,duration:c,timeOfDay:cr(s),questionsAnswered:r,correctAnswers:a,accuracy:d,averageResponseTime:n,fatigueLevel:i,newWordsLearned:l,reviewedWords:o}}function Ba(s){return["morning","afternoon","evening","night"].map(r=>{const a=s.filter(w=>w.timeOfDay===r);if(a.length===0)return{timeOfDay:r,sessionCount:0,totalQuestions:0,averageAccuracy:0,averageResponseTime:0,averageFatigue:0,efficiencyScore:0,bestForNewLearning:!1,bestForReview:!1};const n=a.reduce((w,b)=>w+b.questionsAnswered,0),l=a.reduce((w,b)=>w+b.correctAnswers,0)/n*100,o=a.reduce((w,b)=>w+b.averageResponseTime,0)/a.length,c=a.reduce((w,b)=>w+b.fatigueLevel,0)/a.length,d=a.reduce((w,b)=>w+b.newWordsLearned,0),u=a.reduce((w,b)=>w+b.reviewedWords,0),g=l,x=Math.max(0,100-o/50),S=100-c,N=g*.4+x*.3+S*.3;return{timeOfDay:r,sessionCount:a.length,totalQuestions:n,averageAccuracy:l,averageResponseTime:o,averageFatigue:c,efficiencyScore:N,bestForNewLearning:d>u,bestForReview:u>=d}}).sort((r,a)=>a.efficiencyScore-r.efficiencyScore)}function Qa(s){if(s.length===0)return{optimalDuration:15,currentAverageDuration:0,performanceByDuration:[],recommendation:"å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚ã¾ãšã¯15åˆ†ç¨‹åº¦ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚"};const t=s.reduce((o,c)=>o+c.duration,0)/s.length,a=[{min:0,max:5,label:"0-5åˆ†"},{min:5,max:10,label:"5-10åˆ†"},{min:10,max:15,label:"10-15åˆ†"},{min:15,max:20,label:"15-20åˆ†"},{min:20,max:30,label:"20-30åˆ†"},{min:30,max:999,label:"30åˆ†ä»¥ä¸Š"}].map(o=>{const c=s.filter(x=>x.duration>=o.min&&x.duration<o.max);if(c.length===0)return{durationRange:o.label,accuracy:0,efficiency:0};const d=c.reduce((x,S)=>x+S.accuracy,0)/c.length,u=c.reduce((x,S)=>x+S.fatigueLevel,0)/c.length,g=d-u*.5;return{durationRange:o.label,accuracy:d,efficiency:g}}).filter(o=>o.efficiency>0),n=a.reduce((o,c)=>c.efficiency>o.efficiency?c:o,a[0]||{durationRange:"10-15åˆ†",efficiency:0}),i=n?parseInt(n.durationRange.split("-")[0])+5:15;let l="";return i<10?l=`çŸ­æœŸé›†ä¸­å‹ã®å­¦ç¿’ãŒåŠ¹æœçš„ã§ã™ã€‚${i}åˆ†ç¨‹åº¦ã®çŸ­ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’1æ—¥è¤‡æ•°å›è¡Œã†ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚`:i<20?l=`${i}åˆ†ç¨‹åº¦ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæœ€ã‚‚åŠ¹ç‡çš„ã§ã™ã€‚ã“ã®é•·ã•ã‚’ç›®å®‰ã«å­¦ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ã€‚`:l=`é•·æ™‚é–“ã®å­¦ç¿’ãŒå¾—æ„ãªã‚ˆã†ã§ã™ã€‚${i}åˆ†ç¨‹åº¦ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§æ·±ã„å­¦ç¿’ãŒã§ãã¾ã™ã€‚ãŸã ã—ã€ç–²åŠ´ã«æ³¨æ„ã—ã¾ã—ã‚‡ã†ã€‚`,{optimalDuration:i,currentAverageDuration:t,performanceByDuration:a,recommendation:l}}function Ga(s){if(s.length<5)return"moderate";const t=s.reduce((n,i)=>n+i.duration,0)/s.length,r=new Set(s.map(n=>new Date(n.startTime).toDateString())),a=s.length/r.size;return t<10&&a>=2?"distributed":t<10?"short_burst":t<20?"moderate":"extended"}function Ua(s,t){var x,S,N;const r=Ga(t),a=Ba(t),n=Qa(t),i=((x=a[0])==null?void 0:x.timeOfDay)||"morning",l=n.optimalDuration;let o=1;r==="distributed"||r==="short_burst"?o=3:r==="moderate"&&(o=2);const c=[],d=[];((S=a[0])==null?void 0:S.averageAccuracy)>80&&c.push(`${a[0].timeOfDay}ã®å­¦ç¿’ãŒå¾—æ„ï¼ˆæ­£ç­”ç‡${a[0].averageAccuracy.toFixed(0)}%ï¼‰`),r==="distributed"?c.push("åˆ†æ•£å­¦ç¿’ã«ã‚ˆã‚Šè¨˜æ†¶ã®å®šç€ãŒè‰¯å¥½"):r==="extended"&&c.push("é•·æ™‚é–“ã®é›†ä¸­å­¦ç¿’ãŒå¯èƒ½"),t.reduce((w,b)=>w+b.fatigueLevel,0)/t.length>60&&d.push("ç–²åŠ´ãƒ¬ãƒ™ãƒ«ãŒé«˜ã‚ã€‚ä¼‘æ†©ã‚’å¢—ã‚„ã™ã‹ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“ã‚’çŸ­ç¸®ã—ã¦ã¿ã¾ã—ã‚‡ã†"),((N=a[a.length-1])==null?void 0:N.averageAccuracy)<60&&d.push(`${a[a.length-1].timeOfDay}ã®å­¦ç¿’åŠ¹ç‡ãŒä½ã„ãŸã‚ã€é¿ã‘ã‚‹ã“ã¨ã‚’æ¨å¥¨`);const g=[];return g.push(`æœ€é©ãªå­¦ç¿’æ™‚é–“å¸¯: ${i==="morning"?"æœ":i==="afternoon"?"åˆå¾Œ":i==="evening"?"å¤•æ–¹":"å¤œ"}`),g.push(`æ¨å¥¨ã‚»ãƒƒã‚·ãƒ§ãƒ³é•·: ${l}åˆ†`),g.push(`1æ—¥ã®æ¨å¥¨å­¦ç¿’å›æ•°: ${o}å›`),r==="distributed"?g.push("çŸ­ã„å­¦ç¿’ã‚’è¤‡æ•°å›è¡Œã†ã‚¹ã‚¿ã‚¤ãƒ«ãŒåŠ¹æœçš„ã§ã™ã€‚æœãƒ»æ˜¼ãƒ»å¤œã«åˆ†ã‘ã¦å­¦ç¿’ã—ã¾ã—ã‚‡ã†"):r==="extended"&&g.push("é•·æ™‚é–“ã®å­¦ç¿’ãŒå¾—æ„ã§ã™ã€‚é€±æœ«ãªã©ã«ã¾ã¨ã‚ã¦å­¦ç¿’ã™ã‚‹æ–¹æ³•ã‚‚æœ‰åŠ¹ã§ã™"),{userId:s,primaryStyle:r,bestTimeOfDay:i,optimalSessionLength:l,optimalDailyFrequency:o,strengths:c,improvements:d,personalizedRecommendations:g}}function Ha(s){try{const t="learning-style-sessions",r=localStorage.getItem(t),a=r?JSON.parse(r):[];a.push(s);const n=a.slice(-100);localStorage.setItem(t,JSON.stringify(n))}catch(t){p.error("Failed to save session history:",t)}}function Va(){try{const t=localStorage.getItem("learning-style-sessions");return t?JSON.parse(t):[]}catch(s){return p.error("Failed to load session history:",s),[]}}function Ja(s,t){const r=t===s.bestTimeOfDay,a={morning:"æœ",afternoon:"åˆå¾Œ",evening:"å¤•æ–¹",night:"å¤œ"};return r?`âœ¨ ä»Šã¯${a[t]}ã§ã™ã€‚ã‚ãªãŸã®æœ€ã‚‚å­¦ç¿’åŠ¹ç‡ãŒé«˜ã„æ™‚é–“å¸¯ã§ã™ï¼${s.optimalSessionLength}åˆ†ç¨‹åº¦ã®å­¦ç¿’ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚`:`ğŸ’¡ ${a[s.bestTimeOfDay]}ã®å­¦ç¿’ãŒæœ€ã‚‚åŠ¹æœçš„ã§ã™ã€‚ç¾åœ¨ã¯${a[t]}ãªã®ã§ã€è»½ã‚ã®å¾©ç¿’ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚`}const Ya={first_session:{type:"first_session",name:"å­¦ç¿’é–‹å§‹",description:"åˆã‚ã¦ã®å­¦ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å®Œäº†",icon:"ğŸ“",rarity:"common"},streak_3_days:{type:"streak_3_days",name:"ä¸‰æ—¥åŠä¸»å…‹æœ",description:"3æ—¥é€£ç¶šã§å­¦ç¿’",icon:"ğŸ”¥",rarity:"common"},streak_7_days:{type:"streak_7_days",name:"ä¸€é€±é–“ã®ç¿’æ…£",description:"7æ—¥é€£ç¶šã§å­¦ç¿’",icon:"â­",rarity:"rare"},streak_30_days:{type:"streak_30_days",name:"ç¿’æ…£ã®é”äºº",description:"30æ—¥é€£ç¶šã§å­¦ç¿’",icon:"ğŸ†",rarity:"epic"},total_100_words:{type:"total_100_words",name:"ç™¾å˜èª",description:"ç´¯è¨ˆ100å˜èªã‚’å­¦ç¿’",icon:"ğŸ“š",rarity:"common"},total_500_words:{type:"total_500_words",name:"äº”ç™¾å˜èª",description:"ç´¯è¨ˆ500å˜èªã‚’å­¦ç¿’",icon:"ğŸ“–",rarity:"rare"},total_1000_words:{type:"total_1000_words",name:"åƒå˜èªãƒã‚¹ã‚¿ãƒ¼",description:"ç´¯è¨ˆ1000å˜èªã‚’å­¦ç¿’",icon:"ğŸ–ï¸",rarity:"epic"},perfect_session:{type:"perfect_session",name:"ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆ",description:"1ã‚»ãƒƒã‚·ãƒ§ãƒ³å…¨å•æ­£è§£",icon:"ğŸ’¯",rarity:"rare"},accuracy_90:{type:"accuracy_90",name:"é«˜ç²¾åº¦",description:"æ­£ç­”ç‡90%ä»¥ä¸Šã‚’10å›é”æˆ",icon:"ğŸ¯",rarity:"rare"},accuracy_95:{type:"accuracy_95",name:"è¶…é«˜ç²¾åº¦",description:"æ­£ç­”ç‡95%ä»¥ä¸Šã‚’10å›é”æˆ",icon:"ğŸ’",rarity:"epic"},early_bird:{type:"early_bird",name:"æ—©èµ·ãé³¥",description:"æœï¼ˆ6-9æ™‚ï¼‰ã«5å›å­¦ç¿’",icon:"ğŸŒ…",rarity:"common"},night_owl:{type:"night_owl",name:"å¤œå‹å­¦ç¿’",description:"å¤œï¼ˆ21-24æ™‚ï¼‰ã«5å›å­¦ç¿’",icon:"ğŸŒ™",rarity:"common"},speed_master:{type:"speed_master",name:"ã‚¹ãƒ”ãƒ¼ãƒ‰ãƒã‚¹ã‚¿ãƒ¼",description:"å¹³å‡å¿œç­”æ™‚é–“2ç§’ä»¥ä¸‹ã‚’10å›é”æˆ",icon:"âš¡",rarity:"rare"},review_champion:{type:"review_champion",name:"å¾©ç¿’ãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³",description:"è¦å¾©ç¿’å˜èª50å€‹ã‚’ãƒã‚¹ã‚¿ãƒ¼",icon:"â™»ï¸",rarity:"rare"},master_100:{type:"master_100",name:"ç™¾å˜èªãƒã‚¹ã‚¿ãƒ¼",description:"100å˜èªã‚’å®Œå…¨ç¿’å¾—",icon:"ğŸ‘‘",rarity:"epic"},comeback:{type:"comeback",name:"ã‚«ãƒ ãƒãƒƒã‚¯",description:"1é€±é–“ä»¥ä¸Šã®ä¸­æ–­å¾Œã«å†é–‹",icon:"ğŸ’ª",rarity:"common"},marathon:{type:"marathon",name:"ãƒãƒ©ã‚½ãƒ³ãƒ©ãƒ³ãƒŠãƒ¼",description:"1æ™‚é–“ä»¥ä¸Šã®å­¦ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³",icon:"ğŸƒ",rarity:"rare"},focused:{type:"focused",name:"é›†ä¸­åŠ›ã®æ¥µã¿",description:"é›†ä¸­åŠ›ã®é«˜ã„å­¦ç¿’ã‚’10å›",icon:"ğŸ§˜",rarity:"rare"}},dr=s=>Math.floor(100*Math.pow(1.15,s-1)),mt={CORRECT_ANSWER:10,PERFECT_SESSION:100,STREAK_BONUS_PER_DAY:5,SESSION_COMPLETION:50,BADGE_EARNED:200},mr=()=>{const s=localStorage.getItem("gamificationStats");if(s){const t=JSON.parse(s);return t.lastSessionDate&&(t.lastSessionDate=new Date(t.lastSessionDate)),t.badges=t.badges.map(r=>({...r,earnedAt:r.earnedAt?new Date(r.earnedAt):void 0})),t.milestones=t.milestones.map(r=>({...r,completedAt:r.completedAt?new Date(r.completedAt):void 0})),t.challenges=t.challenges.map(r=>({...r,startDate:new Date(r.startDate),endDate:new Date(r.endDate)})),t}return{level:{level:1,currentXP:0,requiredXP:dr(1),totalXP:0},badges:[],streak:{current:0,longest:0,lastStudyDate:""},milestones:Xa(),challenges:[],totalSessions:0,totalWordsLearned:0,totalCorrectAnswers:0,averageAccuracy:0}},Ka=s=>{localStorage.setItem("gamificationStats",JSON.stringify(s))},Xa=()=>[{id:"first_10_words",title:"æœ€åˆã®10å˜èª",description:"10å˜èªã‚’å­¦ç¿’ã™ã‚‹",target:10,current:0,reward:{xp:100},completed:!1},{id:"first_50_words",title:"50å˜èªé”æˆ",description:"50å˜èªã‚’å­¦ç¿’ã™ã‚‹",target:50,current:0,reward:{xp:300,badge:"total_100_words"},completed:!1},{id:"accuracy_80",title:"æ­£ç­”ç‡80%",description:"æ­£ç­”ç‡80%ä»¥ä¸Šã‚’é”æˆ",target:80,current:0,reward:{xp:200},completed:!1}],Za=(s,t)=>{const r={...s};r.level.currentXP+=t,r.level.totalXP+=t;let a=!1,n;for(;r.level.currentXP>=r.level.requiredXP;)r.level.currentXP-=r.level.requiredXP,r.level.level+=1,r.level.requiredXP=dr(r.level.level),a=!0,n=r.level.level;return{stats:r,leveledUp:a,newLevel:n}},en=s=>{const t=new Date().toISOString().split("T")[0],r=s.streak.lastStudyDate;if(!r)return{...s,streak:{current:1,longest:1,lastStudyDate:t}};if(r===t)return s;const a=new Date;a.setDate(a.getDate()-1);const n=a.toISOString().split("T")[0];if(r===n){const i=s.streak.current+1;return{...s,streak:{current:i,longest:Math.max(i,s.streak.longest),lastStudyDate:t}}}else return{...s,streak:{current:1,longest:s.streak.longest,lastStudyDate:t}}},tn=(s,t)=>{const r=[],a=new Set(s.badges.map(o=>o.type)),n=o=>{if(!a.has(o)){const c={...Ya[o],earnedAt:new Date};r.push(c),a.add(o)}};s.totalSessions===1&&!a.has("first_session")&&n("first_session"),s.streak.current>=3&&n("streak_3_days"),s.streak.current>=7&&n("streak_7_days"),s.streak.current>=30&&n("streak_30_days"),s.totalWordsLearned>=100&&n("total_100_words"),s.totalWordsLearned>=500&&n("total_500_words"),s.totalWordsLearned>=1e3&&n("total_1000_words"),t.perfectScore&&n("perfect_session");const i=s.totalSessions;return t.accuracy>=90&&i>=10&&n("accuracy_90"),t.accuracy>=95&&i>=10&&n("accuracy_95"),t.timeOfDay==="morning"&&s.totalSessions>=5&&n("early_bird"),t.timeOfDay==="night"&&s.totalSessions>=5&&n("night_owl"),t.avgResponseTime<=2e3&&s.totalSessions>=10&&n("speed_master"),t.sessionDuration>=60&&n("marathon"),t.focused&&s.totalSessions>=10&&n("focused"),s.lastSessionDate&&(new Date().getTime()-s.lastSessionDate.getTime())/864e5>=7&&n("comeback"),{stats:{...s,badges:[...s.badges,...r]},newBadges:r}},sn=s=>{const t=[],r=s.milestones.map(a=>{if(a.completed)return a;let n=a.current;if(a.id.includes("words")?n=s.totalWordsLearned:a.id.includes("accuracy")&&(n=s.averageAccuracy),n>=a.target&&!a.completed){const l={...a,current:n,completed:!0,completedAt:new Date};return t.push(l),l}return{...a,current:n}});return{stats:{...s,milestones:r},completedMilestones:t}},rn=(s,t,r,a,n,i)=>{let l=mr();const o=[];let c=0;l.totalSessions+=1,l.totalWordsLearned+=n,l.totalCorrectAnswers+=s,l.averageAccuracy=(l.averageAccuracy*(l.totalSessions-1)+s/t*100)/l.totalSessions,l.lastSessionDate=new Date;const d=l.streak.current;l=en(l),l.streak.current>d&&(o.push({type:"streak",message:`ğŸ”¥ ${l.streak.current}æ—¥é€£ç¶šå­¦ç¿’ï¼`,icon:"ğŸ”¥",priority:4}),c+=mt.STREAK_BONUS_PER_DAY*l.streak.current);const u=s/t*100,g=s===t;c+=s*mt.CORRECT_ANSWER,c+=mt.SESSION_COMPLETION,g&&(c+=mt.PERFECT_SESSION,o.push({type:"praise",message:"ğŸ’¯ ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆï¼å…¨å•æ­£è§£ã§ã™ï¼",icon:"ğŸ’¯",priority:5}));const x=new Date().getHours();let S;x>=6&&x<12?S="morning":x>=12&&x<18?S="afternoon":x>=18&&x<21?S="evening":S="night";const N=i<.3,w=tn(l,{accuracy:u,avgResponseTime:r,perfectScore:g,timeOfDay:S,sessionDuration:a,focused:N});l=w.stats,w.newBadges.length>0&&w.newBadges.forEach(D=>{o.push({type:"milestone",message:`ğŸ–ï¸ ãƒãƒƒã‚¸ç²å¾—: ${D.name}`,icon:D.icon,priority:5}),c+=mt.BADGE_EARNED});const b=sn(l);l=b.stats,b.completedMilestones.length>0&&b.completedMilestones.forEach(D=>{o.push({type:"milestone",message:`ğŸ¯ ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³é”æˆ: ${D.title}`,icon:"ğŸ¯",priority:4}),c+=D.reward.xp});const k=Za(l,c);return l=k.stats,k.leveledUp&&k.newLevel&&o.push({type:"level_up",message:`â­ ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼ Lv.${k.newLevel}`,icon:"â­",priority:5}),u<50?o.push({type:"encouragement",message:"ğŸ’ª ç„¦ã‚‰ãšå¾©ç¿’ã—ã¾ã—ã‚‡ã†ï¼ç¶™ç¶šãŒå¤§åˆ‡ã§ã™",icon:"ğŸ’ª",priority:2}):u>=50&&u<80?o.push({type:"encouragement",message:"ğŸ‘ è‰¯ã„ãƒšãƒ¼ã‚¹ã§ã™ï¼ã“ã®èª¿å­ã§ï¼",icon:"ğŸ‘",priority:2}):u>=80&&u<95&&o.push({type:"praise",message:"ğŸŒŸ ç´ æ™´ã‚‰ã—ã„ï¼é«˜ã„æ­£ç­”ç‡ã§ã™",icon:"ğŸŒŸ",priority:3}),Ka(l),{stats:l,feedback:o.sort((D,A)=>A.priority-D.priority),xpGained:c,leveledUp:k.leveledUp,newLevel:k.newLevel}},an=()=>{const s=mr(),t=[];return s.streak.current>0&&t.push(`ğŸ”¥ ${s.streak.current}æ—¥é€£ç¶šå­¦ç¿’ä¸­ï¼`),s.level.level>1&&t.push(`â­ ãƒ¬ãƒ™ãƒ« ${s.level.level}`),s.level.currentXP/s.level.requiredXP*100>80&&t.push("æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¾ã§ã‚ã¨å°‘ã—ï¼"),t.length===0&&t.push("ä»Šæ—¥ã‚‚å­¦ç¿’ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼"),t.join(" | ")},wt=Object.freeze(Object.defineProperty({__proto__:null,addQuizResult:ht,addSessionHistory:dt,checkFlexibleMastery:Et,createWeakWordsQuestionSet:Dt,filterSkippedWords:ss,getAllWordProgress:nt,getConfusedWords:as,getCumulativeProgressData:ls,getCurrentWeakWords:Tt,getCustomQuestionSets:Lt,getDetailedRetentionStats:Nt,getGrammarDetailedRetentionStats:St,getGrammarRetentionRateWithAI:Mt,getGrammarUnitStats:Xt,getGrammarUnitStatsWithTitles:ps,getMemorizationCardSettings:us,getMemorizationDetailedRetentionStats:gt,getMemorizationSettings:hs,getMonthlyStats:Yt,getNearMasteryStats:qs,getOvercomeWeakWords:es,getRecentlyMasteredWords:Kt,getRetentionRateWithAI:kt,getRetentionTrend:cs,getStudyCalendarData:os,getStudySettings:Ht,getTodayIncorrectWords:jt,getTodayStats:Vt,getTotalAnsweredCount:ns,getTotalMasteredWordsCount:Wt,getUniqueQuestionedWordsCount:Gs,getWeeklyStats:Jt,getWordDetailedData:ds,isWordSkipExcluded:ts,loadProgress:Be,loadProgressSync:ye,recordConfusion:rs,recordMemorizationBehavior:xs,recordWordSkip:Rt,resetAllProgress:is,saveCustomQuestionSet:Ct,saveMemorizationCardSettings:ms,saveMemorizationSettings:gs,saveProgress:Xe,updateProgressCache:Ke,updateWordProgress:at},Symbol.toStringTag,{value:"Module"}));function et(s){return s[Math.floor(Math.random()*s.length)]}function nn(){const s=localStorage.getItem("progress-data");if(!s)return{totalSessions:0,averageAccuracy:0,strongCategories:[],weakCategories:[],recentImprovement:!1,consistencyScore:0};try{const r=JSON.parse(s).results||[],a=r.slice(-10),n=a.length>0?a.reduce((w,b)=>w+b.score/b.total*100,0)/a.length:0,i=new Map;r.forEach(w=>{if(w.category){const b=i.get(w.category)||{correct:0,total:0};b.correct+=w.score,b.total+=w.total,i.set(w.category,b)}});const l=[],o=[];i.forEach((w,b)=>{const k=w.total>0?w.correct/w.total*100:0;k>=80&&l.push(b),k<60&&o.push(b)});const c=a.slice(0,5),d=a.slice(-5),u=c.length>0?c.reduce((w,b)=>w+b.score/b.total*100,0)/c.length:0,x=(d.length>0?d.reduce((w,b)=>w+b.score/b.total*100,0)/d.length:0)>u+5,S=new Set(r.map(w=>new Date(w.date).toDateString())),N=Math.min(100,S.size*5);return{totalSessions:r.length,averageAccuracy:n,strongCategories:l,weakCategories:o,recentImprovement:x,consistencyScore:N}}catch{return{totalSessions:0,averageAccuracy:0,strongCategories:[],weakCategories:[],recentImprovement:!1,consistencyScore:0}}}function ur(){const s=new Date().getHours();return s>=5&&s<12?"morning":s>=12&&s<17?"afternoon":s>=17&&s<21?"evening":"night"}class on{generateCorrectComment(t){const r=[],a=nn();return t.attemptCount===1?(t.responseTime<3e3&&r.push(et(["é€Ÿã„ï¼","åå¿œãŒé‹­ã„ãï¼","å³ç­”ã ãªï¼"])),r.push(et(["ã‚ˆã—ï¼","ã„ã„ãï¼","æ­£è§£ã ï¼"]))):t.attemptCount===2?r.push(et(["2å›ç›®ã§æ­£è§£ã‹ã€‚","ã‚„ã£ã¨æ­£è§£ã—ãŸãªã€‚"])):(r.push(`${t.attemptCount}å›ç›®ã§æ­£è§£ã‹ã€‚`),r.push("ã‚‚ã£ã¨æ—©ãæ±ºã‚ã‚ï¼")),t.difficulty==="advanced"&&t.attemptCount===1?r.push(et(["ä¸Šç´šå˜èªã‚’ä¸€ç™ºã§æ±ºã‚ãŸï¼","é›£ã—ã„å˜èªã‚‚ã‚¯ãƒªã‚¢ã ãªï¼"])):t.difficulty==="beginner"&&t.attemptCount>1&&r.push("åˆç´šã§ã‚‚ãŸã¤ããªï¼"),t.correctStreak>=10?(r.push(`é©šç•°ã®${t.correctStreak}é€£ç¶šæ­£è§£ï¼`),r.push(et(["å®Œå…¨ã«æ³¢ã«ä¹—ã£ã¦ã‚‹ãªï¼","ã“ã®ã¾ã¾çªã£èµ°ã‚Œï¼"]))):t.correctStreak>=5?(r.push(`${t.correctStreak}é€£ç¶šæ­£è§£ï¼`),r.push(et(["èª¿å­ãŒå‡ºã¦ããŸãªï¼","ã„ã„æµã‚Œã ï¼"]))):t.correctStreak>=3&&r.push("3é€£ç¶šã ã€‚"),a.recentImprovement&&a.totalSessions>=10&&r.push(et(["æœ€è¿‘ã®æˆé•·ãŒè‘—ã—ã„ãï¼","å‰ã‚ˆã‚Šç¢ºå®Ÿã«å¼·ããªã£ã¦ã‚‹ï¼"])),t.isWeakCategory&&t.isCorrect&&(r.push(`è‹¦æ‰‹ãª${t.category}ã§æ­£è§£ï¼`),r.push(et(["æˆé•·ã‚’æ„Ÿã˜ã‚‹ãï¼","å¼±ç‚¹ã‚’æ½°ã—ãŸãªï¼"]))),t.todayQuestions>=50&&t.todayAccuracy>=80&&r.push("ä»Šæ—¥ã¯çµ¶å¥½èª¿ã ãªï¼"),t.timeOfDay==="night"&&t.todayQuestions>=30&&r.push("å¤œé…ãã¾ã§ã‚ˆãé ‘å¼µã£ã¦ã‚‹ï¼"),t.hasSeenBefore&&t.previousAttempts>2&&(r.push(`å‰ã¯${t.previousAttempts}å›ã‚‚ã‹ã‹ã£ãŸå˜èªã ãï¼`),r.push("ã‚ˆã†ã‚„ãè¦šãˆãŸãªï¼")),r.push("ã“ã®èª¿å­ã ï¼ğŸ’ª"),r.join(" ")}generateIncorrectComment(t){const r=[];return t.attemptCount===1?r.push("é•ã†ï¼"):r.push("ã¾ãŸé–“é•ãˆãŸï¼"),t.difficulty==="beginner"&&(r.push("åˆç´šã§é–“é•ãˆã‚‹ã¨ã¯â€¦"),r.push("åŸºç¤ã‹ã‚‰ã‚„ã‚Šç›´ã›ï¼")),t.incorrectStreak>=3&&(r.push(`${t.incorrectStreak}é€£ç¶šãƒŸã‚¹ï¼`),r.push("ãŸã‚‹ã‚“ã§ã‚‹ãï¼")),t.hasSeenBefore&&(r.push(`å‰ã«ã‚‚é–“é•ãˆãŸ${t.word}ã ãï¼`),r.push("ä½•åº¦ã‚„ã‚‰ã›ã‚‹æ°—ã ï¼")),t.todayAccuracy<60&&(r.push("ä»Šæ—¥ã®æ­£ç­”ç‡ãŒä½ã„ï¼"),r.push("é›†ä¸­ã—ã‚ï¼")),t.timeOfDay==="night"&&t.todayQuestions>=40?(r.push("ç–²ã‚Œã¦ã‚‹ãªã‚‰ä¼‘ã‚ï¼"),r.push("ã ãŒæ˜æ—¥ã¯å€ã‚„ã‚‹ã‚“ã ãï¼")):r.push("æ°—åˆã‚’å…¥ã‚Œã‚ï¼ğŸ”¥"),r.join(" ")}}class ln{generateCorrectComment(t){const r=[];return r.push("æ­£è§£ã§ã™ï¼"),t.attemptCount===1?t.responseTime<3e3?r.push("ç´ æ—©ã„åˆ¤æ–­ã§ã—ãŸã­ âœ¨"):r.push("ã—ã£ã‹ã‚Šè€ƒãˆã‚‰ã‚Œã¾ã—ãŸã­"):t.attemptCount===2?(r.push("2å›ç›®ã§æ­£è§£ã§ãã¾ã—ãŸ"),r.push("è½ã¡ç€ã„ã¦è€ƒãˆã‚‰ã‚Œã¾ã—ãŸã­")):t.attemptCount>=3&&(r.push(`${t.attemptCount}å›ç›®ã§æ­£è§£ã§ãã¾ã—ãŸ`),r.push("ç²˜ã‚Šå¼·ãå–ã‚Šçµ„ã‚ã¾ã—ãŸã­")),t.difficulty==="advanced"&&(r.push(`${t.word}ã¯é›£ã—ã„å˜èªã§ã—ãŸãŒã€`),r.push("è¦‹äº‹ã«æ­£è§£ã—ã¾ã—ãŸï¼")),t.correctStreak>=5?(r.push(`${t.correctStreak}å•é€£ç¶šæ­£è§£ã§ã™ï¼`),r.push("ç´ æ™´ã‚‰ã—ã„é›†ä¸­åŠ›ã§ã™ã­ ğŸŒ¸")):t.correctStreak>=3&&r.push("èª¿å­ãŒå‡ºã¦ãã¾ã—ãŸã­"),t.isWeakCategory&&(r.push(`è‹¦æ‰‹ãª${t.category}ã§æ­£è§£ï¼`),r.push("å°‘ã—ãšã¤å¾—æ„ã«ãªã£ã¦ãã¦ã„ã¾ã™ã‚ˆ ğŸ˜Š")),t.hasSeenBefore&&t.previousAttempts>2&&(r.push("å‰å›ã‚ˆã‚Šæ—©ãæ­£è§£ã§ãã¾ã—ãŸã­"),r.push("ç¢ºå®Ÿã«æˆé•·ã—ã¦ã„ã¾ã™")),t.todayQuestions>=50&&(r.push(`ä»Šæ—¥ã¯ã‚‚ã†${t.todayQuestions}å•ã‚‚é ‘å¼µã£ã¦ã„ã¾ã™ã­`),r.push("ç„¡ç†ã—ã™ããªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã­")),r.join(" ")}generateIncorrectComment(t){const r=[];return t.attemptCount===1?r.push("æƒœã—ã„ã§ã™"):r.push("é›£ã—ã‹ã£ãŸã§ã™ã­"),r.push("ã§ã‚‚å¤§ä¸ˆå¤«ã§ã™"),t.difficulty==="advanced"?(r.push(`${t.word}ã¯ä¸Šç´šå˜èªãªã®ã§`),r.push("ä½•åº¦ã‹å¾©ç¿’ã—ã¾ã—ã‚‡ã†")):t.difficulty==="beginner"&&(r.push("åŸºç¤çš„ãªå˜èªãªã®ã§"),r.push("ã‚†ã£ãã‚Šè¦šãˆç›´ã—ã¾ã—ã‚‡ã†")),t.incorrectStreak>=3&&(r.push("å°‘ã—ç–²ã‚Œã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ"),r.push("æ·±å‘¼å¸ã—ã¦ã¿ã¾ã—ã‚‡ã† ğŸŒ±")),t.hasSeenBefore&&(r.push(`${t.word}ã¯è¦æ³¨æ„ã®å˜èªã§ã™ã­`),r.push("ä¸€ç·’ã«è¦šãˆç›´ã—ã¾ã—ã‚‡ã†")),t.timeOfDay==="night"&&(r.push("å¤œã¯é›†ä¸­ã—ã¥ã‚‰ã„ã“ã¨ã‚‚ã‚ã‚Šã¾ã™"),r.push("ç„¡ç†ã›ãšä¼‘æ†©ã‚‚å¤§åˆ‡ã§ã™ã‚ˆ")),r.push("æ¬¡ã¯æ­£è§£ã§ãã¾ã™ã‚ˆ ğŸ˜Š"),r.join(" ")}}class cn{generateCorrectComment(t){const r=[];if(r.push("æ­£è§£ã€‚"),r.push(`å¿œç­”æ™‚é–“: ${(t.responseTime/1e3).toFixed(1)}ç§’`),t.attemptCount>1&&r.push(`è©¦è¡Œå›æ•°: ${t.attemptCount}`),t.correctStreak>0){r.push(`é€£ç¶šæ­£è§£: ${t.correctStreak}`);const a=Math.min(100,t.userAccuracy+2);r.push(`æ­£ç­”ç‡: ${t.userAccuracy.toFixed(0)}% â†’ ${a.toFixed(0)}%`)}if(t.difficulty==="advanced"&&(r.push("é›£æ˜“åº¦: ä¸Šç´š"),r.push("æœŸå¾…æ­£ç­”ç‡ã‚’ä¸Šå›ã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹")),t.isWeakCategory){r.push(`è‹¦æ‰‹ã‚«ãƒ†ã‚´ãƒªãƒ¼(${t.category})ã§æ­£è§£`);const a=Math.min(100,t.categoryAccuracy+3);r.push(`ã‚«ãƒ†ã‚´ãƒªãƒ¼æ­£ç­”ç‡: ${t.categoryAccuracy.toFixed(0)}% â†’ ${a.toFixed(0)}%`)}return r.push("ğŸ“Š"),r.join(" ")}generateIncorrectComment(t){const r=[];if(r.push("ä¸æ­£è§£ã€‚"),r.push(`è©¦è¡Œå›æ•°: ${t.attemptCount}`),t.incorrectStreak>0){r.push(`é€£ç¶šä¸æ­£è§£: ${t.incorrectStreak}`);const a=Math.max(0,t.userAccuracy-2);r.push(`æ­£ç­”ç‡å½±éŸ¿: ${t.userAccuracy.toFixed(0)}% â†’ ${a.toFixed(0)}%`)}return t.difficulty==="beginner"&&(r.push("åŸºç¤ãƒ¬ãƒ™ãƒ«ä¸æ­£è§£æ¤œå‡º"),r.push("å„ªå…ˆå¾©ç¿’å¯¾è±¡ã«è¿½åŠ ")),t.hasSeenBefore&&(r.push(`æ—¢å‡ºå˜èª: ${t.previousAttempts+1}å›ç›®ã®ä¸æ­£è§£`),r.push("ç¿’å¾—é›£æ˜“åº¦ã‚¹ã‚³ã‚¢: é«˜")),r.push("æ¬¡å›å‡ºé¡Œç¢ºç‡: 80%"),r.join(" ")}}class dn{generateCorrectComment(t){const r=[],a=["ãƒŠã‚¤ã‚¹ï¼","ã‚ˆã—ï¼","ã„ã„ãï¼","ã‚„ã£ãŸï¼"];return r.push(a[Math.floor(Math.random()*a.length)]),t.attemptCount===1?r.push("ä¸€ç™ºã§æ±ºã‚ãŸï¼"):t.attemptCount===2?r.push("ç«‹ã¦ç›´ã—ãŸãªï¼"):(r.push(`${t.attemptCount}å›ç›®ã§æ±ºã‚ãŸï¼`),r.push("ã‚‚ã£ã¨æ—©ãè¡Œã“ã†ï¼")),t.correctStreak>=5?(r.push(`${t.correctStreak}é€£ç¶šï¼`),r.push("ãŠå‰ã¯ç„¡æ•µã ï¼ğŸ”¥")):t.correctStreak>=3&&r.push("æ³¢ã«ä¹—ã£ã¦ããŸãï¼"),t.difficulty==="advanced"&&(r.push(`${t.word}ã‚’å€’ã—ãŸï¼`),r.push("ãŠå‰ã¯å¼·ã„ï¼ğŸ’ª")),t.isWeakCategory&&(r.push(`è‹¦æ‰‹ãª${t.category}ã‚’å…‹æœï¼`),r.push("ã“ã‚ŒãŒæˆé•·ã ï¼")),t.todayQuestions>=50&&t.todayAccuracy>=80&&(r.push(`ä»Šæ—¥ã¯${t.todayQuestions}å•ã‚¯ãƒªã‚¢ï¼`),r.push("çµ¶å¥½èª¿ã ï¼ğŸ†")),r.push("ã‚‚ã£ã¨è¡Œã‘ã‚‹ãï¼"),r.join(" ")}generateIncorrectComment(t){const r=[];return r.push("æƒœã—ã„ï¼"),t.incorrectStreak<3?(r.push("ã ãŒã¾ã çµ‚ã‚ã£ã¦ãªã„ï¼"),r.push("ã‚‚ã†ä¸€ä¸ï¼")):(r.push("é€£ç¶šãƒŸã‚¹ï¼"),r.push("ã ãŒå‹è² ã¯ã“ã‚Œã‹ã‚‰ã ï¼")),t.difficulty==="beginner"&&(r.push("ç„¦ã£ãŸãªï¼"),r.push("è½ã¡ç€ã‘ï¼")),t.hasSeenBefore&&(r.push(`ã¾ãŸ${t.word}ã‹ï¼`),r.push("ä»Šåº¦ã“ããƒªãƒ™ãƒ³ã‚¸ã ï¼ğŸ’ª")),t.todayAccuracy<60?(r.push("èª¿å­ãŒæ‚ªã„ãªï¼"),r.push("ã ãŒè² ã‘ã‚‹ãªï¼"),r.push("ã“ã“ã‹ã‚‰é€†è»¢ã ï¼ğŸ”¥")):r.push("ãŠå‰ãªã‚‰ã§ãã‚‹ï¼"),r.join(" ")}}class mn{generateCorrectComment(t){const r=[];return r.push("æ­£è§£ã§ã™ã€‚"),r.push(`${t.word}ã¨ã„ã†è¨€è‘‰ãŒã€ã‚ãªãŸã®ä¸€éƒ¨ã«ãªã‚Šã¾ã—ãŸ`),t.attemptCount>1&&r.push("è¿·ã„ãŒç†è§£ã‚’æ·±ã‚ã¾ã™"),t.correctStreak>=5?(r.push(`${t.correctStreak}å•é€£ç¶šæ­£è§£ã€‚`),r.push("è¨˜æ†¶ã®å®šç€ãŒç¢ºå®Ÿã«ãªã‚Šã¾ã—ãŸ ğŸŒ™")):t.correctStreak>=3&&r.push("çŸ¥è­˜ãŒæ ¹ã‚’å¼µã‚Šå§‹ã‚ã¦ã„ã¾ã™ ğŸŒ±"),t.difficulty==="advanced"&&(r.push("é›£ã—ã„è¨€è‘‰ã‚’ç†è§£ã—ã¾ã—ãŸã­"),r.push("çŸ¥æµãŒæ·±ã¾ã‚Šã¾ã™")),t.isWeakCategory&&(r.push("è‹¦æ‰‹ã‚’å…‹æœã—ã¾ã—ãŸ"),r.push("æˆé•·ã¨ã¯å¤‰åŒ–ã‚’å—ã‘å…¥ã‚Œã‚‹ã“ã¨ã§ã™")),t.todayQuestions>=50&&(r.push(`ä»Šæ—¥ã¯${t.todayQuestions}å•ã®çµŒé¨“ã‚’ç©ã¿ã¾ã—ãŸ`),r.push("ä¸€æ—¥ä¸€æ—¥ãŒæœªæ¥ã¸ã®æŠ•è³‡ã§ã™ ğŸ“–")),r.join(" ")}generateIncorrectComment(t){const r=[];return r.push("é–“é•ã„ã¯å­¦ã³ã®å§‹ã¾ã‚Šã§ã™ã€‚"),t.attemptCount===1?r.push("å†åº¦æŒ‘æˆ¦ã—ã¾ã—ã‚‡ã†"):(r.push("ã¾ã ç†è§£ã®é€”ä¸­ã§ã™"),r.push("ç„¦ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ ğŸŒ±")),t.difficulty==="beginner"&&r.push("åŸºç¤ã«æˆ»ã‚‹ã“ã¨ã¯æ¥ã§ã¯ã‚ã‚Šã¾ã›ã‚“"),t.incorrectStreak>=3&&(r.push("é€£ç¶šã§é–“é•ãˆã¾ã—ãŸ"),r.push("ä¼‘æ¯ã‚‚å­¦ã³ã®ä¸€éƒ¨ã§ã™")),t.hasSeenBefore&&(r.push(`${t.word}ã¯ã‚ãªãŸã®èª²é¡Œã§ã™`),r.push("ä½•åº¦ã§ã‚‚å‘ãåˆã„ã¾ã—ã‚‡ã†")),t.todayAccuracy<60&&(r.push("æ­£ç­”ç‡ãŒä¸‹ãŒã£ã¦ã„ã¾ã™"),r.push("ã—ã‹ã—é“ã¯ç¶šã„ã¦ã„ã¾ã™")),r.push("è¨˜æ†¶ã¨ã¯ç¹°ã‚Šè¿”ã—ã®èŠ¸è¡“ã§ã™ ğŸ“–"),r.join(" ")}}function un(s,t){let r;switch(s){case"drill-sergeant":r=new on;break;case"kind-teacher":r=new ln;break;case"analyst":r=new cn;break;case"enthusiastic-coach":r=new dn;break;case"wise-sage":r=new mn;break}return t.isCorrect?r.generateCorrectComment(t):r.generateIncorrectComment(t)}const gn={"drill-sergeant":{avatar:"ğŸ‘¹",name:"é¬¼è»æ›¹",description:"å³ã—ãé›ãˆã‚‹",tone:"å³ã—ãã€å¦¥å”ãªã—ã€çµæœé‡è¦–"},"kind-teacher":{avatar:"ğŸ˜Š",name:"å„ªã—ã„å…ˆç”Ÿ",description:"ä¸å¯§ã«ã‚µãƒãƒ¼ãƒˆ",tone:"å„ªã—ãã€ä¸å¯§ã€ã§ã‚‚æ­£ç¢º"},analyst:{avatar:"ğŸ¤–",name:"å†·é™ãªåˆ†æå®˜",description:"ãƒ‡ãƒ¼ã‚¿ã§åˆ¤æ–­",tone:"æ„Ÿæƒ…ãªã—ã€äº‹å®Ÿã®ã¿ã€çµ±è¨ˆé‡è¦–"},"enthusiastic-coach":{avatar:"ğŸ˜¼",name:"ç†±è¡€ã‚³ãƒ¼ãƒ",description:"ç†±ãå¿œæ´",tone:"ç†±ãã€ãƒã‚¸ãƒ†ã‚£ãƒ–ã€æŒ‘æˆ¦çš„"},"wise-sage":{avatar:"ğŸ§™",name:"è³¢è€…",description:"é•·æœŸè¦–ç‚¹ã§å°ã",tone:"è½ã¡ç€ãã€é•·æœŸè¦–ç‚¹ã€æœ¬è³ªé‡è¦–"}};function gr(){return localStorage.getItem("lastLoginDate")}function hn(){const s=localStorage.getItem("loginStreak");return s?parseInt(s,10):0}function xn(){const s=gr();if(!s)return 0;const t=new Date().toISOString().split("T")[0],r=new Date(s),n=new Date(t).getTime()-r.getTime();return Math.floor(n/(1e3*60*60*24))}function pn(){const s=new Date().toISOString().split("T")[0],t=localStorage.getItem(`studyStats-${s}`);if(!t)return{count:0,accuracy:0};const r=JSON.parse(t);return{count:r.count||0,accuracy:r.correct&&r.count?r.correct/r.count*100:0}}function fn(s){const t=ur(),r=xn(),a=hn(),{count:n,accuracy:i}=pn(),l={lastLoginDate:gr(),todayStudyCount:n,todayAccuracy:i};return r>=3?yn(s,r):a>=7&&n===0?bn(s,a):vn(s,t,l)}function yn(s,t){switch(s){case"drill-sergeant":return t>=7?`ğŸ˜ˆ ${t}æ—¥ã‚‚ç©ºã‘ã‚‹ã¨ã¯ä½•äº‹ã ï¼ä»Šã™ãå¾©ç¿’ã‚’é–‹å§‹ã—ã‚ï¼`:`ğŸ˜ˆ ${t}æ—¥ã¶ã‚Šã‹ã€‚é…ã‚Œã‚’å–ã‚Šæˆ»ã™ãï¼`;case"kind-teacher":return t>=7?`ğŸ˜ƒ ãŠä¹…ã—ã¶ã‚Šã§ã™ï¼${t}æ—¥çµŒã£ã¦ã„ã¾ã™ãŒã€ç„¦ã‚‰ãšå°‘ã—ãšã¤æ€ã„å‡ºã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚`:`ğŸ˜ƒ ${t}æ—¥ã¶ã‚Šã§ã™ã­ã€‚ã‚†ã£ãã‚Šå¾©ç¿’ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚`;case"analyst":return t>=7?`ğŸ¤– å‰å›ã‹ã‚‰${t}æ—¥çµŒéã€‚è¨˜æ†¶å®šç€ç‡ã¯æ¨å®š40-60%ã€‚ä½“ç³»çš„ãªå¾©ç¿’ã‚’æ¨å¥¨ã—ã¾ã™ã€‚`:`ğŸ¤– ${t}æ—¥ã®é–“éš”ã€‚å¿˜å´æ›²ç·šã‚’è€ƒæ…®ã—ãŸå¾©ç¿’ãŒå¿…è¦ã§ã™ã€‚`;case"enthusiastic-coach":return t>=7?`ğŸ˜¼ ${t}æ—¥ã¶ã‚Šã®ã‚«ãƒ ãƒãƒƒã‚¯ï¼ä»Šæ—¥ã‹ã‚‰å†ã‚¹ã‚¿ãƒ¼ãƒˆã ï¼å…¨åŠ›ã§è¡Œããï¼`:`ğŸ˜¼ å¾…ã£ã¦ãŸãœï¼${t}æ—¥ã®é…ã‚Œã¯ä»Šæ—¥å–ã‚Šæˆ»ãã†ï¼`;case"wise-sage":return t>=7?`ğŸ§™ ${t}æ—¥ã®ä¼‘æ¯ã‚‚å­¦ã³ã®ä¸€éƒ¨ã˜ã‚ƒã€‚ç„¦ã‚‰ãšã€ç€å®Ÿã«é€²ã‚ã°è‰¯ã„ã€‚`:`ğŸ§™ ${t}æ—¥ã®ç©ºç™½ã‚‚ã€ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã®æ™‚é–“ã ã£ãŸã®ã˜ã‚ƒã‚ã†ã€‚ã•ã‚ã€ã‚†ã£ãã‚Šå†é–‹ã˜ã‚ƒã€‚`;default:return`ãŠå¸°ã‚Šãªã•ã„ï¼${t}æ—¥ã¶ã‚Šã§ã™ã­ã€‚`}}function bn(s,t){switch(s){case"drill-sergeant":return`ğŸ˜ˆ ${t}æ—¥é€£ç¶šï¼ç´ æ™´ã‚‰ã—ã„ç¶™ç¶šåŠ›ã ï¼ä»Šæ—¥ã‚‚æ²¹æ–­ã™ã‚‹ãªï¼`;case"kind-teacher":return`ğŸ˜ƒ ${t}æ—¥é€£ç¶šãƒ­ã‚°ã‚¤ãƒ³ã€ç´ æ™´ã‚‰ã—ã„ã§ã™ã­ï¼ç¶™ç¶šã¯åŠ›ãªã‚Šã§ã™ã€‚`;case"analyst":return`ğŸ¤– ${t}æ—¥é€£ç¶šã€‚ç¶™ç¶šç‡100%ã€‚çµ±è¨ˆçš„ã«å­¦ç¿’åŠ¹æœã¯æœ€å¤§åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚`;case"enthusiastic-coach":return`ğŸ˜¼ ${t}æ—¥é€£ç¶šé”æˆï¼ã“ã®å‹¢ã„ã§çªãé€²ã‚ï¼è¨˜éŒ²æ›´æ–°ã ï¼`;case"wise-sage":return`ğŸ§™ ${t}æ—¥ã®ç¶™ç¶šã€è¦‹äº‹ã˜ã‚ƒã€‚åƒé‡Œã®é“ã‚‚ä¸€æ­©ã‹ã‚‰ã€ã˜ã‚ƒãªã€‚`;default:return""}}function vn(s,t,r){const{todayStudyCount:a,todayAccuracy:n}=r;switch(s){case"drill-sergeant":return wn(t,a);case"kind-teacher":return jn(t,a);case"analyst":return Nn(t,a,n);case"enthusiastic-coach":return Sn(t,a);case"wise-sage":return kn(t,a);default:return null}}function wn(s,t,r){switch(s){case"morning":return t===0?"ğŸ˜ˆ æœã ãï¼è„³ãŒä¸€ç•ªå†´ãˆã¦ã‚‹æ™‚é–“ã ï¼ä»Šã™ãå­¦ç¿’ã‚’é–‹å§‹ã—ã‚ï¼":t>=20?"ğŸ˜ˆ æœã‹ã‚‰ç´ æ™´ã‚‰ã—ã„ãƒšãƒ¼ã‚¹ã ï¼ã“ã®èª¿å­ã‚’ç¶­æŒã—ã‚ï¼":"ğŸ˜ˆ æœã®å­¦ç¿’ã¯åŠ¹æœçš„ã ï¼ã‚‚ã£ã¨ã‚„ã‚Œã‚‹ã¯ãšã ï¼";case"afternoon":return t===0?"ğŸ˜ˆ åˆå¾Œã«ãªã£ãŸãï¼ä»Šæ—¥ã¯ã¾ã ä½•ã‚‚ã‚„ã£ã¦ãªã„ã®ã‹ï¼Ÿã•ã£ã•ã¨å§‹ã‚ã‚ï¼":t>=20?"ğŸ˜ˆ åˆå¾Œã‚‚é †èª¿ã ãªï¼åˆå‰ä¸­ã®å‹¢ã„ã‚’è½ã¨ã™ãªï¼":"ğŸ˜ˆ åˆå¾Œã¯é›†ä¸­åŠ›ãŒè½ã¡ã‚„ã™ã„ã€‚æ°—åˆã‚’å…¥ã‚Œç›´ã›ï¼";case"evening":return t===0?"ğŸ˜ˆ ã‚‚ã†å¤•æ–¹ã ãï¼ä»Šæ—¥ã®åˆ†ã¯ä»Šæ—¥ä¸­ã«çµ‚ã‚ã‚‰ã›ã‚ï¼":t>=30?"ğŸ˜ˆ ä»Šæ—¥ã¯ã‚ˆãé ‘å¼µã£ãŸï¼ã‚ã¨å°‘ã—ã§å®Œç’§ã ï¼":"ğŸ˜ˆ å¤•æ–¹ã¯å¾©ç¿’ã®ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¿ã‚¤ãƒ ã ï¼è¿½ã„è¾¼ã¿ã‚’ã‹ã‘ã‚ï¼";case"night":return t===0?"ğŸ˜ˆ å¤œã«ãªã£ã¦ã—ã¾ã£ãŸãï¼å°‘ã—ã§ã‚‚ã„ã„ã‹ã‚‰å­¦ç¿’ã—ã‚ï¼0ã‚ˆã‚Š1ã ï¼":t>=30?"ğŸ˜ˆ å¤œé…ãã¾ã§ã‚ˆãé ‘å¼µã£ãŸï¼æ—©ãä¼‘ã‚“ã§æ˜æ—¥ã«å‚™ãˆã‚ï¼":"ğŸ˜ˆ å¤œã¯è»½ã‚ã®å¾©ç¿’ãŒåŠ¹æœçš„ã ï¼ç„¡ç†ã¯ã™ã‚‹ãªï¼";default:return"ğŸ˜ˆ ã•ã‚ã€å­¦ç¿’ã‚’é–‹å§‹ã™ã‚‹ãï¼"}}function jn(s,t,r){switch(s){case"morning":return t===0?"ğŸ˜ƒ ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼æœã¯è¨˜æ†¶åŠ›ãŒé«˜ã¾ã‚‹æ™‚é–“ã§ã™ã‚ˆã€‚ä¸€ç·’ã«é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼":t>=20?"ğŸ˜ƒ æœã‹ã‚‰ç´ æ™´ã‚‰ã—ã„ã§ã™ã­ï¼ã§ã‚‚ç„¡ç†ã¯ã—ãªã„ã§ãã ã•ã„ã­ã€‚":"ğŸ˜ƒ æœã®å­¦ç¿’ã€é †èª¿ã§ã™ã­ï¼ã“ã®èª¿å­ã§é€²ã‚ã¾ã—ã‚‡ã†ã€‚";case"afternoon":return t===0?"ğŸ˜ƒ ã“ã‚“ã«ã¡ã¯ï¼åˆå¾Œã¯å°‘ã—çœ ããªã‚Šã‚„ã™ã„ã®ã§ã€è»½ã‚ã®å¾©ç¿’ãŒãŠã™ã™ã‚ã§ã™ã‚ˆã€‚":t>=20?"ğŸ˜ƒ åˆå¾Œã‚‚ã‚ˆãé ‘å¼µã£ã¦ã„ã¾ã™ã­ï¼ä¼‘æ†©ã‚‚å¿˜ã‚Œãšã«å–ã£ã¦ãã ã•ã„ã­ã€‚":"ğŸ˜ƒ åˆå¾Œã‚‚é †èª¿ã§ã™ã­ã€‚ãƒã‚¤ãƒšãƒ¼ã‚¹ã§å¤§ä¸ˆå¤«ã§ã™ã‚ˆã€‚";case"evening":return t===0?"ğŸ˜ƒ ã“ã‚“ã°ã‚“ã¯ã€‚å¤•æ–¹ã¯å¾©ç¿’ã«æœ€é©ãªæ™‚é–“ã§ã™ã€‚ä»Šæ—¥å­¦ã‚“ã ã“ã¨ã‚’è»½ãè¦‹ç›´ã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ":t>=30?"ğŸ˜ƒ ä»Šæ—¥ã¯æœ¬å½“ã«ã‚ˆãé ‘å¼µã‚Šã¾ã—ãŸã­ï¼ã‚‚ã†ååˆ†ã§ã™ã‚ˆã€‚":"ğŸ˜ƒ å¤•æ–¹ã®å¾©ç¿’ã€è‰¯ã„ã§ã™ã­ï¼ç„¦ã‚‰ãšã‚†ã£ãã‚Šé€²ã‚ã¾ã—ã‚‡ã†ã€‚";case"night":return t===0?"ğŸ˜ƒ å¤œé…ãã¾ã§ãŠç–²ã‚Œæ§˜ã§ã™ã€‚ç„¡ç†ã›ãšã€ã§ãã‚‹ç¯„å›²ã§å¤§ä¸ˆå¤«ã§ã™ã‚ˆã€‚":t>=30?"ğŸ˜ƒ ä»Šæ—¥ã¯ååˆ†é ‘å¼µã‚Šã¾ã—ãŸï¼ãã‚ãã‚ä¼‘ã‚“ã§ã€æ˜æ—¥ã«å‚™ãˆã¾ã—ã‚‡ã†ã­ã€‚":"ğŸ˜ƒ å¤œã®å­¦ç¿’ã‚‚å¤§åˆ‡ã§ã™ãŒã€ç¡çœ ã‚‚åŒã˜ãã‚‰ã„å¤§åˆ‡ã§ã™ã‚ˆã€‚";default:return"ğŸ˜ƒ ä¸€ç·’ã«é ‘å¼µã‚Šã¾ã—ã‚‡ã†ã­ï¼"}}function Nn(s,t,r){switch(s){case"morning":return t===0?"ğŸ¤– ç¾åœ¨æ™‚åˆ»ï¼šæœã€‚è„³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼šæœ€é©ã€‚æ–°è¦å­¦ç¿’åŠ¹ç‡ï¼š+30%ã€‚å­¦ç¿’é–‹å§‹ã‚’æ¨å¥¨ã€‚":t>=20?`ğŸ¤– æœã®å­¦ç¿’${t}å•å®Œäº†ã€‚æ­£ç­”ç‡${r.toFixed(1)}%ã€‚è‰¯å¥½ãªãƒšãƒ¼ã‚¹ã€‚`:"ğŸ¤– æœã®å­¦ç¿’é€²è¡Œä¸­ã€‚èªçŸ¥æ©Ÿèƒ½ãŒé«˜ã„æ™‚é–“å¸¯ã‚’æ´»ç”¨ã—ã¦ãã ã•ã„ã€‚";case"afternoon":return t===0?"ğŸ¤– åˆå¾Œã®æ™‚é–“å¸¯ã€‚é›†ä¸­åŠ›ï¼šã‚„ã‚„ä½ä¸‹å‚¾å‘ã€‚çŸ­æ™‚é–“é›†ä¸­å‹ã®å­¦ç¿’ã‚’æ¨å¥¨ã€‚":t>=20?`ğŸ¤– æœ¬æ—¥${t}å•å­¦ç¿’æ¸ˆã¿ã€‚åˆå¾Œã®ç”Ÿç”£æ€§ï¼šç¶­æŒã•ã‚Œã¦ã„ã¾ã™ã€‚`:"ğŸ¤– åˆå¾Œã®å­¦ç¿’ç¶™ç¶šä¸­ã€‚15åˆ†Ã—3ã‚»ãƒƒãƒˆã®åˆ†å‰²å­¦ç¿’ãŒåŠ¹æœçš„ã§ã™ã€‚";case"evening":return t===0?"ğŸ¤– å¤•æ–¹ã®æ™‚é–“å¸¯ã€‚å¾©ç¿’åŠ¹ç‡ï¼šæœ€é«˜ãƒ¬ãƒ™ãƒ«ã€‚ä»Šæ—¥ã®å­¦ç¿’å†…å®¹ã®å®šç€ã«æœ€é©ã€‚":t>=30?`ğŸ¤– æœ¬æ—¥${t}å•é”æˆã€‚ååˆ†ãªå­¦ç¿’é‡ã§ã™ã€‚ä¼‘æ¯ã‚’æ¨å¥¨ã€‚`:"ğŸ¤– å¤•æ–¹ã®å¾©ç¿’ã‚¿ã‚¤ãƒ ã€‚æœã®å­¦ç¿’å†…å®¹ã®å†ç¢ºèªãŒè¨˜æ†¶å®šç€ç‡ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚";case"night":return t===0?"ğŸ¤– å¤œé–“ã€‚æ–°è¦å­¦ç¿’ã‚ˆã‚Šå¾©ç¿’ã‚’æ¨å¥¨ã€‚ç¡çœ å‰ã®è»½ã„å¾©ç¿’ã¯è¨˜æ†¶ã®å›ºå®šåŒ–ã«æœ‰åŠ¹ã€‚":t>=30?`ğŸ¤– æœ¬æ—¥${t}å•å®Œäº†ã€‚å­¦ç¿’ç›®æ¨™é”æˆã€‚22-23æ™‚ã®å°±å¯ã§è¨˜æ†¶å®šç€ç‡ãŒå‘ä¸Šã—ã¾ã™ã€‚`:"ğŸ¤– å¤œé–“å­¦ç¿’ä¸­ã€‚éåº¦ãªå­¦ç¿’ã¯ç¡çœ ã®è³ªã‚’ä½ä¸‹ã•ã›ã¾ã™ã€‚é©åº¦ãªå­¦ç¿’ã‚’æ¨å¥¨ã€‚";default:return"ğŸ¤– å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜éŒ²ä¸­ã€‚ç¶™ç¶šçš„ãªå­¦ç¿’ãŒæœ€ã‚‚åŠ¹ç‡çš„ã§ã™ã€‚"}}function Sn(s,t,r){switch(s){case"morning":return t===0?"ğŸ˜¼ æœã ï¼æ–°ã—ã„ä¸€æ—¥ã®å§‹ã¾ã‚Šã ï¼ä»Šæ—¥ã‚‚æœ€é«˜ã®å­¦ç¿’ã‚’ã—ã‚ˆã†ï¼":t>=20?"ğŸ˜¼ æœã‹ã‚‰çµ¶å¥½èª¿ã ãªï¼ã“ã®å‹¢ã„ã§ä»Šæ—¥ã‚‚å®Œç’§ã«ã‚„ã‚Šé‚ã’ã‚ˆã†ï¼":"ğŸ˜¼ æœã®å­¦ç¿’ã€æœ€é«˜ã ï¼ã‚‚ã£ã¨ã‚‚ã£ã¨è¡Œã‘ã‚‹ãï¼";case"afternoon":return t===0?"ğŸ˜¼ åˆå¾Œã‚‚å…ƒæ°—å‡ºã—ã¦ã„ã“ã†ï¼ä»Šã‹ã‚‰ã§ã‚‚é…ããªã„ãï¼å…¨åŠ›ã§è¡Œã‘ï¼":t>=20?"ğŸ˜¼ åˆå¾Œã‚‚ç´ æ™´ã‚‰ã—ã„ãƒšãƒ¼ã‚¹ã ï¼ãŠå‰ãªã‚‰çµ¶å¯¾ã§ãã‚‹ï¼":"ğŸ˜¼ åˆå¾Œã®å­¦ç¿’ã‚‚æ°—åˆååˆ†ã ãªï¼ã“ã®èª¿å­ã“ã®èª¿å­ï¼";case"evening":return t===0?"ğŸ˜¼ å¤•æ–¹ã ãï¼ä»Šæ—¥ã®ç›®æ¨™ã¯ã¾ã é”æˆã—ã¦ãªã„ã ã‚ï¼Ÿã•ã‚ã€ã‚„ã‚ã†ï¼":t>=30?"ğŸ˜¼ ä»Šæ—¥ã¯å®Œç’§ã ï¼ãŠå‰ã®åŠªåŠ›ã¯å¿…ãšå ±ã‚ã‚Œã‚‹ï¼èª‡ã‚Šã«æ€ãˆï¼":"ğŸ˜¼ å¤•æ–¹ã®è¿½ã„è¾¼ã¿ã€è‰¯ã„ãï¼ãƒ©ã‚¹ãƒˆã‚¹ãƒ‘ãƒ¼ãƒˆã ï¼";case"night":return t===0?"ğŸ˜¼ å¤œã ã‘ã©è«¦ã‚ã‚‹ãªï¼ãŸã£ãŸ10åˆ†ã§ã‚‚ã„ã„ã€ä»Šæ—¥ã®åˆ†ã‚’ã‚„ã‚ã†ï¼":t>=30?"ğŸ˜¼ å¤œé…ãã¾ã§ãŠç–²ã‚Œæ§˜ï¼ä»Šæ—¥ã®ãŠå‰ã¯æœ€é«˜ã ã£ãŸï¼ã‚†ã£ãã‚Šä¼‘ã‚ï¼":"ğŸ˜¼ å¤œã®å­¦ç¿’ã‚‚é ‘å¼µã£ã¦ã‚‹ãªï¼ç„¡ç†ã¯ã™ã‚‹ãªã‚ˆã€ã§ã‚‚é ‘å¼µã‚Œï¼";default:return"ğŸ˜¼ ã•ã‚ã€ä»Šæ—¥ã‚‚å…¨åŠ›ã§è¡Œããï¼ãŠå‰ãªã‚‰çµ¶å¯¾ã§ãã‚‹ï¼"}}function kn(s,t,r){switch(s){case"morning":return t===0?"ğŸ§™ æœã®é™ã‘ã•ã¯å­¦ã³ã«æœ€é©ã˜ã‚ƒã€‚å¿ƒã‚’è½ã¡ç€ã‘ã¦ã€ã‚†ã£ãã‚Šå§‹ã‚ã‚‹ãŒã‚ˆã„ã€‚":t>=20?"ğŸ§™ æœã‹ã‚‰è‰¯ã„ãƒšãƒ¼ã‚¹ã˜ã‚ƒã®ã†ã€‚ç„¦ã‚‰ãšã€ç€å®Ÿã«é€²ã‚ã°è‰¯ã„ã€‚":"ğŸ§™ æœã®å­¦ç¿’ã€é †èª¿ã˜ã‚ƒãªã€‚ç„¡ç†ã›ãšã€è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§é€²ã‚€ã®ã˜ã‚ƒã€‚";case"afternoon":return t===0?"ğŸ§™ åˆå¾Œã¯å°‘ã—ä¼‘ã‚“ã§ã‹ã‚‰å§‹ã‚ã‚‹ã®ã‚‚è‰¯ã„ãã€‚ç„¦ã‚‹å¿…è¦ã¯ãªã„ã€‚":t>=20?"ğŸ§™ åˆå¾Œã‚‚ç€å®Ÿã«é€²ã‚“ã§ãŠã‚‹ã®ã†ã€‚ç¶™ç¶šã“ããŒåŠ›ã˜ã‚ƒã€‚":"ğŸ§™ åˆå¾Œã®å­¦ç¿’ã‚‚å¤§åˆ‡ã˜ã‚ƒãŒã€ä¼‘æ¯ã‚‚å¿˜ã‚Œã¬ã‚ˆã†ã«ãªã€‚";case"evening":return t===0?"ğŸ§™ å¤•æš®ã‚Œæ™‚ã¯ä¸€æ—¥ã‚’æŒ¯ã‚Šè¿”ã‚‹æ™‚é–“ã˜ã‚ƒã€‚å­¦ã³ã‚‚åŒã˜ãã€å¾©ç¿’ãŒå¤§åˆ‡ã˜ã‚ƒãã€‚":t>=30?"ğŸ§™ ä»Šæ—¥ã¯ã‚ˆãåŠ±ã‚“ã ã®ã†ã€‚å­¦ã³ã¯é‡ã‚ˆã‚Šè³ªã˜ã‚ƒã€‚ååˆ†ã˜ã‚ƒã‚ã†ã€‚":"ğŸ§™ å¤•æ–¹ã®å¾©ç¿’ã€è‰¯ã„ç¿’æ…£ã˜ã‚ƒã€‚æ€¥ãŒãšã€ç¢ºå®Ÿã«é€²ã‚ã°è‰¯ã„ã€‚";case"night":return t===0?"ğŸ§™ å¤œã¯å¿ƒç©ã‚„ã‹ã«éã”ã™ãŒè‰¯ã„ã€‚è»½ã„å¾©ç¿’ã ã‘ã§ã‚‚ååˆ†ã˜ã‚ƒã€‚":t>=30?"ğŸ§™ ä»Šæ—¥ã®å­¦ã³ã¯ååˆ†ã˜ã‚ƒã€‚è‰¯ãç¡çœ ãŒæ˜æ—¥ã¸ã®åŠ›ã¨ãªã‚‹ã€‚ã‚†ã£ãã‚Šä¼‘ã‚€ãŒã‚ˆã„ã€‚":"ğŸ§™ å¤œæ›´ã‹ã—ã¯ã»ã©ã»ã©ã«ãªã€‚ç¡çœ ã‚‚å­¦ã³ã®ä¸€éƒ¨ã˜ã‚ƒãã€‚";default:return"ğŸ§™ å­¦ã³ã¨ã¯é•·ã„æ—…ã˜ã‚ƒã€‚ä¸€æ­©ãšã¤ã€ç€å®Ÿã«é€²ã‚ã°è‰¯ã„ã€‚"}}function Cn(s,t,r){if(Math.random()>.1)return null;const a=Dn(s,t,r);return a.length===0?null:a[Math.floor(Math.random()*a.length)]}function Dn(s,t,r){const a=[];s==="drill-sergeant"&&(t&&r>=5&&(a.push({mainTeacher:"drill-sergeant",otherTeacher:"kind-teacher",message:"ğŸ˜ˆã€Œã‚ˆã—ï¼ãã®èª¿å­ã ï¼ã€ ğŸ˜ƒã€Œã¡ã‚‡ã€ã¡ã‚‡ã£ã¨è¤’ã‚ã™ãã§ã¯...ã€ ğŸ˜ˆã€Œã†ã‚‹ã•ã„ï¼è‰¯ã„ã‚‚ã®ã¯è‰¯ã„ã‚“ã ï¼ã€",type:"banter"}),a.push({mainTeacher:"drill-sergeant",otherTeacher:"wise-sage",message:"ğŸ˜ˆã€Œå®Œç’§ã ï¼ã€ ğŸ§™ã€Œãµã‚€ã€é¬¼è»æ›¹æ®¿ã‚‚å¬‰ã—ãã†ã˜ã‚ƒã®ã†ã€ ğŸ˜ˆã€Œã¹ã€åˆ¥ã«...ã€",type:"banter"})),t||(a.push({mainTeacher:"drill-sergeant",otherTeacher:"kind-teacher",message:"ğŸ˜ˆã€Œä½•åº¦åŒã˜é–“é•ã„ã‚’...ï¼ã€ ğŸ˜ƒã€Œã¾ã‚ã¾ã‚ã€è½ã¡ç€ã„ã¦ã€‚èª°ã«ã§ã‚‚è‹¦æ‰‹ã¯ã‚ã‚Šã¾ã™ã‹ã‚‰ã€ ğŸ˜ˆã€Œç”˜ã‚„ã‹ã™ãªï¼ã€",type:"argument"}),a.push({mainTeacher:"drill-sergeant",otherTeacher:"analyst",message:"ğŸ˜ˆã€ŒãŸã‚‹ã‚“ã§ã‚‹ãï¼ã€ ğŸ¤–ã€Œçµ±è¨ˆçš„ã«ã¯è¨±å®¹ç¯„å›²å†…ã®ãƒŸã‚¹ã§ã™ã€ ğŸ˜ˆã€Œãƒ‡ãƒ¼ã‚¿ã˜ã‚ƒãªã„ã€æ°—æŒã¡ã®å•é¡Œã ï¼ã€",type:"argument"})),a.push({mainTeacher:"drill-sergeant",otherTeacher:"enthusiastic-coach",message:"ğŸ˜¼ï¼ˆé€šã‚Šã™ãŒã‚Šï¼‰ã€ŒãŠã£ã€é¬¼è»æ›¹ã®ç‰¹è¨“ã‹ï¼é ‘å¼µã‚Œã‚ˆï¼ã€ ğŸ˜ˆã€Œ...ä½™è¨ˆãªå£å‡ºã—ã™ã‚‹ãªã€",type:"passerby"})),s==="kind-teacher"&&(t&&(a.push({mainTeacher:"kind-teacher",otherTeacher:"drill-sergeant",message:"ğŸ˜ƒã€Œç´ æ™´ã‚‰ã—ã„ã§ã™ã­ï¼ã€ ğŸ˜ˆï¼ˆé ãã‹ã‚‰ï¼‰ã€Œã¾ã ã¾ã æ²¹æ–­ã™ã‚‹ãªï¼ã€ ğŸ˜ƒã€Œ...èã“ãˆã¦ã¾ã™ï¼Ÿã€",type:"passerby"}),a.push({mainTeacher:"kind-teacher",otherTeacher:"wise-sage",message:"ğŸ˜ƒã€Œã‚ˆãã§ãã¾ã—ãŸï¼ã€ ğŸ§™ã€Œã†ã‚€ã€ç€å®Ÿãªæˆé•·ã˜ã‚ƒã€ ğŸ˜ƒã€Œè³¢è€…å…ˆç”Ÿã‚‚ãã†æ€ã‚ã‚Œã¾ã™ã‚ˆã­ã€",type:"support"})),t||a.push({mainTeacher:"kind-teacher",otherTeacher:"enthusiastic-coach",message:"ğŸ˜ƒã€Œå¤§ä¸ˆå¤«ã€æ¬¡ã¯å¿…ãšã§ãã¾ã™ã‚ˆã€ ğŸ˜¼ã€Œãã†ãã†ï¼å¤±æ•—ã¯æˆåŠŸã®æ¯ã ï¼ã€ ğŸ˜ƒã€Œç†±è¡€ã‚³ãƒ¼ãƒã‚‚å¿œæ´ã—ã¦ã¾ã™ã‚ˆã€",type:"support"}),a.push({mainTeacher:"kind-teacher",message:"ğŸ˜ƒã€Œã‚ã€ãŠèŒ¶ã‚’å…¥ã‚Œå¿˜ã‚Œã¦...ã€ ğŸ˜ˆï¼ˆé ãã‹ã‚‰ï¼‰ã€Œä»•äº‹ä¸­ã«ä½•ã—ã¦ã‚‹ï¼ã€ ğŸ˜ƒã€Œã™ã€ã™ã¿ã¾ã›ã‚“ï¼ã€",type:"joke"})),s==="analyst"&&(r>=10&&a.push({mainTeacher:"analyst",otherTeacher:"enthusiastic-coach",message:"ğŸ¤–ã€Œ10é€£ç¶šæ­£è§£ã€‚çµ±è¨ˆçš„ã«æœ‰æ„ã§ã™ã€ ğŸ˜¼ã€Œã™ã’ãƒ¼ï¼æœ€é«˜ã ï¼ã€ ğŸ¤–ã€Œ...æ„Ÿæƒ…è¡¨ç¾ã¯ä¸è¦ã§ã™ã€",type:"banter"}),a.push({mainTeacher:"analyst",otherTeacher:"drill-sergeant",message:"ğŸ¤–ã€Œãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãã¨...ã€ ğŸ˜ˆã€Œç†å±ˆã¯ã„ã„ï¼æ°—åˆã ï¼ã€ ğŸ¤–ã€Œéç§‘å­¦çš„ã§ã™ã€ ğŸ˜ˆã€Œã†ã‚‹ã•ã„ï¼ã€",type:"argument"}),a.push({mainTeacher:"analyst",otherTeacher:"kind-teacher",message:"ğŸ¤–ã€Œæ­£ç­”ç‡73.4%ã€ ğŸ˜ƒã€Œã‚ã®...ã‚‚ã†å°‘ã—å„ªã—ãä¼ãˆã‚‰ã‚Œã¾ã›ã‚“ã‹ï¼Ÿã€ ğŸ¤–ã€Œäº‹å®Ÿã‚’è¿°ã¹ã¦ã„ã‚‹ã ã‘ã§ã™ã€",type:"banter"}),a.push({mainTeacher:"analyst",message:"ğŸ¤–ã€Œ...ã‚³ãƒ¼ãƒ’ãƒ¼ã®ã‚«ãƒ•ã‚§ã‚¤ãƒ³å«æœ‰é‡ã¯...ã€ ğŸ˜ƒã€Œåˆ†æå®˜å…ˆç”Ÿã€ä»Šã¯æˆæ¥­ä¸­ã§ã™ã‚ˆã€ ğŸ¤–ã€Œå¤±ç¤¼ã—ã¾ã—ãŸã€",type:"joke"})),s==="enthusiastic-coach"&&(t&&r>=5&&(a.push({mainTeacher:"enthusiastic-coach",otherTeacher:"wise-sage",message:"ğŸ˜¼ã€Œæœ€ã£é«˜ã ããï¼ï¼ã€ ğŸ§™ã€Œ...å°‘ã—å£°ãŒå¤§ãã„ã‹ã®ã†ã€ ğŸ˜¼ã€Œã†ã‚‹ã•ãã¦æ‚ªã‹ã£ãŸãªï¼ã€",type:"banter"}),a.push({mainTeacher:"enthusiastic-coach",otherTeacher:"drill-sergeant",message:"ğŸ˜¼ã€Œã‚ˆã£ã—ã‚ƒãƒ¼ï¼ã€ ğŸ˜ˆã€Œé¨’ãŒã—ã„...ã ãŒã€æ‚ªããªã„ãªã€ ğŸ˜¼ã€ŒãŠã£ã€é¬¼è»æ›¹ã«è¤’ã‚ã‚‰ã‚ŒãŸï¼ã€",type:"support"})),t||a.push({mainTeacher:"enthusiastic-coach",otherTeacher:"kind-teacher",message:"ğŸ˜¼ã€Œãƒ‰ãƒ³ãƒã‚¤ï¼æ¬¡ã æ¬¡ï¼ã€ ğŸ˜ƒã€Œãã†ã§ã™ã­ã€ç„¦ã‚‰ãšã«ã€ ğŸ˜¼ã€ŒäºŒäººã§å¿œæ´ã—ã¦ã‚‹ãï¼ã€",type:"support"}),a.push({mainTeacher:"enthusiastic-coach",message:"ğŸ˜¼ã€Œä»Šæ—¥ã®ç­‹ãƒˆãƒ¬ã¯...ã€ ğŸ¤–ã€Œãã‚Œã¯è‹±èªå­¦ç¿’ã¨ç„¡é–¢ä¿‚ã§ã™ã€ ğŸ˜¼ã€Œä½“ãŒè³‡æœ¬ã ã‚ï¼ï¼Ÿã€",type:"joke"})),s==="wise-sage"&&(t&&a.push({mainTeacher:"wise-sage",otherTeacher:"drill-sergeant",message:"ğŸ§™ã€Œè‰¯ãæˆé•·ã˜ã‚ƒã€ ğŸ˜ˆã€Œå½“ãŸã‚Šå‰ã ã€ä¿ºã®æ•™ãˆå­ã ã‹ã‚‰ãªã€ ğŸ§™ã€Œ...ãŠä¸»ã‚‚æ•™ãˆã¦ãŠã£ãŸã®ã‹ï¼Ÿã€",type:"banter"}),a.push({mainTeacher:"wise-sage",otherTeacher:"analyst",message:"ğŸ§™ã€Œæ™‚ã«ã¯æ„Ÿè¦šã‚‚å¤§äº‹ã˜ã‚ƒãã€ ğŸ¤–ã€Œæ„Ÿè¦šã¯æ¸¬å®šä¸å¯èƒ½ã§ã™ã€ ğŸ§™ã€Œ...è‹¥ã„ã®ã†ã€",type:"argument"}),a.push({mainTeacher:"wise-sage",otherTeacher:"enthusiastic-coach",message:"ğŸ§™ã€Œç„¦ã‚‰ãšã€ã˜ã£ãã‚Šã¨...ã€ ğŸ˜¼ã€ŒãŸã¾ã«ã¯å…¨åŠ›ç–¾èµ°ã‚‚å¤§äº‹ã£ã™ã‚ˆï¼ã€ ğŸ§™ã€Œ...ãã‚Œã‚‚ä¸€ç†ã‚ã‚‹ã‹ã€",type:"banter"}),a.push({mainTeacher:"wise-sage",message:"ğŸ§™ã€Œæ˜”ã¯ã®ã†...ã€ ğŸ˜ƒğŸ˜ˆğŸ˜¼ğŸ¤–ã€Œã€Œã€Œã€Œã¾ãŸæ˜”è©±ï¼ï¼Ÿã€ã€ã€ã€ ğŸ§™ã€Œ...æœ€è¿‘ã®è‹¥è€…ã¯ã€",type:"joke"}));const n=[{mainTeacher:s,message:"ğŸ˜ƒã€ŒãŠæ˜¼ã¯ä½•é£Ÿã¹ã¾ã™ï¼Ÿã€ ğŸ˜ˆã€Œæ™‚é–“ã®ç„¡é§„ã ã€ ğŸ˜¼ã€Œä¿ºã¯ã‚«ãƒ„ä¸¼ï¼ã€ ğŸ¤–ã€Œæ „é¤Šãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒæ…®ã™ã¹ãã§ã™ã€ ğŸ§™ã€Œ...ã‚ã—ã¯è•éº¦ãŒã„ã„ã®ã†ã€",type:"joke"},{mainTeacher:s,message:"ğŸ˜ˆã€Œ...èª°ã ã€è·å“¡å®¤ã§ã‚³ãƒ¼ãƒ’ãƒ¼ã“ã¼ã—ãŸã®ã¯ï¼ã€ ğŸ˜ƒã€Œã™ã€ã™ã¿ã¾ã›ã‚“...ã€ ğŸ˜¼ã€Œãƒ‰ãƒ³ãƒã‚¤ï¼ã€ ğŸ¤–ã€Œæ¸…æƒæ–¹æ³•ã‚’æç¤ºã—ã¾ã™ã€",type:"joke"},{mainTeacher:s,message:"ğŸ§™ã€Œ...å°åˆ·æ©ŸãŒå‹•ã‹ã‚“ã®ã˜ã‚ƒãŒã€ ğŸ¤–ã€ŒITæ‹…å½“ã‚’å‘¼ã³ã¾ã™ã€ ğŸ˜ƒã€Œç§ãŒè¦‹ã¦ã¿ã¾ã™ã­ã€ ğŸ˜ˆã€Œã•ã£ã•ã¨ç›´ã›ï¼ã€ ğŸ˜¼ã€Œã¿ã‚“ãªã§å”åŠ›ã ï¼ã€",type:"joke"},{mainTeacher:s,message:"ğŸ˜¼ã€Œä»Šæ—¥ã®æˆæ¥­ã©ã†ã ã£ãŸï¼Ÿã€ ğŸ˜ƒã€Œã¿ã‚“ãªé ‘å¼µã£ã¦ã¾ã—ãŸã‚ˆã€ ğŸ˜ˆã€Œã¾ã ã¾ã ã ã€ ğŸ¤–ã€Œãƒ‡ãƒ¼ã‚¿ã§è¦‹ã‚‹ã¨æ”¹å–„å‚¾å‘ã§ã™ã€ ğŸ§™ã€Œãã‚Œãã‚Œã®æˆé•·ãŒã‚ã‚‹ã®ã†ã€",type:"banter"}];return Math.random()<.05&&a.push(...n),a}function Mn(){const s=new Date().getHours();if(Math.random()>.05)return null;if(s>=6&&s<9){const t=["ğŸ˜ƒã€ŒãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ï¼ã€ ğŸ˜ˆã€Œæœã‹ã‚‰å…ƒæ°—ã ãªã€ ğŸ˜¼ã€Œã‚ˆã£ã—ã‚ƒã€ä»Šæ—¥ã‚‚å…¨åŠ›ã ï¼ã€","ğŸ§™ã€Œã†ã‚€ã€è‰¯ã„æœã˜ã‚ƒã®ã†ã€ ğŸ¤–ã€Œæ°—æ¸©18åº¦ã€å­¦ç¿’ã«æœ€é©ã§ã™ã€ ğŸ˜ƒã€Œå¤©æ°—ã‚‚è‰¯ã„ã§ã™ã­ã€","ğŸ˜ˆã€Œé…åˆ»ã™ã‚‹ãªï¼ã€ ğŸ˜ƒã€Œã¾ã€ã¾ã é–‹å§‹10åˆ†å‰ã§ã™ã‚ˆ...ã€"];return t[Math.floor(Math.random()*t.length)]}if(s>=12&&s<13){const t=["ğŸ˜¼ã€Œè…¹æ¸›ã£ãŸã€œï¼ã€ ğŸ˜ƒã€ŒãŠå¼å½“è²·ã£ã¦ãã¾ã—ãŸã‚ˆã€ ğŸ˜ˆã€Œæ˜¼ä¼‘ã¿ã¯30åˆ†ã ãã€","ğŸ§™ã€Œä»Šæ—¥ã®å®šé£Ÿã¯ä½•ã‹ã®ã†ã€ ğŸ¤–ã€Œã‚«ãƒ­ãƒªãƒ¼è¨ˆç®—ãŒå¿…è¦ã§ã™ã€ ğŸ˜ƒã€Œã¿ã‚“ãªã§é£Ÿã¹ã¾ã—ã‚‡ã†ã€","ğŸ˜ˆã€Œé£Ÿå¾Œã¯ä¼‘ã‚€ãªï¼ã€ ğŸ˜ƒã€Œæ¶ˆåŒ–ã«æ‚ªã„ã§ã™ã‚ˆ...ã€ ğŸ˜¼ã€Œå°‘ã—ã¯ä¼‘ã‚‚ã†ãœï¼ã€"];return t[Math.floor(Math.random()*t.length)]}if(s>=17&&s<19){const t=["ğŸ˜ƒã€Œä»Šæ—¥ã‚‚ãŠç–²ã‚Œæ§˜ã§ã—ãŸã€ ğŸ˜ˆã€Œã¾ã çµ‚ã‚ã£ã¦ãªã„ã€ ğŸ˜¼ã€Œã„ã‚„ã€ååˆ†é ‘å¼µã£ãŸã£ã¦ï¼ã€","ğŸ§™ã€Œæ—¥ãŒæš®ã‚Œã¦ããŸã®ã†ã€ ğŸ¤–ã€Œ17æ™‚32åˆ†ã€å®šåˆ»ã§ã™ã€ ğŸ˜ƒã€Œã¿ã‚“ãªé ‘å¼µã‚Šã¾ã—ãŸã­ã€","ğŸ˜¼ã€Œä»Šæ—¥ã®åçœä¼šã™ã‚‹ï¼Ÿã€ ğŸ˜ƒã€Œã„ã„ã§ã™ã­ã€ ğŸ˜ˆã€Œç„¡é§„è©±ã¯ã™ã‚‹ãªã€ ğŸ§™ã€Œãã‚Œã‚‚å¤§åˆ‡ã˜ã‚ƒãã€"];return t[Math.floor(Math.random()*t.length)]}if(s>=22){const t=["ğŸ˜ƒã€Œã‚‚ã†é…ã„ã§ã™ã­...ã€ ğŸ˜ˆã€Œå¸°ã‚Œï¼æ˜æ—¥ã«å‚™ãˆã‚ï¼ã€ ğŸ§™ã€Œç„¡ç†ã¯ã„ã‹ã‚“ãã€","ğŸ¤–ã€Œ22æ™‚ã‚’è¶…éã€‚ç¡çœ æ™‚é–“ç¢ºä¿ã‚’æ¨å¥¨ã€ ğŸ˜ƒã€Œãã†ã§ã™ã­ã€å¸°ã‚Šã¾ã—ã‚‡ã†ã€","ğŸ˜¼ã€Œå¤œé…ãã¾ã§ãŠç–²ã‚Œï¼ã€ ğŸ˜ƒã€Œæ˜æ—¥ã‚‚é ‘å¼µã‚Šã¾ã—ã‚‡ã†ã€ ğŸ˜ˆã€Œ...æ—©ãå¯ã‚ã€"];return t[Math.floor(Math.random()*t.length)]}return null}function $n(s){return s===10?"ğŸ˜¼ã€Œ10é€£ç¶šï¼ï¼ã€ ğŸ˜ˆã€Œã‚ˆã—ï¼ã€ ğŸ˜ƒã€Œã™ã”ã„ï¼ã€ ğŸ¤–ã€Œçµ±è¨ˆçš„ã«å„ªç§€ã€ ğŸ§™ã€Œè¦‹äº‹ã˜ã‚ƒã€":s===20?"ğŸ˜ˆã€Œ20é€£ç¶šã ã¨...ï¼ï¼Ÿã€ ğŸ˜ƒã€Œä¿¡ã˜ã‚‰ã‚Œã¾ã›ã‚“ï¼ã€ ğŸ˜¼ã€Œæœ€ã£é«˜ã ï¼ã€ ğŸ¤–ã€Œç•°å¸¸å€¤ã§ã™ï¼ˆè¤’ã‚è¨€è‘‰ï¼‰ã€ ğŸ§™ã€Œå¤©æ‰ã‹...ã€":s===50?"ğŸ˜ˆğŸ˜ƒğŸ˜¼ğŸ¤–ğŸ§™ã€Œã€Œã€Œã€Œã€Œ50é€£ç¶šï¼ï¼ï¼ï¼ï¼ã€ã€ã€ã€ã€ï¼ˆå…¨å“¡ã‚¹ã‚¿ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚ªãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰":null}function Pn(){const s=new Date,t=s.getMonth()+1,r=s.getDate(),a=s.getDay();return a===1?"ğŸ˜ƒã€Œä»Šé€±ã‚‚é ‘å¼µã‚Šã¾ã—ã‚‡ã†ã€ ğŸ˜ˆã€Œæœˆæ›œã‹ã‚‰é£›ã°ã›ï¼ã€ ğŸ˜¼ã€Œé€±ã®å§‹ã¾ã‚Šã ï¼ã€":a===5?"ğŸ˜¼ã€Œé‡‘æ›œã ï¼ã‚ã¨å°‘ã—ï¼ã€ ğŸ˜ƒã€Œã§ã‚‚æ°—ã‚’æŠœã‹ãšã«ã€ ğŸ˜ˆã€Œæœ€å¾Œã¾ã§æ°—åˆã ï¼ã€":t===12&&r===25?"ğŸ˜ƒã€Œãƒ¡ãƒªãƒ¼ã‚¯ãƒªã‚¹ãƒã‚¹ï¼ã€ ğŸ˜ˆã€Œæµ®ã‹ã‚Œã‚‹ãªã€ ğŸ˜¼ã€ŒãŸã¾ã«ã¯ã„ã„ã ã‚ï¼ã€ ğŸ§™ã€Œã»ã£ã»ã£ã»ã€":t===1&&r===1?"ğŸ˜ƒğŸ˜ˆğŸ˜¼ğŸ¤–ğŸ§™ã€Œã€Œã€Œã€Œã€Œã‚ã‘ã¾ã—ã¦ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ã€ã€ã€ã€ã€":null}const An=[{type:"common-mistake",message:`ğŸ˜ƒã€Œ"I'm exciting"ã£ã¦è¨€ã£ã¦ã¾ã›ã‚“ã‹ï¼Ÿæ­£ã—ãã¯"I'm excited"ã§ã™ã‚ˆã€‚è‡ªåˆ†ãŒãƒ¯ã‚¯ãƒ¯ã‚¯ã—ã¦ã‚‹æ™‚ã¯edå½¢ã§ã™ï¼ã€`,teacher:"kind-teacher"},{type:"common-mistake",message:`ğŸ˜ˆã€Œ"I'm boring"ã¯ã€Œç§ã¯é€€å±ˆãªäººé–“ã ã€ã¨ã„ã†æ„å‘³ã ãï¼"I'm bored"ãŒæ­£è§£ã ï¼é–“é•ãˆã‚‹ãªï¼ã€`,teacher:"drill-sergeant"},{type:"common-mistake",message:'ğŸ¤–ã€Œ"funny"ã¨"fun"ã¯ç•°ãªã‚Šã¾ã™ã€‚"funny"ã¯ã€Œé¢ç™½ã„ï¼ˆç¬‘ãˆã‚‹ï¼‰ã€ã€"fun"ã¯ã€Œæ¥½ã—ã„ã€ã€‚ä½¿ã„åˆ†ã‘ãŒé‡è¦ã§ã™ã€‚ã€',teacher:"analyst"},{type:"common-mistake",message:'ğŸ˜ƒã€Œ"advice"ã¯æ•°ãˆã‚‰ã‚Œãªã„åè©ãªã®ã§ã€"an advice"ã¨ã¯è¨€ãˆã¾ã›ã‚“ã€‚"a piece of advice"ã¨è¨€ã„ã¾ã—ã‚‡ã†ï¼ã€',teacher:"kind-teacher"},{type:"common-mistake",message:'ğŸ˜ˆã€Œ"How do you think?"ã¯é–“é•ã„ã ï¼"What do you think?"ãŒæ­£è§£ï¼ä½•åº¦è¨€ã‚ã›ã‚‹ï¼ã€',teacher:"drill-sergeant"},{type:"common-mistake",message:'ğŸ˜¼ã€Œ"see a dream"ã˜ã‚ƒãªã„ãï¼"have a dream"ã ï¼å¤¢ã¯è¦‹ã‚‹ã‚“ã˜ã‚ƒãªãã¦æŒã¤ã‚“ã ï¼ã€',teacher:"enthusiastic-coach"},{type:"common-mistake",message:'ğŸ§™ã€Œ"say"ã¨"tell"ã®é•ã„ã˜ã‚ƒãŒ..."say"ã¯å†…å®¹ã‚’ã€"tell"ã¯ç›¸æ‰‹ã‚’å¼·èª¿ã™ã‚‹ã®ã˜ã‚ƒã€‚"tell me"ã¨ã¯è¨€ãˆã‚‹ãŒ"say me"ã¨ã¯è¨€ãˆã¬ãã€‚ã€',teacher:"wise-sage"},{type:"common-mistake",message:'ğŸ˜ƒã€Œ"enjoy"ã®å¾Œã¯å¿…ãš-ingå½¢ã§ã™ã‚ˆï¼"enjoy to study"ã§ã¯ãªã"enjoy studying"ã§ã™ã€‚ã€',teacher:"kind-teacher"},{type:"common-mistake",message:'ğŸ¤–ã€Œ"remember to do"ï¼ˆã“ã‚Œã‹ã‚‰ã™ã‚‹ã“ã¨ã‚’è¦šãˆã¦ã„ã‚‹ï¼‰ã¨"remember doing"ï¼ˆã—ãŸã“ã¨ã‚’è¦šãˆã¦ã„ã‚‹ï¼‰ã¯æ„å‘³ãŒç•°ãªã‚Šã¾ã™ã€‚ã€',teacher:"analyst"},{type:"common-mistake",message:`ğŸ˜ˆã€Œ"I'm agree"ã¯é–“é•ã„ã ï¼"agree"ã¯å‹•è©ã ã‹ã‚‰"I agree"ã ï¼åŸºæœ¬ã‚’å¿˜ã‚Œã‚‹ãªï¼ã€`,teacher:"drill-sergeant"}],In=[{type:"fun-fact",message:'ğŸ§™ã€Œæ¥é ­è¾"re-"ã¯ã€Œå†ã³ã€ã®æ„å‘³ã˜ã‚ƒã€‚returnï¼ˆæˆ»ã‚‹ï¼‰ã€reviewï¼ˆå¾©ç¿’ï¼‰ã€repeatï¼ˆç¹°ã‚Šè¿”ã™ï¼‰ãªã©ã€è¦šãˆã‚„ã™ã„ãã€‚ã€',teacher:"wise-sage"},{type:"fun-fact",message:"ğŸ¤–ã€Œé•·æ–‡èª­è§£ã®ã‚³ãƒ„ï¼šæœ€åˆã¨æœ€å¾Œã®æ®µè½ã€å„æ®µè½ã®æœ€åˆã®æ–‡ã‚’èª­ã‚ã°å…¨ä½“ã®æµã‚ŒãŒã¤ã‹ã‚ã¾ã™ã€‚ã€",teacher:"analyst"},{type:"fun-fact",message:'ğŸ˜ƒã€Œ"however"ï¼ˆã—ã‹ã—ï¼‰ã€"therefore"ï¼ˆã—ãŸãŒã£ã¦ï¼‰ã€"moreover"ï¼ˆã•ã‚‰ã«ï¼‰ãªã©ã®æ¥ç¶šè©ã‚’è¦šãˆã‚‹ã¨ã€è«–ç†å±•é–‹ãŒè¦‹ãˆã‚„ã™ããªã‚Šã¾ã™ã‚ˆï¼ã€',teacher:"kind-teacher"},{type:"fun-fact",message:'ğŸ˜¼ã€Œæ¥å°¾è¾"-tion"ã‚’ã¤ã‘ã‚‹ã¨å‹•è©ãŒåè©ã«ãªã‚‹ãï¼educateâ†’educationã€communicateâ†’communicationã ï¼ã€',teacher:"enthusiastic-coach"},{type:"fun-fact",message:'ğŸ§™ã€Œ"compare A with B"ï¼ˆAã¨Bã‚’æ¯”è¼ƒã™ã‚‹ï¼‰ã¨"compare A to B"ï¼ˆAã‚’Bã«ä¾‹ãˆã‚‹ï¼‰ã¯æ„å‘³ãŒé•ã†ãã€‚è©¦é¨“ã§ã‚ˆãå‡ºã‚‹ã€‚ã€',teacher:"wise-sage"},{type:"fun-fact",message:"ğŸ¤–ã€ŒåŒç¾©èªã‚’å¢—ã‚„ã™ã¨è¡¨ç¾åŠ›ãŒä¸ŠãŒã‚Šã¾ã™ã€‚important=significant=crucialã€show=demonstrate=illustrate ãªã©ã€‚ã€",teacher:"analyst"},{type:"fun-fact",message:'ğŸ˜ƒã€Œæ¥é ­è¾"un-"ã€"in-"ã€"dis-"ã¯å¦å®šã®æ„å‘³ã€‚unhappyã€impossibleã€disagreeãªã©ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã§è¦šãˆã¾ã—ã‚‡ã†ï¼ã€',teacher:"kind-teacher"},{type:"fun-fact",message:'ğŸ˜ˆã€Œ"not only A but also B"ï¼ˆAã ã‘ã§ãªãBã‚‚ï¼‰ã¯é »å‡ºæ§‹æ–‡ã ï¼ã‚»ãƒƒãƒˆã§è¦šãˆã‚ï¼ã€',teacher:"drill-sergeant"},{type:"fun-fact",message:'ğŸ§™ã€Œ"although"ã¨"though"ã¯ã»ã¼åŒã˜æ„å‘³ï¼ˆã€œã ã‘ã‚Œã©ã‚‚ï¼‰ã˜ã‚ƒãŒã€thoughã®æ–¹ãŒã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã˜ã‚ƒãªã€‚ã€',teacher:"wise-sage"},{type:"fun-fact",message:'ğŸ˜¼ã€Œæ¥å°¾è¾"-able"ã¯ã€Œã€œã§ãã‚‹ã€ã®æ„å‘³ã ï¼readableï¼ˆèª­ã‚ã‚‹ï¼‰ã€comfortableï¼ˆå¿«é©ãªï¼‰ã£ã¦æ„Ÿã˜ã ãï¼ã€',teacher:"enthusiastic-coach"}],_n=[{type:"cultural",message:"ğŸ˜ƒã€Œè‹±æ–‡ã‚¨ãƒƒã‚»ã‚¤ã¯çµè«–ã‚’æœ€åˆã«æ›¸ãã®ãŒåŸºæœ¬ã€‚Introductionâ†’Bodyâ†’Conclusionã®3éƒ¨æ§‹æˆã§ã™ã‚ˆã€‚ã€",teacher:"kind-teacher"},{type:"cultural",message:'ğŸ§™ã€Œè‹±èªã®è«–ç†å±•é–‹ã¯"ä¸»å¼µâ†’ç†ç”±â†’å…·ä½“ä¾‹"ãŒåŸºæœ¬ã˜ã‚ƒã€‚For example, For instance ã‚’ä½¿ã„ã“ãªãã†ã€‚ã€',teacher:"wise-sage"},{type:"cultural",message:"ğŸ¤–ã€Œå­¦è¡“çš„ãªæ–‡ç« ã§ã¯ã€contractionsï¼ˆçŸ­ç¸®å½¢ï¼‰ã¯ä½¿ã„ã¾ã›ã‚“ã€‚don'tâ†’do notã€it'sâ†’it is ã¨æ›¸ãã¾ã™ã€‚ã€",teacher:"analyst"},{type:"cultural",message:"ğŸ˜¼ã€Œæ„è¦‹ã‚’è¿°ã¹ã‚‹è¡¨ç¾ï¼I think, In my opinion, From my perspective ãªã©ã€ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¢—ã‚„ãã†ï¼ã€",teacher:"enthusiastic-coach"},{type:"cultural",message:'ğŸ˜ƒã€Œç†ç”±ã‚’è¿°ã¹ã‚‹æ™‚ã¯"because"ã ã‘ã˜ã‚ƒãªãã€"since"ã€"as"ã€"due to"ãªã©ã‚‚ä½¿ãˆã¾ã™ã‚ˆã€‚ã€',teacher:"kind-teacher"},{type:"cultural",message:'ğŸ˜ˆã€Œå—å‹•æ…‹ã‚’ä½¿ã„ã“ãªã›ï¼"The experiment was conducted"ãªã©ã€å®¢è¦³çš„ãªè¡¨ç¾ã«å¿…è¦ã ï¼ã€',teacher:"drill-sergeant"},{type:"cultural",message:'ğŸ§™ã€Œå¯¾æ¯”ã®è¡¨ç¾ï¼š"on the other hand"ï¼ˆä¸€æ–¹ã§ï¼‰ã€"in contrast"ï¼ˆå¯¾ç…§çš„ã«ï¼‰ã¯è«–è¿°å•é¡Œã§é‡å®ã™ã‚‹ãã€‚ã€',teacher:"wise-sage"}],Tn=[{type:"etymology",message:'ğŸ§™ã€Œ"pre-"ã¯ã€Œå‰ã€ã®æ„å‘³ã˜ã‚ƒã€‚previewï¼ˆäºˆç¿’ãƒ»è©¦å†™ï¼‰ã€predictï¼ˆäºˆæ¸¬ã™ã‚‹ï¼‰ã€prepareï¼ˆæº–å‚™ã™ã‚‹ï¼‰ã¨è¦šãˆã‚ˆã†ã€‚ã€',teacher:"wise-sage"},{type:"etymology",message:'ğŸ¤–ã€Œ"post-"ã¯ã€Œå¾Œã€ã€‚postponeï¼ˆå»¶æœŸã™ã‚‹ï¼‰ã€postwarï¼ˆæˆ¦å¾Œã®ï¼‰ãªã©ã€‚pre-ã¨ã‚»ãƒƒãƒˆã§è¦šãˆã‚‹ã¨åŠ¹ç‡çš„ã§ã™ã€‚ã€',teacher:"analyst"},{type:"etymology",message:'ğŸ˜ƒã€Œ"tele-"ã¯ã‚®ãƒªã‚·ãƒ£èªã§ã€Œé ã„ã€ã¨ã„ã†æ„å‘³ã€‚telephoneï¼ˆé›»è©±ï¼‰ã€televisionï¼ˆãƒ†ãƒ¬ãƒ“ï¼‰ã€telescopeï¼ˆæœ›é é¡ï¼‰ã§ã™ã‚ˆï¼ã€',teacher:"kind-teacher"},{type:"etymology",message:'ğŸ§™ã€Œ"bi-"ã¯ã€Œ2ã¤ã€ã®æ„å‘³ã˜ã‚ƒã€‚bicycleï¼ˆäºŒè¼ªè»Šï¼‰ã€bilingualï¼ˆ2è¨€èªè©±ã›ã‚‹ï¼‰ã€biweeklyï¼ˆéš”é€±ã®ï¼‰ã˜ã‚ƒãªã€‚ã€',teacher:"wise-sage"},{type:"etymology",message:'ğŸ˜¼ã€Œ"auto-"ã¯ã€Œè‡ªå‹•ãƒ»è‡ªå·±ã€ã ï¼automaticï¼ˆè‡ªå‹•ã®ï¼‰ã€autobiographyï¼ˆè‡ªä¼ï¼‰ã£ã¦æ„Ÿã˜ã ãï¼ã€',teacher:"enthusiastic-coach"},{type:"etymology",message:'ğŸ¤–ã€Œ"micro-"ã¯ã€Œå°ã•ã„ã€ã€"macro-"ã¯ã€Œå¤§ãã„ã€ã€‚microscopeï¼ˆé¡•å¾®é¡ï¼‰ã€macroeconomicsï¼ˆãƒã‚¯ãƒ­çµŒæ¸ˆå­¦ï¼‰ã§ã™ã€‚ã€',teacher:"analyst"},{type:"etymology",message:'ğŸ˜ƒã€Œ"sub-"ã¯ã€Œä¸‹ã€ã®æ„å‘³ã€‚subwayï¼ˆåœ°ä¸‹é‰„ï¼‰ã€submarineï¼ˆæ½œæ°´è‰¦ï¼‰ã€subtitleï¼ˆå­—å¹•ï¼‰ã§ã™ã‚ˆï¼ã€',teacher:"kind-teacher"},{type:"etymology",message:'ğŸ§™ã€Œ"super-"ã¯ã€Œä¸Šãƒ»è¶…ã€ã˜ã‚ƒã€‚superiorï¼ˆå„ªã‚ŒãŸï¼‰ã€supernaturalï¼ˆè¶…è‡ªç„¶çš„ãªï¼‰ã€superviseï¼ˆç›£ç£ã™ã‚‹ï¼‰ã˜ã‚ƒãªã€‚ã€',teacher:"wise-sage"}],En=[{type:"grammar-tip",message:'ğŸ˜ƒã€Œ"a"ã¨"an"ã®ä½¿ã„åˆ†ã‘ã¯ã€æ¬¡ã®å˜èªã®ã€ŒéŸ³ã€ã§æ±ºã¾ã‚Šã¾ã™ã€‚"an hour"ï¼ˆhourã®hã¯ç™ºéŸ³ã—ãªã„ï¼‰ã§ã™ã‚ˆï¼ã€',teacher:"kind-teacher"},{type:"grammar-tip",message:'ğŸ˜ˆã€Œç¾åœ¨å®Œäº†ã¯ã€Œä»Šã«é–¢ä¿‚ãŒã‚ã‚‹éå»ã€ã ï¼"I have lost my key"ã¯ä»Šã‚‚è¦‹ã¤ã‹ã£ã¦ãªã„ã¨ã„ã†æ„å‘³ã ï¼ã€',teacher:"drill-sergeant"},{type:"grammar-tip",message:'ğŸ¤–ã€Œ"fewer"ã¯æ•°ãˆã‚‰ã‚Œã‚‹åè©ã€"less"ã¯æ•°ãˆã‚‰ã‚Œãªã„åè©ã«ä½¿ã„ã¾ã™ã€‚"fewer people"ã€"less water"ã§ã™ã€‚ã€',teacher:"analyst"},{type:"grammar-tip",message:'ğŸ§™ã€Œ"used to"ã¯éå»ã®ç¿’æ…£ã€"be used to"ã¯æ…£ã‚Œã¦ã„ã‚‹ã€"get used to"ã¯æ…£ã‚Œã‚‹ã˜ã‚ƒã€‚å…¨ã¦é•ã†ãã€‚ã€',teacher:"wise-sage"},{type:"grammar-tip",message:'ğŸ˜¼ã€Œ"will"ã¯æ„å¿—ã€"be going to"ã¯äºˆå®šã‚„äºˆæ¸¬ã ï¼ä½¿ã„åˆ†ã‘ã‚‰ã‚Œã‚‹ã¨è‹±èªã£ã½ããªã‚‹ãï¼ã€',teacher:"enthusiastic-coach"},{type:"grammar-tip",message:'ğŸ˜ƒã€Œ"some"ã¨"any"ã€è‚¯å®šæ–‡ã¯someã€ç–‘å•æ–‡ãƒ»å¦å®šæ–‡ã¯anyãŒåŸºæœ¬ã§ã™ãŒã€"Would you like some tea?"ã®ã‚ˆã†ã«å‹§ã‚ã‚‹æ™‚ã¯someã§ã™ã‚ˆï¼ã€',teacher:"kind-teacher"},{type:"grammar-tip",message:'ğŸ˜ˆã€Œä¸‰å˜ç¾ã®sï¼å¿˜ã‚Œã‚‹ãªï¼"He go"ã§ã¯ãªã"He goes"ã ï¼åŸºæœ¬ä¸­ã®åŸºæœ¬ã ãï¼ã€',teacher:"drill-sergeant"}];function Rn(s){if(Math.random()>.08)return null;if(s){const t=[...In,...Tn,..._n];return t[Math.floor(Math.random()*t.length)].message}else{const t=[...An,...En];return t[Math.floor(Math.random()*t.length)].message}}function Wn(s){const t=["ğŸ˜ƒğŸ’¡ å—é¨“ãƒ†ã‚¯ï¼åŒã˜å˜èªã®ç¹°ã‚Šè¿”ã—ã‚’é¿ã‘ã‚‹ãŸã‚ã€ä»£åè©ï¼ˆit, they, thisï¼‰ã‚„åŒç¾©èªã«æ³¨ç›®ã™ã‚‹ã¨èª­è§£ãŒæ¥½ã«ãªã‚Šã¾ã™ã‚ˆã€‚","ğŸ˜¼ğŸ’¡ è¦šãˆæ–¹ï¼å‹•è©+å‰ç½®è©ã®ç†Ÿèªã¯ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã§è¦šãˆã‚‹ã¨ã„ã„ãï¼look upï¼ˆä¸Šã‚’è¦‹ã‚‹â†’èª¿ã¹ã‚‹ï¼‰ã€give upï¼ˆä¸Šã’ã‚‹â†’è«¦ã‚ã‚‹ï¼‰ã ï¼","ğŸ§™ğŸ’¡ é•·æ–‡ã®ã‚³ãƒ„ï¼šè¨­å•ã‚’å…ˆã«èª­ã‚“ã§ã‹ã‚‰æœ¬æ–‡ã‚’èª­ã‚€ã¨ã€ä½•ã‚’æ¢ã›ã°ã„ã„ã‹åˆ†ã‹ã£ã¦åŠ¹ç‡çš„ã˜ã‚ƒã€‚","ğŸ¤–ğŸ’¡ çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ï¼šåˆç´šã¯ç´„1,077èªã€ä¸­ç´šã¯ç´„1,616èªã€ä¸Šç´šã¯ç´„885èªã§ã™ã€‚è¨ˆç”»çš„ã«èªå½™ã‚’å¢—ã‚„ã—ã¾ã—ã‚‡ã†ã€‚",'ğŸ˜ˆğŸ’¡ æ™‚åˆ¶ã®ä¸€è‡´ï¼ä¸»ç¯€ãŒéå»å½¢ãªã‚‰å¾“å±ç¯€ã‚‚éå»å½¢ã ï¼"He said that he was tired"ã ãï¼',"ğŸ˜ƒğŸ’¡ æ•´åºå•é¡Œã®ã‚³ãƒ„ï¼ã¾ãšä¸»èªã¨å‹•è©ã‚’è¦‹ã¤ã‘ã¦ã€ä¿®é£¾èªã‚’å¾Œã‹ã‚‰ä»˜ã‘è¶³ã™ã¨è§£ãã‚„ã™ã„ã§ã™ã‚ˆã€‚",'ğŸ§™ğŸ’¡ å† è©ã®ä½¿ã„åˆ†ã‘ï¼š"a/an"ã¯åˆã‚ã¦å‡ºã‚‹ãƒ»ç‰¹å®šã§ããªã„ã‚‚ã®ã€"the"ã¯æ—¢å‡ºãƒ»ç‰¹å®šã§ãã‚‹ã‚‚ã®ã˜ã‚ƒã€‚',"ğŸ˜¼ğŸ’¡ ãƒªã‚¹ãƒ‹ãƒ³ã‚°å¯¾ç­–ï¼æ¶ˆå»æ³•ãŒæœ‰åŠ¹ã ï¼æ˜ã‚‰ã‹ã«é•ã†é¸æŠè‚¢ã‚’æ¶ˆã—ã¦ã„ãã¨æ­£è§£ç‡ãŒä¸ŠãŒã‚‹ãï¼","ğŸ¤–ğŸ’¡ åŠ¹ç‡çš„å­¦ç¿’æ³•ï¼šå˜èªã¯æ–‡è„ˆã®ä¸­ã§è¦šãˆã‚‹ã¨å®šç€ç‡ãŒ3å€ä»¥ä¸Šé«˜ã¾ã‚Šã¾ã™ã€‚ä¾‹æ–‡ã”ã¨è¦šãˆã¾ã—ã‚‡ã†ã€‚",'ğŸ˜ƒğŸ’¡ æ¯”è¼ƒè¡¨ç¾ï¼š"as...as"ï¼ˆåŒç­‰ï¼‰ã€"-er than"ï¼ˆæ¯”è¼ƒç´šï¼‰ã€"the -est"ï¼ˆæœ€ä¸Šç´šï¼‰ã®3ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ã‚‡ã†ï¼'];return t[Math.floor(Math.random()*t.length)]}function Ot({mode:s="translation",currentScore:t=0,totalAnswered:r=0,sessionCorrect:a=0,sessionIncorrect:n=0,sessionReview:i=0,isReviewFocusMode:l=!1,onReviewFocus:o,onShowSettings:c,currentWord:d,onAnswerTime:u,dataSource:g="",category:x="",difficulty:S="",wordPhraseFilter:N="",grammarUnit:w}){const[b,k]=m.useState("ai"),[D,A]=m.useState("");m.useEffect(()=>{A((()=>{const re=localStorage.getItem("aiPersonality")||"kind-teacher";if(Math.random()<.03)return Wn();const J=Pn();if(J)return J;const Pe=Mn();return Pe||fn(re)||"ã“ã‚“ã«ã¡ã¯ï¼ä¸€ç·’ã«å­¦ç¿’ã—ã¾ã—ã‚‡ã†ã€‚"})())},[]);const j=m.useRef(null),z=m.useRef(null),V=m.useRef(null),[ce,ie]=m.useState(()=>{const Q=localStorage.getItem(`learning-limit-${s}`);return Q?parseInt(Q):null}),[ee,oe]=m.useState(()=>{const Q=localStorage.getItem(`review-limit-${s}`);return Q?parseInt(Q):null}),[me,pe]=m.useState(()=>{const Q=localStorage.getItem("memorization-still-learning-limit");return Q?parseInt(Q):null}),[be,P]=m.useState(()=>{const Q=localStorage.getItem("memorization-incorrect-limit");return Q?parseInt(Q):null}),[q,F]=m.useState(!1),[X,G]=m.useState(()=>{if(s==="grammar"){const{retentionRate:Q,appearedCount:re}=Mt();return{retentionRate:Q,appearedCount:re}}else{const{retentionRate:Q,appearedCount:re}=kt();return{retentionRate:Q,appearedCount:re}}}),[Y,ue]=m.useState(()=>s==="grammar"?St():s==="memorization"?gt():Nt()),[U,ne]=m.useState(null),[Ne,Ce]=m.useState([]);m.useEffect(()=>{s==="grammar"&&ps().then(Q=>{if(w){const re=w.match(/g(\d+)-(?:unit|u)(\d+)/);if(re){const J=`ä¸­${re[1]}_Unit${re[2]}`,Pe=Q.filter(fe=>fe.unit===J);Ce(Pe)}else Ce(Q)}else Ce(Q)})},[s,u,w]),m.useEffect(()=>{if(s==="grammar"){const{retentionRate:Q,appearedCount:re}=Mt();G({retentionRate:Q,appearedCount:re}),ue(St())}else if(s==="memorization"){ue(gt());const Q=gt();G({retentionRate:Q.basicRetentionRate,appearedCount:Q.appearedWords})}else{const{retentionRate:Q,appearedCount:re}=kt();G({retentionRate:Q,appearedCount:re}),ue(Nt())}},[u,s]),m.useEffect(()=>{ne(d?ds(d):null)},[d,u]),m.useEffect(()=>{if(j.current){const Q=Math.round(Y.masteredPercentage);j.current.style.setProperty("--segment-width",String(Q)),j.current.setAttribute("data-width",String(Q))}if(z.current){const Q=Math.round(Y.learningPercentage);z.current.style.setProperty("--segment-width",String(Q)),z.current.setAttribute("data-width",String(Q))}if(V.current){const Q=Math.round(Y.strugglingPercentage);V.current.style.setProperty("--segment-width",String(Q)),V.current.setAttribute("data-width",String(Q))}},[Y,b,s]);const{todayAccuracy:De,todayTotalAnswered:Te}=m.useMemo(()=>Vt(s),[s]);m.useMemo(()=>ns(s),[s]),m.useMemo(()=>Wt(),[]);const{retentionRate:Le}=X,K=Y;return m.useMemo(()=>r>0?Math.round(t/r*100):0,[t,r]),e.jsxs("div",{className:"score-board-compact",children:[e.jsxs("div",{className:"score-board-tabs grid grid-cols-3 sm:grid-cols-5 gap-1 sm:gap-2",children:[e.jsxs("button",{className:`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium transition-all duration-200 rounded-t-lg border-b-2 ${b==="ai"?"bg-primary text-white border-primary":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,onClick:()=>k("ai"),title:"AIã‚³ãƒ¡ãƒ³ãƒˆ",children:[e.jsx("span",{className:"hidden sm:inline",children:"ğŸ¤– AI"}),e.jsx("span",{className:"sm:hidden",children:"ğŸ¤–"})]}),e.jsxs("button",{className:`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium transition-all duration-200 rounded-t-lg border-b-2 ${b==="plan"?"bg-primary text-white border-primary":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,onClick:()=>k("plan"),title:"ãƒ—ãƒ©ãƒ³",children:[e.jsx("span",{className:"hidden sm:inline",children:"ğŸ“‹ ãƒ—ãƒ©ãƒ³"}),e.jsx("span",{className:"sm:hidden",children:"ğŸ“‹"})]}),e.jsxs("button",{className:`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium transition-all duration-200 rounded-t-lg border-b-2 ${b==="breakdown"?"bg-primary text-white border-primary":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,onClick:()=>k("breakdown"),title:"å­¦ç¿’çŠ¶æ³",children:[e.jsx("span",{className:"hidden sm:inline",children:"ğŸ“ˆ å­¦ç¿’çŠ¶æ³"}),e.jsx("span",{className:"sm:hidden",children:"ğŸ“ˆ"})]}),e.jsxs("button",{className:`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium transition-all duration-200 rounded-t-lg border-b-2 ${b==="history"?"bg-primary text-white border-primary":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,onClick:()=>k("history"),title:"å±¥æ­´",children:[e.jsx("span",{className:"hidden sm:inline",children:"ğŸ“œ å±¥æ­´"}),e.jsx("span",{className:"sm:hidden",children:"ğŸ“œ"})]}),e.jsxs("button",{className:`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium transition-all duration-200 rounded-t-lg border-b-2 ${b==="settings"?"bg-primary text-white border-primary":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,onClick:()=>{c?c():k("settings")},title:"å­¦ç¿’è¨­å®š",children:[e.jsx("span",{className:"hidden sm:inline",children:"âš™ï¸ å­¦ç¿’è¨­å®š"}),e.jsx("span",{className:"sm:hidden",children:"âš™ï¸"})]})]}),b==="ai"&&e.jsx("div",{className:"score-board-content",children:e.jsx("div",{className:"bg-white rounded-lg p-3 shadow-md border border-gray-200",children:e.jsx("div",{className:"ai-comment-container",children:e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("div",{className:"text-2xl flex-shrink-0",children:(()=>{const Q=localStorage.getItem("aiPersonality")||"kind-teacher";return{"kind-teacher":"ğŸ˜ƒ","drill-sergeant":"ğŸ‘¹","enthusiastic-coach":"ğŸ˜¼",analyst:"ğŸ¤–","wise-sage":"ğŸ§™"}[Q]||"ğŸ˜ƒ"})()}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"text-sm text-gray-700 leading-snug break-words",children:D.replace(/^[ğŸ˜ƒğŸ‘¹ğŸ˜¼ğŸ¤–ğŸ§™]+ã€Œ?/gu,"").replace(/ã€$/gu,"").trim()})})]})})})}),b==="plan"&&e.jsx("div",{className:"score-board-content",children:e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-md border border-gray-200",children:[e.jsxs("div",{className:"plan-text-line",children:[e.jsxs("span",{className:"stat-text-label",children:["ğŸ“š ",g||"å…¨å•é¡Œé›†"]}),e.jsx("span",{className:"stat-text-divider",children:"ï½œ"}),e.jsx("span",{className:"stat-text-label",children:x||"å…¨åˆ†é‡"}),e.jsx("span",{className:"stat-text-divider",children:"ï½œ"}),e.jsx("span",{className:"stat-text-label",children:S==="all"?"å…¨é›£æ˜“åº¦":S==="basic"?"åŸºç¤":S==="standard"?"æ¨™æº–":S==="advanced"?"ç™ºå±•":S}),(s==="translation"||s==="spelling"||s==="memorization")&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"stat-text-divider",children:"ï½œ"}),e.jsx("button",{onClick:()=>F(!0),className:"stat-text-label cursor-pointer hover:text-primary transition-colors",title:"å‡ºé¡Œç¹°ã‚Šè¿”ã—è¨­å®š",children:"âš™ï¸ ä¸Šé™è¨­å®š"})]}),N&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"stat-text-divider",children:"ï½œ"}),e.jsx("span",{className:"stat-text-label",children:N==="all"?"å˜èªãƒ»ç†Ÿèª":N==="word"?"å˜èªã®ã¿":N==="phrase"?"ç†Ÿèªã®ã¿":"å˜èªãƒ»ç†Ÿèª"})]})]}),q&&(s==="translation"||s==="spelling")&&e.jsx("div",{className:"plan-settings-modal",children:e.jsxs("div",{className:"plan-settings-content",children:[e.jsx("h4",{children:"ğŸ¯ å‡ºé¡Œç¹°ã‚Šè¿”ã—è¨­å®š"}),e.jsx("p",{className:"plan-settings-description",children:"æœªå…¥åŠ›ã¯ã©ã“ã¾ã§ã‚‚å‡ºé¡Œã—ã¾ã™"}),e.jsxs("div",{className:"plan-setting-item",children:[e.jsx("label",{children:"å­¦ç¿’ä¸­ã®èªæ•°ä¸Šé™:"}),e.jsx("input",{type:"number",min:"0",placeholder:"æœªå…¥åŠ›=ç„¡åˆ¶é™",value:ce||"",onChange:Q=>{const re=Q.target.value===""?null:parseInt(Q.target.value);ie(re),re===null?localStorage.removeItem(`learning-limit-${s}`):localStorage.setItem(`learning-limit-${s}`,re.toString())}}),e.jsx("p",{className:"setting-help",children:"ã“ã®æ•°ã«é”ã—ãŸã‚‰ç¹°ã‚Šè¿”ã—å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚Šã¾ã™"})]}),e.jsxs("div",{className:"plan-setting-item",children:[e.jsx("label",{children:"è¦å¾©ç¿’ã®èªæ•°ä¸Šé™:"}),e.jsx("input",{type:"number",min:"0",placeholder:"æœªå…¥åŠ›=ç„¡åˆ¶é™",value:ee||"",onChange:Q=>{const re=Q.target.value===""?null:parseInt(Q.target.value);oe(re),re===null?localStorage.removeItem(`review-limit-${s}`):localStorage.setItem(`review-limit-${s}`,re.toString())}}),e.jsx("p",{className:"setting-help",children:"ã“ã®æ•°ã«é”ã—ãŸã‚‰ç¹°ã‚Šè¿”ã—å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚Šã¾ã™"})]}),e.jsx("button",{className:"plan-settings-close",onClick:()=>F(!1),children:"é–‰ã˜ã‚‹"})]})}),q&&s==="memorization"&&e.jsx("div",{className:"plan-settings-modal",children:e.jsxs("div",{className:"plan-settings-content",children:[e.jsx("h4",{children:"ğŸ¯ å‡ºé¡Œç¹°ã‚Šè¿”ã—è¨­å®š"}),e.jsx("p",{className:"plan-settings-description",children:"æœªå…¥åŠ›ã¯ã©ã“ã¾ã§ã‚‚å‡ºé¡Œã—ã¾ã™"}),e.jsxs("div",{className:"plan-setting-item",children:[e.jsx("label",{children:"ã¾ã ã¾ã ã®èªæ•°ä¸Šé™:"}),e.jsx("input",{type:"number",min:"0",placeholder:"æœªå…¥åŠ›=ç„¡åˆ¶é™",value:me||"",onChange:Q=>{const re=Q.target.value===""?null:parseInt(Q.target.value);pe(re),re===null?localStorage.removeItem("memorization-still-learning-limit"):localStorage.setItem("memorization-still-learning-limit",re.toString())}}),e.jsx("p",{className:"setting-help",children:"ã“ã®æ•°ã«é”ã—ãŸã‚‰ç¹°ã‚Šè¿”ã—å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚Šã¾ã™"})]}),e.jsxs("div",{className:"plan-setting-item",children:[e.jsx("label",{children:"åˆ†ã‹ã‚‰ãªã„ã®èªæ•°ä¸Šé™:"}),e.jsx("input",{type:"number",min:"0",placeholder:"æœªå…¥åŠ›=ç„¡åˆ¶é™",value:be||"",onChange:Q=>{const re=Q.target.value===""?null:parseInt(Q.target.value);P(re),re===null?localStorage.removeItem("memorization-incorrect-limit"):localStorage.setItem("memorization-incorrect-limit",re.toString())}}),e.jsx("p",{className:"setting-help",children:"ã“ã®æ•°ã«é”ã—ãŸã‚‰ç¹°ã‚Šè¿”ã—å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚Šã¾ã™"})]}),e.jsx("button",{className:"plan-settings-close",onClick:()=>F(!1),children:"é–‰ã˜ã‚‹"})]})})]})}),b==="breakdown"&&e.jsx("div",{className:"score-board-content",children:e.jsx("div",{className:"bg-white rounded-lg p-3 shadow-md border border-gray-200",children:e.jsxs("div",{className:"retention-breakdown-container",children:[e.jsxs("div",{className:"retention-breakdown-header",children:[e.jsx("div",{className:"retention-title",children:"ğŸ“Š å­¦ç¿’çŠ¶æ³ã®å†…è¨³"}),K.appearedWords>0?e.jsx("div",{className:"retention-subtitle",children:s==="memorization"?e.jsxs(e.Fragment,{children:[K.appearedWords,"èªç¢ºèªï¼š ğŸŸ¢è¦šãˆã¦ã‚‹"," ",K.masteredCount,"èª ğŸŸ¡ã¾ã ã¾ã  ",K.learningCount,"èª ğŸ”´åˆ†ã‹ã‚‰ãªã„ ",K.strugglingCount,"èª",o&&e.jsx("span",{className:`review-mode-icon ${l?"active":""}`,onClick:o,title:l?"å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰è§£é™¤":"å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰é–‹å§‹",children:"ğŸ”¥"})]}):s==="grammar"?e.jsxs(e.Fragment,{children:[K.appearedWords,"å•å‡ºé¡Œï¼š ğŸŸ¢å®šç€ ",K.masteredCount,"å• ğŸŸ¡å­¦ç¿’ä¸­ ",K.learningCount,"å• ğŸ”´è¦å¾©ç¿’"," ",K.strugglingCount,"å•"]}):e.jsxs(e.Fragment,{children:[K.appearedWords,"å•å‡ºé¡Œï¼š ğŸŸ¢å®šç€ ",K.masteredCount,"èª ğŸŸ¡å­¦ç¿’ä¸­ ",K.learningCount,"èª ğŸ”´è¦å¾©ç¿’"," ",K.strugglingCount,"èª",(s==="translation"||s==="spelling")&&o&&e.jsx("span",{className:`review-mode-icon ${l?"active":""}`,onClick:o,title:l?"å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰è§£é™¤":"å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰é–‹å§‹",children:"ğŸ”¥"})]})}):e.jsx("div",{className:"retention-subtitle",children:s==="memorization"?"ã¾ã èªå¥ã‚’ç¢ºèªã—ã¦ã„ã¾ã›ã‚“":"ã¾ã å•é¡Œã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã›ã‚“"})]}),K.appearedWords>0&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"retention-progress-bar",children:s==="memorization"?e.jsxs(e.Fragment,{children:[K.masteredPercentage>0&&e.jsx("div",{ref:j,className:"retention-segment retention-mastered","data-width":Math.round(K.masteredPercentage),title:`ğŸŸ¢ è¦šãˆã¦ã‚‹: ${K.masteredCount}èª (${Math.round(K.masteredPercentage)}%)`,children:K.masteredPercentage>=10&&e.jsxs("span",{children:[Math.round(K.masteredPercentage),"%"]})}),K.learningPercentage>0&&e.jsx("div",{ref:z,className:"retention-segment retention-learning","data-width":Math.round(K.learningPercentage),title:`ğŸŸ¡ ã¾ã ã¾ã : ${K.learningCount}èª (${Math.round(K.learningPercentage)}%)`,children:K.learningPercentage>=10&&e.jsxs("span",{children:[Math.round(K.learningPercentage),"%"]})}),K.strugglingPercentage>0&&e.jsx("div",{ref:V,className:"retention-segment retention-struggling","data-width":Math.round(K.strugglingPercentage),title:`ğŸ”´ åˆ†ã‹ã‚‰ãªã„: ${K.strugglingCount}èª (${Math.round(K.strugglingPercentage)}%)`,children:K.strugglingPercentage>=10&&e.jsxs("span",{children:[Math.round(K.strugglingPercentage),"%"]})})]}):e.jsxs(e.Fragment,{children:[K.masteredPercentage>0&&e.jsx("div",{ref:j,className:"retention-segment retention-mastered","data-width":Math.round(K.masteredPercentage),title:`ğŸŸ¢ å®šç€: ${K.masteredCount}èª (${Math.round(K.masteredPercentage)}%)`,children:K.masteredPercentage>=10&&e.jsxs("span",{children:[Math.round(K.masteredPercentage),"%"]})}),K.learningPercentage>0&&e.jsx("div",{ref:z,className:"retention-segment retention-learning","data-width":Math.round(K.learningPercentage),title:`ğŸŸ¡ å­¦ç¿’ä¸­: ${K.learningCount}èª (${Math.round(K.learningPercentage)}%)`,children:K.learningPercentage>=10&&e.jsxs("span",{children:[Math.round(K.learningPercentage),"%"]})}),K.strugglingPercentage>0&&e.jsx("div",{ref:V,className:"retention-segment retention-struggling","data-width":Math.round(K.strugglingPercentage),title:`ğŸ”´ è¦å¾©ç¿’: ${K.strugglingCount}èª (${Math.round(K.strugglingPercentage)}%)`,children:K.strugglingPercentage>=10&&e.jsxs("span",{children:[Math.round(K.strugglingPercentage),"%"]})})]})})})]})})}),b==="history"&&e.jsx("div",{className:"score-board-content",children:e.jsx("div",{className:"bg-white rounded-lg p-3 shadow-md border border-gray-200",children:e.jsx("div",{className:"history-compact",children:s==="grammar"?e.jsx("div",{className:"word-detail-container",children:Ne.length>0?e.jsx("div",{className:"grammar-units-list",children:Ne.map(Q=>{const re=Q.correctCount+Q.incorrectCount,J=Q.answeredQuestions>0?Math.round(Q.masteredCount/Q.answeredQuestions*100):0,Pe=Array(Math.min(re,10)).fill("ğŸŸ©").join("");let fe="ğŸŸ¢",We="å®šç€æ¸ˆ";Q.masteredCount===0&&Q.answeredQuestions>0?(fe="ğŸ”´",We="è¦å¾©ç¿’"):J<80&&Q.answeredQuestions>0&&(fe="ğŸŸ¡",We="å­¦ç¿’ä¸­");const H=Q.unit.match(/ä¸­(\d+)/),Ee=H?`${H[1]}å¹´`:Q.unit,Ae=Q.unit.match(/Unit(\d+)/),$e=Ae?`Unit${Ae[1]}`:"",$=$e?`${Ee}_${$e}_${Q.title}`:`${Ee}_${Q.title}`;return e.jsxs("div",{className:"grammar-unit-card",children:[e.jsxs("div",{className:"word-detail-title",children:["ğŸ“Š ",$," ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿",e.jsxs("span",{className:"word-status-badge",children:[fe," ",We]})]}),e.jsxs("div",{className:"word-detail-stats",children:[e.jsx("span",{className:"word-stat-label",children:"æ­£è§£:"}),e.jsxs("strong",{className:"word-stat-value",children:[Q.correctCount,"/",re,"å›"]}),e.jsx("span",{className:"word-stat-divider",children:"ï½œ"}),Pe&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"word-stat-label",children:"å±¥æ­´:"}),e.jsx("span",{className:"word-history-icons",children:Pe}),e.jsx("span",{className:"word-stat-divider",children:"ï½œ"})]}),e.jsx("span",{className:"word-stat-label",children:"å®šç€ç‡:"}),e.jsxs("strong",{className:"word-stat-value word-retention-rate",children:[J,"%"]})]})]},Q.unit)})}):e.jsxs("div",{className:"word-detail-empty",children:[e.jsx("p",{children:"ã¾ã æ–‡æ³•å•é¡Œã®è§£ç­”ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsx("p",{className:"stat-text-sub",children:"å•é¡Œã‚’è§£ãã¨å˜å…ƒã”ã¨ã®æˆç¸¾ãŒè¡¨ç¤ºã•ã‚Œã¾ã™"})]})}):d&&U?e.jsxs("div",{className:"word-detail-container",children:[e.jsxs("div",{className:"word-detail-title",children:["ğŸ“Š ",d," ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿",e.jsxs("span",{className:"word-status-badge",children:[U.statusIcon," ",U.statusLabel]})]}),e.jsxs("div",{className:"word-detail-stats",children:[e.jsx("span",{className:"word-stat-label",children:"æ­£è§£:"}),e.jsxs("strong",{className:"word-stat-value",children:[U.correctCount,"/",U.totalCount,"å›"]}),e.jsx("span",{className:"word-stat-divider",children:"ï½œ"}),U.accuracyHistory&&U.accuracyHistory.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"word-stat-label",children:"å±¥æ­´:"}),e.jsx("span",{className:"word-history-icons",children:U.accuracyHistory}),e.jsx("span",{className:"word-stat-divider",children:"ï½œ"})]}),e.jsx("span",{className:"word-stat-label",children:"å®šç€ç‡:"}),e.jsxs("strong",{className:"word-stat-value word-retention-rate",children:[U.retentionRate,"%"]})]})]}):d&&!U?e.jsx("div",{className:"word-detail-empty",children:e.jsx("p",{children:"ã“ã®å˜èªã®ãƒ‡ãƒ¼ã‚¿ãŒã¾ã ã‚ã‚Šã¾ã›ã‚“"})}):e.jsx("div",{className:"word-detail-empty",children:e.jsx("p",{children:"å•é¡Œã‚’é–‹å§‹ã™ã‚‹ã¨ã€ç¾åœ¨ã®å˜èªã®ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã¾ã™"})})})})}),b==="settings"&&e.jsx("div",{className:"score-board-content",children:e.jsx("div",{className:"bg-white rounded-lg p-3 shadow-md border border-gray-200",children:e.jsx("div",{className:"settings-tab-container",children:e.jsx("div",{className:"word-detail-empty",children:e.jsx("p",{children:"ã“ã®ã‚¿ãƒ–ã®è¨­å®šã¯å­¦ç¿’è¨­å®šãƒ‘ãƒãƒ«ã‹ã‚‰è¡Œãˆã¾ã™"})})})})})]})}const qt=[{id:"beginner-basic",name:"åˆç´šåŸºç¤",requiredWords:600,requiredAccuracy:70,description:"åŸºæœ¬çš„ãªå˜èª",icon:"ğŸŒ±"},{id:"beginner-complete",name:"åˆç´šå®Œäº†",requiredWords:1077,requiredAccuracy:70,description:"åˆç´šãƒ¬ãƒ™ãƒ«å®Œå…¨ç¿’å¾—",icon:"ğŸŒ¿"},{id:"intermediate-half",name:"ä¸­ç´šåŠåˆ†",requiredWords:1900,requiredAccuracy:75,description:"ä¸­ç´šãƒ¬ãƒ™ãƒ«50%",icon:"ğŸŒ³"},{id:"intermediate-complete",name:"ä¸­ç´šå®Œäº†",requiredWords:2693,requiredAccuracy:75,description:"ä¸­ç´šãƒ¬ãƒ™ãƒ«å®Œå…¨ç¿’å¾—",icon:"ğŸ“"},{id:"advanced-half",name:"ä¸Šç´šåŠåˆ†",requiredWords:3150,requiredAccuracy:80,description:"ä¸Šç´šãƒ¬ãƒ™ãƒ«50%",icon:"ğŸ“š"},{id:"advanced-complete",name:"ä¸Šç´šå®Œäº†",requiredWords:3578,requiredAccuracy:80,description:"ä¸Šç´šãƒ¬ãƒ™ãƒ«å®Œå…¨ç¿’å¾—",icon:"ğŸš€"},{id:"master",name:"ãƒã‚¹ã‚¿ãƒ¼",requiredWords:4e3,requiredAccuracy:85,description:"å…¨ãƒ¬ãƒ™ãƒ«åˆ¶è¦‡",icon:"â­"}];function Ln(){const s=localStorage.getItem("user-goal-level");if(s){const t=JSON.parse(s),r=qt.find(a=>a.id===t);if(r)return r}return qt.find(t=>t.id==="intermediate-complete")||qt[0]}function hr(s){const t=s||Ln(),r=ye(),a=Wt();let n=0,i=0;Object.values(r.wordProgress).forEach(N=>{n+=N.correctCount,i+=N.correctCount+N.incorrectCount});const l=i>0?n/i*100:0,o=Math.min(100,a/t.requiredWords*100),c=Math.min(100,l/t.requiredAccuracy*100),d=(o+c)/2,u=a>=t.requiredWords&&l>=t.requiredAccuracy,g=On(a,t.requiredWords,l,t.requiredAccuracy),x=Math.max(0,t.requiredWords-a),S=g>0?Math.ceil(x/g):0;return{goal:t,currentWords:a,currentAccuracy:Math.round(l),wordsProgress:Math.round(o),accuracyProgress:Math.round(c),overallProgress:Math.round(d),isAchieved:u,estimatedDaysToAchieve:g,recommendedDailyWords:Math.min(50,S)}}function On(s,t,r,a){if(s>=t&&r>=a)return 0;const n=ye(),l=Date.now()-7*24*60*60*1e3;let o=0;Object.values(n.wordProgress).forEach(w=>{w.lastStudied>=l&&w.masteryLevel==="mastered"&&o++});const c=o/7,d=Math.max(5,c),g=Math.max(0,t-s)/d,S=Math.max(0,a-r)*2,N=Math.ceil(g+S);return Math.max(1,N)}function Fi(s=!0){const t=hr();if(t.isAchieved)return`ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼${t.goal.name}ãƒ¬ãƒ™ãƒ«ã‚’é”æˆã—ã¾ã—ãŸï¼`;const r=[];if(r.push(`${t.goal.icon} ${t.goal.name}ã¾ã§ ${t.overallProgress}%`),t.currentWords<t.goal.requiredWords){const a=t.goal.requiredWords-t.currentWords;r.push(`ã‚ã¨${a}èª`)}return t.estimatedDaysToAchieve>0&&(t.estimatedDaysToAchieve<=7?r.push(`ã‚ã¨${t.estimatedDaysToAchieve}æ—¥ã§é”æˆï¼`):t.estimatedDaysToAchieve<=30?r.push(`ç´„${Math.ceil(t.estimatedDaysToAchieve/7)}é€±é–“ã§é”æˆè¦‹è¾¼ã¿`):r.push(`ç´„${Math.ceil(t.estimatedDaysToAchieve/30)}ãƒ¶æœˆã§é”æˆè¦‹è¾¼ã¿`)),s&&(t.overallProgress>=80?r.push("ã‚‚ã†å°‘ã—ã§é”æˆã§ã™ï¼é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼"):t.overallProgress>=50?r.push("é †èª¿ã«é€²ã‚“ã§ã„ã¾ã™ï¼ã“ã®èª¿å­ã§ç¶šã‘ã¾ã—ã‚‡ã†ï¼"):t.overallProgress>=25&&r.push("ç€å®Ÿã«é€²æ­©ã—ã¦ã„ã¾ã™ï¼")),r.join(" ")}const zn={accept:["except"],except:["accept"],affect:["effect"],effect:["affect"],dessert:["desert"],desert:["dessert"],quiet:["quite"],quite:["quiet"],lose:["loose"],loose:["lose"],advice:["advise"],advise:["advice"],breath:["breathe"],breathe:["breath"],cloth:["clothe","clothes"],clothe:["cloth","clothes"],clothes:["cloth","clothe"],borrow:["lend"],lend:["borrow"],teach:["learn"],learn:["teach"],speak:["talk","say","tell"],talk:["speak","say","tell"],say:["speak","talk","tell"],tell:["speak","talk","say"],see:["look","watch"],look:["see","watch"],watch:["see","look"],hear:["listen"],listen:["hear"],bring:["take"],take:["bring"],come:["go"],go:["come"],in:["on","at"],on:["in","at"],at:["in","on"],for:["to","of"],to:["for","of"],of:["for","to"],already:["all ready"],"all ready":["already"],altogether:["all together"],"all together":["altogether"],everyday:["every day"],"every day":["everyday"]};function xr(s){const t=s.toLowerCase();return zn[t]||[]}function Fn(){const s=ye(),t=[],r=new Set;return Object.entries(s.wordProgress).forEach(([a])=>{if(r.has(a.toLowerCase()))return;const n=xr(a);if(n.length===0)return;const i=[a,...n].map(x=>x.toLowerCase()),l=Array.from(new Set(i));let o=0,c=0;l.forEach(x=>{const S=s.wordProgress[x];S&&(o+=S.incorrectCount,c+=S.correctCount+S.incorrectCount)});const d=c>0?o/c:0,u=Math.min(100,d*100*Math.log1p(c));let g="spelling";["speak","talk","say","tell","see","look","watch"].includes(a.toLowerCase())?g="meaning":["in","on","at","for","to","of"].includes(a.toLowerCase())&&(g="grammar"),t.push({words:l,type:g,description:qn(l,g),confusionScore:Math.round(u),totalErrors:o,needsReview:u>30||d>.3}),l.forEach(x=>r.add(x))}),t.filter(a=>a.totalErrors>0).sort((a,n)=>n.confusionScore-a.confusionScore)}function qn(s,t){return t==="spelling"?`ã‚¹ãƒšãƒ«ãŒä¼¼ã¦ã„ã‚‹: ${s.join(", ")}`:t==="meaning"?`æ„å‘³ãŒä¼¼ã¦ã„ã‚‹: ${s.join(", ")}`:`æ–‡æ³•çš„ã«æ··åŒã—ã‚„ã™ã„: ${s.join(", ")}`}function Bn(s){const t=ye(),r={},a=[];s.words.forEach(l=>{const o=t.wordProgress[l];if(o){const c=o.correctCount+o.incorrectCount,d=c>0?o.correctCount/c*100:0;r[l]=d,a.push(d)}});const n=a.length>0?a.reduce((l,o)=>l+o,0)/a.length:0,i=a.length>0?a.reduce((l,o)=>l+Math.pow(o-n,2),0)/a.length:0;return{groupRetention:Math.round(n),individualRetentions:r,variance:Math.round(i)}}function Qn(s){const t=Bn(s);return t.groupRetention<50?`âš ï¸ ${s.words.join(", ")} ã®åŒºåˆ¥ãŒæ›–æ˜§ã§ã™ã€‚é›†ä¸­çš„ã«å¾©ç¿’ã—ã¾ã—ã‚‡ã†ã€‚`:t.variance>500?`ğŸ“Š ${s.words.join(", ")} ã§å®šç€åº¦ã«ã°ã‚‰ã¤ããŒã‚ã‚Šã¾ã™ã€‚å¼±ã„å˜èªã‚’é‡ç‚¹çš„ã«ã€‚`:t.groupRetention<70?`ğŸ’ª ${s.words.join(", ")} ã‚’ã‚‚ã†å°‘ã—ç·´ç¿’ã™ã‚‹ã¨å®Œç’§ã§ã™ï¼`:`âœ… ${s.words.join(", ")} ã®åŒºåˆ¥ãŒã—ã£ã‹ã‚Šã§ãã¦ã„ã¾ã™ï¼`}function Gn(s){const t=/^[^:]+:\s*[""](.+?)[""]$/,r=s.match(t);if(r)return r[1].trim();const a=/^[^:]+:\s*(.+)$/,n=s.match(a);return n?n[1].trim():s}function qe(s,t={}){if(!("speechSynthesis"in window)){p.warn("ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯Web Speech APIã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“");return}const r=Gn(s);if(window.speechSynthesis.speaking||window.speechSynthesis.pending){window.speechSynthesis.cancel(),setTimeout(()=>{Ps(r,t)},50);return}Ps(r,t)}function Ps(s,t){const r=new SpeechSynthesisUtterance(s),a=localStorage.getItem("speechRate"),n=localStorage.getItem("voiceGender");r.lang=t.lang||"en-US",r.rate=t.rate||(a?parseFloat(a):.85),r.pitch=t.pitch||1,r.volume=t.volume||1;const l=window.speechSynthesis.getVoices().filter(c=>c.lang.startsWith("en-")),o=["Google US English","Google UK English Female","Google UK English Male","Samantha","Alex","Microsoft Aria Online","Microsoft Guy Online","Karen","Daniel"];if(n==="female"){const c=l.find(d=>o.some(u=>d.name.includes(u)))||l.find(d=>d.name.toLowerCase().includes("female")||d.name.toLowerCase().includes("woman")||d.name.toLowerCase().includes("samantha")||d.name.toLowerCase().includes("karen")||d.name.toLowerCase().includes("aria"));c&&(r.voice=c)}else if(n==="male"){const c=l.find(d=>o.some(u=>d.name.includes(u)))||l.find(d=>d.name.toLowerCase().includes("male")||d.name.toLowerCase().includes("man")||d.name.toLowerCase().includes("alex")||d.name.toLowerCase().includes("daniel")||d.name.toLowerCase().includes("guy"));c&&(r.voice=c)}else{const c=l.find(d=>o.some(u=>d.name.includes(u)));c&&(r.voice=c)}r.onerror=c=>{p.error("éŸ³å£°åˆæˆã‚¨ãƒ©ãƒ¼:",c)},window.speechSynthesis.speak(r)}function Me(){return"speechSynthesis"in window}function Un(){"speechSynthesis"in window&&window.speechSynthesis.cancel()}function Hn(){"speechSynthesis"in window&&window.speechSynthesis.speaking&&window.speechSynthesis.pause()}function Vn(){"speechSynthesis"in window&&window.speechSynthesis.paused&&window.speechSynthesis.resume()}function Jn(){return"speechSynthesis"in window&&window.speechSynthesis.speaking}function Yn(){return"speechSynthesis"in window&&window.speechSynthesis.paused}const pt=({word:s,sets:t,onAddWord:r,onRemoveWord:a,onOpenManagement:n,size:i="medium",variant:l="icon"})=>{const[o,c]=m.useState(!1),d=t.filter(w=>w.words.some(b=>b.word===s.word)),u=d.length>0,g={small:"text-sm px-2 py-1",medium:"text-base px-3 py-1.5",large:"text-lg px-4 py-2"},x={small:"text-base",medium:"text-lg",large:"text-xl"},S=w=>{if(w.stopPropagation(),t.length===0){n();return}if(t.length===1){const b=t[0];u?a(b.id,s):r(b.id,s)}else c(!o)},N=(w,b)=>{b?a(w,s):r(w,s)};return e.jsxs("div",{className:"relative inline-block",children:[e.jsxs("button",{onClick:S,className:`
          ${g[i]}
          ${u?"bg-green-500 hover:bg-green-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}
          rounded-md font-medium transition-colors duration-200
          flex items-center gap-1
        `,title:u?`${d.length}å€‹ã®ã‚»ãƒƒãƒˆã«è¿½åŠ æ¸ˆã¿`:"ã‚«ã‚¹ã‚¿ãƒ ã‚»ãƒƒãƒˆã«è¿½åŠ ",children:[e.jsx("span",{className:x[i],children:u?"âœ“":"+"}),l!=="icon"&&e.jsx("span",{children:u?"è¿½åŠ æ¸ˆã¿":"è¿½åŠ "})]}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-80 overflow-y-auto",children:[e.jsx("div",{className:"p-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"ã‚»ãƒƒãƒˆã‚’é¸æŠ"})}),e.jsx("div",{className:"p-2",children:t.map(w=>{const b=w.words.some(k=>k.word===s.word);return e.jsxs("button",{onClick:()=>{N(w.id,b),c(!1)},className:`
                      w-full text-left px-3 py-2 rounded-md mb-1
                      flex items-center justify-between
                      ${b?"bg-green-50 text-green-700":"hover:bg-gray-100:bg-gray-700 text-gray-700"}
                    `,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("span",{children:w.icon||"ğŸ“–"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:w.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[w.words.length,"èª"]})]})]}),e.jsx("span",{className:"text-lg ml-2",children:b?"âœ“":"+"})]},w.id)})}),e.jsx("div",{className:"p-2 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{c(!1),n()},className:"w-full text-left px-3 py-2 rounded-md hover:bg-gray-100:bg-gray-700 text-blue-600 text-sm font-medium",children:"â• æ–°ã—ã„ã‚»ãƒƒãƒˆã‚’ä½œæˆ"})})]})]})]})};function As({question:s,allQuestions:t,currentIndex:r,answered:a,selectedAnswer:n,onAnswer:i,onNext:l,onPrevious:o,onDifficultyRate:c,customQuestionSets:d=[],onAddWordToCustomSet:u,onRemoveWordFromCustomSet:g,onOpenCustomSetManagement:x,onFullscreen:S}){const N=m.useMemo(()=>Hs(s,t,r),[s.word,t,r]),[w,b]=m.useState(null),[k,D]=m.useState(new Set),[A,j]=m.useState(""),[z,V]=m.useState(0),[,ce]=m.useState(()=>{const q=sessionStorage.getItem("currentCorrectStreak");return q?parseInt(q,10):0}),ie=m.useRef(0),ee=m.useRef(0),oe=m.useRef(null),me=m.useRef(!1);m.useEffect(()=>{b(null),D(new Set),j(""),V(0)},[r]);const pe=q=>{D(F=>{const X=new Set(F);return a?X.size>0?new Set:new Set(N.map((G,Y)=>Y)):(X.has(q)?X.delete(q):X.add(q),X)})};m.useEffect(()=>{const q=localStorage.getItem("autoShowDetails")!=="false";a&&n&&n!==s.meaning&&q&&D(new Set(N.map((F,X)=>X)))},[a,n,s.meaning,N]),m.useEffect(()=>{if(a&&n){const q=localStorage.getItem("aiPersonality")||"kind-teacher",F=n===s.meaning,X=parseInt(sessionStorage.getItem("currentCorrectStreak")||"0",10);let G=un(q,{isCorrect:F,word:s.word,difficulty:"intermediate",category:"",attemptCount:z+1,responseTime:0,correctStreak:0,incorrectStreak:0,userAccuracy:0,categoryAccuracy:0,isWeakCategory:!1,hasSeenBefore:!1,previousAttempts:0,todayQuestions:0,todayAccuracy:0,planProgress:0,timeOfDay:ur()});const Y=[];if(F&&Math.random()<.1){const ne=hr();ne.estimatedDaysToAchieve>0&&ne.estimatedDaysToAchieve<=30&&(ne.overallProgress>=90?Y.push(`ğŸ¯ ${ne.goal.name}ã¾ã§ã‚ã¨å°‘ã—ï¼`):ne.overallProgress>=75&&Y.push(`ğŸ“ˆ ã“ã®ãƒšãƒ¼ã‚¹ãªã‚‰${ne.estimatedDaysToAchieve}æ—¥ã§${ne.goal.name}é”æˆã§ã™ï¼`))}if(!F){const ne=xr(s.word);ne.length>0&&Y.push(`ğŸ’¡ ã€Œ${s.word}ã€ã¨ã€Œ${ne.join(", ")}ã€ã‚’æ··åŒã—ã‚„ã™ã„ã®ã§æ³¨æ„ï¼`)}if(!F&&Math.random()<.05){const Ne=Fn().find(Ce=>Ce.words.includes(s.word.toLowerCase())&&Ce.needsReview);Ne&&Y.push(Qn(Ne))}const ue=Cn(q,F,X);if(ue&&Y.push(ue.message),F){const ne=$n(X+1);ne&&Y.push(ne)}const U=Rn(F);if(U&&Y.push(U),F){const ne=X+1;ce(ne),sessionStorage.setItem("currentCorrectStreak",String(ne))}else ce(0),sessionStorage.setItem("currentCorrectStreak","0");Y.length>0&&(G=`${G} ${Y[0]}`),j(G)}else j("")},[a,n,s,z]);const be=()=>{D(new Set),V(0),l()};m.useEffect(()=>{const q=Y=>{const ue=Y.target;ue.closest(".choice-btn")||ue.closest(".toggle-details-btn")||ue.closest(".rating-btn")||ue.closest(".inline-nav-btn")||ue.closest(".question-text")||(ie.current=Y.touches[0].clientX,me.current=!0)},F=Y=>{ie.current!==0&&(ee.current=Y.touches[0].clientX)},X=()=>{if(ie.current===0){me.current=!1;return}const Y=ie.current-ee.current;Math.abs(Y)>80&&(Y>0?a?be():l():r>0&&o()),ie.current=0,ee.current=0,setTimeout(()=>{me.current=!1},300)},G=oe.current;if(G)return G.addEventListener("touchstart",q,{passive:!0}),G.addEventListener("touchmove",F,{passive:!0}),G.addEventListener("touchend",X),()=>{G.removeEventListener("touchstart",q),G.removeEventListener("touchmove",F),G.removeEventListener("touchend",X)}},[a,r,l,o]),m.useEffect(()=>{const q=F=>{if(!a&&["1","2","3","4"].includes(F.key)){const X=parseInt(F.key)-1;if(X<N.length){F.preventDefault();const G=N[X].text,Y=N[X].question;G===s.meaning||V(U=>U+1),i(G,s.meaning,Y)}}else!a&&F.key===" "?(F.preventDefault(),l()):F.key==="Enter"&&(F.preventDefault(),a?be():l())};return window.addEventListener("keydown",q),()=>{window.removeEventListener("keydown",q)}},[a,N,s,i,z]);const P=q=>{const F="w-full min-h-11 sm:min-h-14 p-2 sm:p-4 text-sm sm:text-base rounded-xl border-2 cursor-pointer transition-all duration-300 flex flex-col items-center text-center touch-manipulation select-none shadow-sm",X="hover:border-blue-600 hover:bg-gray-100:bg-gray-800 hover:-translate-y-1 hover:shadow-lg",G="active:bg-gray-200:bg-gray-700 active:translate-y-0";return q==="åˆ†ã‹ã‚‰ãªã„"?a?q===n?`${F} bg-red-600 border-red-600 text-white`:`${F} bg-gray-100 text-gray-600 border-gray-400`:`${F} bg-gray-100 text-gray-600 border-gray-400 ${X} ${G}`:a?q===s.meaning?`${F} bg-green-600 border-green-600 text-white`:q===n&&q!==s.meaning?`${F} bg-red-600 border-red-600 text-white`:`${F} bg-gray-50 text-gray-900 border-gray-300`:`${F} bg-gray-50 text-gray-900 border-gray-300 ${X} ${G}`};return e.jsxs("div",{className:"question-card",ref:oe,children:[S&&e.jsx("button",{onClick:S,className:"absolute top-2 right-2 z-10 p-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300:bg-gray-600 transition shadow-md","aria-label":"å…¨ç”»é¢è¡¨ç¤º",title:"å…¨ç”»é¢è¡¨ç¤º",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),e.jsxs("div",{className:"question-nav-row",children:[e.jsx("button",{className:"flex-shrink-0 w-12 h-12 sm:w-16 sm:h-16 bg-orange-500 hover:bg-orange-600 text-white font-bold rounded-lg transition flex items-center justify-center text-xl sm:text-2xl disabled:opacity-30 disabled:cursor-not-allowed",onClick:o,disabled:r===0,title:"å‰ã¸",children:"â†"}),e.jsxs("div",{className:`question-content-inline ${Me()?"clickable-pronunciation":""}`,onClick:q=>{Me()&&(q.preventDefault(),q.stopPropagation(),qe(s.word,{rate:.85}))},onTouchEnd:q=>{Me()&&(q.preventDefault(),q.stopPropagation(),qe(s.word,{rate:.85}))},title:Me()?"ã‚¿ãƒƒãƒ—ã—ã¦ç™ºéŸ³ã‚’èã ğŸ”Š":"",children:[e.jsxs("div",{className:`text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 break-words ${s.word.includes(" ")?"phrase-text":""} ${Me()?"clickable-word":""}`,children:[s.word,Me()&&e.jsx("span",{className:"speaker-icon",children:"ğŸ”Š"})]}),s.reading&&e.jsxs("div",{className:"question-reading text-sm sm:text-base text-gray-600 mt-1",children:["ã€",s.reading,"ã€‘"]}),s.difficulty&&e.jsx("div",{className:`difficulty-badge ${s.difficulty}`,children:s.difficulty==="beginner"?"åˆç´š":s.difficulty==="intermediate"?"ä¸­ç´š":"ä¸Šç´š"}),u&&g&&x&&d&&e.jsx("div",{className:"mt-3 flex justify-center",children:e.jsx(pt,{word:{word:s.word,meaning:s.meaning,katakana:s.reading,source:"translation"},sets:d,onAddWord:u,onRemoveWord:g,onOpenManagement:x,size:"medium",variant:"both"})})]}),e.jsx("button",{className:"flex-shrink-0 w-12 h-12 sm:w-16 sm:h-16 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg transition flex items-center justify-center text-xl sm:text-2xl disabled:opacity-30 disabled:cursor-not-allowed",onClick:be,title:"æ¬¡ã¸",children:"â†’"})]}),e.jsx("div",{className:"choices",children:N.map((q,F)=>{const X=k.has(F),G=q.question;return e.jsxs("div",{className:"choice-wrapper",children:[e.jsx("button",{className:P(q.text),onClick:Y=>{if(a){Y.preventDefault(),Y.stopPropagation(),G&&pe(F);return}q.text===s.meaning||V(U=>U+1),i(q.text,s.meaning,G)},disabled:!1,children:e.jsx("div",{className:"choice-content",children:e.jsx("div",{className:"choice-text",children:q.text})})}),a&&G&&X&&e.jsxs("div",{className:"choice-details",children:[e.jsxs("div",{className:"choice-detail-item",children:[e.jsx("span",{className:"detail-label",children:"èªå¥:"}),e.jsx("span",{className:"detail-text",children:G.word})]}),G.reading&&e.jsxs("div",{className:"choice-detail-item",children:[e.jsx("span",{className:"detail-label",children:"èª­ã¿:"}),e.jsx("span",{className:"detail-text",children:G.reading})]}),G.meaning&&e.jsxs("div",{className:"choice-detail-item",children:[e.jsx("span",{className:"detail-label",children:"æ„å‘³:"}),e.jsx("span",{className:"detail-text",children:G.meaning})]}),G.etymology&&e.jsxs("div",{className:"choice-detail-item",children:[e.jsx("span",{className:"detail-label",children:"ğŸ“š èªæºç­‰:"}),e.jsx("span",{className:"detail-text",children:G.etymology})]}),G.relatedWords&&e.jsxs("div",{className:"choice-detail-item",children:[e.jsx("span",{className:"detail-label",children:"ğŸ”— é–¢é€£èª:"}),e.jsx("span",{className:"detail-text",children:G.relatedWords})]}),G.relatedFields&&e.jsxs("div",{className:"choice-detail-item",children:[e.jsx("span",{className:"detail-label",children:"ğŸ·ï¸ åˆ†é‡:"}),e.jsx("span",{className:"detail-text",children:G.relatedFields})]}),G.difficulty&&e.jsxs("div",{className:"choice-detail-item",children:[e.jsx("span",{className:"detail-label",children:"é›£æ˜“åº¦:"}),e.jsx("span",{className:"detail-text",children:G.difficulty})]})]})]},F)})})]})}const Is=[0,5,10,20,30,50,100,150,200];function bs({learningLimit:s,reviewLimit:t,onLearningLimitChange:r,onReviewLimitChange:a,idPrefix:n=""}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:`${n}learning-limit`,children:"ğŸ¯ å­¦ç¿’ä¸­ã®ä¸Šé™:"}),e.jsx("select",{id:`${n}learning-limit`,value:s,onChange:i=>r(parseInt(i.target.value)),className:"select-input",children:Is.map(i=>e.jsx("option",{value:i,children:i===0?"è¨­å®šç„¡ã—":i},i))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:`${n}review-limit`,children:"âš ï¸ è¦å¾©ç¿’ã®ä¸Šé™:"}),e.jsx("select",{id:`${n}review-limit`,value:t,onChange:i=>a(parseInt(i.target.value)),className:"select-input",children:Is.map(i=>e.jsx("option",{value:i,children:i===0?"è¨­å®šç„¡ã—":i},i))})]})]})}function vs(s){const[t,r]=m.useState(()=>{const o=localStorage.getItem(`learning-limit-${s}`);return o?parseInt(o):30}),[a,n]=m.useState(()=>{const o=localStorage.getItem(`review-limit-${s}`);return o?parseInt(o):10}),i=m.useCallback(o=>{const c=Math.max(0,o)||30;r(c),localStorage.setItem(`learning-limit-${s}`,c.toString())},[s]),l=m.useCallback(o=>{const c=Math.max(0,o)||10;n(c),localStorage.setItem(`review-limit-${s}`,c.toString())},[s]);return{learningLimit:t,reviewLimit:a,setLearningLimit:i,setReviewLimit:l}}function Kn({quizState:s,_categoryList:t,selectedCategory:r,onCategoryChange:a,selectedDifficulty:n,onDifficultyChange:i,selectedWordPhraseFilter:l="all",onWordPhraseFilterChange:o,selectedPhraseTypeFilter:c="all",onPhraseTypeFilterChange:d,selectedDataSource:u="all",onDataSourceChange:g,questionSets:x=[],onStartQuiz:S,onAnswer:N,onNext:w,onPrevious:b,onSkip:k,onDifficultyRate:D,onReviewFocus:A,sessionStats:j,isReviewFocusMode:z=!1,errorPrediction:V,customQuestionSets:ce=[],onAddWordToCustomSet:ie,onRemoveWordFromCustomSet:ee,onOpenCustomSetManagement:oe}){var $;const{questions:me,currentIndex:pe,answered:be,selectedAnswer:P}=s,q=me.length>0,F=q?me[pe]:null,[X,G]=m.useState(!1),[Y,ue]=m.useState(!1),[U,ne]=m.useState(Date.now()),{learningLimit:Ne,reviewLimit:Ce,setLearningLimit:De,setReviewLimit:Te}=vs("translation"),[Le,K]=m.useState(()=>localStorage.getItem("autoNext")==="true"),[Q,re]=m.useState(()=>{const v=localStorage.getItem("autoNextDelay");return v?parseInt(v,10):1500}),[J,Pe]=m.useState(()=>localStorage.getItem("autoShowDetails")!=="false"),fe=async(v,y)=>{await N(v,y),ne(Date.now()),Le&&v===y&&setTimeout(()=>{w()},Q)},We=async()=>{k&&(await k(),ne(Date.now()))},H=localStorage.getItem("learning-schedule-90days"),Ee=!!H;let Ae=null;if(Ee)try{const v=JSON.parse(H),y=Math.floor((Date.now()-v.startDate)/(1e3*60*60*24)),I=Math.min(y+1,v.totalDays),f=Math.round(I/v.totalDays*100);Ae={currentDay:I,totalDays:v.totalDays,progressPercent:f,phase:v.phase}}catch(v){p.error("Failed to parse learning plan:",v)}const $e=()=>{ue(!Y)};return Y&&q&&F?e.jsx("div",{className:"fixed inset-0 z-50 bg-gray-50 overflow-y-auto",children:e.jsxs("div",{className:"min-h-screen flex items-center justify-center py-8",children:[e.jsx("button",{onClick:$e,className:"fixed top-4 right-4 z-50 p-3 bg-gray-800 text-white rounded-full shadow-lg hover:bg-gray-700:bg-gray-600 transition","aria-label":"å…¨ç”»é¢çµ‚äº†",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("div",{className:"w-full max-w-4xl px-4",children:e.jsx(As,{question:F,questionNumber:pe+1,allQuestions:me,currentIndex:pe,answered:be,selectedAnswer:P,onAnswer:fe,onNext:k?be?w:We:w,onPrevious:b,onDifficultyRate:D,errorPrediction:V,customQuestionSets:ce,onAddWordToCustomSet:ie,onRemoveWordFromCustomSet:ee,onOpenCustomSetManagement:oe,onFullscreen:$e})})]})}):e.jsxs("div",{className:"quiz-view",children:[Ee&&Ae&&e.jsx("div",{className:"plan-progress-banner",children:e.jsxs("div",{className:"plan-progress-content",children:[e.jsx("span",{className:"plan-progress-icon",children:"ğŸ“š"}),e.jsxs("div",{className:"plan-progress-info",children:[e.jsx("div",{className:"plan-progress-title",children:"å­¦ç¿’ãƒ—ãƒ©ãƒ³é€²è¡Œä¸­"}),e.jsxs("div",{className:"plan-progress-detail",children:[Ae.currentDay,"æ—¥ç›® / ",Ae.totalDays,"æ—¥ (Phase ",Ae.phase,") -"," ",Ae.progressPercent,"%å®Œäº†"]})]})]})}),q&&e.jsxs(e.Fragment,{children:[e.jsx(Ot,{mode:"translation",currentScore:s.score,totalAnswered:s.totalAnswered,sessionCorrect:j==null?void 0:j.correct,sessionIncorrect:j==null?void 0:j.incorrect,sessionReview:j==null?void 0:j.review,sessionMastered:j==null?void 0:j.mastered,onReviewFocus:A,isReviewFocusMode:z,onShowSettings:()=>G(!0),currentWord:F==null?void 0:F.word,onAnswerTime:U,dataSource:(($=x==null?void 0:x.find(v=>v.id===u))==null?void 0:$.name)||"å…¨å•é¡Œé›†",category:r==="å…¨åˆ†é‡"?"å…¨åˆ†é‡":r,difficulty:n,wordPhraseFilter:l}),X&&e.jsxs("div",{className:"study-settings-panel",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("h3",{children:"ğŸ“Š å­¦ç¿’è¨­å®š"}),e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm shadow-sm:bg-gray-600",children:"âœ• é–‰ã˜ã‚‹"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"category-select-quiz",children:"ğŸ“š é–¢é€£åˆ†é‡:"}),e.jsxs("select",{id:"category-select-quiz",value:r,onChange:v=>a(v.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"å…¨ã¦ã®åˆ†é‡"}),jr.map(v=>e.jsx("option",{value:v,children:v},v))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"difficulty-select-quiz",children:"â­ é›£æ˜“åº¦:"}),e.jsxs("select",{id:"difficulty-select-quiz",value:n,onChange:v=>i(v.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"å…¨ã¦ã®ãƒ¬ãƒ™ãƒ«"}),e.jsx("option",{value:"beginner",children:"åˆç´š"}),e.jsx("option",{value:"intermediate",children:"ä¸­ç´š"}),e.jsx("option",{value:"advanced",children:"ä¸Šç´š"})]})]}),g&&x&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"data-source-select-quiz",children:"ğŸ“š å‡ºé¡Œå…ƒ:"}),e.jsx("select",{id:"data-source-select-quiz",value:u,onChange:v=>g(v.target.value),className:"select-input",children:x.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))})]}),o&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"word-phrase-filter-quiz",children:"ğŸ“– å˜èª/ç†Ÿèª:"}),e.jsxs("select",{id:"word-phrase-filter-quiz",value:l,onChange:v=>o(v.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"ã™ã¹ã¦"}),e.jsx("option",{value:"words-only",children:"å˜èªã®ã¿"}),e.jsx("option",{value:"phrases-only",children:"ç†Ÿèªã®ã¿"})]})]}),d&&l==="phrases-only"&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"phrase-type-filter-quiz",children:"ğŸ·ï¸ ç†Ÿèªã‚¿ã‚¤ãƒ—:"}),e.jsxs("select",{id:"phrase-type-filter-quiz",value:c,onChange:v=>d(v.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"ã™ã¹ã¦"}),e.jsx("option",{value:"phrasal-verb",children:"å¥å‹•è©"}),e.jsx("option",{value:"idiom",children:"ã‚¤ãƒ‡ã‚£ã‚ªãƒ "}),e.jsx("option",{value:"collocation",children:"ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³"}),e.jsx("option",{value:"other",children:"ãã®ä»–"})]})]}),e.jsx(bs,{learningLimit:Ne,reviewLimit:Ce,onLearningLimitChange:De,onReviewLimitChange:Te,idPrefix:"quiz-"}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",id:"auto-next-toggle",checked:Le,onChange:v=>{K(v.target.checked),localStorage.setItem("autoNext",v.target.checked.toString())}}),e.jsxs("label",{htmlFor:"auto-next-toggle",className:"checkbox-label",children:["æ­£è§£æ™‚è‡ªå‹•ã§æ¬¡ã¸ï¼š",Le?"æœ‰åŠ¹":"ç„¡åŠ¹"]})]})}),Le&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"auto-next-delay",children:"â±ï¸ æ¬¡ã¸ã®é…å»¶æ™‚é–“ï¼š"}),e.jsxs("div",{className:"slider-row",children:[e.jsx("input",{type:"range",id:"auto-next-delay",min:"500",max:"3000",step:"100",value:Q,onChange:v=>{const y=parseInt(v.target.value,10);re(y),localStorage.setItem("autoNextDelay",y.toString())},className:"slider-input"}),e.jsxs("span",{className:"slider-value",children:[(Q/1e3).toFixed(1),"ç§’"]})]})]}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",id:"auto-show-details-toggle",checked:J,onChange:v=>{Pe(v.target.checked),localStorage.setItem("autoShowDetails",v.target.checked.toString())}}),e.jsxs("label",{htmlFor:"auto-show-details-toggle",className:"checkbox-label",children:["ä¸æ­£è§£æ™‚è‡ªå‹•ã§è©³ç´°ã‚’é–‹ãï¼š",J?"æœ‰åŠ¹":"ç„¡åŠ¹"]})]})})]}),e.jsx("div",{className:"question-container",children:F&&e.jsx(e.Fragment,{children:e.jsx(As,{question:F,questionNumber:pe+1,allQuestions:me,currentIndex:pe,answered:be,selectedAnswer:P,onAnswer:fe,onNext:k?be?w:We:w,onPrevious:b,onDifficultyRate:D,errorPrediction:V,customQuestionSets:ce,onAddWordToCustomSet:ie,onRemoveWordFromCustomSet:ee,onOpenCustomSetManagement:oe,onFullscreen:$e})})})]})]})}function Xn(s){const[t,r]=m.useState({questions:[],currentIndex:0,score:0,totalAnswered:0,answered:!1,selectedLetters:[],correctWord:""}),[a,n]=m.useState([]),[i,l]=m.useState([]),[o,c]=m.useState([]),[d,u]=m.useState(0),[g,x]=m.useState([]),S=m.useRef(0);return m.useEffect(()=>{s.length>0&&r({questions:s,currentIndex:0,score:0,totalAnswered:0,answered:!1,selectedLetters:[],correctWord:""})},[s]),m.useEffect(()=>{if(t.questions.length>0){const j=t.questions[t.currentIndex].word.toLowerCase();if(j.includes(" ")){const z=j.split(/\s+/);c(z),u(0),x([]);const ce=[...z[0].split("")].sort(()=>Math.random()-.5);n(ce),r(ie=>({...ie,correctWord:j.replace(/\s+/g,""),answered:!1}))}else{c([]),u(0),x([]);const V=[...j.split("")].sort(()=>Math.random()-.5);n(V),r(ce=>({...ce,correctWord:j,answered:!1}))}l([]),S.current=Date.now()}},[t.currentIndex,t.questions]),{spellingState:t,setSpellingState:r,shuffledLetters:a,selectedSequence:i,setSelectedSequence:l,phraseWords:o,currentWordIndex:d,completedWords:g,handleLetterClick:A=>{if(t.answered){if(i.includes(`${A}`))l(i.filter(z=>z!==`${A}`));else{const z=[...i,`${A}`];l(z)}return}if(i.includes(`${A}`))return;const j=[...i,`${A}`];return l(j),j.length===a.length?j:null},checkAnswer:A=>{const j=A.map(V=>a[parseInt(V)]).join(""),z=Date.now()-S.current;if(o.length>0){const V=o[d];if(j===V){const ie=[...g,j];if(x(ie),d<o.length-1){const ee=d+1;u(ee);const me=[...o[ee].split("")].sort(()=>Math.random()-.5);return n(me),l([]),{isPartialCorrect:!0,isComplete:!1,userWord:j,responseTime:z}}else{const ee=ie.join("");return{isPartialCorrect:!0,isComplete:!0,isCorrect:ee===t.correctWord,userWord:ee,responseTime:z}}}else return{isPartialCorrect:!1,isComplete:!0,isCorrect:!1,userWord:[...g,j].join(""),responseTime:z}}else return{isComplete:!0,isCorrect:j===t.correctWord,userWord:j,responseTime:z}},moveToNextQuestion:()=>{r(A=>({...A,currentIndex:A.currentIndex+1,answered:!1}))},updateScore:A=>{r(j=>({...j,score:A?j.score+1:j.score,totalAnswered:j.totalAnswered+1,answered:!0}))},resetAnswer:()=>{if(l([]),r(A=>({...A,answered:!1})),o.length>0){const j=[...o[d].split("")].sort(()=>Math.random()-.5);n(j)}else{const z=[...t.questions[t.currentIndex].word.toLowerCase().split("")].sort(()=>Math.random()-.5);n(z)}S.current=Date.now()}}}function Zn(){const[s,t]=m.useState({correct:0,incorrect:0,review:0,mastered:0});return{sessionStats:s,setSessionStats:t,resetStats:()=>{t({correct:0,incorrect:0,review:0,mastered:0})},updateStats:n=>{t(i=>({...i,correct:i.correct+(n==="correct"?1:0),incorrect:i.incorrect+(n==="incorrect"?1:0),review:i.review+(n==="review"?1:0),mastered:i.mastered+(n==="mastered"?1:0)}))}}}function ei({questions:s,_categoryList:t,selectedCategory:r,onCategoryChange:a,selectedDifficulty:n,onDifficultyChange:i,selectedWordPhraseFilter:l="all",onWordPhraseFilterChange:o,selectedPhraseTypeFilter:c="all",onPhraseTypeFilterChange:d,selectedDataSource:u="all",onDataSourceChange:g,onStartQuiz:x,onReviewFocus:S,isReviewFocusMode:N=!1,customQuestionSets:w=[],onAddWordToCustomSet:b,onRemoveWordFromCustomSet:k,onOpenCustomSetManagement:D}){var E;const{spellingState:A,setSpellingState:j,shuffledLetters:z,selectedSequence:V,setSelectedSequence:ce,phraseWords:ie,completedWords:ee,handleLetterClick:oe,checkAnswer:me,moveToNextQuestion:pe,updateScore:be}=Xn(s),{sessionStats:P,resetStats:q,updateStats:F}=Zn(),[X,G]=m.useState(!1),[Y,ue]=m.useState(!1),[U,ne]=m.useState(Date.now()),{learningLimit:Ne,reviewLimit:Ce,setLearningLimit:De,setReviewLimit:Te}=vs("spelling"),[Le,K]=m.useState(()=>localStorage.getItem("autoNext")==="true"),[Q,re]=m.useState(()=>{const C=localStorage.getItem("autoNextDelay");return C?parseInt(C,10):1500}),J=m.useRef(null),Pe=m.useRef(0),fe=m.useRef(0),We=m.useRef([]);m.useEffect(()=>{s.length>0&&(Pe.current=Date.now(),We.current=[],q())},[s,q]),m.useEffect(()=>{if(!A.answered&&J.current){const C=setTimeout(()=>{var h;(h=J.current)==null||h.focus()},100);return()=>clearTimeout(C)}},[A.answered,A.currentIndex,A.questions.length]);const H=(C,h)=>{const _=oe(h);_&&_.length===z.length&&setTimeout(()=>Ee(_),300)},Ee=async C=>{const h=me(C);h&&(h.isPartialCorrect&&!h.isComplete||h.isComplete&&await Ae(h.userWord,h.isCorrect||!1,h.responseTime))},Ae=async(C,h,_)=>{var L;const M=A.questions[A.currentIndex];if(M){await at(M.word,h,_,void 0,"spelling"),ne(Date.now());const T=(L=(await Be()).wordProgress)==null?void 0:L[M.word];let te=h?"correct":"incorrect";T&&T.masteryLevel==="mastered"?te="mastered":!h&&T&&T.incorrectCount>=2&&(te="review"),F(te),dt({status:te,word:M.word,timestamp:Date.now()},"spelling"),T&&T.skippedCount&&T.skippedCount>0&&(h?ar(M.word):rr(M.word))}!h&&M&&We.current.push(M.word),be(h),M&&ht({id:xt(),questionSetId:"spelling-quiz-single",questionSetName:"ã‚¹ãƒšãƒ«ã‚¯ã‚¤ã‚º",score:h?1:0,total:1,percentage:h?100:0,date:Date.now(),timeSpent:Math.floor(_/1e3),incorrectWords:h?[]:[M.word],mode:"spelling"})},$e=()=>{pe()},$=async()=>{const C=A.questions[A.currentIndex];if(!C)return;const h=Date.now()-fe.current;Rt(C.word,30),sr(C.word),await at(C.word,!0,h,void 0,"spelling"),ne(Date.now()),ce([]),j(_=>({..._,totalAnswered:_.totalAnswered+1,score:_.score+1,answered:!0})),F("correct"),dt({status:"correct",word:C.word,timestamp:Date.now()},"spelling"),ht({id:xt(),questionSetId:"spelling-quiz-single",questionSetName:"ã‚¹ãƒšãƒ«ã‚¯ã‚¤ã‚º",score:1,total:1,percentage:100,date:Date.now(),timeSpent:Math.floor(h/1e3),incorrectWords:[],mode:"spelling",difficulty:C.difficulty})},v=()=>{ce([]),j(C=>({...C,currentIndex:C.currentIndex>0?C.currentIndex-1:0,answered:!1})),fe.current=Date.now()},y=()=>{if(V.length>0){const C=V.slice(0,-1);ce(C)}},I=A.questions.length>0,f=I?A.questions[A.currentIndex]:null,W=V.map(C=>z[parseInt(C)]).join(""),R=f?{word:f.word,meaning:f.meaning,katakana:f.reading,source:"spelling"}:null,O=localStorage.getItem("learning-schedule-90days"),se=!!O;let he=null;if(se)try{const C=JSON.parse(O),h=Math.floor((Date.now()-C.startDate)/(1e3*60*60*24)),_=Math.min(h+1,C.totalDays),M=Math.round(_/C.totalDays*100);he={currentDay:_,totalDays:C.totalDays,progressPercent:M,phase:C.phase}}catch(C){p.error("Failed to parse learning plan:",C)}return e.jsxs("div",{className:"spelling-view",children:[se&&he&&e.jsx("div",{className:"plan-progress-banner",children:e.jsxs("div",{className:"plan-progress-content",children:[e.jsx("span",{className:"plan-progress-icon",children:"ğŸ“š"}),e.jsxs("div",{className:"plan-progress-info",children:[e.jsx("div",{className:"plan-progress-title",children:"å­¦ç¿’ãƒ—ãƒ©ãƒ³é€²è¡Œä¸­"}),e.jsxs("div",{className:"plan-progress-detail",children:[he.currentDay,"æ—¥ç›® / ",he.totalDays,"æ—¥ (Phase ",he.phase,") -"," ",he.progressPercent,"%å®Œäº†"]})]})]})}),!I&&e.jsx("div",{className:"quiz-controls",children:e.jsx("button",{onClick:x,className:"w-64 px-8 py-4 text-lg font-bold bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-300 shadow-xl:bg-primary-hover",children:"ğŸ¯ ã‚¯ã‚¤ã‚ºé–‹å§‹"})}),I?e.jsxs(e.Fragment,{children:[e.jsx(Ot,{mode:"spelling",currentScore:A.score,totalAnswered:A.totalAnswered,sessionCorrect:P.correct,sessionIncorrect:P.incorrect,sessionReview:P.review,sessionMastered:P.mastered,onReviewFocus:S,isReviewFocusMode:N,onShowSettings:()=>G(!0),currentWord:(E=A.questions[A.currentIndex])==null?void 0:E.word,onAnswerTime:U,dataSource:u==="all"?"å…¨å•é¡Œé›†":u==="junior"?"é«˜æ ¡å—é¨“":"é«˜æ ¡å—é¨“æ¨™æº–",category:r==="å…¨åˆ†é‡"?"å…¨åˆ†é‡":r,difficulty:n,wordPhraseFilter:l}),X&&e.jsxs("div",{className:"study-settings-panel",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("h3",{children:"ğŸ“Š å­¦ç¿’è¨­å®š"}),e.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 hover:border-gray-400 transition-all duration-200 text-sm shadow-sm:bg-gray-600:border-gray-500",children:"âœ• é–‰ã˜ã‚‹"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"category-select-spelling",children:"ğŸ“š é–¢é€£åˆ†é‡:"}),e.jsxs("select",{id:"category-select-spelling",value:r,onChange:C=>a(C.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"å…¨ã¦ã®åˆ†é‡"}),jr.map(C=>e.jsx("option",{value:C,children:C},C))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"difficulty-select-spelling",children:"â­ é›£æ˜“åº¦:"}),e.jsxs("select",{id:"difficulty-select-spelling",value:n,onChange:C=>i(C.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"å…¨ã¦ã®ãƒ¬ãƒ™ãƒ«"}),e.jsx("option",{value:"beginner",children:"åˆç´š"}),e.jsx("option",{value:"intermediate",children:"ä¸­ç´š"}),e.jsx("option",{value:"advanced",children:"ä¸Šç´š"})]})]}),g&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"data-source-select-spelling",children:"ğŸ“š å•é¡Œé›†:"}),e.jsxs("select",{id:"data-source-select-spelling",value:u,onChange:C=>g(C.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"ã™ã¹ã¦"}),e.jsx("option",{value:"junior",children:"é«˜æ ¡å—é¨“"}),e.jsx("option",{value:"intermediate",children:"é«˜æ ¡å—é¨“æ¨™æº–"})]})]}),o&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"word-phrase-filter-spelling",children:"ğŸ“– å˜èª/ç†Ÿèª:"}),e.jsxs("select",{id:"word-phrase-filter-spelling",value:l,onChange:C=>o(C.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"ã™ã¹ã¦"}),e.jsx("option",{value:"words-only",children:"å˜èªã®ã¿"}),e.jsx("option",{value:"phrases-only",children:"ç†Ÿèªã®ã¿"})]})]}),d&&l==="phrases-only"&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"phrase-type-filter-spelling",children:"ğŸ·ï¸ ç†Ÿèªã‚¿ã‚¤ãƒ—:"}),e.jsxs("select",{id:"phrase-type-filter-spelling",value:c,onChange:C=>{d&&d(C.target.value)},className:"select-input",children:[e.jsx("option",{value:"all",children:"ã™ã¹ã¦"}),e.jsx("option",{value:"phrasal-verb",children:"å¥å‹•è©"}),e.jsx("option",{value:"idiom",children:"ã‚¤ãƒ‡ã‚£ã‚ªãƒ "}),e.jsx("option",{value:"collocation",children:"ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³"}),e.jsx("option",{value:"other",children:"ãã®ä»–"})]})]}),e.jsx(bs,{learningLimit:Ne,reviewLimit:Ce,onLearningLimitChange:De,onReviewLimitChange:Te,idPrefix:"spelling-quiz-"})]}),f&&e.jsxs("div",{className:"question-card relative",children:[e.jsx("button",{onClick:()=>ue(!0),className:"absolute top-2 right-2 z-10 p-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300:bg-gray-600 transition shadow-md","aria-label":"å…¨ç”»é¢è¡¨ç¤º",title:"å…¨ç”»é¢è¡¨ç¤º",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),e.jsxs("div",{className:"question-nav-row meaning-row",children:[e.jsx("button",{className:"flex-shrink-0 w-12 h-12 sm:w-16 sm:h-16 bg-orange-500 hover:bg-orange-600 text-white font-bold rounded-lg transition flex items-center justify-center text-2xl disabled:opacity-30 disabled:cursor-not-allowed",onClick:v,disabled:A.currentIndex===0,title:"å‰ã¸",children:"â†"}),e.jsxs("div",{className:"meaning-display",children:[e.jsxs("div",{className:"meaning-line",children:[e.jsx("span",{className:"text-xl text-gray-600",children:"æ„å‘³:"}),e.jsx("span",{className:"text-4xl font-bold text-gray-900 ml-2",children:f.meaning})]}),R&&b&&k&&D&&w&&e.jsx("div",{className:"mt-3 flex justify-center",children:e.jsx(pt,{word:R,sets:w,onAddWord:b,onRemoveWord:k,onOpenManagement:D,size:"medium",variant:"both"})}),e.jsxs("div",{className:"meaning-meta",children:[f.difficulty&&e.jsx("div",{className:`difficulty-badge ${f.difficulty}`,children:f.difficulty==="beginner"?"åˆç´š":f.difficulty==="intermediate"?"ä¸­ç´š":"ä¸Šç´š"}),f.word.includes(" ")&&e.jsxs("div",{className:"phrase-hint",children:["ğŸ’¡ ç†Ÿèª(",ie.length,"èª): å˜èªã”ã¨ã«å…¥åŠ›ã—ã¦ãã ã•ã„",ee.length>0&&e.jsxs("span",{className:"phrase-progress",children:[" ","(å®Œæˆ: ",ee.join(" "),")"]})]})]})]}),e.jsx("button",{className:"flex-shrink-0 w-12 h-12 sm:w-16 sm:h-16 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg transition flex items-center justify-center text-2xl disabled:opacity-30 disabled:cursor-not-allowed",onClick:$e,disabled:A.currentIndex>=A.questions.length-1,title:"æ¬¡ã¸",children:"â†’"})]}),e.jsx("div",{className:"question-content-inline",children:e.jsxs("div",{className:"user-word-display",children:[e.jsx("div",{className:"user-word-label",children:"ã‚ãªãŸã®ç­”ãˆ:"}),e.jsx("div",{className:"user-word-text",children:ie.length>0?e.jsxs(e.Fragment,{children:[ee.join(" "),ee.length>0&&" ",W||"ï¼ˆä¸¦ã³æ›¿ãˆï¼‰"]}):W||"ï¼ˆä¸¦ã³æ›¿ãˆï¼‰"})]})}),e.jsx("div",{className:"letter-cards",ref:J,tabIndex:0,onKeyDown:C=>{if(A.answered)C.key==="Enter"&&(C.preventDefault(),$e());else{const h=C.key.toLowerCase();if(h.length===1&&h>="a"&&h<="z"){C.preventDefault();const _=z.findIndex((M,L)=>M===h&&!V.includes(`${L}`));_!==-1&&H(h,_)}else C.key==="Backspace"?(C.preventDefault(),y()):(C.key===" "||C.key==="Enter")&&(C.preventDefault(),$())}},children:z.map((C,h)=>{const _=V.includes(`${h}`),M=V.indexOf(`${h}`)+1;let L="";return A.answered&&_&&(L=V.map(te=>z[parseInt(te)]).join("")===A.correctWord?"correct":"incorrect"),e.jsxs("button",{className:`letter-card ${_?"selected":""} ${A.answered?"practice-mode":""} ${L}`,onClick:()=>H(C,h),children:[C,_&&e.jsx("span",{className:"selection-number",children:M})]},h)})}),!A.answered&&e.jsxs("div",{className:"spelling-reset-button-container",children:[V.length>0&&e.jsx("button",{className:"btn-reset-selection",onClick:y,children:"âŒ« 1æ–‡å­—æˆ»ã™"}),e.jsx("button",{className:"btn-skip-word",onClick:$,children:"â­ï¸ åˆ†ã‹ã‚‰ãªã„ (ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼)"})]}),A.answered&&e.jsxs("div",{className:"result-display",children:[e.jsxs("div",{className:"correct-answer",children:[W===A.correctWord?"âœ… æ­£è§£: ":W===""?"â­ï¸ ã‚¹ã‚­ãƒƒãƒ— - æ­£è§£: ":"âŒ ä¸æ­£è§£ - æ­£è§£: ",e.jsxs("strong",{className:Me()?"clickable-word":"",onClick:C=>{C.stopPropagation(),Me()&&f&&qe(f.word,{rate:.85})},title:Me()?"ã‚¿ãƒƒãƒ—ã—ã¦ç™ºéŸ³ã‚’èã ğŸ”Š":void 0,children:[(f==null?void 0:f.word)||A.correctWord,Me()&&e.jsx("span",{className:"speaker-icon",children:"ğŸ”Š"}),(f==null?void 0:f.reading)&&e.jsxs("span",{className:"pronunciation-hint",children:["(",f.reading,")"]})]})]}),e.jsxs("div",{className:"question-details-spelling",children:[f.reading&&e.jsxs("div",{className:"detail-row clickable-row",onClick:()=>Me()&&qe(f.word,{rate:.85}),title:"ã‚¿ãƒƒãƒ—ã—ã¦ç™ºéŸ³ ğŸ”Š",children:[e.jsx("span",{className:"detail-label",children:"èª­ã¿:"}),e.jsx("span",{className:"detail-content",children:f.reading})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"æ„å‘³:"}),e.jsx("span",{className:"detail-content",children:f.meaning})]}),f.etymology&&e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"ğŸ“š èªæºç­‰è§£èª¬:"}),e.jsx("span",{className:"detail-content",children:f.etymology})]}),f.relatedWords&&e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"ğŸ”— é–¢é€£èª:"}),e.jsx("span",{className:"detail-content",children:f.relatedWords})]}),f.relatedFields&&e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"ğŸ·ï¸ é–¢é€£åˆ†é‡:"}),e.jsx("span",{className:"detail-content",children:f.relatedFields})]}),f.difficulty&&e.jsxs("div",{className:"detail-row clickable-row",onClick:()=>Me()&&qe(f.word,{rate:.85}),title:"ã‚¿ãƒƒãƒ—ã—ã¦ç™ºéŸ³ ğŸ”Š",children:[e.jsx("span",{className:"detail-label",children:"é›£æ˜“åº¦:"}),e.jsx("div",{className:`difficulty-badge ${f.difficulty}`,children:f.difficulty==="beginner"?"åˆç´š":f.difficulty==="intermediate"?"ä¸­ç´š":"ä¸Šç´š"})]})]})]})]})]}):e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"ğŸ“– æ¡ä»¶ã‚’é¸æŠã—ã¦ã€Œã‚¯ã‚¤ã‚ºé–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„"})})]})}function ti(s){const t=s.split("/").pop()||"",a=t.replace(/\.txt$/,"").split("_");return a.length>=3?a.slice(2).join("_"):t}const si=[{id:"beginner-morning-routine",level:"beginner",topic:"daily-life",wordCount:50,filePath:"/data/passages-for-phrase-work/beginner_50_Morning-Routine.txt"},{id:"beginner-supermarket-shopping",level:"beginner",topic:"daily-life",wordCount:1910,filePath:"/data/passages-for-phrase-work/beginner_1910_Shopping-at-the-Supermarket.txt"},{id:"beginner-cafe-day",level:"beginner",topic:"food-culture",wordCount:1380,filePath:"/data/passages-for-phrase-work/beginner_1380_A-Day-at-the-Cafe.txt"},{id:"beginner-conversation-daily",level:"beginner",topic:"communication",wordCount:3018,filePath:"/data/passages-for-phrase-work/beginner_3018_Daily-Conversations.txt"},{id:"beginner-weather-seasons",level:"beginner",topic:"nature",wordCount:2111,filePath:"/data/passages-for-phrase-work/beginner_2111_Weather-and-Seasons.txt"},{id:"beginner-wildlife-park-guide",level:"beginner",topic:"animals",wordCount:2097,filePath:"/data/passages-for-phrase-work/beginner_2097_Wildlife-Park-Guide.txt"},{id:"intermediate-exchange-student-australia",level:"intermediate",topic:"culture-exchange",wordCount:3199,filePath:"/data/passages-for-phrase-work/intermediate_3199_Exchange-Student-in-Australia.txt"},{id:"intermediate-homestay-america",level:"intermediate",topic:"culture-exchange",wordCount:3148,filePath:"/data/passages-for-phrase-work/intermediate_3148_Homestay-in-America.txt"},{id:"intermediate-career-day",level:"intermediate",topic:"education-career",wordCount:2895,filePath:"/data/passages-for-phrase-work/intermediate_2895_Career-Day-at-School.txt"},{id:"intermediate-hospital-visit",level:"intermediate",topic:"health",wordCount:2721,filePath:"/data/passages-for-phrase-work/intermediate_2721_A-Visit-to-the-Hospital.txt"},{id:"intermediate-science-museum",level:"intermediate",topic:"science-education",wordCount:3265,filePath:"/data/passages-for-phrase-work/intermediate_3265_Science-Museum-Experience.txt"},{id:"intermediate-community-events",level:"intermediate",topic:"community",wordCount:2216,filePath:"/data/passages-for-phrase-work/intermediate_2216_Community-Events.txt"},{id:"intermediate-school-events-year",level:"intermediate",topic:"school-life",wordCount:2558,filePath:"/data/passages-for-phrase-work/intermediate_2558_A-Year-of-School-Events.txt"},{id:"intermediate-school-news",level:"intermediate",topic:"school-life",wordCount:1937,filePath:"/data/passages-for-phrase-work/intermediate_1937_School-News.txt"},{id:"advanced-environmental-issues",level:"advanced",topic:"environment",wordCount:4263,filePath:"/data/passages-for-phrase-work/advanced_4263_Environmental-Issues-and-Solutions.txt"},{id:"advanced-family-gathering",level:"advanced",topic:"culture-family",wordCount:4493,filePath:"/data/passages-for-phrase-work/advanced_4493_Family-Gathering-Traditions.txt"},{id:"advanced-health-statistics",level:"advanced",topic:"health-data",wordCount:3422,filePath:"/data/passages-for-phrase-work/advanced_3422_Health-Statistics-Analysis.txt"},{id:"advanced-historical-figures",level:"advanced",topic:"history",wordCount:3115,filePath:"/data/passages-for-phrase-work/advanced_3115_Historical-Figures-Study.txt"},{id:"advanced-international-exchange",level:"advanced",topic:"culture-global",wordCount:3813,filePath:"/data/passages-for-phrase-work/advanced_3813_Cultural-Exchange-Insights.txt"},{id:"advanced-school-festival",level:"advanced",topic:"school-events",wordCount:4419,filePath:"/data/passages-for-phrase-work/advanced_4419_School-Festival-Planning.txt"},{id:"advanced-summer-vacation-stories",level:"advanced",topic:"personal-growth",wordCount:3255,filePath:"/data/passages-for-phrase-work/advanced_3255_Summer-Vacation-Stories.txt"},{id:"advanced-technology-future",level:"advanced",topic:"technology-innovation",wordCount:3161,filePath:"/data/passages-for-phrase-work/advanced_3161_Technology-and-Future.txt"}],ws=si.map(s=>({...s,title:ti(s.filePath),level:s.level}));function pr(){return ws}async function fr(s){try{const t=ws.find(l=>l.id===s);if(!t)return p.error(`Passage not found: ${s}`),"";const a=`/data/passages-original/${t.filePath.split("/").pop()||""}`,n=await fetch(a);return n.ok?await n.text():(p.log(`Original file not found: ${a}`),"")}catch(t){return p.error(`Error loading original passage ${s}:`,t),""}}async function ri(s){const t=ws.find(r=>r.id===s);if(!t)return p.error(`Passage not found: ${s}`),null;try{const r=await fetch(t.filePath);if(!r.ok)throw new Error(`Failed to fetch: ${r.statusText}`);const a=await r.text(),n=ai(a);return{...t,content:a,sections:n}}catch(r){return p.error(`Error loading passage ${s}:`,r),null}}function ai(s){const t=s.split(`
`),r=[];let a=null;for(const n of t){const i=n.trim();i&&(!n.startsWith("    ")&&i.length>0&&i.length<80?(a&&r.push(a),a={title:i,paragraphs:[]}):n.startsWith("    ")&&a&&a.paragraphs.push(i))}return a&&r.push(a),r}function ot(s){const t=s.toLowerCase().trim();if(t.endsWith("ing")&&t.length>4){const r=t.slice(0,-3);return r.endsWith("n")||r.endsWith("m")||r.endsWith("t")?r.slice(0,-1):r+"e"}if(t.endsWith("ed")&&t.length>3){const r=t.slice(0,-2);return r.endsWith("i")?r.slice(0,-1)+"y":r}return t.endsWith("es")&&t.length>3?t.slice(0,-2):t.endsWith("s")&&t.length>2&&!t.endsWith("ss")?t.slice(0,-1):t}async function yr(s){try{let t=`/data/passages/passages-translations/${s}-ja.txt`;console.log(`[å…¨è¨³] Attempting to load: ${t} for passageId: ${s}`);let r=await fetch(t);if(r.ok||(t=`/data/passages-translations/${s}-ja.txt`,console.log(`[å…¨è¨³] Trying old path: ${t}`),r=await fetch(t)),!r.ok)return console.log(`[å…¨è¨³] File not found (${r.status}): ${t}`),"";const a=await r.text();return console.log(`[å…¨è¨³] Successfully loaded ${a.length} characters from ${t}`),a}catch(t){return console.error(`[å…¨è¨³] Error loading full translation for ${s}:`,t),""}}async function ni(s){try{const t=pr().find(o=>o.id===s);if(!t)return[];const a=`/data/passages-for-phrase-work-ja/${(t.filePath.split("/").pop()||"").replace(/\.txt$/,"-ja.txt")}`,n=await fetch(a);if(!n.ok)return p.log(`No Japanese phrase file found: ${a}`),[];const l=(await n.text()).split(`
`).map(o=>o.trim()).filter(o=>o.length>0);return p.log(`Loaded ${l.length} Japanese phrases from ${a}`),l}catch(t){return p.error(`Error loading Japanese phrases for ${s}:`,t),[]}}async function ii(s,t){const r=await ri(s);if(!r)return null;const[a,n,i]=await Promise.all([ni(s),yr(s),fr(s)]);let l=0;const o=[];return r.sections.forEach(d=>{d.paragraphs.forEach(u=>{if(u.match(/^([^:]+):\s*"([^"]+)"$/)){const x=u.trim(),S=x.split(/\s+/),N=S.map(b=>{let k=b,D="";if(k.startsWith('"')&&(D='"',k=k.substring(1)),/^(Ms|Mr|Mrs|Dr|Prof|St|Ave|Inc|Ltd|etc)\.$|^[A-Z]\.$|^vs\.$|^e\.g\.$|^i\.e\.$/.test(k)){const z=ot(k.replace(/\.$/,"")),V=t.get(z),ce=(V==null?void 0:V.meaning)||"",ie=[];return D&&ie.push({word:D,meaning:"",isUnknown:!1}),ie.push({word:k,meaning:ce==="-"?"":ce,isUnknown:!1}),ie}const j=k.match(/([.,!?;:â€”"])$/);if(j){const z=k.replace(/[.,!?;:â€”"]$/,""),V=j[1];if(!z){const me=[];return D&&me.push({word:D,meaning:"",isUnknown:!1}),me.push({word:V,meaning:"",isUnknown:!1}),me}const ce=ot(z),ie=t.get(ce),ee=(ie==null?void 0:ie.meaning)||"",oe=[];return D&&oe.push({word:D,meaning:"",isUnknown:!1}),oe.push({word:z,meaning:ee==="-"?"":ee,isUnknown:!1}),oe.push({word:V,meaning:"",isUnknown:!1}),oe}else{const z=ot(k),V=t.get(z),ce=(V==null?void 0:V.meaning)||"",ie=[];return D&&ie.push({word:D,meaning:"",isUnknown:!1}),ie.push({word:k,meaning:ce==="-"?"":ce,isUnknown:!1}),ie}}).flat(),w=a[l]||"";l++,o.push({english:x,japanese:w,phraseMeaning:w,words:S,segments:N})}else{const x=u.trim(),S=x.split(/\s+/),N=S.map(b=>{if(/^(Ms|Mr|Mrs|Dr|Prof|St|Ave|Inc|Ltd|etc)\.$|^[A-Z]\.$|^vs\.$|^e\.g\.$|^i\.e\.$/.test(b)){const A=ot(b.replace(/\.$/,"")),j=t.get(A),z=(j==null?void 0:j.meaning)||"";return{word:b,meaning:z==="-"?"":z,isUnknown:!1}}const D=b.match(/([.,!?;:â€”])$/);if(D){const A=b.replace(/[.,!?;:â€”]$/,""),j=D[1];if(!A)return{word:j,meaning:"",isUnknown:!1};const z=ot(A),V=t.get(z),ce=(V==null?void 0:V.meaning)||"";return[{word:A,meaning:ce==="-"?"":ce,isUnknown:!1},{word:j,meaning:"",isUnknown:!1}]}else{const A=ot(b),j=t.get(A),z=(j==null?void 0:j.meaning)||"";return{word:b,meaning:z==="-"?"":z,isUnknown:!1}}}).flat(),w=a[l]||"";l++,o.push({english:x,japanese:w,phraseMeaning:w,words:S,segments:N})}})}),{id:r.id,title:r.title,level:r.level,actualWordCount:r.wordCount,phrases:o,translation:n,originalText:i}}async function oi(s){var t;try{const r=await fetch(`/data/passages-phrase-learning/${s}.json`);if(!r.ok)return p.log(`No phrase learning JSON found for ${s}, will use .txt conversion`),null;const a=await r.json();p.log(`Loaded phrase learning JSON for ${s}, phrases: ${((t=a.phrases)==null?void 0:t.length)||0}`);const[n,i]=await Promise.all([yr(s),fr(s)]);return{...a,phrases:a.phrases||[],translation:n,originalText:i}}catch{return p.log(`Skipping phrase learning JSON for ${s} (file may be old or moved), will use .txt conversion`),null}}async function li(s){var a;const t=pr(),r=[];p.log(`Loading ${t.length} passages...`);for(const n of t){let i=await oi(n.id);i||(i=await ii(n.id,s)),i?(p.log(`âœ“ Loaded passage: ${n.id} (${((a=i.phrases)==null?void 0:a.length)||0} phrases)`),r.push(i)):p.error(`âœ— Failed to load passage: ${n.id}`)}return p.log(`Total passages loaded: ${r.length}`),r}const _s=new Set(["be","am","is","are","was","were","been","being","have","has","had","having","do","does","did","done","doing","can","could","will","would","shall","should","may","might","must","go","goes","went","gone","going","get","gets","got","gotten","getting","make","makes","made","making","take","takes","took","taken","taking","see","sees","saw","seen","seeing","come","comes","came","coming","want","wants","wanted","wanting","use","uses","used","using","find","finds","found","finding","give","gives","gave","given","giving","tell","tells","told","telling","work","works","worked","working","call","calls","called","calling","try","tries","tried","trying","ask","asks","asked","asking","need","needs","needed","needing","feel","feels","felt","feeling","become","becomes","became","becoming","leave","leaves","left","leaving","put","puts","putting","mean","means","meant","meaning","keep","keeps","kept","keeping","let","lets","letting","begin","begins","began","begun","beginning","seem","seems","seemed","seeming","help","helps","helped","helping","talk","talks","talked","talking","turn","turns","turned","turning","start","starts","started","starting","show","shows","showed","shown","showing","hear","hears","heard","hearing","play","plays","played","playing","run","runs","ran","running","move","moves","moved","moving","like","likes","liked","liking","live","lives","lived","living","believe","believes","believed","believing","bring","brings","brought","bringing","happen","happens","happened","happening","write","writes","wrote","written","writing","sit","sits","sat","sitting","stand","stands","stood","standing","lose","loses","lost","losing","pay","pays","paid","paying","meet","meets","met","meeting","include","includes","included","including","continue","continues","continued","continuing","set","sets","setting","learn","learns","learned","learning","change","changes","changed","changing","lead","leads","led","leading","understand","understands","understood","understanding","watch","watches","watched","watching","follow","follows","followed","following","stop","stops","stopped","stopping","create","creates","created","creating","speak","speaks","spoke","spoken","speaking","read","reads","reading","spend","spends","spent","spending","grow","grows","grew","grown","growing","open","opens","opened","opening","walk","walks","walked","walking","win","wins","won","winning","teach","teaches","taught","teaching","offer","offers","offered","offering","remember","remembers","remembered","remembering","consider","considers","considered","considering","appear","appears","appeared","appearing","buy","buys","bought","buying","serve","serves","served","serving","die","dies","died","dying","send","sends","sent","sending","build","builds","built","building","stay","stays","stayed","staying","fall","falls","fell","fallen","falling","cut","cuts","cutting","reach","reaches","reached","reaching","kill","kills","killed","killing","raise","raises","raised","raising","pass","passes","passed","passing","sell","sells","sold","selling","decide","decides","decided","deciding","return","returns","returned","returning","explain","explains","explained","explaining","hope","hopes","hoped","hoping","develop","develops","developed","developing","carry","carries","carried","carrying","break","breaks","broke","broken","breaking","receive","receives","received","receiving","agree","agrees","agreed","agreeing","support","supports","supported","supporting","hit","hits","hitting","produce","produces","produced","producing","eat","eats","ate","eaten","eating","cover","covers","covered","covering","catch","catches","caught","catching","draw","draws","drew","drawn","drawing","wake","wakes","woke","woken","waking","brush","brushes","brushed","brushing","wash","washes","washed","washing","prepare","prepares","prepared","preparing","check","checks","checked","checking"]),br=new Set(["in","on","at","to","for","with","from","by","about","as","into","like","through","after","over","between","out","against","during","without","before","under","around","among","of","up"]),ci=new Set(["and","but","or","so","yet","for","nor","because","although","if","when","while","since","unless","that","which","who","whom","whose","where"]),di=new Set(["the","a","an","this","that","these","those","my","your","his","her","its","our","their","some","any","no","every","each","either","neither","much","many","more","most","few","little","several"]),mi=new Set(["i","you","he","she","it","we","they","me","him","her","us","them","myself","yourself","himself","herself","itself","ourselves","themselves"]),ui=new Set(["good","new","first","last","long","great","little","own","other","old","right","big","high","different","small","large","next","early","young","important","few","public","bad","same","able","ready","usual","toast","juice"]),gi=new Set(["not","so","up","out","just","now","how","then","more","also","here","well","only","very","even","back","there","down","still","in","as","too","when","never","really","usually","finally","first","after","before"]);function hi(s){return{S:"#3b82f6",V:"#ef4444",O:"#10b981",C:"#f59e0b",M:"#8b5cf6",Prep:"#6366f1",Conj:"#ec4899",Det:"#14b8a6",Adj:"#f97316",Adv:"#a855f7",Unknown:"#6b7280"}[s]}function xi(s){return{S:"ä¸»èª",V:"å‹•è©",O:"ç›®çš„èª",C:"è£œèª",M:"ä¿®é£¾èª",Prep:"å‰ç½®è©",Conj:"æ¥ç¶šè©",Det:"å† è©ãƒ»é™å®šè©",Adj:"å½¢å®¹è©",Adv:"å‰¯è©",Unknown:"ä¸æ˜"}[s]}function pi(s,t,r){var n;const a=s.toLowerCase();return/^[.,!?;:]$/.test(s)?"Unknown":_s.has(a)?"V":br.has(a)?"Prep":ci.has(a)?"Conj":di.has(a)?"Det":ui.has(a)?"Adj":gi.has(a)?"Adv":mi.has(a)?t===0||t>0&&_s.has((n=r[t+1])==null?void 0:n.toLowerCase())?"S":"O":"Unknown"}function fi(s){return{".":"æ–‡ã®çµ‚ã‚ã‚Š",",":"åŒºåˆ‡ã‚Šãƒ»åˆ—æŒ™","!":"æ„Ÿå˜†ãƒ»å¼·èª¿","?":"ç–‘å•",";":"é–¢é€£ã™ã‚‹æ–‡ã®åŒºåˆ‡ã‚Š",":":"èª¬æ˜ãƒ»ä¾‹ç¤ºã®å°å…¥","-":"è£œè¶³èª¬æ˜ãƒ»è¨€ã„æ›ãˆ","â€”":"å¼·ã„åŒºåˆ‡ã‚Šãƒ»æŒ¿å…¥","â€“":"ç¯„å›²ãƒ»é–¢ä¿‚",'"':"å¼•ç”¨","'":"å¼•ç”¨ãƒ»æ‰€æœ‰æ ¼","(":"è£œè¶³æƒ…å ±ã®é–‹å§‹",")":"è£œè¶³æƒ…å ±ã®çµ‚äº†"}[s]||"å¥èª­ç‚¹"}function yt(s){const t=s.match(/\b[\w']+\b|[.,!?;:\-â€”â€“"'()]/g)||[],r=[];let a=!1,n=!1;for(let i=0;i<t.length;i++){const l=t[i];if(/^[.,!?;:\-â€”â€“"'()]$/.test(l)){r.push({word:l,tag:"Unknown",color:"#6b7280",description:fi(l)});continue}let o=pi(l,i,t);o==="Unknown"&&(i===0&&/^[A-Z]/.test(l)&&!n?(o="S",n=!0):a&&!n?o="O":(i>0&&br.has(t[i-1].toLowerCase()),o="M")),o==="V"&&(a=!0),o==="S"&&(n=!0),r.push({word:l,tag:o,color:hi(o),description:xi(o)})}return r}const yi=[{words:["wake","up"],meaning:"èµ·ãã‚‹",type:"phrasal-verb"},{words:["get","up"],meaning:"èµ·åºŠã™ã‚‹",type:"phrasal-verb"},{words:["wake","up"],meaning:"ç›®ã‚’è¦šã¾ã™",type:"phrasal-verb"},{words:["brush","my","teeth"],meaning:"æ­¯ã‚’ç£¨ã",type:"phrasal-verb"},{words:["wash","my","face"],meaning:"é¡”ã‚’æ´—ã†",type:"phrasal-verb"},{words:["have","breakfast"],meaning:"æœé£Ÿã‚’é£Ÿã¹ã‚‹",type:"phrasal-verb"},{words:["go","to","school"],meaning:"å­¦æ ¡ã«è¡Œã",type:"phrasal-verb"},{words:["come","back"],meaning:"å¸°ã£ã¦ãã‚‹",type:"phrasal-verb"},{words:["come","home"],meaning:"å¸°å®…ã™ã‚‹",type:"phrasal-verb"},{words:["do","homework"],meaning:"å®¿é¡Œã‚’ã™ã‚‹",type:"phrasal-verb"},{words:["go","to","bed"],meaning:"å¯ã‚‹",type:"phrasal-verb"},{words:["at","seven"],meaning:"7æ™‚ã«",type:"time-expression"},{words:["in","the","morning"],meaning:"æœã«",type:"time-expression"},{words:["in","the","afternoon"],meaning:"åˆå¾Œã«",type:"time-expression"},{words:["in","the","evening"],meaning:"å¤•æ–¹ã«",type:"time-expression"},{words:["at","night"],meaning:"å¤œã«",type:"time-expression"},{words:["every","morning"],meaning:"æ¯æœ",type:"determiner-noun"},{words:["every","day"],meaning:"æ¯æ—¥",type:"determiner-noun"},{words:["every","night"],meaning:"æ¯æ™©",type:"determiner-noun"},{words:["every","week"],meaning:"æ¯é€±",type:"determiner-noun"}];function bi(s){const t=[],r=s.map(a=>a.toLowerCase());for(const a of yi){const n=a.words.map(i=>i.toLowerCase());for(let i=0;i<=r.length-n.length;i++){let l=!0;for(let o=0;o<n.length;o++)if(r[i+o]!==n[o]){l=!1;break}l&&t.push({...a,words:s.slice(i,i+n.length)})}}return t}const vi=[{name:"too ~ to ...",meaning:"ã€œã™ãã¦...ã§ããªã„",pattern:/\btoo\s+\w+\s+to\s+\w+/i,explanation:"ã€Œtoo + å½¢å®¹è©/å‰¯è© + to + å‹•è©ã€ã®å½¢ã§ã€ã€Œã€œã™ãã¦...ã§ããªã„ã€ã¨ã„ã†æ„å‘³"},{name:"so ~ that ...",meaning:"ã¨ã¦ã‚‚ã€œãªã®ã§...",pattern:/\bso\s+\w+\s+that\b/i,explanation:"ã€Œso + å½¢å®¹è©/å‰¯è© + that ~ã€ã®å½¢ã§ã€ã€Œã¨ã¦ã‚‚ã€œãªã®ã§...ã€ã¨ã„ã†æ„å‘³"},{name:"so that ...",meaning:"ã€œã™ã‚‹ãŸã‚ã«",pattern:/\bso\s+that\b/i,explanation:"ã€Œso that ~ã€ã®å½¢ã§ã€ã€Œã€œã™ã‚‹ãŸã‚ã«ã€ã¨ã„ã†ç›®çš„ã‚’è¡¨ã™"},{name:"It is ~ for ... to",meaning:"...ãŒã€œã™ã‚‹ã®ã¯",pattern:/\bit\s+is\s+\w+\s+for\s+\w+\s+to\b/i,explanation:"ã€ŒIt is + å½¢å®¹è© + for + äºº + to + å‹•è©ã€ã®å½¢ã§ã€ã€Œ(äºº)ãŒã€œã™ã‚‹ã®ã¯...ã ã€ã¨ã„ã†æ„å‘³"},{name:"It is ~ to ...",meaning:"ã€œã™ã‚‹ã“ã¨ã¯...ã ",pattern:/\bit\s+is\s+\w+\s+to\s+\w+/i,explanation:"ã€ŒIt is + å½¢å®¹è© + to + å‹•è©ã€ã®å½¢ã§ã€ã€Œã€œã™ã‚‹ã“ã¨ã¯...ã ã€ã¨ã„ã†æ„å‘³"},{name:"It is ~ that ...",meaning:"...ãªã®ã¯ã€œã  (å¼·èª¿)",pattern:/\bit\s+is\s+\w+\s+that\b/i,explanation:"å¼·èª¿æ§‹æ–‡ã€‚ã€ŒIt is ~ that ...ã€ã®å½¢ã§ã€ç‰¹å®šã®éƒ¨åˆ†ã‚’å¼·èª¿ã™ã‚‹"},{name:"not only ~ but also ...",meaning:"ã€œã ã‘ã§ãªã...ã‚‚",pattern:/\bnot\s+only\s+.+\s+but\s+also\b/i,explanation:"ã€Œnot only A but also Bã€ã®å½¢ã§ã€ã€ŒAã ã‘ã§ãªãBã‚‚ã€ã¨ã„ã†æ„å‘³"},{name:"either ~ or ...",meaning:"ã€œã‹...ã‹ã©ã¡ã‚‰ã‹",pattern:/\beither\s+.+\s+or\b/i,explanation:"ã€Œeither A or Bã€ã®å½¢ã§ã€ã€ŒAã‹Bã‹ã©ã¡ã‚‰ã‹ã€ã¨ã„ã†é¸æŠã‚’è¡¨ã™"},{name:"neither ~ nor ...",meaning:"ã€œã‚‚...ã‚‚ãªã„",pattern:/\bneither\s+.+\s+nor\b/i,explanation:"ã€Œneither A nor Bã€ã®å½¢ã§ã€ã€ŒAã‚‚Bã‚‚ãªã„ã€ã¨ã„ã†å¦å®šã‚’è¡¨ã™"},{name:"both ~ and ...",meaning:"ã€œã‚‚...ã‚‚ä¸¡æ–¹",pattern:/\bboth\s+.+\s+and\b/i,explanation:"ã€Œboth A and Bã€ã®å½¢ã§ã€ã€ŒAã‚‚Bã‚‚ä¸¡æ–¹ã€ã¨ã„ã†æ„å‘³"},{name:"as ~ as ...",meaning:"...ã¨åŒã˜ãã‚‰ã„ã€œ",pattern:/\bas\s+\w+\s+as\b/i,explanation:"ã€Œas + å½¢å®¹è©/å‰¯è© + as ...ã€ã®å½¢ã§ã€ã€Œ...ã¨åŒã˜ãã‚‰ã„ã€œã€ã¨ã„ã†åŒç­‰æ¯”è¼ƒ"},{name:"not as ~ as ...",meaning:"...ã»ã©ã€œãªã„",pattern:/\bnot\s+as\s+\w+\s+as\b/i,explanation:"ã€Œnot as + å½¢å®¹è©/å‰¯è© + as ...ã€ã®å½¢ã§ã€ã€Œ...ã»ã©ã€œãªã„ã€ã¨ã„ã†æ„å‘³"},{name:"one of the ~est",meaning:"æœ€ã‚‚ã€œãªã‚‚ã®ã®1ã¤",pattern:/\bone\s+of\s+the\s+\w+est\b/i,explanation:"ã€Œone of the + æœ€ä¸Šç´š + è¤‡æ•°åè©ã€ã®å½¢ã§ã€ã€Œæœ€ã‚‚ã€œãªã‚‚ã®ã®1ã¤ã€ã¨ã„ã†æ„å‘³"},{name:"make/let/have + äºº + å‹•è©",meaning:"äººã«ã€œã•ã›ã‚‹",pattern:/\b(make|let|have|help)\s+\w+\s+\w+/i,explanation:"ä½¿å½¹å‹•è©ã®æ§‹æ–‡ã€‚ã€Œmake/let/have + äºº + å‹•è©ã®åŸå½¢ã€ã§ã€Œäººã«ã€œã•ã›ã‚‹ã€"},{name:"be used to ~ing",meaning:"ã€œã™ã‚‹ã“ã¨ã«æ…£ã‚Œã¦ã„ã‚‹",pattern:/\b(am|is|are|was|were)\s+used\s+to\s+\w+ing\b/i,explanation:"ã€Œbe used to + å‹•åè©ã€ã®å½¢ã§ã€ã€Œã€œã™ã‚‹ã“ã¨ã«æ…£ã‚Œã¦ã„ã‚‹ã€ã¨ã„ã†æ„å‘³"},{name:"used to + å‹•è©",meaning:"æ˜”ã¯ã€œã—ãŸã‚‚ã®ã ",pattern:/\bused\s+to\s+\w+/i,explanation:"ã€Œused to + å‹•è©ã®åŸå½¢ã€ã®å½¢ã§ã€ã€Œæ˜”ã¯ã€œã—ãŸã‚‚ã®ã ã€ã¨ã„ã†éå»ã®ç¿’æ…£ã‚’è¡¨ã™"}];function wi(s){const t=[];for(const r of vi)r.pattern.test(s)&&t.push(r);return t}function Ts(s){return{beginner:"åˆç´š",intermediate:"ä¸­ç´š",advanced:"ä¸Šç´š",Advanced:"ä¸Šç´š",åˆç´š:"åˆç´š",ä¸­ç´š:"ä¸­ç´š",ä¸Šç´š:"ä¸Šç´š"}[s]||s}function vr({onSaveUnknownWords:s,customQuestionSets:t=[],onAddWordToCustomSet:r,onRemoveWordFromCustomSet:a,onOpenCustomSetManagement:n}){var $e;const[i,l]=m.useState([]),[o,c]=m.useState(null),[d,u]=m.useState([]),[g,x]=m.useState([]),[S,N]=m.useState("all"),[w,b]=m.useState(null),[k,D]=m.useState(new Map),[A,j]=m.useState(new Map),[z,V]=m.useState(null),[ce,ie]=m.useState(!1),[ee,oe]=m.useState(!0),[me,pe]=m.useState("reading"),[be,P]=m.useState(0),[q,F]=m.useState(!1),[X,G]=m.useState(!1),[Y,ue]=m.useState(null),[U,ne]=m.useState(null),[Ne,Ce]=m.useState(!1),[De,Te]=m.useState(!1),[Le,K]=m.useState(!0);m.useEffect(()=>{if(i.length>0){const $="reading-unknown-words-state";try{const v=i.map(y=>({id:y.id,unknownWords:y.phrases.flatMap((I,f)=>I.segments.map((W,R)=>W.isUnknown?`${f}-${R}`:null).filter(Boolean))}));localStorage.setItem($,JSON.stringify(v))}catch(v){p.warn("åˆ†ã‹ã‚‰ãªã„å˜èªã®çŠ¶æ…‹ä¿å­˜ã«å¤±æ•—:",v)}}},[i]),m.useEffect(()=>{p.log("[é•·æ–‡] è¾æ›¸ã®èª­ã¿è¾¼ã¿ã‚’é–‹å§‹..."),fetch("/data/vocabulary/high-school-entrance-words.csv").then($=>{if(!$.ok)throw new Error(`CSVèª­ã¿è¾¼ã¿å¤±æ•—: ${$.status}`);return $.text()}).then($=>{const v=$.split(`
`),y=new Map;v.slice(1).forEach(I=>{if(!I.trim())return;const f=I.split(",").map(W=>W.trim());if(f.length>=7){const W=f[0].toLowerCase().trim();y.set(W,{word:f[0],reading:f[1],meaning:f[2],etymology:f[3],relatedWords:f[4],relatedFields:f[5],difficulty:f[6]})}}),p.log(`[é•·æ–‡] ãƒ¡ã‚¤ãƒ³è¾æ›¸: ${y.size}å˜èªã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`),D(y)}).catch($=>{}),fetch("/data/dictionaries/reading-passages-dictionary.json").then($=>{if(!$.ok)throw new Error(`JSONèª­ã¿è¾¼ã¿å¤±æ•—: ${$.status}`);return $.json()}).then($=>{const v=new Map;Object.entries($).forEach(([y,I])=>{v.set(y.toLowerCase(),I)}),j(v),p.log(`[é•·æ–‡] é•·æ–‡èª­è§£è¾æ›¸: ${v.size}å˜èªã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`)}).catch($=>{p.error("[é•·æ–‡] Error loading reading dictionary:",$)})},[]);const Q=m.useCallback($=>{const v=$.toLowerCase().replace(/[.,!?;:"']/g,"").trim();if(k.has(v)||A.has(v))return v;if(v.endsWith("es")){const y=v.slice(0,-2);if(k.has(y)||A.has(y))return y}if(v.endsWith("s")){const y=v.slice(0,-1);if(k.has(y)||A.has(y))return y}if(v.endsWith("ed")){const y=v.slice(0,-2);if(k.has(y)||A.has(y))return y;if(k.has(y+"e")||A.has(y+"e"))return y+"e";if(y.length>2&&y[y.length-1]===y[y.length-2]){const I=y.slice(0,-1);if(k.has(I)||A.has(I))return I}}if(v.endsWith("ing")){const y=v.slice(0,-3);if(k.has(y)||A.has(y))return y;if(k.has(y+"e")||A.has(y+"e"))return y+"e";if(y.length>2&&y[y.length-1]===y[y.length-2]){const I=y.slice(0,-1);if(k.has(I)||A.has(I))return I}}if(v.endsWith("ly")){const y=v.slice(0,-2);if(k.has(y)||A.has(y))return y}if(v.endsWith("er")){const y=v.slice(0,-2);if(k.has(y)||A.has(y))return y}if(v.endsWith("est")){const y=v.slice(0,-3);if(k.has(y)||A.has(y))return y}return v},[k,A]),re=m.useCallback(($,v)=>{if(v&&typeof v=="string"&&v.trim()&&v!=="-")return v;if(v&&typeof v=="object"&&"meaning"in v&&typeof v.meaning=="string")return v.meaning;const y=$.toLowerCase();if(y==="who")return"(é–¢ä¿‚ä»£åè©)ãã®äººã¯";if(y==="whom")return"(é–¢ä¿‚ä»£åè©)ãã®äººã‚’";if(y==="which")return"(é–¢ä¿‚ä»£åè©)ãã®ç‰©ç­‰ã¯ãƒ»ã‚’";if(y==="that")return"(é–¢ä¿‚ä»£åè©)ãã®äººãƒ»ç‰©ç­‰ã¯ãƒ»ã‚’";const I=Q($),f=k.get(I),W=A.get(I);return(f==null?void 0:f.meaning)||(W==null?void 0:W.meaning)||""},[Q,k,A]);m.useEffect(()=>{const $=setInterval(()=>{q&&!Jn()&&!Yn()&&(F(!1),G(!1))},500);return()=>clearInterval($)},[q]),m.useEffect(()=>{if(k.size===0){p.log("[é•·æ–‡] è¾æ›¸ã®èª­ã¿è¾¼ã¿ã‚’å¾…æ©Ÿä¸­...");return}p.log(`[é•·æ–‡] ãƒ‘ãƒƒã‚»ãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚’é–‹å§‹... (è¾æ›¸: ${k.size}å˜èª)`);try{localStorage.removeItem("reading-passages-data")}catch{}const $="reading-unknown-words-state";let v=[];try{const y=localStorage.getItem($);y&&(v=JSON.parse(y))}catch(y){p.warn("[é•·æ–‡] ä¿å­˜æ¸ˆã¿é€²æ—ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:",y)}K(!0),li(k).then(y=>{var I,f;if(y&&y.length>0){p.log(`[é•·æ–‡] ${y.length}ä»¶ã®ãƒ‘ãƒƒã‚»ãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`);const W=y.map(se=>{const he=v.find(E=>E.id===se.id);return he!=null&&he.unknownWords&&he.unknownWords.length>0?{...se,phrases:se.phrases.map((E,C)=>({...E,segments:E.segments.map((h,_)=>{var M;return{...h,isUnknown:((M=he.unknownWords)==null?void 0:M.includes(`${C}-${_}`))??!1}})}))}:se}),R={åˆç´š:1,beginner:1,ä¸­ç´š:2,intermediate:2,ä¸Šç´š:3,advanced:3,Advanced:3},O=W.sort((se,he)=>{const E=R[se.level||""]||999,C=R[he.level||""]||999;if(E!==C)return E-C;const h=se.actualWordCount||0,_=he.actualWordCount||0;return h-_});l(O),p.log(`[é•·æ–‡] ãƒ‘ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¨­å®šå®Œäº†: ${O.length}ä»¶`),O.length>0&&(c(O[0].id),u(new Array(((I=O[0].phrases)==null?void 0:I.length)||0).fill(!1)),x(new Array(((f=O[0].phrases)==null?void 0:f.length)||0).fill(!1)),p.log(`[é•·æ–‡] åˆæœŸãƒ‘ãƒƒã‚»ãƒ¼ã‚¸ã‚’é¸æŠ: ${O[0].id}`)),K(!1)}else p.error("[é•·æ–‡] loadAllPassagesAsReadingFormatãŒç©ºã®é…åˆ—ã‚’è¿”ã—ã¾ã—ãŸ"),b("ãƒ‘ãƒƒã‚»ãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸï¼ˆãƒ‡ãƒ¼ã‚¿ãŒç©ºã§ã™ï¼‰"),K(!1)}).catch(y=>{p.error("[é•·æ–‡] Error loading passages:",y),b("ãƒ‘ãƒƒã‚»ãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ: "+y.message),K(!1)})},[k]);const J=m.useMemo(()=>i.find($=>$.id===o),[i,o]),Pe=m.useMemo(()=>{const $=S==="all"?i:i.filter(y=>y.level===S),v={åˆç´š:1,beginner:1,ä¸­ç´š:2,intermediate:2,ä¸Šç´š:3,advanced:3,Advanced:3};return $.sort((y,I)=>{const f=v[y.level||""]||999,W=v[I.level||""]||999;if(f!==W)return f-W;const R=y.actualWordCount||0,O=I.actualWordCount||0;return R-O})},[i,S]),fe=m.useCallback($=>{var y,I;c($);const v=i.find(f=>f.id===$);v&&(u(new Array(((y=v.phrases)==null?void 0:y.length)||0).fill(!1)),x(new Array(((I=v.phrases)==null?void 0:I.length)||0).fill(!1)),P(0))},[i]);m.useCallback(($,v)=>{if(v.preventDefault(),v.stopPropagation(),!J||!Me())return;const I=J.phrases[$].segments.filter(W=>W.word&&W.word.trim()!=="").map(W=>W.word).join(" ");qe(I,{rate:.85});const f=v.currentTarget;f.classList.add("speaking"),setTimeout(()=>{f.classList.remove("speaking")},600)},[J]);const We=($,v)=>{if(v.preventDefault(),v.stopPropagation(),z&&z.word===$){V(null);return}const y=$.toLowerCase().replace(/[.,!?;:"']/g,"").trim(),f=(R=>{if(k.has(R))return R;if(R.endsWith("es")&&k.has(R.slice(0,-2)))return R.slice(0,-2);if(R.endsWith("s")&&k.has(R.slice(0,-1)))return R.slice(0,-1);if(R.endsWith("ed")){const O=R.slice(0,-2);if(k.has(O))return O;if(k.has(O+"e"))return O+"e";if(O.length>2&&O[O.length-1]===O[O.length-2]){const se=O.slice(0,-1);if(k.has(se))return se}}if(R.endsWith("ing")){const O=R.slice(0,-3);if(k.has(O))return O;if(k.has(O+"e"))return O+"e";if(O.length>2&&O[O.length-1]===O[O.length-2]){const se=O.slice(0,-1);if(k.has(se))return se}}return R.endsWith("ly")&&k.has(R.slice(0,-2))||R.endsWith("er")&&k.has(R.slice(0,-2))?R.slice(0,-2):R.endsWith("est")&&k.has(R.slice(0,-3))?R.slice(0,-3):null})(y),W=f?k.get(f):null;if(W){const R=v.currentTarget.getBoundingClientRect();V({word:W.word,meaning:W.meaning,reading:W.reading,etymology:W.etymology,relatedWords:W.relatedWords,x:R.left+window.scrollX,y:R.bottom+window.scrollY+5})}else{const R=A.get(f||y);if(R){const O=v.currentTarget.getBoundingClientRect();V({word:R.word,meaning:R.meaning,reading:R.reading||"",etymology:R.etymology||"",relatedWords:R.relatedWords||"",x:O.left+window.scrollX,y:O.bottom+window.scrollY+5})}else p.warn(`Word not found in dictionary: ${y}`)}},H=()=>{if(!J)return;const $=[];if(J.phrases.forEach(v=>{v.segments.forEach(y=>{y.isUnknown&&y.word.trim()!==""&&($.some(I=>I.word.toLowerCase()===y.word.toLowerCase())||$.push({word:y.word,meaning:y.meaning,reading:y.reading||"",etymology:y.etymology||"",relatedWords:y.relatedWords||"",relatedFields:y.relatedFields||"",difficulty:y.difficulty||"intermediate"}))})}),$.length===0){alert(`åˆ†ã‹ã‚‰ãªã„å˜èªãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
å˜èªã‚’ã‚¿ãƒƒãƒ—ã—ã¦ãƒãƒ¼ã‚¯ã—ã¦ãã ã•ã„ã€‚`);return}s&&s($),l(v=>v.map(y=>y.id===J.id?{...y,phrases:y.phrases.map(I=>({...I,segments:I.segments.map(f=>({...f,isUnknown:!1}))}))}:y)),alert(`${$.length}å€‹ã®å˜èªã‚’ã€Œ${J.title}ã€ã‹ã‚‰ä¿å­˜ã—ã¾ã—ãŸï¼`)},Ee=()=>{J&&(l($=>$.map(v=>v.id===J.id?{...v,phrases:v.phrases.map(y=>({...y,segments:y.segments.map(I=>({...I,isUnknown:!1}))}))}:v)),u(new Array(J.phrases.length).fill(!1)),x(new Array(J.phrases.length).fill(!1)))};if(w)return e.jsx("div",{className:"error-message",children:w});if(Le)return e.jsx("div",{className:"empty-container",children:"èª­ã¿è¾¼ã¿ä¸­..."});if(i.length===0)return e.jsx("div",{className:"empty-container",children:"ãƒ‘ãƒƒã‚»ãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"});if(Pe.length===0)return e.jsxs("div",{className:"comprehensive-reading-view",children:[e.jsx("div",{className:"reading-header",children:e.jsxs("div",{className:"filter-controls",children:[e.jsx("label",{htmlFor:"difficulty-filter",children:"é›£æ˜“åº¦: "}),e.jsxs("select",{id:"difficulty-filter",value:S,onChange:$=>N($.target.value),title:"é›£æ˜“åº¦ã‚’é¸æŠ",children:[e.jsx("option",{value:"all",children:"å…¨ã¦"}),e.jsx("option",{value:"åˆç´š",children:"åˆç´š"}),e.jsx("option",{value:"ä¸­ç´š",children:"ä¸­ç´š"}),e.jsx("option",{value:"ä¸Šç´š",children:"ä¸Šç´š"})]})]})}),e.jsx("div",{className:"empty-container",children:"é¸æŠã—ãŸé›£æ˜“åº¦ã®ãƒ‘ãƒƒã‚»ãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚åˆ¥ã®é›£æ˜“åº¦ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"})]});const Ae=(($e=J==null?void 0:J.phrases)==null?void 0:$e.reduce(($,v)=>$+v.segments.filter(y=>y.isUnknown).length,0))||0;return e.jsxs("div",{className:"comprehensive-reading-view",children:[!ee&&ce&&e.jsxs("div",{className:"study-settings-panel",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("h3",{children:"ğŸ“Š å­¦ç¿’è¨­å®š"}),e.jsx("button",{onClick:()=>ie(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm shadow-sm:bg-gray-600",children:"âœ• é–‰ã˜ã‚‹"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"difficulty-filter",children:"â­ é›£æ˜“åº¦:"}),e.jsxs("select",{id:"difficulty-filter",value:S,onChange:$=>N($.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"å…¨ã¦"}),e.jsx("option",{value:"åˆç´š",children:"åˆç´š"}),e.jsx("option",{value:"ä¸­ç´š",children:"ä¸­ç´š"}),e.jsx("option",{value:"ä¸Šç´š",children:"ä¸Šç´š"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"passage-select",children:"ğŸ“– ãƒ‘ãƒƒã‚»ãƒ¼ã‚¸:"}),e.jsx("select",{id:"passage-select",value:o||"",onChange:$=>fe($.target.value),className:"select-input",children:Pe.map($=>e.jsxs("option",{value:$.id,children:[Ts($.level||"beginner"),"_",$.actualWordCount,"èª_",$.title]},$.id))})]})]}),ee&&e.jsxs("div",{className:"reading-sub-tabs grid grid-cols-6 gap-1 sm:gap-2",children:[e.jsx("button",{className:`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium transition-all duration-200 rounded-t-lg border-b-2 ${me==="reading"?"bg-primary text-white border-primary":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,onClick:()=>pe("reading"),children:"ğŸ“– èª­è§£"}),e.jsx("button",{className:`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium transition-all duration-200 rounded-t-lg border-b-2 ${me==="fullText"?"bg-primary text-white border-primary":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,onClick:()=>pe("fullText"),children:"ğŸ“„ å…¨æ–‡"}),e.jsx("button",{className:`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium transition-all duration-200 rounded-t-lg border-b-2 ${me==="fullTranslation"?"bg-primary text-white border-primary":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,onClick:()=>pe("fullTranslation"),children:"ğŸ“ å…¨è¨³"}),e.jsxs("button",{onClick:H,className:"px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium bg-success text-white rounded-t-lg border-b-2 border-success transition-all duration-200 hover:bg-success-hover disabled:opacity-50 disabled:cursor-not-allowed:bg-success-hover",disabled:Ae===0,title:"æœªçŸ¥èªã‚’ä¿å­˜",children:["ğŸ’¾ ä¿å­˜ (",Ae,")"]}),e.jsx("button",{onClick:Ee,className:"px-4 py-2 text-sm font-medium bg-warning text-warning-dark border-2 border-warning rounded-lg transition-all duration-200 hover:bg-warning-hover hover:shadow-md:bg-warning-hover",title:"ãƒªã‚»ãƒƒãƒˆ",children:"ğŸ”„ ãƒªã‚»ãƒƒãƒˆ"}),e.jsx("button",{className:"px-4 py-2 text-sm font-medium bg-gray-200 text-gray-700 border-2 border-transparent rounded-lg transition-all duration-200 hover:bg-gray-300:bg-gray-600",onClick:()=>ie(!ce),title:"å­¦ç¿’è¨­å®šã‚’é–‹ã",children:"âš™ï¸ å­¦ç¿’è¨­å®š"})]}),ee&&ce&&e.jsxs("div",{className:"study-settings-panel",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("h3",{children:"ğŸ“Š å­¦ç¿’è¨­å®š"}),e.jsx("button",{onClick:()=>ie(!1),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 text-sm shadow-sm:bg-gray-600",children:"âœ• é–‰ã˜ã‚‹"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"difficulty-filter-reading",children:"â­ é›£æ˜“åº¦:"}),e.jsxs("select",{id:"difficulty-filter-reading",value:S,onChange:$=>N($.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"å…¨ã¦"}),e.jsx("option",{value:"åˆç´š",children:"åˆç´š"}),e.jsx("option",{value:"ä¸­ç´š",children:"ä¸­ç´š"}),e.jsx("option",{value:"ä¸Šç´š",children:"ä¸Šç´š"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"passage-select-reading",children:"ğŸ“– ãƒ‘ãƒƒã‚»ãƒ¼ã‚¸:"}),e.jsx("select",{id:"passage-select-reading",value:o||"",onChange:$=>fe($.target.value),className:"select-input",children:Pe.map($=>e.jsxs("option",{value:$.id,children:[Ts($.level||"beginner"),"_",$.actualWordCount,"èª_",$.title]},$.id))})]})]}),z&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"word-popup-overlay",onClick:()=>V(null)}),e.jsxs("div",{className:"word-popup","data-popup-x":z.x,"data-popup-y":z.y,children:[e.jsx("button",{className:"popup-close",onClick:()=>V(null),title:"é–‰ã˜ã‚‹",children:"âœ•"}),e.jsx("div",{className:"popup-word",children:z.word}),z.reading&&e.jsx("div",{className:"popup-reading",children:z.reading}),e.jsx("div",{className:"popup-meaning",children:z.meaning}),z.etymology&&e.jsxs("div",{className:"popup-etymology",children:[e.jsx("strong",{children:"èªæº:"})," ",z.etymology]}),z.relatedWords&&e.jsxs("div",{className:"popup-related",children:[e.jsx("strong",{children:"é–¢é€£èª:"})," ",z.relatedWords]})]})]}),ee&&J&&J.phrases&&J.phrases.length>0&&e.jsxs("div",{className:"passage-content",children:[e.jsx("h3",{className:"passage-title",children:J.title}),me==="reading"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"reading-full-text-area",children:[e.jsx("h4",{className:"text-lg font-semibold mb-3",children:"ğŸ“– å…¨æ–‡"}),e.jsx("div",{className:"full-text-content",children:(()=>{if(J.originalText){const v=J.originalText.split(/([.!?])\s+/).filter(I=>I.trim()),y=[];for(let I=0;I<v.length;I+=2){const f=v[I],W=v[I+1]||"";y.push((f+W).trim())}return e.jsx("div",{className:"sentences-container",children:y.map((I,f)=>e.jsxs("span",{className:`sentence-clickable ${Y===f?"selected-reading":""}`,onClick:()=>{ue(f);const W=yt(I);ne({text:I,grammarAnalysis:W,showMeanings:!1})},children:[I," "]},f))})}if(J.title.toLowerCase().includes("conversation")){const v=[];return J.phrases.forEach(y=>{let I=y.segments.map(f=>f.word).join(" ").trim();!I||I==="-"||(I=I.replace(/\s+([.,!?;:"])/g,"$1"),v.push(I))}),e.jsx("div",{className:"sentences-container",children:v.map((y,I)=>e.jsxs("span",{className:`sentence-clickable ${Y===I?"selected-reading":""}`,onClick:()=>{ue(I);const f=yt(y);ne({text:y,grammarAnalysis:f,showMeanings:!1})},children:[y," "]},I))})}else{let v="",y=!0;J.phrases.forEach(W=>{W.segments.forEach(R=>{let O=R.word.trim();O&&O!=="-"&&(/^[.,!?;:]$/.test(O)?(v+=O,y=/^[.!?]$/.test(O)):(O==='"'||O==="'"||(y&&O.length>0&&(O=O.charAt(0).toUpperCase()+O.slice(1),y=!1),v.length>0&&!v.endsWith(" ")&&!v.endsWith('"')&&!v.endsWith("'")&&(v+=" ")),v+=O))})}),v=v.replace(/\s+"/g,'"').replace(/\s+'/g,"'");const I=v.split(/([.!?])\s+/).filter(W=>W.trim()),f=[];for(let W=0;W<I.length;W+=2){const R=I[W],O=I[W+1]||"";f.push((R+O).trim())}return e.jsx("div",{className:"sentences-container",children:f.map((W,R)=>e.jsxs("span",{className:`sentence-clickable ${Y===R?"selected-reading":""}`,onClick:()=>{ue(R);const O=yt(W);ne({text:W,grammarAnalysis:O,showMeanings:!1})},children:[W," "]},R))})}})()})]}),Y!==null&&U&&e.jsxs("div",{className:"selected-sentence-analysis mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"m-0 text-lg font-semibold",children:"ğŸ“ é¸æŠã—ãŸæ–‡ã®èª­è§£"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm bg-primary text-white rounded hover:bg-primary-hover",onClick:()=>qe(U.text),title:"ã“ã®æ–‡ã‚’ç™ºéŸ³",children:"ğŸ”Š ç™ºéŸ³"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-info text-white rounded hover:bg-info-hover",onClick:()=>ne({...U,showMeanings:!U.showMeanings}),children:U.showMeanings?"æ„å‘³ã‚’éš ã™":"æ„å‘³ã‚’è¡¨ç¤º"})]})]}),e.jsx("div",{className:"selected-sentence-text mb-4",children:U.text}),e.jsxs("div",{className:"grammar-structure mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h5",{className:"text-sm font-semibold m-0",children:"ğŸ”¤ æ–‡æ³•æ§‹é€ :"}),e.jsx("button",{className:"px-2 py-1 text-xs bg-gray-200 rounded hover:bg-gray-300:bg-gray-600",onClick:()=>Ce(!Ne),children:Ne?"å‡¡ä¾‹ã‚’éš ã™":"å‡¡ä¾‹ã‚’è¡¨ç¤º"})]}),Ne&&e.jsxs("div",{className:"grammar-legend mb-3 p-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-between sm:items-center mb-2",children:[e.jsx("h6",{className:"text-xs font-semibold m-0",children:"ğŸ“– æ–‡æ³•ã‚¿ã‚°ä¸€è¦§"}),e.jsx("button",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200:bg-blue-800",onClick:()=>Te(!De),children:De?"ç°¡æ˜“è¡¨ç¤º":"ğŸ“š ã•ã‚‰ã«è©³ã—ã"})]}),De?e.jsxs("div",{className:"detailed-grammar-explanation text-xs space-y-3 break-words",children:[e.jsxs("div",{className:"explanation-section",children:[e.jsx("h6",{className:"font-semibold text-sm mb-2",children:"ğŸ¯ æ–‡ã®éª¨æ ¼ (å¿…é ˆè¦ç´ )"}),e.jsxs("div",{className:"explanation-item mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"grammar-tag","data-tag":"S",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"S",children:"[S]"})}),e.jsx("strong",{children:"ä¸»èª (Subject)"})]}),e.jsxs("p",{className:"ml-6 text-gray-600",children:[e.jsx("strong",{children:"ã€Œèª°ãŒã€ã€Œä½•ãŒã€"}),"ã‚’è¡¨ã™ã€‚æ–‡ã®ä¸»å½¹ã€‚",e.jsx("br",{}),"ä¾‹: ",e.jsx("em",{children:"I"})," study English. / ",e.jsx("em",{children:"The cat"})," is cute."]})]}),e.jsxs("div",{className:"explanation-item mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"grammar-tag","data-tag":"V",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"V",children:"[V]"})}),e.jsx("strong",{children:"å‹•è© (Verb)"})]}),e.jsxs("p",{className:"ml-6 text-gray-600",children:[e.jsx("strong",{children:"ã€Œã€œã™ã‚‹ã€ã€Œã€œã§ã‚ã‚‹ã€"}),"ã‚’è¡¨ã™ã€‚ä¸»èªã®å‹•ä½œã‚„çŠ¶æ…‹ã€‚",e.jsx("br",{}),"ä¾‹: I ",e.jsx("em",{children:"study"})," English. / The cat ",e.jsx("em",{children:"is"})," cute."]})]}),e.jsxs("div",{className:"explanation-item mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"grammar-tag","data-tag":"O",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"O",children:"[O]"})}),e.jsx("strong",{children:"ç›®çš„èª (Object)"})]}),e.jsxs("p",{className:"ml-6 text-gray-600",children:[e.jsx("strong",{children:"ã€Œä½•ã‚’ã€ã€Œèª°ã‚’ã€"}),"ã‚’è¡¨ã™ã€‚å‹•è©ã®å¯¾è±¡ã€‚",e.jsx("br",{}),"ä¾‹: I study ",e.jsx("em",{children:"English"}),". / I like ",e.jsx("em",{children:"cats"}),"."]})]}),e.jsxs("div",{className:"explanation-item mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"grammar-tag","data-tag":"C",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"C",children:"[C]"})}),e.jsx("strong",{children:"è£œèª (Complement)"})]}),e.jsxs("p",{className:"ml-6 text-gray-600",children:[e.jsx("strong",{children:"ã€Œã©ã†ã§ã‚ã‚‹ã€ã€Œä½•ã§ã‚ã‚‹ã€"}),"ã‚’è¡¨ã™ã€‚ä¸»èªã‚„ç›®çš„èªã®çŠ¶æ…‹ãƒ»æ€§è³ªã€‚",e.jsx("br",{}),"ä¾‹: The cat is ",e.jsx("em",{children:"cute"}),". / I am ",e.jsx("em",{children:"a student"}),"."]})]})]}),e.jsxs("div",{className:"explanation-section",children:[e.jsx("h6",{className:"font-semibold text-sm mb-2",children:"âœ¨ æ–‡ã‚’è©³ã—ãã™ã‚‹è¦ç´ "}),e.jsxs("div",{className:"explanation-item mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"grammar-tag","data-tag":"M",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"M",children:"[M]"})}),e.jsx("strong",{children:"ä¿®é£¾èª (Modifier)"})]}),e.jsxs("p",{className:"ml-6 text-gray-600",children:[e.jsx("strong",{children:"ã€Œã©ã‚“ãªã€ã€Œã©ã®ã‚ˆã†ã«ã€ã€Œã„ã¤ã€ã€Œã©ã“ã§ã€"}),"ã‚’è¡¨ã™ã€‚æ–‡ã‚’è±Šã‹ã«ã™ã‚‹ã€‚",e.jsx("br",{}),"ä¾‹: I wake up at ",e.jsx("em",{children:"seven"}),". / I read a ",e.jsx("em",{children:"good"})," book."]})]}),e.jsxs("div",{className:"explanation-item mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"grammar-tag","data-tag":"Adj",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"Adj",children:"[Adj]"})}),e.jsx("strong",{children:"å½¢å®¹è© (Adjective)"})]}),e.jsxs("p",{className:"ml-6 text-gray-600",children:[e.jsx("strong",{children:"åè©ã‚’è©³ã—ãèª¬æ˜"}),"ã™ã‚‹èªã€‚",e.jsx("br",{}),"ä¾‹: a ",e.jsx("em",{children:"beautiful"})," flower / ",e.jsx("em",{children:"happy"})," students"]})]}),e.jsxs("div",{className:"explanation-item mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"grammar-tag","data-tag":"Adv",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"Adv",children:"[Adv]"})}),e.jsx("strong",{children:"å‰¯è© (Adverb)"})]}),e.jsxs("p",{className:"ml-6 text-gray-600",children:[e.jsx("strong",{children:"å‹•è©ãƒ»å½¢å®¹è©ãƒ»å‰¯è©ã‚’è©³ã—ãèª¬æ˜"}),"ã™ã‚‹èªã€‚",e.jsx("br",{}),"ä¾‹: run ",e.jsx("em",{children:"quickly"})," / ",e.jsx("em",{children:"very"})," happy / ",e.jsx("em",{children:"always"})," ","study"]})]})]}),e.jsxs("div",{className:"explanation-section",children:[e.jsx("h6",{className:"font-semibold text-sm mb-2",children:"ğŸ”— ã¤ãªããƒ»é™å®šã™ã‚‹è¦ç´ "}),e.jsxs("div",{className:"explanation-item mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"grammar-tag","data-tag":"Prep",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"Prep",children:"[Prep]"})}),e.jsx("strong",{children:"å‰ç½®è© (Preposition)"})]}),e.jsxs("p",{className:"ml-6 text-gray-600",children:[e.jsx("strong",{children:"åè©ã®å‰ã«ç½®ã„ã¦å ´æ‰€ãƒ»æ™‚é–“ãƒ»æ–¹æ³•"}),"ãªã©ã‚’ç¤ºã™ã€‚",e.jsx("br",{}),"ä¾‹: ",e.jsx("em",{children:"at"})," school / ",e.jsx("em",{children:"in"})," the morning / ",e.jsx("em",{children:"with"})," ","friends"]})]}),e.jsxs("div",{className:"explanation-item mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"grammar-tag","data-tag":"Conj",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"Conj",children:"[Conj]"})}),e.jsx("strong",{children:"æ¥ç¶šè© (Conjunction)"})]}),e.jsxs("p",{className:"ml-6 text-gray-600",children:[e.jsx("strong",{children:"èªãƒ»å¥ãƒ»æ–‡ã‚’ã¤ãªã"}),"èªã€‚",e.jsx("br",{}),"ä¾‹: I ",e.jsx("em",{children:"and"})," you / study ",e.jsx("em",{children:"but"})," tired /"," ",e.jsx("em",{children:"because"})," I like it"]})]}),e.jsxs("div",{className:"explanation-item mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"grammar-tag","data-tag":"Det",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"Det",children:"[Det]"})}),e.jsx("strong",{children:"é™å®šè© (Determiner)"})]}),e.jsxs("p",{className:"ml-6 text-gray-600",children:[e.jsx("strong",{children:"åè©ã®ç¯„å›²ãƒ»æ•°é‡ã‚’é™å®š"}),"ã™ã‚‹èªã€‚å† è©ãƒ»æŒ‡ç¤ºè©ãƒ»æ•°é‡è©ãªã©ã€‚",e.jsx("br",{}),"ä¾‹: ",e.jsx("em",{children:"the"})," book / ",e.jsx("em",{children:"my"})," cat / ",e.jsx("em",{children:"every"})," day /"," ",e.jsx("em",{children:"some"})," water"]})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"grammar-tag","data-tag":"S",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"S",children:"[S]"})}),e.jsx("span",{className:"flex-1 min-w-0 break-words",children:"ä¸»èª (Subject)"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"grammar-tag","data-tag":"V",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"V",children:"[V]"})}),e.jsx("span",{className:"flex-1 min-w-0 break-words",children:"å‹•è© (Verb)"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"grammar-tag","data-tag":"O",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"O",children:"[O]"})}),e.jsx("span",{className:"flex-1 min-w-0 break-words",children:"ç›®çš„èª (Object)"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"grammar-tag","data-tag":"C",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"C",children:"[C]"})}),e.jsx("span",{className:"flex-1 min-w-0 break-words",children:"è£œèª (Complement)"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"grammar-tag","data-tag":"M",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"M",children:"[M]"})}),e.jsx("span",{className:"flex-1 min-w-0 break-words",children:"ä¿®é£¾èª (Modifier)"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"grammar-tag","data-tag":"Prep",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"Prep",children:"[Prep]"})}),e.jsx("span",{className:"flex-1 min-w-0 break-words",children:"å‰ç½®è© (Preposition)"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"grammar-tag","data-tag":"Conj",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"Conj",children:"[Conj]"})}),e.jsx("span",{className:"flex-1 min-w-0 break-words",children:"æ¥ç¶šè© (Conjunction)"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"grammar-tag","data-tag":"Det",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"Det",children:"[Det]"})}),e.jsx("span",{className:"flex-1 min-w-0 break-words",children:"é™å®šè© (Determiner)"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"grammar-tag","data-tag":"Adj",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"Adj",children:"[Adj]"})}),e.jsx("span",{className:"flex-1 min-w-0 break-words",children:"å½¢å®¹è© (Adjective)"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"grammar-tag","data-tag":"Adv",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"Adv",children:"[Adv]"})}),e.jsx("span",{className:"flex-1 min-w-0 break-words",children:"å‰¯è© (Adverb)"})]}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"grammar-tag","data-tag":"Unknown",children:e.jsx("span",{className:"grammar-tag-label","data-tag":"Unknown",children:"[?]"})}),e.jsx("span",{className:"flex-1 min-w-0 break-words",children:"ãã®ä»–"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:U.grammarAnalysis.filter($=>!/^[.,!?;:\-â€”â€“"'()]$/.test($.word)).map(($,v)=>e.jsxs("div",{className:"grammar-tag","data-tag":$.tag,title:$.description,children:[e.jsx("span",{className:"font-semibold",children:$.word}),e.jsxs("span",{className:"ml-1 text-xs grammar-tag-label","data-tag":$.tag,children:["[",$.tag,"]"]})]},v))}),U.grammarAnalysis.some($=>/^[.,!?;:\-â€”â€“"'()]$/.test($.word))&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h6",{className:"text-xs font-semibold mb-2 text-gray-600",children:"ğŸ“Œ è¨˜å·ã®æ„å‘³:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:U.grammarAnalysis.filter($=>/^[.,!?;:\-â€”â€“"'()]$/.test($.word)).map(($,v)=>e.jsxs("div",{className:"punctuation-card",title:$.description,children:[e.jsx("span",{className:"font-bold text-lg",children:$.word}),e.jsx("span",{className:"ml-2 text-xs text-gray-600",children:$.description})]},v))})]})]}),(()=>{const $=U.grammarAnalysis.map(y=>y.word),v=bi($);return v.length===0?null:e.jsxs("div",{className:"phrasal-expressions-section mt-4",children:[e.jsx("h5",{className:"text-sm font-semibold mb-2",children:"ğŸ”— ç†Ÿèª:"}),e.jsx("div",{className:"space-y-2",children:v.map((y,I)=>e.jsxs("div",{className:"phrasal-expression-card",children:[e.jsx("div",{className:"phrasal-expression-words",children:y.words.map((f,W)=>{const R=re(f,void 0);return e.jsxs("div",{className:"phrasal-word-item",children:[e.jsx("div",{className:"phrasal-word",children:f}),e.jsx("div",{className:"phrasal-word-meaning",children:R||"-"})]},W)})}),e.jsxs("div",{className:"phrasal-expression-divider",children:[e.jsx("div",{className:"phrasal-divider-line"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"phrasal-type-label",children:"ç†Ÿèª"}),r&&a&&n&&e.jsx(pt,{word:{word:y.words.join(" "),meaning:y.meaning,source:"reading",sourceDetail:J==null?void 0:J.title},sets:t,onAddWord:r,onRemoveWord:a,onOpenManagement:n,size:"small"})]})]}),e.jsx("div",{className:"phrasal-expression-meaning",children:y.meaning})]},I))})]})})(),(()=>{const $=wi(U.text);return $.length===0?null:e.jsxs("div",{className:"grammar-patterns-section mt-4",children:[e.jsx("h5",{className:"text-sm font-semibold mb-2",children:"ğŸ“ é‡è¦æ§‹æ–‡:"}),e.jsx("div",{className:"space-y-2",children:$.map((v,y)=>e.jsxs("div",{className:"grammar-pattern-card",children:[e.jsxs("div",{className:"pattern-header",children:[e.jsx("div",{className:"pattern-name",children:v.name}),e.jsx("div",{className:"pattern-meaning",children:v.meaning})]}),e.jsx("div",{className:"pattern-sentence",children:U.text}),e.jsxs("div",{className:"pattern-explanation",children:["ğŸ’¡ ",v.explanation]})]},y))})]})})(),U.showMeanings&&e.jsxs("div",{className:"word-cards-container",children:[e.jsx("h5",{className:"text-sm font-semibold mb-2",children:"ğŸ“š å˜èªã®æ„å‘³:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:U.grammarAnalysis.filter($=>!/^[.,!?;:\-â€”â€“"'()]$/.test($.word)).map(($,v)=>{const y=re($.word,void 0);return e.jsxs("div",{className:"word-card",onDoubleClick:I=>We($.word,I),title:"ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—: è©³ç´°è¡¨ç¤º",children:[e.jsx("div",{className:"word-card-word",children:$.word}),y&&y!=="-"&&e.jsx("div",{className:"word-card-meaning text-xs",children:y})]},v)})})]})]})]}),me==="fullText"&&e.jsxs("div",{className:"full-text-display",children:[e.jsx("h3",{children:"ğŸ“„ å…¨æ–‡"}),e.jsxs("div",{className:"full-text-controls",children:[e.jsx("button",{className:"px-6 py-3 text-base font-medium bg-primary text-white border-2 border-primary rounded-lg transition-all duration-200 hover:bg-primary-hover hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed:bg-primary-hover",onClick:()=>{const $=J.phrases.map(v=>v.segments.map(I=>I.word).join(" ").replace(/^[A-Z][a-z]*(?:\s+\d+)?:\s*/,"").replace(/"/g,"")).join(" ").replace(/\s+([.,!?;:])/g,"$1");qe($),F(!0),G(!1)},disabled:q&&!X,title:"å…¨æ–‡ã‚’ç™ºéŸ³",children:"ğŸ”Š ç™ºéŸ³"}),e.jsx("button",{className:"px-6 py-3 text-base font-medium bg-warning text-warning-dark border-2 border-warning rounded-lg transition-all duration-200 hover:bg-warning-hover hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed:bg-warning-hover",onClick:()=>{X?(Vn(),G(!1)):(Hn(),G(!0))},disabled:!q,title:X?"ç™ºéŸ³ã‚’å†é–‹":"ç™ºéŸ³ã‚’ä¸€æ™‚åœæ­¢",children:X?"â–¶ï¸ å†é–‹":"â¸ï¸ ä¸€æ™‚åœæ­¢"}),e.jsx("button",{className:"px-6 py-3 text-base font-medium bg-error text-white border-2 border-error rounded-lg transition-all duration-200 hover:bg-error-hover hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed:bg-error-hover",onClick:()=>{Un(),F(!1),G(!1)},disabled:!q,title:"ç™ºéŸ³ã‚’åœæ­¢",children:"â¹ï¸ åœæ­¢"})]}),e.jsx("div",{className:"full-text-content",children:(()=>{if(J.originalText)return e.jsx("div",{className:"paragraph-en",children:J.originalText});if(J.title.toLowerCase().includes("conversation")){const v=[];return J.phrases.forEach(y=>{let I=y.segments.map(f=>f.word).join(" ").trim();!I||I==="-"||(I=I.replace(/\s+([.,!?;:"])/g,"$1"),v.push(I))}),e.jsx("div",{children:v.map((y,I)=>e.jsx("p",{className:"paragraph-en conversation-line",children:y},I))})}else{const y=J.phrases[0].segments.map(M=>M.word).join(" ").trim(),I=y.length<100&&!/[.!?]$/.test(y);let f="",W=!0;J.phrases.forEach((M,L)=>{L===0&&I||M.segments.forEach(B=>{let T=B.word.trim();T&&T!=="-"&&(/^[.,!?;:]$/.test(T)?(f+=T,W=/^[.!?]$/.test(T)):(T==='"'||T==="'"||(W&&T.length>0&&(T=T.charAt(0).toUpperCase()+T.slice(1),W=!1),f.length>0&&!f.endsWith(" ")&&!f.endsWith('"')&&!f.endsWith("'")&&(f+=" ")),f+=T))})}),f=f.replace(/\s+"/g,'"').replace(/\s+'/g,"'");const R=f.split(/([.!?])\s+/).filter(M=>M.trim()),O=[];for(let M=0;M<R.length;M+=2){const L=R[M],B=R[M+1]||"";O.push((L+B).trim())}const se=[];let he=[],E=0;const C=60;O.forEach((M,L)=>{const B=M.split(/\s+/).length;he.push(M),E+=B,(E>=C||L===O.length-1)&&(se.push(he.join(" ")),he=[],E=0)}),he.length>0&&se.push(he.join(" "));const h=O,_=M=>{ue(M);const L=h[M],B=yt(L);ne({text:L,grammarAnalysis:B,showMeanings:!1})};return e.jsxs("div",{children:[e.jsx("div",{className:"sentences-container",children:h.map((M,L)=>e.jsxs("span",{className:`sentence-clickable ${Y===L?"selected":""}`,onClick:()=>_(L),children:[M," "]},L))}),Y!==null&&U&&e.jsxs("div",{className:"selected-sentence-analysis",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"m-0",children:"ğŸ“– é¸æŠã—ãŸæ–‡ã®èª­è§£"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-1 text-sm bg-primary text-white rounded hover:bg-primary-hover",onClick:()=>qe(U.text),title:"ã“ã®æ–‡ã‚’ç™ºéŸ³",children:"ğŸ”Š ç™ºéŸ³"}),e.jsx("button",{className:"px-3 py-1 text-sm bg-info text-white rounded hover:bg-info-hover",onClick:()=>ne({...U,showMeanings:!U.showMeanings}),children:U.showMeanings?"æ„å‘³ã‚’éš ã™":"æ„å‘³ã‚’è¡¨ç¤º"})]})]}),e.jsx("div",{className:"selected-sentence-text",children:U.text}),e.jsxs("div",{className:"grammar-structure mt-4",children:[e.jsx("h5",{className:"text-sm font-semibold mb-2",children:"ğŸ”¤ æ–‡æ³•æ§‹é€ :"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:U.grammarAnalysis.map((M,L)=>e.jsxs("div",{className:"grammar-tag","data-tag":M.tag,title:M.description,children:[e.jsx("span",{className:"font-semibold",children:M.word}),e.jsxs("span",{className:"ml-1 text-xs grammar-tag-label","data-tag":M.tag,children:["[",M.tag,"]"]})]},L))})]}),U.showMeanings&&e.jsxs("div",{className:"word-cards-container mt-4",children:[e.jsx("h5",{className:"text-sm font-semibold mb-2",children:"ğŸ“š å˜èªã®æ„å‘³:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:U.grammarAnalysis.filter(M=>!/^[.,!?;:]$/.test(M.word)).map((M,L)=>{const B=re(M.word,void 0);return e.jsxs("div",{className:"word-card",onDoubleClick:T=>We(M.word,T),title:"ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—: è©³ç´°è¡¨ç¤º",children:[e.jsx("div",{className:"word-card-word",children:M.word}),B&&B!=="-"&&e.jsx("div",{className:"word-card-meaning text-xs",children:B})]},L)})})]})]})]})}})()})]}),me==="fullTranslation"&&e.jsx("div",{className:"full-translation-display",children:e.jsx("div",{className:"full-translation-content",children:(()=>{var v;if(console.log("[å…¨è¨³ã‚¿ãƒ–] currentPassage.id:",J.id),console.log("[å…¨è¨³ã‚¿ãƒ–] currentPassage.translation exists:",!!J.translation),console.log("[å…¨è¨³ã‚¿ãƒ–] currentPassage.translation length:",((v=J.translation)==null?void 0:v.length)||0),J.translation){const y=J.translation.split(/\n+/).map(I=>I.trim()).filter(I=>I.length>0);return e.jsx("div",{className:"full-translation-text",children:y.map((I,f)=>e.jsx("p",{className:"paragraph-ja",children:I},f))})}if(J.title.toLowerCase().includes("conversation")){const y=[];return J.phrases.forEach(I=>{let f=I.phraseMeaning||"";f=f.replace(/\[è¦ä¿®æ­£\]/g,"").trim(),!(!f||f==="-")&&y.push(f)}),y.map((I,f)=>e.jsx("p",{className:"paragraph-ja conversation-line",children:I},f))}else{const y=[];let I="";J.phrases.forEach(R=>{let O=R.phraseMeaning||"";if(O){if(O=O.replace(/\[è¦ä¿®æ­£\]/g,"").trim(),!O)return;const se=R.segments.map(E=>E.word).join(" ").trim(),he=/[.!?]$/.test(se);/[ã€‚ï¼ï¼Ÿ]$/.test(O)?(I+=O,he&&(y.push(I.trim()),I="")):he?(I+=O+"ã€‚",y.push(I.trim()),I=""):I+=O+"ã€"}}),I.trim()&&y.push(I.trim()+"ã€‚");const f=[],W=4;for(let R=0;R<y.length;R+=W){const O=y.slice(R,R+W);f.push(O.join(""))}return f.map((R,O)=>e.jsx("p",{className:"paragraph-ja",children:R},O))}})()})})]}),e.jsx("style",{children:`
        .comprehensive-reading-view {
          max-width: 1200px;
          margin: 0 auto;
          padding: 20px;
          width: 100%;
        }

        @media (max-width: 768px) {
          .comprehensive-reading-view {
            max-width: 100%;
            margin: 0;
            padding: 8px;
          }
        }

        .reading-header {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          margin-bottom: 20px;
        }

        .dark-mode .reading-header {
          background: var(--gray-800);
        }

        .reading-header h2 {
          margin: 0 0 20px 0;
        }

        .filter-controls, .passage-selector {
          margin-bottom: 15px;
        }

        .filter-controls label, .passage-selector label {
          font-weight: bold;
          margin-right: 10px;
          color: #333;
        }

        .dark-mode .filter-controls label,
        .dark-mode .passage-selector label {
          color: var(--gray-200);
        }

        .filter-controls select, .passage-selector select {
          padding: 8px 12px;
          border: 1px solid #ddd;
          border-radius: 4px;
          font-size: 14px;
          background: white;
          color: #333;
        }

        .dark-mode .filter-controls select,
        .dark-mode .passage-selector select {
          background: var(--gray-700);
          border-color: var(--gray-600);
          color: var(--gray-200);
        }

        .passage-stats {
          display: flex;
          gap: 10px;
          margin: 15px 0;
          flex-wrap: wrap;
        }

        .stat-badge {
          display: inline-block;
          padding: 6px 12px;
          background: #f0f0f0;
          border-radius: 4px;
          font-size: 14px;
          color: #333;
        }

        .dark-mode .stat-badge {
          background: var(--gray-700);
          color: var(--gray-200);
        }

        .stat-badge.unknown-count {
          background: #fff3cd;
          color: #856404;
          font-weight: bold;
        }

        .dark-mode .stat-badge.unknown-count {
          background: var(--yellow-500);
          color: var(--black);
        }

        .action-buttons {
          display: flex;
          gap: 10px;
          margin-top: 15px;
        }

        .action-buttons button {
          padding: 10px 20px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 14px;
          font-weight: bold;
          transition: all 0.3s;
        }

        .btn-primary {
          background: #007bff;
          color: white;
        }

        .btn-primary:hover {
          background: #0056b3;
        }

        .btn-info {
          background: #17a2b8;
          color: white;
        }

        .btn-info:hover {
          background: #138496;
        }

        .btn-success {
          background: #28a745;
          color: white;
        }

        .btn-success:hover {
          background: #218838;
        }

        .btn-success:disabled {
          background: #ccc;
          cursor: not-allowed;
        }

        .btn-secondary {
          background: #6c757d;
          color: white;
        }

        .btn-secondary:hover {
          background: #545b62;
        }

        .passage-content {
          background: white;
          padding: 30px;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .dark-mode .passage-content {
          background: var(--gray-800);
          color: var(--gray-100);
        }

        .passage-title {
          text-align: center;
          color: #333;
          margin-bottom: 30px;
          font-size: 24px;
          font-family: 'Times New Roman', Georgia, serif;
        }

        .dark-mode .passage-title {
          color: var(--white);
        }

        .passage-body {
          line-height: 1.5;
          font-family: 'Times New Roman', Georgia, serif;
          color: #333;
        }

        .dark-mode .passage-body {
          color: var(--gray-200);
        }

        .phrase-block {
          margin-bottom: 8px;
          padding: 8px 12px;
          background: #ffffff;
          border-left: 3px solid #007bff;
          border-radius: 2px;
        }

        .dark-mode .phrase-block {
          background: var(--gray-700);
          border-left-color: var(--blue-400);
        }

        .phrase-english {
          font-size: 16px;
          line-height: 1.6;
          margin-bottom: 6px;
          font-family: 'Times New Roman', 'Georgia', serif;
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
          align-items: flex-start;
        }

        .word-card {
          display: inline-flex;
          flex-direction: column;
          align-items: center;
          padding: 2px 5px;
          margin: 1px;
          background: #f8f9fa;
          border: 1px solid #dee2e6;
          border-radius: 4px;
          cursor: pointer;
          transition: all 0.2s;
          min-width: 60px;
        }

        .dark-mode .word-card {
          background: var(--gray-700);
          border-color: var(--gray-600);
        }

        .word-card:hover {
          background: #e7f3ff;
          border-color: #007bff;
        }

        .dark-mode .word-card:hover {
          background: var(--gray-600);
          border-color: var(--blue-400);
        }

        .word-card.unknown {
          background: #ffc107;
          color: #000;
          border-color: #ff9800;
          font-weight: bold;
        }

        .word-card.phrase-card {
          background: #e8f5e9;
          border-color: #4caf50;
        }

        .dark-mode .word-card.phrase-card {
          background: var(--gray-700);
          border-color: var(--green-400);
        }

        .word-card.phrase-card:hover {
          background: #c8e6c9;
        }

        .dark-mode .word-card.phrase-card:hover {
          background: var(--gray-600);
        }

        .word-card.punctuation-card {
          min-width: 20px;
          background: transparent;
          border: none;
          cursor: default;
          padding: 2px 4px;
        }

        .word-card.punctuation-card:hover {
          background: transparent;
          border: none;
        }

        .word-card-word {
          font-size: 16px;
          font-weight: 500;
          color: #333;
          text-align: center;
          font-family: 'Times New Roman', Georgia, serif;
        }

        .dark-mode .word-card-word {
          color: var(--gray-200);
        }

        .phrase-card .word-card-word {
          font-size: 15px;
          color: #2e7d32;
          font-family: 'Times New Roman', Georgia, serif;
        }

        .dark-mode .phrase-card .word-card-word {
          color: var(--green-400);
        }

        .word-card-meaning {
          font-size: 12px;
          color: #666;
          margin-top: 1px;
          text-align: center;
          padding: 1px 3px;
          background: rgba(255, 255, 255, 0.8);
          border-radius: 2px;
          min-height: 14px;
        }

        .dark-mode .word-card-meaning {
          color: var(--gray-300);
          background: rgba(48, 48, 48, 0.8);
        }

        .word-segment {
          display: inline-block;
          padding: 2px 4px;
          margin: 0 2px;
          cursor: pointer;
          border-radius: 3px;
          transition: all 0.2s;
          font-family: 'Times New Roman', Georgia, serif;
        }

        .word-segment:hover {
          background: #e7f3ff;
        }

        .word-segment.unknown {
          background: #ffc107;
          color: #000;
          font-weight: bold;
        }

        .show-translation-btn {
          background: #f8f9fa;
          border: 1px solid #ddd;
          padding: 8px 16px;
          border-radius: 4px;
          cursor: pointer;
          color: #666;
          font-size: 14px;
        }

        .show-translation-btn:hover {
          background: #e9ecef;
        }

        .phrase-translation {
          margin-top: 10px;
          padding: 15px;
          background: white;
          border-radius: 4px;
          border: 1px solid #dee2e6;
        }

        .dark-mode .phrase-translation {
          background: var(--gray-800);
          border-color: var(--gray-600);
        }

        .translation-text {
          font-size: 16px;
          color: #333;
          margin-bottom: 10px;
          font-weight: 500;
        }

        .dark-mode .translation-text {
          color: var(--gray-200);
        }

        .word-meanings {
          display: flex;
          flex-wrap: wrap;
          gap: 10px;
          font-size: 14px;
          color: #666;
        }

        .dark-mode .word-meanings {
          color: var(--gray-300);
        }

        .word-meaning-pair {
          background: #e7f3ff;
          padding: 4px 8px;
          border-radius: 3px;
        }

        .dark-mode .word-meaning-pair {
          background: var(--gray-700);
          color: var(--gray-200);
        }

        .error-message, .empty-container {
          text-align: center;
          padding: 50px;
          font-size: 18px;
          color: #666;
        }

        .dark-mode .error-message,
        .dark-mode .empty-container {
          color: var(--gray-300);
        }

        .error-message {
          color: #dc3545;
        }

        .dark-mode .error-message {
          color: var(--red-400);
        }

        /* å˜èªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .word-popup-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: transparent;
          z-index: 999;
        }

        .word-popup {
          position: absolute;
          left: var(--popup-x, 0);
          top: var(--popup-y, 0);
          background: white;
          border: 2px solid #007bff;
          border-radius: 8px;
          padding: 16px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
          z-index: 1000;
          max-width: 400px;
          min-width: 250px;
        }

        .dark-mode .word-popup {
          background: var(--gray-800);
          border-color: var(--blue-400);
          color: var(--gray-200);
        }

        .popup-close {
          position: absolute;
          top: 8px;
          right: 8px;
          background: #f8f9fa;
          border: none;
          border-radius: 4px;
          width: 24px;
          height: 24px;
          cursor: pointer;
          font-size: 16px;
          line-height: 1;
          color: #666;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .popup-close:hover {
          background: #e9ecef;
          color: #000;
        }

        .popup-word {
          font-size: 20px;
          font-weight: bold;
          color: #007bff;
          margin-bottom: 4px;
          padding-right: 30px;
        }

        .popup-reading {
          font-size: 14px;
          color: #666;
          margin-bottom: 8px;
        }

        .popup-meaning {
          font-size: 16px;
          color: #333;
          margin-bottom: 12px;
          padding: 8px;
          background: #f0f8ff;
          border-radius: 4px;
        }

        .popup-etymology {
          font-size: 13px;
          color: #555;
          margin-bottom: 8px;
          padding: 6px;
          background: #f8f9fa;
          border-radius: 4px;
        }

        .popup-related {
          font-size: 13px;
          color: #555;
          padding: 6px;
          background: #f8f9fa;
          border-radius: 4px;
        }

        .popup-etymology strong,
        .popup-related strong {
          color: #007bff;
        }

        .full-text-display, .full-translation-display {
          background: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
          margin-top: 20px;
        }

        .dark-mode .full-text-display,
        .dark-mode .full-translation-display {
          background: var(--gray-800);
          color: var(--gray-100);
        }

        .full-text-display h3, .full-translation-display h3 {
          margin: 0 0 15px 0;
          color: #667eea;
        }

        .dark-mode .full-text-display h3,
        .dark-mode .full-translation-display h3 {
          color: var(--blue-400);
        }

        .full-text-content {
          font-size: 1.1em;
          line-height: 1.8;
          color: #333;
          font-family: 'Times New Roman', 'Georgia', serif;
        }

        .full-text-content .paragraph-en {
          margin-bottom: 1.5em;
          text-indent: 2em;
          text-align: left;
        }

        .full-text-content .paragraph-en:first-child {
          margin-top: 0;
        }

        /* ä¼šè©±å½¢å¼ã®è¡Œã‚¹ã‚¿ã‚¤ãƒ« */
        .full-text-content .conversation-line {
          text-indent: 0;
          margin-bottom: 1em;
          padding-left: 1em;
          border-left: 3px solid #667eea;
        }

        .full-translation-content {
          font-size: 1.05em;
          line-height: 2;
          color: #333;
        }

        .full-translation-text {
          white-space: pre-wrap;
          line-height: 2;
        }

        .full-translation-content .paragraph-ja {
          margin-bottom: 1.5em;
          text-indent: 1em;
          text-align: left;
        }

        .full-translation-content .paragraph-ja:first-child {
          margin-top: 0;
        }

        /* ä¼šè©±å½¢å¼ã®æ—¥æœ¬èªè¨³ã‚¹ã‚¿ã‚¤ãƒ« */
        .full-translation-content .conversation-line {
          text-indent: 0;
          margin-bottom: 1em;
          padding-left: 1em;
          border-left: 3px solid #667eea;
        }

        .translation-line {
          margin-bottom: 10px;
          padding: 8px;
          background: #f8f9fa;
          border-radius: 4px;
        }
      `})]})}const ji=Object.freeze(Object.defineProperty({__proto__:null,default:vr},Symbol.toStringTag,{value:"Module"}));function wr(s){var he,E,C;const[t,r]=m.useState(()=>localStorage.getItem("grammar-quiz-type")||"verb-form"),[a,n]=m.useState(()=>localStorage.getItem("grammar-grade")||"all"),[i,l]=m.useState([]),[o,c]=m.useState(!1),[d,u]=m.useState(!1),[g,x]=m.useState(Date.now()),{learningLimit:S,reviewLimit:N,setLearningLimit:w,setReviewLimit:b}=vs("grammar"),[k,D]=m.useState(()=>localStorage.getItem("autoNext-grammar")==="true"),[A,j]=m.useState(()=>{const h=localStorage.getItem("autoNextDelay-grammar");return h?parseInt(h,10):1500}),[z,V]=m.useState(()=>localStorage.getItem("autoReadAloud-grammar")==="true"),[ce,ie]=m.useState(!1),[ee,oe]=m.useState(!1),[me,pe]=m.useState([]),[be,P]=m.useState(0),[q,F]=m.useState(null),[X,G]=m.useState([]),[Y,ue]=m.useState([]),[U,ne]=m.useState(!1),[Ne,Ce]=m.useState(!1),[De,Te]=m.useState(0),[Le,K]=m.useState(0),[Q,re]=m.useState({correct:0,incorrect:0,review:0,mastered:0}),[J,Pe]=m.useState(null),[fe,We]=m.useState(()=>localStorage.getItem("grammar-difficulty")||"all"),H=me[be],Ee=(H==null?void 0:H.type)==="sentenceOrdering"||t==="sentence-ordering",Ae=H!=null&&H.id?(()=>{const h=H.id.match(/^g(\d+)-u(\d+)/);if(h)return`g${h[1]}-unit${h[2]}`})():void 0,$e=m.useRef({quizType:t,grade:a,difficulty:fe}),$=m.useRef(Date.now()),v=m.useCallback(()=>{be<me.length-1&&(P(h=>h+1),F(null),G([]),ne(!1),Ce(!1),$.current=Date.now())},[be,me.length]),y=m.useCallback(async()=>{var h,_;oe(!0),Pe(null);try{let M=[],L=null;if(a==="all")M=["1","2","3"];else if(a.match(/^[123]$/))M=[a];else if(a.endsWith("-all"))M=[a.charAt(0)];else if(a.match(/^g\d+-unit\d+$/)){const te=(h=a.match(/^g(\d+)-unit(\d+)$/))==null?void 0:h[1],de=(_=a.match(/^g(\d+)-unit(\d+)$/))==null?void 0:_[2];te&&de!==void 0&&(M=[te],L=parseInt(de))}const B=[];for(const te of M)for(let de=0;de<10;de++)if(!(L!==null&&de!==L))try{const Z=await fetch(`/data/grammar/grammar_grade${te}_unit${de}.json`);if(Z.ok){const ge=await Z.json();if(ge.enabled===!1){p.log(`grammar_grade${te}_unit${de}.json is disabled: ${ge.disabledReason||"No reason provided"}`);continue}B.push(ge)}else p.log(`grammar_grade${te}_unit${de}.json returned status ${Z.status}, skipping...`)}catch(Z){p.log(`Failed to fetch grammar_grade${te}_unit${de}.json:`,Z)}if(B.length===0)throw new Error(`å•é¡Œãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼ˆå­¦å¹´: ${a}, å½¢å¼: ${t}, é›£æ˜“åº¦: ${fe}ï¼‰`);let T=[];if(B.forEach(te=>{const de=te.questions||[],Z={"verb-form":"verbForm","fill-in-blank":"fillInBlank","sentence-ordering":"sentenceOrdering"};if(t==="all"||t==="random")T.push(...de);else{const ge=Z[t]||t,je=de.filter(ve=>ve.type===ge);T.push(...je)}}),T.length===0)throw new Error("é¸æŠã•ã‚ŒãŸæ¡ä»¶ã«è©²å½“ã™ã‚‹å•é¡ŒãŒã‚ã‚Šã¾ã›ã‚“");if(p.log(`Total questions before difficulty filter: ${T.length}`),fe!=="all"&&(T=T.filter(te=>te.difficulty===fe),p.log(`Questions after difficulty filter (${fe}): ${T.length}`)),T.length===0)throw new Error(`é¸æŠã•ã‚ŒãŸé›£æ˜“åº¦ï¼ˆ${fe}ï¼‰ã«è©²å½“ã™ã‚‹å•é¡ŒãŒã‚ã‚Šã¾ã›ã‚“`);T=T.sort(()=>Math.random()-.5),pe(T),P(0),F(null),G([]),ue([]),ne(!1),Ce(!1),Te(0),K(0),re({correct:0,incorrect:0,review:0,mastered:0}),ie(!0),oe(!1)}catch(M){p.error("ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",M),Pe(M instanceof Error?M.message:String(M)),oe(!1)}},[t,a,fe]),I=m.useCallback(async()=>{if(U)v();else{ne(!0),Te(T=>T+1),K(T=>T+1),re(T=>({...T,correct:T.correct+1,mastered:T.mastered+1}));const h=Date.now()-$.current,{updateWordProgress:_,addSessionHistory:M}=await Ve(async()=>{const{updateWordProgress:T,addSessionHistory:te}=await Promise.resolve().then(()=>wt);return{updateWordProgress:T,addSessionHistory:te}},void 0),L=H.id?`grammar_${H.id}`:`grammar_${H.question||"unknown"}`;await _(L,!0,h,void 0,"grammar"),M({status:"mastered",word:L,timestamp:Date.now()},"grammar"),x(Date.now()),setTimeout(()=>{be<me.length-1&&(P(T=>T+1),F(null),G([]),ne(!1),Ce(!1),$.current=Date.now())},500)}},[U,be,me.length,H,v]);m.useEffect(()=>{localStorage.setItem("grammar-quiz-type",t)},[t]),m.useEffect(()=>{localStorage.setItem("grammar-grade",a)},[a]),m.useEffect(()=>{localStorage.setItem("grammar-difficulty",fe)},[fe]),m.useEffect(()=>{(async()=>{const _=[],M=a.match(/^g?(\d+)/),L=M?M[1]:null;if(!L||a==="all"){l([]);return}for(let B=0;B<10;B++)try{const T=await fetch(`/data/grammar/grammar_grade${L}_unit${B}.json`);if(T.ok){const te=await T.json();if(te.enabled===!1)continue;_.push({value:`g${L}-unit${B}`,label:`ä¸­${L}_Unit${B}_${te.title}`})}}catch{}l(_)})()},[a,t]),m.useEffect(()=>{const h=$e.current,_=h.quizType!==t||h.grade!==a||h.difficulty!==fe;ce&&_&&y(),$e.current={quizType:t,grade:a,difficulty:fe}},[t,a,fe,y,ce]),m.useEffect(()=>{if(Ee&&H&&H.words){const h=[...H.words].sort(()=>Math.random()-.5);ue(h),G([]),ne(!1),Ce(!1)}},[be,me,Ee,H]),m.useEffect(()=>{F(null),ne(!1),Ce(!1)},[be]),m.useEffect(()=>{const h=_=>{ce&&!U&&_.key==="Enter"&&(_.preventDefault(),I())};return window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[ce,U,I]);const f=async h=>{var ze;if(U||Ee)return;F(h),ne(!0);const _=h===H.correctAnswer,M=h==="åˆ†ã‹ã‚‰ãªã„";z&&H.sentence&&setTimeout(()=>{const ae=new SpeechSynthesisUtterance(H.sentence);ae.lang="en-US",ae.rate=.9,window.speechSynthesis.speak(ae)},300),K(ae=>ae+1);const L=Date.now()-$.current;if(_){Te(xe=>xe+1);const ae=H&&De>=2;re(xe=>({...xe,correct:xe.correct+1,mastered:ae?xe.mastered+1:xe.mastered}))}else re(M?ae=>({...ae,incorrect:ae.incorrect+1,review:ae.review+1}):ae=>({...ae,incorrect:ae.incorrect+1}));const{updateWordProgress:B,loadProgress:T,addSessionHistory:te,addQuizResult:de}=await Ve(async()=>{const{updateWordProgress:ae,loadProgress:xe,addSessionHistory:we,addQuizResult:le}=await Promise.resolve().then(()=>wt);return{updateWordProgress:ae,loadProgress:xe,addSessionHistory:we,addQuizResult:le}},void 0),Z=H.id?`grammar_${H.id}`:`grammar_${H.question}`,{generateId:ge}=await Ve(async()=>{const{generateId:ae}=await Promise.resolve().then(()=>ea);return{generateId:ae}},void 0);await de({id:ge(),questionSetId:"grammar-set",questionSetName:"æ–‡æ³•å•é¡Œ",score:_?1:0,total:1,percentage:_?100:0,date:Date.now(),timeSpent:Math.floor(L/1e3),incorrectWords:_?[]:[Z],mode:"grammar",category:void 0,difficulty:H.difficulty}),await B(Z,_,L,void 0,"grammar");const ve=(ze=(await T()).wordProgress)==null?void 0:ze[Z];let Se=_?"correct":"incorrect";ve&&ve.masteryLevel==="mastered"?Se="mastered":!_&&ve&&ve.incorrectCount>=2&&(Se="review"),te({status:Se,word:Z,timestamp:Date.now()},"grammar"),x(Date.now())},W=(h,_)=>{U||!Ee||(_?(ue(M=>M.filter(L=>L!==h)),G(M=>{var B;const L=[...M,h];return L.length===((B=H.words)==null?void 0:B.length)&&setTimeout(async()=>{var we,le,Re;ne(!0);const T=L.join(" "),te=((we=H.words)==null?void 0:we.join(" "))||"",de=T===te;K(Ie=>Ie+1);const Z=Date.now()-$.current;if(z&&setTimeout(()=>{const Ie=new SpeechSynthesisUtterance(te);Ie.lang="en-US",Ie.rate=.9,window.speechSynthesis.speak(Ie)},300),de){Te(Oe=>Oe+1);const Ie=De>=2;re(Oe=>({...Oe,correct:Oe.correct+1,mastered:Ie?Oe.mastered+1:Oe.mastered}))}else re(Ie=>({...Ie,incorrect:Ie.incorrect+1}));const{updateWordProgress:ge,loadProgress:je,addSessionHistory:ve}=await Ve(async()=>{const{updateWordProgress:Ie,loadProgress:Oe,addSessionHistory:Ue}=await Promise.resolve().then(()=>wt);return{updateWordProgress:Ie,loadProgress:Oe,addSessionHistory:Ue}},void 0),Se=H.id?`grammar_${H.id}`:`grammar_${((le=H.words)==null?void 0:le.join("_"))||"unknown"}`;await ge(Se,de,Z,void 0,"grammar");const ae=(Re=(await je()).wordProgress)==null?void 0:Re[Se];let xe=de?"correct":"incorrect";ae&&ae.masteryLevel==="mastered"?xe="mastered":!de&&ae&&ae.incorrectCount>=2&&(xe="review"),ve({status:xe,word:Se,timestamp:Date.now()},"grammar"),x(Date.now())},100),L})):(G(M=>M.filter(L=>L!==h)),ue(M=>[...M,h])))},R=()=>{Ce(!Ne)},O=()=>{be>0&&(P(h=>h-1),F(null),G([]),ne(!1),Ce(!1),$.current=Date.now())},se=()=>{var h;return!H||!U?!1:Ee?X.join(" ")===((h=H.words)==null?void 0:h.join(" ")):q===H.correctAnswer};return m.useEffect(()=>{ce||y()},[t,a,fe,y,ce]),e.jsxs("div",{className:"quiz-view",children:[J&&e.jsxs("div",{className:"error-message",children:[e.jsxs("p",{children:["âŒ ",J]}),e.jsx("button",{onClick:y,className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"å†è©¦è¡Œ"})]}),!J&&ce&&H&&e.jsxs(e.Fragment,{children:[e.jsx(Ot,{mode:"grammar",currentScore:De,totalAnswered:Le,sessionCorrect:Q.correct,sessionIncorrect:Q.incorrect,sessionReview:Q.review,sessionMastered:Q.mastered,onShowSettings:()=>c(!0),onAnswerTime:g,dataSource:a.startsWith("g")&&a.includes("-unit")?` æ–‡æ³•å•é¡Œé›†ï½œ${a.replace("g","").replace("-unit","-unit")}`:` ${a==="all"?"å…¨å­¦å¹´":`${a}å¹´`}`,category:`å‡ºé¡Œå½¢å¼: ${t==="all"?"å…¨ç¨®é¡":t==="verb-form"?"å‹•è©å¤‰åŒ–":t==="fill-in-blank"?"ç©´åŸ‹ã‚":t==="sentence-ordering"?"ä¸¦ã³æ›¿ãˆ":"å…¨ç¨®é¡"}`,difficulty:"",wordPhraseFilter:"all",grammarUnit:Ae}),o&&e.jsxs("div",{className:"study-settings-panel",children:[e.jsxs("div",{className:"settings-header",children:[e.jsx("h3",{children:"ğŸ“Š å­¦ç¿’è¨­å®š"}),e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-sm font-medium bg-gray-200 text-gray-700 border-2 border-transparent rounded-lg transition-all duration-200 hover:bg-gray-300:bg-gray-600",children:"âœ• é–‰ã˜ã‚‹"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"grade-select-active",children:"ğŸ“š å­¦å¹´ãƒ»å˜å…ƒ:"}),e.jsxs("select",{id:"grade-select-active",value:a,onChange:h=>n(h.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"å…¨å­¦å¹´ã®å†…å®¹"}),e.jsx("option",{value:"1",children:"1å¹´ã®å†…å®¹"}),i.filter(h=>h.value.startsWith("g1-")).map(h=>e.jsxs("option",{value:h.value,children:["1å¹´_",h.label.replace(/^ä¸­\d+_/,"")]},h.value)),e.jsx("option",{value:"2",children:"2å¹´ã®å†…å®¹"}),i.filter(h=>h.value.startsWith("g2-")).map(h=>e.jsxs("option",{value:h.value,children:["2å¹´_",h.label.replace(/^ä¸­\d+_/,"")]},h.value)),e.jsx("option",{value:"3",children:"3å¹´ã®å†…å®¹"}),i.filter(h=>h.value.startsWith("g3-")).map(h=>e.jsxs("option",{value:h.value,children:["3å¹´_",h.label.replace(/^ä¸­\d+_/,"")]},h.value))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"quiz-type-select-active",children:"ğŸ“ å•é¡Œã®ç¨®é¡:"}),e.jsxs("select",{id:"quiz-type-select-active",value:t,onChange:h=>r(h.target.value),className:"select-input",children:[e.jsx("option",{value:"all",children:"å…¨ã¦ã®ç¨®é¡"}),e.jsx("option",{value:"verb-form",children:"å‹•è©å¤‰åŒ–"}),e.jsx("option",{value:"fill-in-blank",children:"ç©´åŸ‹ã‚"}),e.jsx("option",{value:"sentence-ordering",children:"ä¸¦ã³æ›¿ãˆ"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"difficulty-select-active",children:"â­ é›£æ˜“åº¦:"}),e.jsx("select",{id:"difficulty-select-active",value:fe,onChange:h=>We(h.target.value),className:"select-input",disabled:!0,title:"ç¾åœ¨ã€é›£æ˜“åº¦é¸æŠã¯ã§ãã¾ã›ã‚“ï¼ˆå…¨å•é¡ŒãŒå¯¾è±¡ã§ã™ï¼‰",children:e.jsx("option",{value:"all",children:"å…¨ã¦ã®ãƒ¬ãƒ™ãƒ«"})})]}),e.jsx(bs,{learningLimit:S,reviewLimit:N,onLearningLimitChange:w,onReviewLimitChange:b,idPrefix:"grammar-quiz-"}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",id:"auto-next-toggle-grammar-quiz",checked:k,onChange:h=>{D(h.target.checked),localStorage.setItem("autoNext-grammar",h.target.checked.toString())}}),e.jsxs("label",{htmlFor:"auto-next-toggle-grammar-quiz",className:"checkbox-label",children:["æ­£è§£æ™‚è‡ªå‹•ã§æ¬¡ã¸ï¼š",k?"æœ‰åŠ¹":"ç„¡åŠ¹"]})]})}),k&&e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"auto-next-delay-grammar-quiz",children:"â±ï¸ æ¬¡ã¸ã®é…å»¶æ™‚é–“ï¼š"}),e.jsxs("div",{className:"slider-row",children:[e.jsx("input",{type:"range",id:"auto-next-delay-grammar-quiz",min:"500",max:"3000",step:"100",value:A,onChange:h=>{const _=parseInt(h.target.value,10);j(_),localStorage.setItem("autoNextDelay-grammar",_.toString())},className:"slider-input"}),e.jsxs("span",{className:"slider-value",children:[(A/1e3).toFixed(1),"ç§’"]})]})]}),e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"checkbox-row",children:[e.jsx("input",{type:"checkbox",id:"auto-read-aloud-toggle-grammar-quiz",checked:z,onChange:h=>{V(h.target.checked),localStorage.setItem("autoReadAloud-grammar",h.target.checked.toString())}}),e.jsxs("label",{htmlFor:"auto-read-aloud-toggle-grammar-quiz",className:"checkbox-label",children:["å›ç­”æ™‚è‡ªå‹•ã§èª­ã¿ä¸Šã’ï¼š",z?"æœ‰åŠ¹":"ç„¡åŠ¹"]})]})})]}),e.jsx("div",{className:"question-container",children:e.jsxs("div",{className:"question-card relative",children:[e.jsx("button",{onClick:()=>u(!0),className:"absolute top-2 right-2 z-10 p-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300:bg-gray-600 transition shadow-md","aria-label":"å…¨ç”»é¢è¡¨ç¤º",title:"å…¨ç”»é¢è¡¨ç¤º",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),e.jsx("div",{className:"comment-bar-container"}),e.jsxs("div",{className:"question-nav-row",children:[e.jsx("button",{className:"flex-shrink-0 w-12 h-12 sm:w-16 sm:h-16 bg-orange-500 hover:bg-orange-600 text-white font-bold rounded-lg transition flex items-center justify-center text-2xl disabled:opacity-30 disabled:cursor-not-allowed",onClick:O,disabled:be===0,title:"å‰ã¸",children:"â†"}),e.jsxs("div",{className:"question-content-inline",children:[e.jsxs("div",{className:`question-text ${Ne?"hint-active":""} ${U?"":"clickable"}`,onClick:U?void 0:R,title:U?"":"ã‚¿ãƒƒãƒ—ã—ã¦ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤º ğŸ’¡",children:[H.japanese,!U&&e.jsx("span",{className:"hint-icon",children:"ğŸ’¡"})]}),H.difficulty&&e.jsx("div",{className:`difficulty-badge ${H.difficulty}`,children:H.difficulty==="beginner"?"åˆç´š":H.difficulty==="intermediate"?"ä¸­ç´š":"ä¸Šç´š"})]}),e.jsx("button",{className:"flex-shrink-0 w-12 h-12 sm:w-16 sm:h-16 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg transition flex items-center justify-center text-2xl disabled:opacity-30 disabled:cursor-not-allowed",onClick:I,disabled:be>=me.length-1,title:U?"æ¬¡ã¸":"ã‚¹ã‚­ãƒƒãƒ— (Enter)",children:"â†’"})]}),Ne&&!U&&e.jsx("div",{className:"hint-box",children:H.hint}),H.passage&&e.jsxs("div",{className:"passage-context",children:[e.jsx("div",{className:"passage-label",children:"ğŸ“– æ–‡è„ˆ"}),e.jsxs("div",{className:"passage-content",children:[e.jsx("div",{className:"passage-english",children:H.passage}),H.passageJapanese&&e.jsx("div",{className:"passage-japanese",children:H.passageJapanese})]})]}),Ee?e.jsxs("div",{className:"word-area",children:[H.japanese&&!H.passage&&e.jsxs("div",{className:"japanese-meaning",children:[e.jsx("span",{className:"meaning-label",children:"æ„å‘³:"}),e.jsx("span",{className:"meaning-text",children:H.japanese})]}),e.jsxs("div",{className:"selected-words-area",children:[e.jsxs("div",{className:"area-label-with-reset",children:[e.jsxs("span",{className:"area-label",children:["é¸æŠã—ãŸå˜èª (",X.length,"èª)"]}),!U&&e.jsx("button",{className:`reset-ordering-button ${X.length===0?"disabled":""}`,onClick:()=>{X.length>0&&(ue(H.words||[]),G([]))},disabled:X.length===0,title:X.length===0?"å˜èªã‚’é¸æŠã—ã¦ãã ã•ã„":"ä¸¦ã³æ›¿ãˆã‚’ã‚„ã‚Šç›´ã™",children:"ğŸ”„ ã‚„ã‚Šç›´ã—"})]}),e.jsxs("div",{className:"word-container",children:[X.map((h,_)=>e.jsx("button",{className:"word-button selected",onClick:()=>W(h,!1),disabled:U,children:h},`selected-${_}`)),X.length===0&&e.jsx("div",{className:"placeholder",children:"ã“ã“ã«å˜èªã‚’ä¸¦ã¹ã¦ãã ã•ã„"})]})]}),e.jsxs("div",{className:"remaining-words-area",children:[e.jsxs("div",{className:"area-label",children:["ä½¿ãˆã‚‹å˜èª (",Y.length,"èª)"]}),e.jsx("div",{className:"word-container",children:Y.map((h,_)=>e.jsx("button",{className:"word-button remaining",onClick:()=>W(h,!0),disabled:U,children:h},`remaining-${_}`))})]})]}):e.jsxs("div",{className:"choices-area",children:[H.conversation?e.jsxs(e.Fragment,{children:[H.japanese&&H.japanese.includes("A:")&&H.japanese.includes("B:")&&e.jsx("div",{className:"japanese-conversation",children:H.japanese.split(/([AB]:)/).map((h,_)=>h==="A:"||h==="B:"?e.jsx("span",{className:"conversation-speaker",children:h},_):h.trim()?e.jsx("span",{className:"conversation-text",children:h.trim()},_):null)}),e.jsx("div",{className:"conversation-display",children:H.conversation.map((h,_)=>e.jsx("div",{className:"conversation-line",children:h.split("____").map((M,L,B)=>e.jsxs("span",{children:[M,L<B.length-1&&e.jsx("span",{className:"fill-in-blank-space",children:"_______"})]},L))},_))})]}):H.targetSentence?e.jsxs("div",{className:"paraphrase-display",children:[H.japanese&&e.jsxs("div",{className:"paraphrase-meaning",children:["ğŸ’­ æ„å‘³: ",H.japanese]}),e.jsx("div",{className:"paraphrase-label",children:"ğŸ“ å…ƒã®æ–‡:"}),e.jsx("div",{className:"sentence-display original",children:H.sentence}),e.jsx("div",{className:"paraphrase-arrow",children:"â†“ è¨€ã„æ›ãˆ"}),e.jsx("div",{className:"paraphrase-label",children:"âœï¸ æ›¸ãæ›ãˆå¾Œ:"}),e.jsx("div",{className:"sentence-display target",children:H.targetSentence.split("____").map((h,_,M)=>e.jsxs("span",{children:[h,_<M.length-1&&e.jsx("span",{className:"fill-in-blank-space",children:"_______"})]},_))})]}):e.jsx("div",{className:"sentence-display",children:(he=H.sentence)==null?void 0:he.split("____").map((h,_,M)=>e.jsxs("span",{children:[h,_<M.length-1&&e.jsx("span",{className:"fill-in-blank-space",children:"_______"})]},_))}),e.jsxs("div",{className:"choices-grid",children:[(E=H.choices)==null?void 0:E.map((h,_)=>{const M=q===h,L=h===H.correctAnswer,B=U&&L,T=U&&M&&!L;return e.jsxs("button",{className:`choice-button ${M?"selected":""} ${B?"correct":""} ${T?"incorrect":""}`,onClick:()=>f(h),disabled:U,children:[h,B&&" âœ“",T&&" âœ—"]},_)}),e.jsxs("button",{className:`choice-button dont-know ${q==="åˆ†ã‹ã‚‰ãªã„"?"selected":""} ${U&&q==="åˆ†ã‹ã‚‰ãªã„"?"incorrect":""}`,onClick:()=>f("åˆ†ã‹ã‚‰ãªã„"),disabled:U,children:["åˆ†ã‹ã‚‰ãªã„",U&&q==="åˆ†ã‹ã‚‰ãªã„"&&" âœ—"]})]})]}),U&&e.jsx(e.Fragment,{children:Ee?e.jsxs("div",{className:`result-box ${se()?"correct":"incorrect"}`,children:[e.jsx("div",{className:"result-header",children:se()?"âœ… æ­£è§£ï¼":"âŒ ä¸æ­£è§£"}),e.jsx("div",{className:"result-content",children:e.jsxs("div",{className:"answer-comparison",children:[e.jsxs("div",{className:"user-answer",children:[e.jsx("strong",{children:"ã‚ãªãŸã®å›ç­”:"}),e.jsx("br",{}),X.join(" ")]}),!se()&&e.jsxs("div",{className:"correct-answer",children:[e.jsx("strong",{children:"æ­£è§£:"}),e.jsx("br",{}),(C=H.words)==null?void 0:C.join(" ")]})]})})]}):e.jsx(e.Fragment,{children:H.explanation&&e.jsx("div",{className:"explanation-box",children:e.jsxs("div",{className:"explanation",children:[e.jsx("strong",{children:"è§£èª¬:"}),e.jsx("br",{}),H.explanation]})})})})]})})]})]})}const Ni=Object.freeze(Object.defineProperty({__proto__:null,default:wr},Symbol.toStringTag,{value:"Module"}));function Si({allQuestions:s,questionSets:t,customQuestionSets:r=[],onAddWordToCustomSet:a,onRemoveWordFromCustomSet:n,onOpenCustomSetManagement:i}){const[l,o]=m.useState(!1),[c,d]=m.useState("all"),[u,g]=m.useState("all"),[x,S]=m.useState("all"),[N,w]=m.useState("all"),[b,k]=m.useState(()=>{const f=localStorage.getItem("memorization-still-learning-limit");return f?parseInt(f):null}),[D,A]=m.useState(()=>{const f=localStorage.getItem("memorization-incorrect-limit");return f?parseInt(f):null}),[j,z]=m.useState({showWord:!0,showMeaning:!0,showPronunciation:!1,showExample:!1,showEtymology:!1,showRelated:!1}),[V,ce]=m.useState(!1),[ie,ee]=m.useState(!0),[oe,me]=m.useState(!1),[pe,be]=m.useState(1.5),[P,q]=m.useState(null),[F,X]=m.useState(0),[G,Y]=m.useState([]),[ue]=m.useState(()=>`session-${Date.now()}`),[U,ne]=m.useState(0),[Ne,Ce]=m.useState(!1),[De,Te]=m.useState({correct:0,still_learning:0,incorrect:0,total:0}),[Le,K]=m.useState(0),Q=m.useRef(0),[re,J]=m.useState(!0),Pe=m.useRef(0),fe=m.useRef(null),[We,H]=m.useState(!1);m.useEffect(()=>{(async()=>{try{const W=await us();W&&z(W);const R=await hs();R&&(ce(R.autoVoice||!1),ee(R.voiceWord!==void 0?R.voiceWord:!0),me(R.voiceMeaning||!1),be(R.voiceDelay!==void 0?R.voiceDelay:1.5)),J(!1)}catch(W){p.error("è¨­å®šã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",W),J(!1)}})()},[]);const Ee=()=>{const f=new Set;return s.forEach(W=>{W.relatedFields&&Array.isArray(W.relatedFields)&&W.relatedFields.forEach(R=>f.add(R))}),Array.from(f).sort()};m.useEffect(()=>{if(re)return;(()=>{const W=s;if(W.length===0)return;let R=W;x!=="all"&&(R=R.filter(se=>se.difficulty===x)),u!=="all"&&(R=R.filter(se=>se.relatedFields&&Array.isArray(se.relatedFields)&&se.relatedFields.includes(u))),N==="words"?R=R.filter(se=>!se.word.includes(" ")||se.word.split(" ").length<=2):N==="phrases"&&(R=R.filter(se=>se.word.includes(" ")&&se.word.split(" ").length>2));const O=$e(R,b,D);Y(O),O.length>0&&(q(O[0]),X(0),Q.current=Date.now())})()},[t,c,x,u,N,s,b,D,re,Ne]);const Ae=()=>{Ce(!Ne)},$e=(f,W,R)=>{const O=_=>{var B;const L=localStorage.getItem("english-progress");if(!L)return null;try{const te=(B=JSON.parse(L).wordProgress)==null?void 0:B[_];if(!te)return null;const de=te.memorizationAttempts||0,Z=te.memorizationCorrect||0,ge=te.memorizationStreak||0,je=te.lastStudied||0;if(de===0)return{category:"new",priority:3,lastStudied:je,attempts:de,correct:Z,streak:ge};const ve=de>0?Z/de*100:0;return ge>=3||ge>=2&&ve>=80?{category:"mastered",priority:5,lastStudied:je,attempts:de,correct:Z,streak:ge}:ve>=50?{category:"still_learning",priority:2,lastStudied:je,attempts:de,correct:Z,streak:ge}:{category:"incorrect",priority:1,lastStudied:je,attempts:de,correct:Z,streak:ge}}catch(T){return p.error("çµ±è¨ˆæƒ…å ±ã®å–å¾—ã‚¨ãƒ©ãƒ¼:",T),null}},se=f.map(_=>({question:_,status:O(_.word)})),he={mastered:se.filter(_=>{var M;return((M=_.status)==null?void 0:M.category)==="mastered"}).length,still_learning:se.filter(_=>{var M;return((M=_.status)==null?void 0:M.category)==="still_learning"}).length,incorrect:se.filter(_=>{var M;return((M=_.status)==null?void 0:M.category)==="incorrect"}).length,new:se.filter(_=>{var M;return((M=_.status)==null?void 0:M.category)==="new"}).length},E=W!==null&&he.still_learning>=W,C=R!==null&&he.incorrect>=R;return se.sort((_,M)=>{const L=_.status,B=M.status;let T=(L==null?void 0:L.priority)||3,te=(B==null?void 0:B.priority)||3;if(Ne?((L==null?void 0:L.category)==="incorrect"&&(T=0),(B==null?void 0:B.category)==="incorrect"&&(te=0),(L==null?void 0:L.category)==="still_learning"&&T!==0&&(T=1),(B==null?void 0:B.category)==="still_learning"&&te!==0&&(te=1),(L==null?void 0:L.category)==="mastered"&&T>1&&(T=5),(B==null?void 0:B.category)==="mastered"&&te>1&&(te=5),(L==null?void 0:L.category)==="new"&&T>1&&(T=4),(B==null?void 0:B.category)==="new"&&te>1&&(te=4)):(C&&((L==null?void 0:L.category)==="incorrect"&&(T=0),(B==null?void 0:B.category)==="incorrect"&&(te=0)),E&&((L==null?void 0:L.category)==="still_learning"&&(T=1),(B==null?void 0:B.category)==="still_learning"&&(te=1))),T!==te)return T-te;const de=(L==null?void 0:L.lastStudied)||0,Z=(B==null?void 0:B.lastStudied)||0;return de!==Z?de-Z:Math.random()-.5}).map(_=>_.question)};m.useEffect(()=>{if(!P||!V)return;(async()=>{if(ie&&qe(P.word,{rate:.85}),oe&&P.meaning){await new Promise(R=>setTimeout(R,pe*1e3));const W=new SpeechSynthesisUtterance(P.meaning);W.lang="ja-JP",W.rate=.85,window.speechSynthesis.speak(W)}})()},[P,V]);const $=()=>{H(!We)},v=async f=>{if(f==="showWord")return;const W={...j,[f]:!j[f]};z(W),await ms(W)},y=async(f,W,R,O)=>{ce(f),ee(W),me(R),O!==void 0&&be(O),await gs({autoVoice:f,voiceWord:W,voiceMeaning:R,voiceDelay:O!==void 0?O:pe,interleavingMode:"off",cardDisplaySettings:j})},I=m.useCallback(async f=>{if(!P)return;const W=(Date.now()-Q.current)/1e3,R=f==="right",O=f==="center";if(Te(E=>({correct:R?E.correct+1:E.correct,still_learning:O?E.still_learning+1:E.still_learning,incorrect:!R&&!O?E.incorrect+1:E.incorrect,total:E.total+1})),W<16){const E={word:P.word,timestamp:Date.now(),viewDuration:W,swipeDirection:f==="center"?"left":f,sessionId:ue,consecutiveViews:U+1};await xs(E),ne(h=>h+1);const{updateWordProgress:C}=await Ve(async()=>{const{updateWordProgress:h}=await Promise.resolve().then(()=>wt);return{updateWordProgress:h}},void 0);await C(P.word,R,W*1e3,void 0,"memorization",O)}if(K(Date.now()),(De.total%5===0||b!==null&&De.still_learning>=b||D!==null&&De.incorrect>=D)&&G.length>1){const E=G.slice(F+1),C=$e(E,b,D),h=[...G.slice(0,F+1),...C];Y(h)}const he=F+1;he<G.length?(q(G[he]),X(he),Q.current=Date.now()):q(null)},[P,F,G,ue,U,De,b,D]);return m.useEffect(()=>{const f=fe.current;if(!f)return;const W=se=>{Pe.current=se.touches[0].clientX},R=se=>{const E=se.changedTouches[0].clientX-Pe.current;Math.abs(E)>100&&(E>0?I("right"):I("left"))},O=se=>{se.key==="ArrowLeft"||se.key==="1"?(se.preventDefault(),I("left")):se.key==="ArrowDown"||se.key==="2"?(se.preventDefault(),I("center")):(se.key==="ArrowRight"||se.key==="3")&&(se.preventDefault(),I("right"))};return f.addEventListener("touchstart",W),f.addEventListener("touchend",R),document.addEventListener("keydown",O),()=>{f.removeEventListener("touchstart",W),f.removeEventListener("touchend",R),document.removeEventListener("keydown",O)}},[I]),re?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-xl",children:"èª­ã¿è¾¼ã¿ä¸­..."})}):P?e.jsx("div",{className:"min-h-screen flex flex-col",children:We?e.jsx("div",{className:"fixed inset-0 z-50 bg-gray-50 overflow-y-auto",children:e.jsxs("div",{className:"min-h-screen flex items-center justify-center py-8",children:[e.jsx("button",{onClick:$,className:"fixed top-4 right-4 z-50 p-3 bg-gray-800 text-white rounded-full shadow-lg hover:bg-gray-700:bg-gray-600 transition","aria-label":"å…¨ç”»é¢çµ‚äº†",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("div",{className:"w-full max-w-4xl px-4",children:e.jsxs("div",{ref:fe,className:"question-card",children:[e.jsx("div",{className:"mb-8 py-8 flex flex-col items-center justify-center min-h-[200px]",children:e.jsxs("div",{className:`flex flex-col items-center ${Me()?"clickable-pronunciation":""}`,onClick:f=>{Me()&&(f.preventDefault(),f.stopPropagation(),qe(P.word,{rate:.85}))},onTouchEnd:f=>{Me()&&(f.preventDefault(),f.stopPropagation(),qe(P.word,{rate:.85}))},title:Me()?"ã‚¿ãƒƒãƒ—ã—ã¦ç™ºéŸ³ã‚’èã ğŸ”Š":"",children:[e.jsxs("div",{className:`text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 break-words text-center px-4 ${P.word.includes(" ")?"phrase-text":""} ${Me()?"clickable-word":""}`,children:[P.word,Me()&&e.jsx("span",{className:"speaker-icon",children:"ğŸ”Š"})]}),P.reading&&e.jsxs("div",{className:"question-reading text-base sm:text-lg md:text-xl text-gray-600 mt-3 text-center",children:["ã€",P.reading,"ã€‘"]}),P.difficulty&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("div",{className:`difficulty-badge ${P.difficulty}`,children:P.difficulty==="beginner"?"åˆç´š":P.difficulty==="intermediate"?"ä¸­ç´š":"ä¸Šç´š"})})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>I("left"),className:"flex flex-col items-center justify-center py-6 px-2 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold rounded-xl transition shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95","aria-label":"åˆ†ã‹ã‚‰ãªã„",children:[e.jsx("span",{className:"text-3xl mb-2",children:"âŒ"}),e.jsx("span",{className:"text-sm sm:text-base",children:"åˆ†ã‹ã‚‰ãªã„"})]}),e.jsxs("button",{onClick:()=>I("center"),className:"flex flex-col items-center justify-center py-6 px-2 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold rounded-xl transition shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95","aria-label":"ã¾ã ã¾ã ",children:[e.jsx("span",{className:"text-3xl mb-2",children:"ğŸ¤”"}),e.jsx("span",{className:"text-sm sm:text-base",children:"ã¾ã ã¾ã "})]}),e.jsxs("button",{onClick:()=>I("right"),className:"flex flex-col items-center justify-center py-6 px-2 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold rounded-xl transition shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95","aria-label":"è¦šãˆã¦ã‚‹",children:[e.jsx("span",{className:"text-3xl mb-2",children:"âœ…"}),e.jsx("span",{className:"text-sm sm:text-base",children:"è¦šãˆã¦ã‚‹"})]})]}),a&&n&&i&&e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx(pt,{word:{word:P.word,meaning:P.meaning,ipa:P.reading,source:"memorization"},sets:r,onAddWord:a,onRemoveWord:n,onOpenManagement:i,size:"medium",variant:"both"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>v("showMeaning"),className:"w-full text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100:bg-gray-600 transition",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-16 sm:w-24 flex-shrink-0",children:"æ„å‘³"}),e.jsx("span",{className:"text-gray-500 flex-shrink-0",children:j.showMeaning?"â–¼":"â–¶"})]}),j.showMeaning&&e.jsx("div",{className:"flex-1 text-base sm:text-lg text-gray-900 break-words",children:P.meaning})]})}),e.jsx("button",{onClick:()=>v("showPronunciation"),className:"w-full text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100:bg-gray-600 transition",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-16 sm:w-24 flex-shrink-0",children:"èª­ã¿"}),e.jsx("span",{className:"text-gray-500 flex-shrink-0",children:j.showPronunciation?"â–¼":"â–¶"})]}),j.showPronunciation&&e.jsx("div",{className:"flex-1 text-sm sm:text-base text-gray-700 break-words",children:P.reading})]})}),P.etymology&&P.etymology.trim()!==""&&P.etymology!=="ä¸­å­¦è‹±èªã§é‡è¦ãªå˜èªã§ã™ã€‚"&&e.jsx("button",{onClick:()=>v("showEtymology"),className:"w-full text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100:bg-gray-600 transition",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-20 sm:w-24 flex-shrink-0 text-sm sm:text-base",children:"èªæºãƒ»è§£èª¬"}),e.jsx("span",{className:"text-gray-500 flex-shrink-0",children:j.showEtymology?"â–¼":"â–¶"})]}),j.showEtymology&&e.jsx("div",{className:"flex-1 text-xs sm:text-sm text-gray-600 break-words",children:P.etymology})]})}),P.relatedWords&&P.relatedWords.trim()!==""&&e.jsx("button",{onClick:()=>v("showRelated"),className:"w-full text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100:bg-gray-600 transition",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-16 sm:w-24 flex-shrink-0",children:"é–¢é€£èª"}),e.jsx("span",{className:"text-gray-500 flex-shrink-0",children:j.showRelated?"â–¼":"â–¶"})]}),j.showRelated&&e.jsx("div",{className:"flex-1 text-xs sm:text-sm text-gray-600 break-words",children:P.relatedWords})]})})]})]})})]})}):e.jsxs(e.Fragment,{children:[(b!==null||D!==null)&&e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[b!==null&&De.still_learning>=b&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-2xl",children:"ğŸŸ¡"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsxs("strong",{children:["ã¾ã ã¾ã ãŒ",b,"èªã«é”ã—ã¾ã—ãŸï¼"]}),e.jsx("br",{}),"é›†ä¸­å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚Šã¾ã™ã€‚ã¾ã ã¾ã ã®èªå¥ã‚’å„ªå…ˆçš„ã«å‡ºé¡Œã—ã¾ã™ã€‚"]})})]})}),D!==null&&De.incorrect>=D&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-2xl",children:"ğŸ”´"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsxs("strong",{children:["åˆ†ã‹ã‚‰ãªã„ãŒ",D,"èªã«é”ã—ã¾ã—ãŸï¼"]}),e.jsx("br",{}),"æœ€å„ªå…ˆå¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚Šã¾ã™ã€‚åˆ†ã‹ã‚‰ãªã„èªå¥ã‚’æœ€å„ªå…ˆã§å‡ºé¡Œã—ã¾ã™ã€‚"]})})]})})]})}),e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsx(Ot,{mode:"memorization",sessionCorrect:De.correct,sessionReview:De.still_learning,sessionIncorrect:De.incorrect,totalAnswered:De.total,onAnswerTime:Le,onShowSettings:()=>o(!0),dataSource:c,category:u==="all"?"å…¨åˆ†é‡":u,difficulty:x,wordPhraseFilter:N,onReviewFocus:Ae,isReviewFocusMode:Ne})})}),l&&e.jsxs("div",{className:"mb-4 bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"ğŸ“Š å­¦ç¿’è¨­å®š"}),e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300:bg-gray-600",children:"âœ• é–‰ã˜ã‚‹"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"memorization-datasource",className:"block text-sm font-medium mb-2 text-gray-700",children:"ğŸ“– å‡ºé¡Œå…ƒ:"}),e.jsxs("select",{id:"memorization-datasource",value:c,onChange:f=>d(f.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"all",children:"å…¨å•é¡Œé›†"}),e.jsx("option",{value:"standard",children:"é«˜æ ¡å—é¨“æ¨™æº–"}),e.jsx("option",{value:"advanced",children:"é«˜æ ¡å—é¨“ä¸Šç´š"}),e.jsx("option",{value:"comprehensive",children:"é«˜æ ¡å—é¨“ç·åˆ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"memorization-difficulty",className:"block text-sm font-medium mb-2 text-gray-700",children:"ğŸ“Š é›£æ˜“åº¦:"}),e.jsxs("select",{id:"memorization-difficulty",value:x,onChange:f=>S(f.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"all",children:"å…¨é›£æ˜“åº¦"}),e.jsx("option",{value:"beginner",children:"åˆç´š"}),e.jsx("option",{value:"intermediate",children:"ä¸­ç´š"}),e.jsx("option",{value:"advanced",children:"ä¸Šç´š"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"memorization-category",className:"block text-sm font-medium mb-2 text-gray-700",children:"ğŸ·ï¸ é–¢é€£åˆ†é‡:"}),e.jsxs("select",{id:"memorization-category",value:u,onChange:f=>g(f.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"all",children:"å…¨åˆ†é‡"}),Ee().map(f=>e.jsx("option",{value:f,children:f},f))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"memorization-filter",className:"block text-sm font-medium mb-2 text-gray-700",children:"ğŸ“ å˜èªãƒ»ç†Ÿèª:"}),e.jsxs("select",{id:"memorization-filter",value:N,onChange:f=>w(f.target.value),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"all",children:"å˜èªï¼‹ç†Ÿèª"}),e.jsx("option",{value:"words",children:"å˜èªã®ã¿"}),e.jsx("option",{value:"phrases",children:"ç†Ÿèªã®ã¿"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-3 text-gray-700",children:"ğŸ¯ å‡ºé¡Œç¹°ã‚Šè¿”ã—è¨­å®š:"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"æœªå…¥åŠ›ã®å ´åˆã¯ç„¡åˆ¶é™ã«å‡ºé¡Œã—ã¾ã™ï¼ˆæ¨å¥¨ï¼šLeitnerã‚·ã‚¹ãƒ†ãƒ æ–¹å¼ï¼‰"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",checked:b!==null,onChange:f=>{f.target.checked?(k(50),localStorage.setItem("memorization-still-learning-limit","50")):(k(null),localStorage.removeItem("memorization-still-learning-limit"))},className:"mr-2 w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"ğŸŸ¡ ã¾ã ã¾ã ã®èªæ•°ä¸Šé™ã‚’è¨­å®š"})]}),b!==null&&e.jsxs("div",{className:"ml-6",children:[e.jsx("input",{type:"number",min:"1",max:"500",value:b,onChange:f=>{const W=parseInt(f.target.value)||1;k(W),localStorage.setItem("memorization-still-learning-limit",W.toString())},className:"w-full px-3 py-2 border rounded-lg"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ã“ã®æ•°ã«é”ã—ãŸã‚‰ã€ã¾ã ã¾ã ã®èªå¥ã‚’é›†ä¸­å¾©ç¿’ã—ã¾ã™"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",checked:D!==null,onChange:f=>{f.target.checked?(A(30),localStorage.setItem("memorization-incorrect-limit","30")):(A(null),localStorage.removeItem("memorization-incorrect-limit"))},className:"mr-2 w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"ğŸ”´ åˆ†ã‹ã‚‰ãªã„ã®èªæ•°ä¸Šé™ã‚’è¨­å®š"})]}),D!==null&&e.jsxs("div",{className:"ml-6",children:[e.jsx("input",{type:"number",min:"1",max:"500",value:D,onChange:f=>{const W=parseInt(f.target.value)||1;A(W),localStorage.setItem("memorization-incorrect-limit",W.toString())},className:"w-full px-3 py-2 border rounded-lg"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ã“ã®æ•°ã«é”ã—ãŸã‚‰ã€åˆ†ã‹ã‚‰ãªã„èªå¥ã‚’æœ€å„ªå…ˆã§å¾©ç¿’ã—ã¾ã™"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-3 text-gray-700",children:"ğŸ”Š è‡ªå‹•ç™ºéŸ³è¨­å®š:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:V,onChange:f=>y(f.target.checked,ie,oe),className:"mr-2 w-4 h-4"}),e.jsx("span",{children:"è‡ªå‹•ã§ç™ºéŸ³ã™ã‚‹"})]}),V&&e.jsxs("div",{className:"ml-6 space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:ie,onChange:f=>y(V,f.target.checked,oe),className:"mr-2 w-4 h-4"}),e.jsx("span",{children:"èªå¥ã‚’èª­ã¿ä¸Šã’"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:oe,onChange:f=>y(V,ie,f.target.checked),className:"mr-2 w-4 h-4"}),e.jsx("span",{children:"æ„å‘³ã‚’èª­ã¿ä¸Šã’"})]}),oe&&e.jsxs("div",{className:"ml-6 mt-2",children:[e.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:["â±ï¸ èªå¥ã¨æ„å‘³ã®é–“éš”: ",pe.toFixed(1),"ç§’"]}),e.jsx("input",{type:"range",min:"0.5",max:"5.0",step:"0.5",value:pe,onChange:f=>{const W=parseFloat(f.target.value);be(W),y(V,ie,oe,W)},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer","aria-label":"èªå¥ã¨æ„å‘³ã®é–“éš”"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0.5ç§’"}),e.jsx("span",{children:"5.0ç§’"})]})]})]})]})]})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"relative w-full max-w-4xl",children:[e.jsx("button",{onClick:$,className:"absolute top-2 right-2 z-10 p-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300:bg-gray-600 transition shadow-md","aria-label":"å…¨ç”»é¢è¡¨ç¤º",title:"å…¨ç”»é¢è¡¨ç¤º",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),e.jsxs("div",{ref:fe,className:"question-card w-full",children:[e.jsx("div",{className:"mb-8 py-8 flex flex-col items-center justify-center min-h-[200px]",children:e.jsxs("div",{className:`flex flex-col items-center ${Me()?"clickable-pronunciation":""}`,onClick:f=>{Me()&&(f.preventDefault(),f.stopPropagation(),qe(P.word,{rate:.85}))},onTouchEnd:f=>{Me()&&(f.preventDefault(),f.stopPropagation(),qe(P.word,{rate:.85}))},title:Me()?"ã‚¿ãƒƒãƒ—ã—ã¦ç™ºéŸ³ã‚’èã ğŸ”Š":"",children:[e.jsxs("div",{className:`text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 break-words text-center px-4 ${P.word.includes(" ")?"phrase-text":""} ${Me()?"clickable-word":""}`,children:[P.word,Me()&&e.jsx("span",{className:"speaker-icon",children:"ğŸ”Š"})]}),P.reading&&e.jsxs("div",{className:"question-reading text-base sm:text-lg md:text-xl text-gray-600 mt-3 text-center",children:["ã€",P.reading,"ã€‘"]}),P.difficulty&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("div",{className:`difficulty-badge ${P.difficulty}`,children:P.difficulty==="beginner"?"åˆç´š":P.difficulty==="intermediate"?"ä¸­ç´š":"ä¸Šç´š"})})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>I("left"),className:"flex flex-col items-center justify-center py-6 px-2 bg-red-500 hover:bg-red-600 active:bg-red-700 text-white font-bold rounded-xl transition shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95","aria-label":"åˆ†ã‹ã‚‰ãªã„",children:[e.jsx("span",{className:"text-3xl mb-2",children:"âŒ"}),e.jsx("span",{className:"text-sm sm:text-base",children:"åˆ†ã‹ã‚‰ãªã„"})]}),e.jsxs("button",{onClick:()=>I("center"),className:"flex flex-col items-center justify-center py-6 px-2 bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white font-bold rounded-xl transition shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95","aria-label":"ã¾ã ã¾ã ",children:[e.jsx("span",{className:"text-3xl mb-2",children:"ğŸ¤”"}),e.jsx("span",{className:"text-sm sm:text-base",children:"ã¾ã ã¾ã "})]}),e.jsxs("button",{onClick:()=>I("right"),className:"flex flex-col items-center justify-center py-6 px-2 bg-green-500 hover:bg-green-600 active:bg-green-700 text-white font-bold rounded-xl transition shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95","aria-label":"è¦šãˆã¦ã‚‹",children:[e.jsx("span",{className:"text-3xl mb-2",children:"âœ…"}),e.jsx("span",{className:"text-sm sm:text-base",children:"è¦šãˆã¦ã‚‹"})]})]}),a&&n&&i&&e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx(pt,{word:{word:P.word,meaning:P.meaning,ipa:P.reading,source:"memorization"},sets:r,onAddWord:a,onRemoveWord:n,onOpenManagement:i,size:"medium",variant:"both"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>v("showMeaning"),className:"w-full text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100:bg-gray-600 transition",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-16 sm:w-24 flex-shrink-0",children:"æ„å‘³"}),e.jsx("span",{className:"text-gray-500 flex-shrink-0",children:j.showMeaning?"â–¼":"â–¶"})]}),j.showMeaning&&e.jsx("div",{className:"flex-1 text-base sm:text-lg text-gray-900 break-words",children:P.meaning})]})}),e.jsx("button",{onClick:()=>v("showPronunciation"),className:"w-full text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100:bg-gray-600 transition",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-16 sm:w-24 flex-shrink-0",children:"èª­ã¿"}),e.jsx("span",{className:"text-gray-500 flex-shrink-0",children:j.showPronunciation?"â–¼":"â–¶"})]}),j.showPronunciation&&e.jsx("div",{className:"flex-1 text-sm sm:text-base text-gray-700 break-words",children:P.reading})]})}),P.etymology&&P.etymology.trim()!==""&&P.etymology!=="ä¸­å­¦è‹±èªã§é‡è¦ãªå˜èªã§ã™ã€‚"&&e.jsx("button",{onClick:()=>v("showEtymology"),className:"w-full text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100:bg-gray-600 transition",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-20 sm:w-24 flex-shrink-0 text-sm sm:text-base",children:"èªæºãƒ»è§£èª¬"}),e.jsx("span",{className:"text-gray-500 flex-shrink-0",children:j.showEtymology?"â–¼":"â–¶"})]}),j.showEtymology&&e.jsx("div",{className:"flex-1 text-xs sm:text-sm text-gray-600 break-words",children:P.etymology})]})}),P.relatedWords&&P.relatedWords.trim()!==""&&e.jsx("button",{onClick:()=>v("showRelated"),className:"w-full text-left p-4 bg-gray-50 rounded-lg hover:bg-gray-100:bg-gray-600 transition",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx("span",{className:"font-semibold text-gray-700 w-16 sm:w-24 flex-shrink-0",children:"é–¢é€£èª"}),e.jsx("span",{className:"text-gray-500 flex-shrink-0",children:j.showRelated?"â–¼":"â–¶"})]}),j.showRelated&&e.jsx("div",{className:"flex-1 text-xs sm:text-sm text-gray-600 break-words",children:P.relatedWords})]})})]})]})]})})]})}):null}const ki=()=>{const[s,t]=m.useState("prepositions");return e.jsxs("div",{className:"grammar-guide-view p-4 max-w-app mx-auto",children:[e.jsxs("div",{className:"grammar-guide-tabs grid grid-cols-3 gap-1 sm:gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>t("prepositions"),className:`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium transition-all duration-200 rounded-t-lg border-b-2 ${s==="prepositions"?"bg-primary text-white border-primary":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"ğŸ“ å‰ç½®è©"}),e.jsx("span",{className:"sm:hidden",children:"ğŸ“"})]}),e.jsxs("button",{onClick:()=>t("punctuation"),className:`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium transition-all duration-200 rounded-t-lg border-b-2 ${s==="punctuation"?"bg-primary text-white border-primary":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"âœï¸ è¨˜å·"}),e.jsx("span",{className:"sm:hidden",children:"âœï¸"})]}),e.jsxs("button",{onClick:()=>t("tips"),className:`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-base font-medium transition-all duration-200 rounded-t-lg border-b-2 ${s==="tips"?"bg-primary text-white border-primary":"bg-gray-200 text-gray-700 border-transparent hover:bg-gray-300"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"ğŸ’¡ èª­è§£ã‚³ãƒ„"}),e.jsx("span",{className:"sm:hidden",children:"ğŸ’¡"})]})]}),e.jsxs("div",{className:"content-area bg-white rounded-lg p-4 shadow-md border border-gray-200",children:[s==="prepositions"&&e.jsx(Ci,{}),s==="punctuation"&&e.jsx(Di,{}),s==="tips"&&e.jsx(Mi,{})]})]})},Ci=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-color mb-4",children:"å‰ç½®è©ã®ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã¨ä½¿ã„åˆ†ã‘"}),e.jsx("p",{className:"text-text-secondary mb-6",children:"è‹±èªã§æœ€ã‚‚é »ç¹ã«ä½¿ã†å‰ç½®è©ã‚’é‡è¦åº¦é †ã«ç´¹ä»‹ã—ã¾ã™ã€‚ãã‚Œãã‚Œã®ã‚³ã‚¢ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ç†è§£ã™ã‚‹ã“ã¨ã§ã€è‡ªç„¶ãªè‹±èªè¡¨ç¾ãŒèº«ã«ã¤ãã¾ã™ã€‚"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-primary",children:"ğŸŒŸ æœ€é‡è¦ï¼šæ™‚é–“ãƒ»å ´æ‰€ã®åŸºæœ¬3ã¤"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-blue-50/20 rounded-lg p-5 border-2 border-blue-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ“¦"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 mt-2",children:"IN"}),e.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"ã€Œå›²ã¾ã‚ŒãŸç©ºé–“ã®ä¸­ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â°"})," æ™‚é–“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-blue-600",children:["ğŸ“… ",e.jsx("strong",{children:"in 2024"})," â†’ å¹´ã¨ã„ã†é•·ã„æœŸé–“ã®ä¸­"]}),e.jsxs("div",{className:"text-blue-600",children:["ğŸ—“ï¸ ",e.jsx("strong",{children:"in May"})," â†’ æœˆã¨ã„ã†æœŸé–“ã®ä¸­"]}),e.jsxs("div",{className:"text-blue-600",children:["ğŸŒ… ",e.jsx("strong",{children:"in the morning"})," â†’ åˆå‰ã¨ã„ã†æ™‚é–“å¸¯ã®ä¸­"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ—ºï¸"})," å ´æ‰€ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-blue-600",children:["ğŸŒ ",e.jsx("strong",{children:"in Japan"})," â†’ å›½ã¨ã„ã†åºƒã„ç©ºé–“ã®ä¸­"]}),e.jsxs("div",{className:"text-blue-600",children:["ğŸ  ",e.jsx("strong",{children:"in the room"})," â†’ éƒ¨å±‹ã¨ã„ã†å›²ã¾ã‚ŒãŸç©ºé–“ã®ä¸­"]})]})]})]})]}),e.jsxs("div",{className:"bg-green-50/20 rounded-lg p-5 border-2 border-green-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ“„"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 mt-2",children:"ON"}),e.jsx("div",{className:"text-sm text-green-700 mt-1",children:"ã€Œæ¥è§¦ãƒ»ãã£ã¤ã„ã¦ã„ã‚‹ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â°"})," æ™‚é–“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-green-600",children:["ğŸ“† ",e.jsx("strong",{children:"on Monday"})," â†’ æ›œæ—¥ã¨ã„ã†ç‰¹å®šã®æ—¥ã«æ¥è§¦"]}),e.jsxs("div",{className:"text-green-600",children:["ğŸ“… ",e.jsx("strong",{children:"on May 1st"})," â†’ æ—¥ä»˜ã¨ã„ã†ç‰¹å®šã®æ—¥ã«æ¥è§¦"]}),e.jsxs("div",{className:"text-green-600",children:["ğŸ„ ",e.jsx("strong",{children:"on Christmas"})," â†’ ãã®æ—¥ã«æ¥è§¦"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ—ºï¸"})," å ´æ‰€ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-green-600",children:["ğŸª‘ ",e.jsx("strong",{children:"on the table"})," â†’ ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨é¢ã«æ¥è§¦"]}),e.jsxs("div",{className:"text-green-600",children:["ğŸ–¼ï¸ ",e.jsx("strong",{children:"on the wall"})," â†’ å£é¢ã«æ¥è§¦"]})]})]})]})]}),e.jsxs("div",{className:"bg-orange-50/20 rounded-lg p-5 border-2 border-orange-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ“"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 mt-2",children:"AT"}),e.jsx("div",{className:"text-sm text-orange-700 mt-1",children:"ã€Œãƒ”ãƒ³ãƒã‚¤ãƒ³ãƒˆãƒ»åœ°ç‚¹ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-orange-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â°"})," æ™‚é–“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-orange-600",children:["ğŸ•– ",e.jsx("strong",{children:"at 7:00"})," â†’ 7æ™‚ã¨ã„ã†æ™‚åˆ»ã®ç‚¹"]}),e.jsxs("div",{className:"text-orange-600",children:["â˜€ï¸ ",e.jsx("strong",{children:"at noon"})," â†’ æ­£åˆã¨ã„ã†ç¬é–“ã®ç‚¹"]}),e.jsxs("div",{className:"text-orange-600",children:["ğŸŒ™ ",e.jsx("strong",{children:"at night"})," â†’ å¤œã¨ã„ã†æ™‚ç‚¹"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-orange-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ—ºï¸"})," å ´æ‰€ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-orange-600",children:["ğŸ« ",e.jsx("strong",{children:"at school"})," â†’ å­¦æ ¡ã¨ã„ã†åœ°ç‚¹"]}),e.jsxs("div",{className:"text-orange-600",children:["ğŸšª ",e.jsx("strong",{children:"at the door"})," â†’ ãƒ‰ã‚¢ã¨ã„ã†åœ°ç‚¹"]})]})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-primary",children:"â­ ãã®ä»–ã®é‡è¦ãªå‰ç½®è©"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-blue-50/20 rounded-lg p-5 border-2 border-blue-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ“¦"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 mt-2",children:"IN"}),e.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"ã€Œå›²ã¾ã‚ŒãŸç©ºé–“ã®ä¸­ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â°"})," æ™‚é–“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-blue-600",children:["ğŸ“… ",e.jsx("strong",{children:"in 2024"})," â†’ å¹´ã¨ã„ã†é•·ã„æœŸé–“ã®ä¸­"]}),e.jsxs("div",{className:"text-blue-600",children:["ğŸ—“ï¸ ",e.jsx("strong",{children:"in May"})," â†’ æœˆã¨ã„ã†æœŸé–“ã®ä¸­"]}),e.jsxs("div",{className:"text-blue-600",children:["ğŸŒ… ",e.jsx("strong",{children:"in the morning"})," â†’ åˆå‰ã¨ã„ã†æ™‚é–“å¸¯ã®ä¸­"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ—ºï¸"})," å ´æ‰€ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-blue-600",children:["ğŸŒ ",e.jsx("strong",{children:"in Japan"})," â†’ å›½ã¨ã„ã†åºƒã„ç©ºé–“ã®ä¸­"]}),e.jsxs("div",{className:"text-blue-600",children:["ğŸ  ",e.jsx("strong",{children:"in the room"})," â†’ éƒ¨å±‹ã¨ã„ã†å›²ã¾ã‚ŒãŸç©ºé–“ã®ä¸­"]})]})]})]})]}),e.jsxs("div",{className:"bg-green-50/20 rounded-lg p-5 border-2 border-green-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ“„"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 mt-2",children:"ON"}),e.jsx("div",{className:"text-sm text-green-700 mt-1",children:"ã€Œæ¥è§¦ãƒ»ãã£ã¤ã„ã¦ã„ã‚‹ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â°"})," æ™‚é–“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-green-600",children:["ğŸ“† ",e.jsx("strong",{children:"on Monday"})," â†’ æ›œæ—¥ã¨ã„ã†ç‰¹å®šã®æ—¥ã«æ¥è§¦"]}),e.jsxs("div",{className:"text-green-600",children:["ğŸ“… ",e.jsx("strong",{children:"on May 1st"})," â†’ æ—¥ä»˜ã¨ã„ã†ç‰¹å®šã®æ—¥ã«æ¥è§¦"]}),e.jsxs("div",{className:"text-green-600",children:["ğŸ„ ",e.jsx("strong",{children:"on Christmas"})," â†’ ãã®æ—¥ã«æ¥è§¦"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ—ºï¸"})," å ´æ‰€ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-green-600",children:["ğŸª‘ ",e.jsx("strong",{children:"on the table"})," â†’ ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨é¢ã«æ¥è§¦"]}),e.jsxs("div",{className:"text-green-600",children:["ğŸ–¼ï¸ ",e.jsx("strong",{children:"on the wall"})," â†’ å£é¢ã«æ¥è§¦"]})]})]})]})]}),e.jsxs("div",{className:"bg-orange-50/20 rounded-lg p-5 border-2 border-orange-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ“"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 mt-2",children:"AT"}),e.jsx("div",{className:"text-sm text-orange-700 mt-1",children:"ã€Œãƒ”ãƒ³ãƒã‚¤ãƒ³ãƒˆãƒ»åœ°ç‚¹ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-orange-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â°"})," æ™‚é–“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-orange-600",children:["ğŸ•– ",e.jsx("strong",{children:"at 7:00"})," â†’ 7æ™‚ã¨ã„ã†æ™‚åˆ»ã®ç‚¹"]}),e.jsxs("div",{className:"text-orange-600",children:["â˜€ï¸ ",e.jsx("strong",{children:"at noon"})," â†’ æ­£åˆã¨ã„ã†ç¬é–“ã®ç‚¹"]}),e.jsxs("div",{className:"text-orange-600",children:["ğŸŒ™ ",e.jsx("strong",{children:"at night"})," â†’ å¤œã¨ã„ã†æ™‚ç‚¹"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-orange-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ—ºï¸"})," å ´æ‰€ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-orange-600",children:["ğŸ« ",e.jsx("strong",{children:"at school"})," â†’ å­¦æ ¡ã¨ã„ã†åœ°ç‚¹"]}),e.jsxs("div",{className:"text-orange-600",children:["ğŸšª ",e.jsx("strong",{children:"at the door"})," â†’ ãƒ‰ã‚¢ã¨ã„ã†åœ°ç‚¹"]})]})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-primary",children:"â­ ãã®ä»–ã®é‡è¦ãªå‰ç½®è©"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-pink-50/20 rounded-lg p-5 border-2 border-pink-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"â¡ï¸"}),e.jsx("div",{className:"text-2xl font-bold text-pink-600 mt-2",children:"TO"}),e.jsx("div",{className:"text-sm text-pink-700 mt-1",children:"ã€Œæ–¹å‘ãƒ»åˆ°é”ç‚¹ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-pink-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ§­"})," æ–¹å‘ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-pink-600",children:["ğŸ« ",e.jsx("strong",{children:"to school"})," â†’ å­¦æ ¡ã¸ï¼ˆæ–¹å‘ï¼‰"]}),e.jsxs("div",{className:"text-pink-600",children:["ğŸ—¼ ",e.jsx("strong",{children:"to Tokyo"})," â†’ æ±äº¬ã¸ï¼ˆç›®çš„åœ°ï¼‰"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-pink-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ”„"})," ç¯„å›²ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-pink-600",children:["ğŸ“Š ",e.jsx("strong",{children:"from A to B"})," â†’ Aã‹ã‚‰Bã¾ã§ï¼ˆç¯„å›²ï¼‰"]}),e.jsxs("div",{className:"text-pink-600",children:["ğŸ• ",e.jsx("strong",{children:"from 9 to 5"})," â†’ 9æ™‚ã‹ã‚‰5æ™‚ã¾ã§"]})]})]})]})]}),e.jsxs("div",{className:"bg-purple-50/20 rounded-lg p-5 border-2 border-purple-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ¯"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 mt-2",children:"FOR"}),e.jsx("div",{className:"text-sm text-purple-700 mt-1",children:"ã€Œç›®çš„ãƒ»å¯¾è±¡ãƒ»æœŸé–“ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-purple-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ’"})," ç›®çš„ãƒ»å¯¾è±¡ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-purple-600",children:["ğŸ‘¤ ",e.jsx("strong",{children:"for you"})," â†’ ã‚ãªãŸã®ãŸã‚ã«ï¼ˆå¯¾è±¡ï¼‰"]}),e.jsxs("div",{className:"text-purple-600",children:["ğŸ³ ",e.jsx("strong",{children:"for breakfast"})," â†’ æœé£Ÿã¨ã—ã¦ï¼ˆç›®çš„ï¼‰"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-purple-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â±ï¸"})," æœŸé–“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-purple-600",children:["â° ",e.jsx("strong",{children:"for 3 hours"})," â†’ 3æ™‚é–“ï¼ˆç¶™ç¶šæœŸé–“ï¼‰"]}),e.jsxs("div",{className:"text-purple-600",children:["ğŸ“… ",e.jsx("strong",{children:"for a week"})," â†’ 1é€±é–“ï¼ˆç¶™ç¶šæœŸé–“ï¼‰"]})]})]})]})]}),e.jsxs("div",{className:"bg-teal-50/20 rounded-lg p-5 border-2 border-teal-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ¬"}),e.jsx("div",{className:"text-2xl font-bold text-teal-600 mt-2",children:"FROM"}),e.jsx("div",{className:"text-sm text-teal-700 mt-1",children:"ã€Œèµ·ç‚¹ãƒ»å‡ºç™ºç‚¹ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-teal-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“"})," èµ·ç‚¹ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-teal-600",children:["ğŸ  ",e.jsx("strong",{children:"from home"})," â†’ å®¶ã‹ã‚‰ï¼ˆå‡ºç™ºç‚¹ï¼‰"]}),e.jsxs("div",{className:"text-teal-600",children:["ğŸ‡¯ğŸ‡µ ",e.jsx("strong",{children:"from Japan"})," â†’ æ—¥æœ¬ã‹ã‚‰ï¼ˆå‡ºèº«ï¼‰"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-teal-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ•"})," æ™‚é–“ã®èµ·ç‚¹ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-teal-600",children:["â° ",e.jsx("strong",{children:"from 9 am"})," â†’ 9æ™‚ã‹ã‚‰ï¼ˆé–‹å§‹æ™‚åˆ»ï¼‰"]}),e.jsxs("div",{className:"text-teal-600",children:["ğŸ“… ",e.jsx("strong",{children:"from Monday"})," â†’ æœˆæ›œæ—¥ã‹ã‚‰"]})]})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-primary",children:"ğŸ“Œ ã‚ˆãä½¿ã†å‰ç½®è©"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-indigo-50/20 rounded-lg p-5 border-2 border-indigo-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ¤"}),e.jsx("div",{className:"text-2xl font-bold text-indigo-600 mt-2",children:"WITH"}),e.jsx("div",{className:"text-sm text-indigo-700 mt-1",children:"ã€Œä¸€ç·’ã«ãƒ»ä½¿ã£ã¦ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-indigo-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ‘¥"})," ä¼´ã†ç›¸æ‰‹ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-indigo-600",children:["ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ",e.jsx("strong",{children:"with my family"})," â†’ å®¶æ—ã¨ä¸€ç·’ã«"]}),e.jsxs("div",{className:"text-indigo-600",children:["ğŸ§‘â€ğŸ¤â€ğŸ§‘ ",e.jsx("strong",{children:"with friends"})," â†’ å‹é”ã¨"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-indigo-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ› ï¸"})," ä½¿ã†é“å…·ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-indigo-600",children:["âœï¸ ",e.jsx("strong",{children:"with a pen"})," â†’ ãƒšãƒ³ã§ï¼ˆé“å…·ï¼‰"]}),e.jsxs("div",{className:"text-indigo-600",children:["ğŸ´ ",e.jsx("strong",{children:"with chopsticks"})," â†’ ç®¸ã§"]})]})]})]})]}),e.jsxs("div",{className:"bg-amber-50/20 rounded-lg p-5 border-2 border-amber-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸš—"}),e.jsx("div",{className:"text-2xl font-bold text-amber-600 mt-2",children:"BY"}),e.jsx("div",{className:"text-sm text-amber-700 mt-1",children:"ã€Œã€œã®ãã°ã«ãƒ»æ‰‹æ®µã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸšŒ"})," æ‰‹æ®µãƒ»æ–¹æ³•ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-amber-600",children:["ğŸš† ",e.jsx("strong",{children:"by train"})," â†’ é›»è»Šã§ï¼ˆäº¤é€šæ‰‹æ®µï¼‰"]}),e.jsxs("div",{className:"text-amber-600",children:["âœ‰ï¸ ",e.jsx("strong",{children:"by email"})," â†’ ãƒ¡ãƒ¼ãƒ«ã§ï¼ˆé€šä¿¡æ‰‹æ®µï¼‰"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-amber-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“"})," ãã°ã«ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-amber-600",children:["ğŸŒŠ ",e.jsx("strong",{children:"by the sea"})," â†’ æµ·ã®ãã°ã«"]}),e.jsxs("div",{className:"text-amber-600",children:["ğŸªŸ ",e.jsx("strong",{children:"by the window"})," â†’ çª“ã®ãã°ã«"]})]})]})]})]}),e.jsxs("div",{className:"bg-rose-50/20 rounded-lg p-5 border-2 border-rose-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ”—"}),e.jsx("div",{className:"text-2xl font-bold text-rose-600 mt-2",children:"OF"}),e.jsx("div",{className:"text-sm text-rose-700 mt-1",children:"ã€Œã€œã®ï¼ˆæ‰€å±ãƒ»éƒ¨åˆ†ï¼‰ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-rose-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ‘‘"})," æ‰€å±ãƒ»æ‰€æœ‰ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-rose-600",children:["ğŸ“š ",e.jsx("strong",{children:"the book of mine"})," â†’ ç§ã®æœ¬"]}),e.jsxs("div",{className:"text-rose-600",children:["ğŸ›ï¸ ",e.jsx("strong",{children:"the capital of Japan"})," â†’ æ—¥æœ¬ã®é¦–éƒ½"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-rose-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ§©"})," éƒ¨åˆ†ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-rose-600",children:["ğŸ° ",e.jsx("strong",{children:"a piece of cake"})," â†’ ã‚±ãƒ¼ã‚­ä¸€åˆ‡ã‚Œ"]}),e.jsxs("div",{className:"text-rose-600",children:["ğŸ’§ ",e.jsx("strong",{children:"a glass of water"})," â†’ ã‚³ãƒƒãƒ—ä¸€æ¯ã®æ°´"]})]})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-primary",children:"ğŸ’« ä¸­é »åº¦ã®å‰ç½®è©"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-cyan-50/20 rounded-lg p-5 border-2 border-cyan-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ’­"}),e.jsx("div",{className:"text-2xl font-bold text-cyan-600 mt-2",children:"ABOUT"}),e.jsx("div",{className:"text-sm text-cyan-700 mt-1",children:"ã€Œã€œã«ã¤ã„ã¦ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-cyan-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“–"})," è©±é¡Œãƒ»å†…å®¹ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-cyan-600",children:["ğŸ“š ",e.jsx("strong",{children:"a book about history"})," â†’ æ­´å²ã«ã¤ã„ã¦ã®æœ¬"]}),e.jsxs("div",{className:"text-cyan-600",children:["ğŸ’¬ ",e.jsx("strong",{children:"talk about sports"})," â†’ ã‚¹ãƒãƒ¼ãƒ„ã«ã¤ã„ã¦è©±ã™"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-cyan-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ”¢"})," ãŠãŠã‚ˆãã®æ•°ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-cyan-600",children:["â° ",e.jsx("strong",{children:"about 10 minutes"})," â†’ ç´„10åˆ†"]}),e.jsxs("div",{className:"text-cyan-600",children:["ğŸ‘¥ ",e.jsx("strong",{children:"about 50 people"})," â†’ ç´„50äºº"]})]})]})]})]}),e.jsxs("div",{className:"bg-lime-50/20 rounded-lg p-5 border-2 border-lime-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"â­ï¸"}),e.jsx("div",{className:"text-2xl font-bold text-lime-600 mt-2",children:"AFTER"}),e.jsx("div",{className:"text-sm text-lime-700 mt-1",children:"ã€Œã€œã®å¾Œã«ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-lime-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â°"})," æ™‚é–“ã®å¾Œï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-lime-600",children:["ğŸ½ï¸ ",e.jsx("strong",{children:"after dinner"})," â†’ å¤•é£Ÿã®å¾Œ"]}),e.jsxs("div",{className:"text-lime-600",children:["ğŸ« ",e.jsx("strong",{children:"after school"})," â†’ æ”¾èª²å¾Œ"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-lime-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“"})," é †åºï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-lime-600",children:["ğŸ”¤ ",e.jsx("strong",{children:"after you"})," â†’ ãŠå…ˆã«ã©ã†ã"]}),e.jsxs("div",{className:"text-lime-600",children:["ğŸ“ ",e.jsx("strong",{children:"one after another"})," â†’ æ¬¡ã€…ã«"]})]})]})]})]}),e.jsxs("div",{className:"bg-sky-50/20 rounded-lg p-5 border-2 border-sky-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"â®ï¸"}),e.jsx("div",{className:"text-2xl font-bold text-sky-600 mt-2",children:"BEFORE"}),e.jsx("div",{className:"text-sm text-sky-700 mt-1",children:"ã€Œã€œã®å‰ã«ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-sky-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â°"})," æ™‚é–“ã®å‰ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-sky-600",children:["ğŸ½ï¸ ",e.jsx("strong",{children:"before breakfast"})," â†’ æœé£Ÿå‰"]}),e.jsxs("div",{className:"text-sky-600",children:["ğŸ„ ",e.jsx("strong",{children:"before Christmas"})," â†’ ã‚¯ãƒªã‚¹ãƒã‚¹ã®å‰"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-sky-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“"})," é †åºãƒ»ä½ç½®ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-sky-600",children:["ğŸšª ",e.jsx("strong",{children:"before the door"})," â†’ ãƒ‰ã‚¢ã®å‰"]}),e.jsxs("div",{className:"text-sky-600",children:["ğŸ‘¥ ",e.jsx("strong",{children:"before everyone"})," â†’ ã¿ã‚“ãªã®å‰ã§"]})]})]})]})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-violet-50/20 rounded-lg p-5 border-2 border-violet-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸŒ‰"}),e.jsx("div",{className:"text-2xl font-bold text-violet-600 mt-2",children:"OVER"}),e.jsx("div",{className:"text-sm text-violet-700 mt-1",children:"ã€Œã€œã®ä¸Šã‚’è¶Šãˆã¦ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-violet-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ¦…"})," ä¸Šæ–¹ãƒ»è¶Šãˆã‚‹ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-violet-600",children:["ğŸŒ‰ ",e.jsx("strong",{children:"over the bridge"})," â†’ æ©‹ã‚’è¶Šãˆã¦"]}),e.jsxs("div",{className:"text-violet-600",children:["ğŸ”ï¸ ",e.jsx("strong",{children:"over the mountain"})," â†’ å±±ã‚’è¶Šãˆã¦"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-violet-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ”¢"})," ä»¥ä¸Šãƒ»è¶…éï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-violet-600",children:["ğŸ‘¥ ",e.jsx("strong",{children:"over 100 people"})," â†’ 100äººä»¥ä¸Š"]}),e.jsxs("div",{className:"text-violet-600",children:["ğŸ’° ",e.jsx("strong",{children:"over $50"})," â†’ 50ãƒ‰ãƒ«ä»¥ä¸Š"]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-50/20 rounded-lg p-5 border-2 border-slate-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"â¬‡ï¸"}),e.jsx("div",{className:"text-2xl font-bold text-slate-600 mt-2",children:"UNDER"}),e.jsx("div",{className:"text-sm text-slate-700 mt-1",children:"ã€Œã€œã®ä¸‹ã«ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-slate-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â¬‡ï¸"})," ä¸‹æ–¹ãƒ»ä¸‹å´ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-slate-600",children:["ğŸŒ³ ",e.jsx("strong",{children:"under the tree"})," â†’ æœ¨ã®ä¸‹ã«"]}),e.jsxs("div",{className:"text-slate-600",children:["ğŸŒ‰ ",e.jsx("strong",{children:"under the bridge"})," â†’ æ©‹ã®ä¸‹ã«"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-slate-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ”¢"})," æœªæº€ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-slate-600",children:["ğŸ‘¶ ",e.jsx("strong",{children:"under 18"})," â†’ 18æ­³æœªæº€"]}),e.jsxs("div",{className:"text-slate-600",children:["ğŸ’° ",e.jsx("strong",{children:"under $10"})," â†’ 10ãƒ‰ãƒ«æœªæº€"]})]})]})]})]}),e.jsxs("div",{className:"bg-fuchsia-50/20 rounded-lg p-5 border-2 border-fuchsia-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸš‡"}),e.jsx("div",{className:"text-2xl font-bold text-fuchsia-600 mt-2",children:"THROUGH"}),e.jsx("div",{className:"text-sm text-fuchsia-700 mt-1",children:"ã€Œã€œã‚’é€šã£ã¦ã€"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-fuchsia-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸšª"})," é€šéãƒ»è²«é€šï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-fuchsia-600",children:["ğŸªŸ ",e.jsx("strong",{children:"through the window"})," â†’ çª“ã‚’é€šã£ã¦"]}),e.jsxs("div",{className:"text-fuchsia-600",children:["ğŸŒ² ",e.jsx("strong",{children:"through the forest"})," â†’ æ£®ã‚’æŠœã‘ã¦"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-fuchsia-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â°"})," æœŸé–“å…¨ä½“ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-fuchsia-600",children:["ğŸŒ™ ",e.jsx("strong",{children:"through the night"})," â†’ ä¸€æ™©ä¸­"]}),e.jsxs("div",{className:"text-fuchsia-600",children:["ğŸŒ§ï¸ ",e.jsx("strong",{children:"through the winter"})," â†’ å†¬ã®é–“ãšã£ã¨"]})]})]})]})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-primary",children:"âœ¨ çŸ¥ã£ã¦ãŠãã¨ä¾¿åˆ©ãªå‰ç½®è©"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-emerald-50/20 rounded-lg p-5 border-2 border-emerald-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"â†”ï¸"}),e.jsx("div",{className:"text-2xl font-bold text-emerald-600 mt-2",children:"BETWEEN"}),e.jsx("div",{className:"text-sm text-emerald-700 mt-1",children:"ã€Œã€œã®é–“ã«ï¼ˆ2ã¤ï¼‰ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-emerald-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“"})," 2ã¤ã®é–“ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-emerald-600",children:["ğŸ«ğŸ¥ ",e.jsx("strong",{children:"between the school and hospital"})," â†’ å­¦æ ¡ã¨ç—…é™¢ã®é–“"]}),e.jsxs("div",{className:"text-emerald-600",children:["ğŸ‘¥ ",e.jsx("strong",{children:"between you and me"})," â†’ ã‚ãªãŸã¨ç§ã®é–“ã§"]})]})]})})]}),e.jsxs("div",{className:"bg-orange-50/20 rounded-lg p-5 border-2 border-orange-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ‘¥"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 mt-2",children:"AMONG"}),e.jsx("div",{className:"text-sm text-orange-700 mt-1",children:"ã€Œã€œã®é–“ã«ï¼ˆ3ã¤ä»¥ä¸Šï¼‰ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-orange-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦"})," è¤‡æ•°ã®ä¸­ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-orange-600",children:["ğŸŒ¸ ",e.jsx("strong",{children:"among the flowers"})," â†’ èŠ±ã€…ã®ä¸­ã«"]}),e.jsxs("div",{className:"text-orange-600",children:["ğŸ‘¥ ",e.jsx("strong",{children:"among friends"})," â†’ å‹äººãŸã¡ã®é–“ã§"]})]})]})})]}),e.jsxs("div",{className:"bg-red-50/20 rounded-lg p-5 border-2 border-red-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸš«"}),e.jsx("div",{className:"text-2xl font-bold text-red-600 mt-2",children:"WITHOUT"}),e.jsx("div",{className:"text-sm text-red-700 mt-1",children:"ã€Œã€œãªã—ã§ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-red-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"âŒ"})," æ¬ å¦‚ãƒ»ä¸åœ¨ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-red-600",children:["ğŸ’§ ",e.jsx("strong",{children:"without water"})," â†’ æ°´ãªã—ã§"]}),e.jsxs("div",{className:"text-red-600",children:["ğŸ‘¤ ",e.jsx("strong",{children:"without you"})," â†’ ã‚ãªãŸãªã—ã§"]})]})]})})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-yellow-50/20 rounded-lg p-5 border-2 border-yellow-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"â³"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600 mt-2",children:"DURING"}),e.jsx("div",{className:"text-sm text-yellow-700 mt-1",children:"ã€Œã€œã®é–“ã«ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-yellow-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“…"})," æœŸé–“ä¸­ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-yellow-600",children:["ğŸŒ´ ",e.jsx("strong",{children:"during summer vacation"})," â†’ å¤ä¼‘ã¿ã®é–“"]}),e.jsxs("div",{className:"text-yellow-600",children:["ğŸ¥ ",e.jsx("strong",{children:"during the movie"})," â†’ æ˜ ç”»ã®é–“"]})]})]})})]}),e.jsxs("div",{className:"bg-teal-50/20 rounded-lg p-5 border-2 border-teal-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"â°"}),e.jsx("div",{className:"text-2xl font-bold text-teal-600 mt-2",children:"UNTIL/TILL"}),e.jsx("div",{className:"text-sm text-teal-700 mt-1",children:"ã€Œã€œã¾ã§ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-teal-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ•"})," ç¶™ç¶šã®çµ‚ç‚¹ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-teal-600",children:["ğŸŒ™ ",e.jsx("strong",{children:"until midnight"})," â†’ çœŸå¤œä¸­ã¾ã§"]}),e.jsxs("div",{className:"text-teal-600",children:["ğŸ“… ",e.jsx("strong",{children:"until next week"})," â†’ æ¥é€±ã¾ã§"]})]})]})})]}),e.jsxs("div",{className:"bg-blue-50/20 rounded-lg p-5 border-2 border-blue-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ“†"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 mt-2",children:"SINCE"}),e.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"ã€Œã€œä»¥æ¥ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“…"})," èµ·ç‚¹ã‹ã‚‰ç¶™ç¶šï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-blue-600",children:["ğŸ‚ ",e.jsx("strong",{children:"since last year"})," â†’ å»å¹´ã‹ã‚‰ï¼ˆãšã£ã¨ï¼‰"]}),e.jsxs("div",{className:"text-blue-600",children:["ğŸ‘¶ ",e.jsx("strong",{children:"since childhood"})," â†’ å­ä¾›ã®é ƒã‹ã‚‰"]})]})]})})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-primary",children:"ğŸ  å ´æ‰€ã‚’è¡¨ã™å‰ç½®è©"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-purple-50/20 rounded-lg p-5 border-2 border-purple-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ¢"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 mt-2",children:"INSIDE"}),e.jsx("div",{className:"text-sm text-purple-700 mt-1",children:"ã€Œã€œã®å†…å´ã«ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-purple-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“¦"})," å†…å´ãƒ»å†…éƒ¨ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-purple-600",children:["ğŸ  ",e.jsx("strong",{children:"inside the house"})," â†’ å®¶ã®ä¸­ã«"]}),e.jsxs("div",{className:"text-purple-600",children:["ğŸ“¦ ",e.jsx("strong",{children:"inside the box"})," â†’ ç®±ã®ä¸­ã«"]})]})]})})]}),e.jsxs("div",{className:"bg-green-50/20 rounded-lg p-5 border-2 border-green-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸŒ³"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 mt-2",children:"OUTSIDE"}),e.jsx("div",{className:"text-sm text-green-700 mt-1",children:"ã€Œã€œã®å¤–å´ã«ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸŒ²"})," å¤–å´ãƒ»å¤–éƒ¨ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-green-600",children:["ğŸ¡ ",e.jsx("strong",{children:"outside the house"})," â†’ å®¶ã®å¤–ã«"]}),e.jsxs("div",{className:"text-green-600",children:["ğŸ« ",e.jsx("strong",{children:"outside the school"})," â†’ å­¦æ ¡ã®å¤–ã«"]})]})]})})]}),e.jsxs("div",{className:"bg-cyan-50/20 rounded-lg p-5 border-2 border-cyan-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ“"}),e.jsx("div",{className:"text-2xl font-bold text-cyan-600 mt-2",children:"NEAR"}),e.jsx("div",{className:"text-sm text-cyan-700 mt-1",children:"ã€Œã€œã®è¿‘ãã«ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-cyan-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ¯"})," è¿‘æ¥ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-cyan-600",children:["ğŸš‰ ",e.jsx("strong",{children:"near the station"})," â†’ é§…ã®è¿‘ãã«"]}),e.jsxs("div",{className:"text-cyan-600",children:["ğŸŒŠ ",e.jsx("strong",{children:"near the sea"})," â†’ æµ·ã®è¿‘ãã«"]})]})]})})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-indigo-50/20 rounded-lg p-5 border-2 border-indigo-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ‘¤"}),e.jsx("div",{className:"text-2xl font-bold text-indigo-600 mt-2",children:"BEHIND"}),e.jsx("div",{className:"text-sm text-indigo-700 mt-1",children:"ã€Œã€œã®å¾Œã‚ã«ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-indigo-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â¬…ï¸"})," å¾Œæ–¹ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-indigo-600",children:["ğŸšª ",e.jsx("strong",{children:"behind the door"})," â†’ ãƒ‰ã‚¢ã®å¾Œã‚ã«"]}),e.jsxs("div",{className:"text-indigo-600",children:["ğŸ  ",e.jsx("strong",{children:"behind the house"})," â†’ å®¶ã®è£ã«"]})]})]})})]}),e.jsxs("div",{className:"bg-pink-50/20 rounded-lg p-5 border-2 border-pink-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸŒ‰"}),e.jsx("div",{className:"text-2xl font-bold text-pink-600 mt-2",children:"ACROSS"}),e.jsx("div",{className:"text-sm text-pink-700 mt-1",children:"ã€Œã€œã‚’æ¨ªåˆ‡ã£ã¦ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-pink-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â†”ï¸"})," æ¨ªæ–­ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-pink-600",children:["ğŸ›£ï¸ ",e.jsx("strong",{children:"across the street"})," â†’ é€šã‚Šã‚’æ¨ªåˆ‡ã£ã¦"]}),e.jsxs("div",{className:"text-pink-600",children:["ğŸŒŠ ",e.jsx("strong",{children:"across the river"})," â†’ å·ã‚’æ¸¡ã£ã¦"]})]})]})})]}),e.jsxs("div",{className:"bg-lime-50/20 rounded-lg p-5 border-2 border-lime-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-5xl",children:"ğŸ›¤ï¸"}),e.jsx("div",{className:"text-2xl font-bold text-lime-600 mt-2",children:"ALONG"}),e.jsx("div",{className:"text-sm text-lime-700 mt-1",children:"ã€Œã€œã«æ²¿ã£ã¦ã€"})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-lime-800 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"â¡ï¸"})," æ²¿ã£ã¦é€²ã‚€ï¼š"]}),e.jsxs("div",{className:"bg-white rounded p-2 text-sm space-y-1",children:[e.jsxs("div",{className:"text-lime-600",children:["ğŸ›£ï¸ ",e.jsx("strong",{children:"along the street"})," â†’ é€šã‚Šã«æ²¿ã£ã¦"]}),e.jsxs("div",{className:"text-lime-600",children:["ğŸŒŠ ",e.jsx("strong",{children:"along the river"})," â†’ å·æ²¿ã„ã«"]})]})]})})]})]})})]}),Di=()=>{const s=[{symbol:".",name:"Period (ãƒ”ãƒªã‚ªãƒ‰)",usage:"æ–‡ã®çµ‚ã‚ã‚Š",example:"I like cats.",explanation:"å¹³å™æ–‡ãƒ»å‘½ä»¤æ–‡ã®çµ‚ã‚ã‚Šã‚’ç¤ºã™"},{symbol:",",name:"Comma (ã‚³ãƒ³ãƒ)",usage:"åŒºåˆ‡ã‚Šãƒ»åˆ—æŒ™",example:"I bought apples, oranges, and bananas.",explanation:"å˜èªã‚„å¥ã‚’åŒºåˆ‡ã‚‹ã€‚æ¥ç¶šè©ã®å‰ã«ã‚‚ä½¿ç”¨"},{symbol:"!",name:"Exclamation Mark (æ„Ÿå˜†ç¬¦)",usage:"æ„Ÿå˜†ãƒ»å¼·èª¿",example:"What a beautiful day!",explanation:"é©šããƒ»å–œã³ãƒ»å¼·ã„æ„Ÿæƒ…ã‚’è¡¨ã™"},{symbol:"?",name:"Question Mark (ç–‘å•ç¬¦)",usage:"ç–‘å•",example:"Do you like music?",explanation:"ç–‘å•æ–‡ã®çµ‚ã‚ã‚Šã‚’ç¤ºã™"},{symbol:":",name:"Colon (ã‚³ãƒ­ãƒ³)",usage:"èª¬æ˜ãƒ»ä¾‹ç¤ºã®å°å…¥",example:"I have three pets: a dog, a cat, and a bird.",explanation:"å¾Œã‚ã«èª¬æ˜ã‚„åˆ—æŒ™ãŒç¶šãã“ã¨ã‚’ç¤ºã™"},{symbol:";",name:"Semicolon (ã‚»ãƒŸã‚³ãƒ­ãƒ³)",usage:"é–¢é€£ã™ã‚‹æ–‡ã®åŒºåˆ‡ã‚Š",example:"I love reading; my sister prefers sports.",explanation:"ãƒ”ãƒªã‚ªãƒ‰ã‚ˆã‚Šå¼±ãã€ã‚³ãƒ³ãƒã‚ˆã‚Šå¼·ã„åŒºåˆ‡ã‚Š"},{symbol:"-",name:"Hyphen (ãƒã‚¤ãƒ•ãƒ³)",usage:"è¤‡åˆèªãƒ»è£œè¶³",example:"a well-known writer",explanation:"2ã¤ä»¥ä¸Šã®å˜èªã‚’ç¹‹ã’ã‚‹"},{symbol:"â€”",name:"Em Dash (ãƒ€ãƒƒã‚·ãƒ¥)",usage:"å¼·ã„åŒºåˆ‡ã‚Šãƒ»æŒ¿å…¥",example:"My friendsâ€”John and Maryâ€”are coming.",explanation:"è£œè¶³æƒ…å ±ã‚’æŒ¿å…¥ã™ã‚‹"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-color mb-4",children:"è‹±æ–‡è¨˜å·ã®æ„å‘³ã¨ä½¿ã„æ–¹"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map((t,r)=>e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-5 hover:shadow-lg transition-shadow border border-border-color",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-3",children:[e.jsx("div",{className:"text-5xl font-bold text-primary flex-shrink-0",children:t.symbol}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-text-color",children:t.name}),e.jsx("p",{className:"text-sm text-primary font-semibold",children:t.usage})]})]}),e.jsx("div",{className:"bg-blue-50/20 rounded p-3 mb-3",children:e.jsx("div",{className:"font-mono text-sm text-blue-600",children:t.example})}),e.jsx("p",{className:"text-sm text-text-secondary",children:t.explanation})]},r))})]})},Mi=()=>{const s=[{icon:"ğŸ“",title:"æœ€åˆã«æ³¨é‡ˆã¨è¨­å•ã‚’ç¢ºèª",description:"æœ¬æ–‡ã‚’èª­ã‚€å‰ã«ã€æ³¨é‡ˆã¨å•é¡Œã‹ã‚‰é‡è¦ãªæ‰‹ãŒã‹ã‚Šã‚’å¾—ã‚‹",details:["æ³¨é‡ˆã¯å˜ã«é›£ã—ã„å˜èªã®æ„å‘³ã§ã¯ãªãã€å†…å®¹ç†è§£ã®ã‚«ã‚®","æ³¨é‡ˆã®å˜èªã‚’é€£æƒ³ã™ã‚‹ã¨é•·æ–‡ã®ã‚ã‚‰ã™ã˜ãŒè¦‹ãˆã¦ãã‚‹","ç­†è€…ã®ä¸»å¼µã‚„å¤§æ„ã‚’å•ã†è¨­å•ã‹ã‚‰ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æ‹¾ã†","éƒ¨åˆ†çš„ãªé¸æŠå•é¡Œã®é¸æŠè‚¢ã«ã‚‚å…±é€šã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒéš ã‚Œã¦ã„ã‚‹"]},{icon:"ğŸ¯",title:"ã‚¿ã‚¤ãƒˆãƒ«ã¨ç¬¬1æ®µè½ã§å…¨ä½“åƒã‚’æ´ã‚€",description:"è‹±èªã®æ–‡ç« ã¯ã€Œçµè«–å…ˆå‡ºã—ã€ãŒåŸºæœ¬ã€‚æœ€åˆã«å…¨ä½“ã®æ–¹å‘æ€§ãŒç¤ºã•ã‚Œã‚‹",example:{title:"The Importance of Reading Books",para1:"Reading books is one of the best ways to improve your knowledge and imagination. Many people think that reading is boring, but it actually helps you learn new things and understand the world better.",explanation:`ã‚¿ã‚¤ãƒˆãƒ«: ã€Œæœ¬ã‚’èª­ã‚€é‡è¦æ€§ã€â†’ ãƒ†ãƒ¼ãƒç¢ºå®š
ç¬¬1æ®µè½: ã€Œæœ¬ã‚’èª­ã‚€ã“ã¨ã¯çŸ¥è­˜ã¨æƒ³åƒåŠ›ã‚’é«˜ã‚ã‚‹æœ€è‰¯ã®æ–¹æ³•ã®1ã¤ã€â†’ ç­†è€…ã®ä¸»å¼µ
â†’ ã“ã®æ™‚ç‚¹ã§ã€Œæœ¬ã‚’èª­ã‚€ã“ã¨ã®è‰¯ã„ç‚¹ã«ã¤ã„ã¦è¿°ã¹ã‚‹æ–‡ç« ã€ã ã¨åˆ†ã‹ã‚‹`},details:["ã‚¿ã‚¤ãƒˆãƒ« â†’ è©±é¡Œï¼ˆãƒˆãƒ”ãƒƒã‚¯ï¼‰ã‚’ç¤ºã™","ç¬¬1æ®µè½ â†’ ç­†è€…ã®ç«‹å ´ãƒ»ä¸»å¼µã‚’æ˜ç¢ºã«ã™ã‚‹","ã€Œä½•ã«ã¤ã„ã¦ã€ã€Œã©ã†è€ƒãˆã¦ã„ã‚‹ã‹ã€ã‚’ãƒ¡ãƒ¢ã™ã‚‹ã¨æ•´ç†ã—ã‚„ã™ã„","å•é¡Œæèµ·ï¼ˆç–‘å•ï¼‰â†’ æœ¬æ–‡ã§ç­”ãˆã‚’æ¢ã™ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚å¤šã„"]},{icon:"ğŸ“",title:"æ®µè½ã®æœ€åˆã¨æœ€å¾Œã«æ³¨ç›®",description:"è‹±èªã¯ã€Œãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ãƒ»ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ã€‚1æ®µè½ = 1ã¤ã®ä¸»å¼µ",example:{structure:`ã€å…¸å‹çš„ãªæ®µè½æ§‹é€ ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç¬¬1æ–‡ï¼ˆãƒˆãƒ”ãƒƒã‚¯ã‚»ãƒ³ãƒ†ãƒ³ã‚¹ï¼‰
ã€Œé‹å‹•ã¯å¥åº·ã«è‰¯ã„ã€â† æ®µè½ã®ä¸»å¼µ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ä¸­é–“éƒ¨ï¼ˆã‚µãƒãƒ¼ãƒˆï¼‰
ç†ç”±1: ä½“ãŒå¼·ããªã‚‹
ç†ç”±2: ã‚¹ãƒˆãƒ¬ã‚¹è§£æ¶ˆã«ãªã‚‹
å…·ä½“ä¾‹: æ¯æ—¥30åˆ†æ­©ãã ã‘ã§åŠ¹æœ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æœ€çµ‚æ–‡ï¼ˆã¾ã¨ã‚ï¼‰
ã€Œã ã‹ã‚‰é‹å‹•ã‚’ç¿’æ…£ã«ã™ã¹ãã€â† çµè«–
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”`,tips:"ç¬¬1æ–‡ã¨æœ€çµ‚æ–‡ã ã‘èª­ã‚ã°ã€ãã®æ®µè½ã§ä½•ã‚’è¨€ã„ãŸã„ã‹ãŒåˆ†ã‹ã‚‹ï¼"},details:["ç¬¬1æ–‡ï¼ˆãƒˆãƒ”ãƒƒã‚¯ã‚»ãƒ³ãƒ†ãƒ³ã‚¹ï¼‰: ãã®æ®µè½ã§æœ€ã‚‚è¨€ã„ãŸã„ã“ã¨","ä¸­é–“éƒ¨: ç†ç”±ãƒ»å…·ä½“ä¾‹ãƒ»ãƒ‡ãƒ¼ã‚¿ï¼ˆé£›ã°ã—èª­ã¿OKï¼‰","æœ€çµ‚æ–‡: ã¾ã¨ã‚ãƒ»çµè«–ãƒ»æ¬¡ã®æ®µè½ã¸ã®æ©‹æ¸¡ã—","æ€¥ã„ã§ã„ã‚‹æ™‚ã¯å„æ®µè½ã®ç¬¬1æ–‡ã ã‘èª­ã‚€ã®ã‚‚æœ‰åŠ¹"]},{icon:"ğŸ”—",title:"ãƒ‡ã‚£ã‚¹ã‚³ãƒ¼ã‚¹ãƒãƒ¼ã‚«ãƒ¼ã‚’è¦‹é€ƒã•ãªã„",description:"æ–‡ç« ã®æµã‚Œã‚’ç¤ºã™ã¤ãªãè¨€è‘‰ãŒè«–ç†å±•é–‹ã®ã‚«ã‚®",details:["é€†æ¥: However, But, Yet, On the other hand","å› æœ: Therefore, So, Thus, As a result","ä¾‹ç¤º: For example, For instance, Such as","è¿½åŠ : In addition, Moreover, Furthermore","è¨€ã„æ›ãˆ: In other words, That is, Namely"]},{icon:"ğŸ”",title:"è¨­å•ã®ç¨®é¡åˆ¥ã®æ”»ç•¥æ³•",description:"å•é¡Œã®ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸèª­ã¿æ–¹ã‚’ä½¿ã„åˆ†ã‘ã‚‹",details:["ä¸»æ—¨å•é¡Œ: å„æ®µè½ã®ç¬¬1æ–‡ã¨æœ€çµ‚æ®µè½ã‚’é‡ç‚¹çš„ã«","è©³ç´°å•é¡Œ: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§è©²å½“ç®‡æ‰€ã‚’ç‰¹å®šã—ã¦ç²¾èª­","èªå½™å•é¡Œ: å‰å¾Œã®æ–‡è„ˆã‹ã‚‰æ„å‘³ã‚’æ¨æ¸¬","æŒ‡ç¤ºèªå•é¡Œ: ç›´å‰ã®å†…å®¹ã‚’ç¢ºèª","NOTå•é¡Œ: æœ¬æ–‡ã«æ›¸ã‹ã‚Œã¦ã„ãªã„é¸æŠè‚¢ã‚’æ¢ã™"]},{icon:"â±ï¸",title:"æ™‚é–“é…åˆ†ã¨å„ªå…ˆé †ä½",description:"å…¨å•è§£ããŸã‚ã®æˆ¦ç•¥çš„ãªæ™‚é–“ç®¡ç†",details:["1å•ã‚ãŸã‚Šã®ç›®å®‰æ™‚é–“ã‚’æ±ºã‚ã‚‹ï¼ˆä¾‹: 3åˆ†/å•ï¼‰","æ˜“ã—ã„å•é¡Œã‹ã‚‰è§£ã„ã¦å¾—ç‚¹ã‚’ç¢ºä¿","é›£å•ã¯å¾Œå›ã—ã€æœ€å¾Œã«æˆ»ã‚‹","æœ€ä½5åˆ†ã¯è¦‹ç›´ã—æ™‚é–“ã‚’ç¢ºä¿"]},{icon:"â“",title:"åˆ†ã‹ã‚‰ãªã„éƒ¨åˆ†ã®å¯¾å‡¦æ³•",description:"å®Œç’§ã‚’ç›®æŒ‡ã•ãšã€åŠ¹ç‡çš„ã«å¾—ç‚¹ã™ã‚‹",details:["çŸ¥ã‚‰ãªã„å˜èªã¯å‰å¾Œã‹ã‚‰æ¨æ¸¬ï¼ˆå“è©ãƒ»è‚¯å®šå¦å®šã‚’åˆ¤æ–­ï¼‰","ä¸€æ–‡ãŒåˆ†ã‹ã‚‰ãªãã¦ã‚‚æ®µè½å…¨ä½“ã‹ã‚‰æ„å‘³ã‚’æ´ã‚€","ç´°éƒ¨ã‚ˆã‚Šå…¨ä½“ã®æµã‚Œã‚’å„ªå…ˆ","æ¶ˆå»æ³•ã§é¸æŠè‚¢ã‚’çµã‚‹ï¼ˆæ˜ã‚‰ã‹ã«é•ã†ã‚‚ã®ã‚’é™¤å¤–ï¼‰"]}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-color mb-4",children:"é•·æ–‡èª­è§£ã®ã‚³ãƒ„"}),e.jsx("div",{className:"bg-yellow-50/20 rounded-lg p-6 border-l-4 border-yellow-500 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ’¡"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-yellow-800 mb-2",children:"åŸºæœ¬æˆ¦ç•¥"}),e.jsx("p",{className:"text-yellow-700 mb-3",children:"é•·æ–‡èª­è§£ã¯ã€Œå®Œç’§ã«ç†è§£ã™ã‚‹ã€ã®ã§ã¯ãªãã€Œå¿…è¦ãªæƒ…å ±ã‚’åŠ¹ç‡çš„ã«è¦‹ã¤ã‘ã‚‹ã€ä½œæ¥­ã§ã™ã€‚ æ³¨é‡ˆã¨è¨­å•ã‹ã‚‰æ‰‹ãŒã‹ã‚Šã‚’å¾—ã¦ã€å…¨ä½“ã®æµã‚Œã‚’æ´ã¿ãªãŒã‚‰ã€è§£ç­”ã«å¿…è¦ãªéƒ¨åˆ†ã‚’æ¢ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚"}),e.jsxs("div",{className:"bg-yellow-100/30 rounded p-3 text-sm",children:[e.jsx("p",{className:"font-semibold text-yellow-900 mb-1",children:"âš¡ æœ€é‡è¦ãƒã‚¤ãƒ³ãƒˆ"}),e.jsx("p",{className:"text-yellow-800",children:"èª­ã‚€é †ç•ª: â‘  æ³¨é‡ˆ â†’ â‘¡ è¨­å•ãƒ»é¸æŠè‚¢ â†’ â‘¢ ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ç¬¬1æ®µè½ â†’ â‘£ å„æ®µè½ã®ç¬¬1æ–‡ â†’ â‘¤ å¿…è¦ç®‡æ‰€ã‚’ç²¾èª­"})]})]})]})}),e.jsx("div",{className:"space-y-4",children:s.map((t,r)=>e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 hover:shadow-lg transition-shadow border-l-4 border-primary/30",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("span",{className:"text-4xl",children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-text-color mb-2",children:t.title}),e.jsx("p",{className:"text-text-secondary",children:t.description})]})]}),t.example&&e.jsx("div",{className:"ml-14 mb-4 bg-blue-50/20 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"space-y-3",children:[t.example.title&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-blue-600 mb-1",children:"ğŸ“Œ ã‚¿ã‚¤ãƒˆãƒ«ä¾‹"}),e.jsx("div",{className:"bg-white rounded p-2 font-mono text-sm text-blue-700",children:t.example.title})]}),t.example.para1&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-blue-600 mb-1",children:"ğŸ“„ ç¬¬1æ®µè½ä¾‹"}),e.jsx("div",{className:"bg-white rounded p-2 text-sm text-gray-700 leading-relaxed",children:t.example.para1})]}),t.example.structure&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-blue-600 mb-1",children:"ğŸ“Š æ®µè½ã®æ§‹é€ "}),e.jsx("div",{className:"bg-white rounded p-3 text-sm font-mono whitespace-pre-line text-gray-700",children:t.example.structure})]}),t.example.explanation&&e.jsxs("div",{className:"bg-yellow-50/30 rounded p-3 border-l-2 border-yellow-500",children:[e.jsx("div",{className:"text-xs font-semibold text-yellow-800 mb-1",children:"ğŸ’¡ èª­ã¿å–ã‚Œã‚‹ã“ã¨"}),e.jsx("div",{className:"text-sm text-yellow-700 whitespace-pre-line",children:t.example.explanation})]}),t.example.tips&&e.jsx("div",{className:"bg-green-50/30 rounded p-3 border-l-2 border-green-500",children:e.jsxs("div",{className:"text-sm font-semibold text-green-700",children:["âœ¨ ",t.example.tips]})})]})}),e.jsx("ul",{className:"space-y-2 ml-14",children:t.details.map((a,n)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"text-primary mt-1",children:"âœ“"}),e.jsx("span",{className:"text-text-color",children:a})]},n))})]},r))}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50/20/20 rounded-lg p-6 mt-8 border-2 border-blue-300",children:[e.jsxs("h3",{className:"text-xl font-bold text-text-color mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“–"}),e.jsx("span",{children:"å®Ÿè·µï¼åŠ¹ç‡çš„ãªèª­è§£æ‰‹é †"})]}),e.jsx("ol",{className:"space-y-3",children:[{step:"æ³¨é‡ˆã‚’èª­ã‚€",detail:"â†’ é‡è¦å˜èªã‹ã‚‰å†…å®¹ã‚’äºˆæƒ³"},{step:"è¨­å•ã¨é¸æŠè‚¢ã‚’èª­ã‚€",detail:"â†’ ä½•ã‚’èã‹ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯"},{step:"ã‚¿ã‚¤ãƒˆãƒ«ã¨ç¬¬1æ®µè½ã‚’èª­ã‚€",detail:"â†’ ãƒ†ãƒ¼ãƒã¨è«–ç‚¹ã‚’æŠŠæ¡"},{step:"å„æ®µè½ã®ç¬¬1æ–‡ã‚’æµã—èª­ã¿",detail:"â†’ å…¨ä½“æ§‹æˆã‚’ç†è§£"},{step:"è¨­å•ã«é–¢é€£ã™ã‚‹æ®µè½ã‚’ç²¾èª­",detail:"â†’ ç­”ãˆã®æ ¹æ‹ ã‚’æ¢ã™"},{step:"é¸æŠè‚¢ã‚’æœ¬æ–‡ã¨ç…§ã‚‰ã—åˆã‚ã›ã‚‹",detail:"â†’ æ ¹æ‹ ãŒã‚ã‚‹é¸æŠè‚¢ã‚’é¸ã¶"},{step:"è¦‹ç›´ã—",detail:"â†’ é¸ã‚“ã ç­”ãˆãŒæœ¬æ–‡ã®å†…å®¹ã¨çŸ›ç›¾ã—ã¦ã„ãªã„ã‹ç¢ºèª"}].map((t,r)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:r+1}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-color font-semibold",children:t.step}),e.jsx("span",{className:"text-text-secondary text-sm ml-2",children:t.detail})]})]},r))})]}),e.jsxs("div",{className:"bg-green-50/20 rounded-lg p-6 border-l-4 border-green-500",children:[e.jsxs("h3",{className:"text-lg font-bold text-green-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“Œ"}),e.jsx("span",{children:"æ³¨é‡ˆã®åŠ¹æœçš„ãªæ´»ç”¨æ³•"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[e.jsxs("p",{children:["âœ“ ",e.jsx("strong",{children:"æ³¨é‡ˆãŒã‚ã‚‹ = ãã®å˜èªãŒå†…å®¹ç†è§£ã«å¿…é ˆ"}),"ã¨ã„ã†å‡ºé¡Œè€…ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"]}),e.jsx("p",{children:"âœ“ æ³¨é‡ˆã®å˜èªã‚’ä¸¦ã¹ã‚‹ã¨ã€é•·æ–‡ã®ãƒ†ãƒ¼ãƒã‚„ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãŒæµ®ã‹ã³ä¸ŠãŒã‚‹"}),e.jsx("p",{children:"âœ“ ä¾‹: ã€Œç’°å¢ƒã€ã€Œæ±šæŸ“ã€ã€Œå¯¾ç­–ã€â†’ ç’°å¢ƒå•é¡Œã«ã¤ã„ã¦ã®æ–‡ç« ã ã¨äºˆæ¸¬ã§ãã‚‹"}),e.jsx("p",{className:"pt-2 italic",children:"ğŸ’¡ æœ¬æ–‡ã‚’èª­ã‚€å‰ã«æ³¨é‡ˆã ã‘ã§å†…å®¹ã‚’äºˆæƒ³ã™ã‚‹ç·´ç¿’ã‚’ã™ã‚‹ã¨åŠ¹æœçš„ï¼"})]})]})]})},$i=()=>e.jsx("div",{className:"dictionary-view",children:e.jsxs("div",{className:"dictionary-container",children:[e.jsx("h2",{children:"ğŸ“š è‹±å˜èªè¾æ›¸"}),e.jsx("p",{className:"coming-soon",children:"è¾æ›¸æ©Ÿèƒ½ã¯æº–å‚™ä¸­ã§ã™"})]})}),Pi=({isOpen:s,onClose:t,sets:r,onCreateSet:a,onDeleteSet:n,onEditSet:i,onRemoveWord:l})=>{const[o,c]=m.useState("manage"),[d,u]=m.useState(""),[g,x]=m.useState(""),[S,N]=m.useState(null),[w,b]=m.useState(null),[k,D]=m.useState(""),[A,j]=m.useState("");if(!s)return null;const z=()=>{d.trim()&&(a(d.trim(),g.trim()||void 0),u(""),x(""),c("manage"))},V=ee=>{b(ee.id),D(ee.name),j(ee.description||"")},ce=()=>{w&&k.trim()&&(i(w,k.trim(),A.trim()||void 0),b(null))},ie=()=>{b(null),D(""),j("")};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl sm:max-w-4xl w-full mx-auto max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"ğŸ“š ã‚«ã‚¹ã‚¿ãƒ å•é¡Œã‚»ãƒƒãƒˆç®¡ç†"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700:text-gray-200 text-2xl","aria-label":"é–‰ã˜ã‚‹",children:"âœ•"})]}),e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>c("manage"),className:`flex-1 px-6 py-3 font-medium ${o==="manage"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900:text-gray-200"}`,children:["ğŸ“‹ ã‚»ãƒƒãƒˆç®¡ç† (",r.length,")"]}),e.jsx("button",{onClick:()=>c("create"),className:`flex-1 px-6 py-3 font-medium ${o==="create"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900:text-gray-200"}`,children:"â• æ–°è¦ä½œæˆ"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:o==="manage"?e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"text-lg mb-2",children:"ğŸ“ ã¾ã ã‚»ãƒƒãƒˆãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsx("p",{className:"text-sm",children:"ã€Œæ–°è¦ä½œæˆã€ã‚¿ãƒ–ã‹ã‚‰æœ€åˆã®ã‚»ãƒƒãƒˆã‚’ä½œã‚Šã¾ã—ã‚‡ã†"})]}):r.map(ee=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 p-4",children:w===ee.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:k,onChange:oe=>D(oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900",placeholder:"ã‚»ãƒƒãƒˆå"}),e.jsx("textarea",{value:A,onChange:oe=>j(oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-900",placeholder:"èª¬æ˜ï¼ˆä»»æ„ï¼‰",rows:2}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:ce,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"ä¿å­˜"}),e.jsx("button",{onClick:ie,className:"px-4 py-2 bg-gray-300 text-gray-900 rounded-md hover:bg-gray-400:bg-gray-500",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"})]})]}):e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:ee.icon||"ğŸ“–"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:ee.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",ee.words.length,"èª)"]})]}),ee.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ee.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ä½œæˆ: ",new Date(ee.createdAt).toLocaleDateString("ja-JP")]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>V(ee),className:"text-blue-600 hover:text-blue-700:text-blue-300 text-sm","aria-label":"ç·¨é›†",children:"âœï¸"}),e.jsx("button",{onClick:()=>N(S===ee.id?null:ee.id),className:"text-gray-600 hover:text-gray-700:text-gray-300 text-sm","aria-label":S===ee.id?"æŠ˜ã‚ŠãŸãŸã‚€":"å±•é–‹",children:S===ee.id?"â–²":"â–¼"}),e.jsx("button",{onClick:()=>{confirm(`ã€Œ${ee.name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)&&n(ee.id)},className:"text-red-600 hover:text-red-700:text-red-300 text-sm","aria-label":"å‰Šé™¤",children:"ğŸ—‘ï¸"})]})]})}),S===ee.id&&e.jsx("div",{className:"p-4 bg-white",children:ee.words.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"ã¾ã å˜èªãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã›ã‚“"}):e.jsx("div",{className:"space-y-2",children:ee.words.map((oe,me)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:oe.word}),oe.ipa&&e.jsxs("span",{className:"text-sm text-blue-600",children:["/",oe.ipa,"/"]})]}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:oe.meaning}),oe.source&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["å‡ºå…¸: ",oe.source,oe.sourceDetail&&` (${oe.sourceDetail})`]})]}),e.jsx("button",{onClick:()=>l(ee.id,oe),className:"ml-4 text-red-600 hover:text-red-700:text-red-300","aria-label":"å‰Šé™¤",children:"â–"})]},`${oe.word}-${me}`))})})]},ee.id))}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["ã‚»ãƒƒãƒˆå ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:d,onChange:ee=>u(ee.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md bg-white text-gray-900",placeholder:"ä¾‹: è‹¦æ‰‹ãªå‰ç½®è©"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"èª¬æ˜ï¼ˆä»»æ„ï¼‰"}),e.jsx("textarea",{value:g,onChange:ee=>x(ee.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md bg-white text-gray-900",placeholder:"ä¾‹: é«˜æ ¡å…¥è©¦ã§ã‚ˆãå‡ºã‚‹å‰ç½®è©ã‚’ã¾ã¨ã‚ãŸã‚»ãƒƒãƒˆ",rows:3})]}),e.jsx("button",{onClick:z,disabled:!d.trim(),className:"w-full px-6 py-3 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-300:bg-gray-600 disabled:cursor-not-allowed font-medium",children:"â• ã‚»ãƒƒãƒˆã‚’ä½œæˆ"})]}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"ğŸ’¡ ãƒ’ãƒ³ãƒˆ"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ ã‚»ãƒƒãƒˆã‚’ä½œæˆå¾Œã€å„ã‚¿ãƒ–ã®+ãƒœã‚¿ãƒ³ã§å˜èªã‚’è¿½åŠ ã§ãã¾ã™"}),e.jsx("li",{children:"â€¢ ã‚»ãƒƒãƒˆåã¯å¾Œã‹ã‚‰ç·¨é›†ã§ãã¾ã™"}),e.jsx("li",{children:"â€¢ è¤‡æ•°ã®ã‚»ãƒƒãƒˆã‚’ä½œã£ã¦ã€ãƒ†ãƒ¼ãƒã”ã¨ã«æ•´ç†ã—ã¾ã—ã‚‡ã†"})]})]})]})})]})})};function Ai({onResetComplete:s,allQuestions:t,onQuestionSetsUpdated:r}){const[a,n]=m.useState(!1),[i,l]=m.useState(null),[o,c]=m.useState(!1),[d,u]=m.useState([]),[g,x]=m.useState(null),[S,N]=m.useState(null),[w,b]=m.useState([]),[k,D]=m.useState(null),[A,j]=m.useState([]),[z,V]=m.useState([]),[ce,ie]=m.useState([]),[ee,oe]=m.useState(0),me=()=>{try{let P=0;const q=[];for(let F=0;F<localStorage.length;F++){const X=localStorage.key(F);if(X){const G=localStorage.getItem(X);if(G){const Y=new Blob([G]).size;P+=Y,q.push({key:X,sizeMB:Y/(1024*1024)})}}}q.sort((F,X)=>X.sizeMB-F.sizeMB),l({totalMB:P/(1024*1024),details:q.slice(0,5)})}catch(P){p.error("ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã®å–å¾—ã‚¨ãƒ©ãƒ¼:",P)}},pe=m.useCallback(()=>{const P=os(14);u(P),x(Jt()),N(Yt()),b(ls(12)),D(cs());const F=Tt(10).map(G=>{const Y=t.find(ue=>ue.word&&G.word&&ue.word.toLowerCase()===G.word.toLowerCase());return{...G,etymology:Y==null?void 0:Y.etymology,relatedWords:Y==null?void 0:Y.relatedWords,difficulty:Y==null?void 0:Y.difficulty}});j(F),V(es(10)),ie(Kt(7,5));const X=ye();oe(X.statistics.streakDays),me()},[t]);m.useEffect(()=>{pe();const P=async()=>{const X=(await Lt()).some(G=>G.source==="weak-words");c(X)};P();const q=()=>{pe(),P()};if(typeof window<"u"&&window.addEventListener(lt,q),a){const F=setInterval(()=>{pe(),P()},1e3);return()=>{clearInterval(F),typeof window<"u"&&window.removeEventListener(lt,q)}}return()=>{typeof window<"u"&&window.removeEventListener(lt,q)}},[a,pe]);const be=()=>{confirm("æœ¬å½“ã«ã™ã¹ã¦ã®å­¦ç¿’è¨˜éŒ²ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å…ƒã«æˆ»ã›ã¾ã›ã‚“ã€‚")&&(is(),u([]),x(null),N(null),b([]),D(null),j([]),V([]),ie([]),oe(0),alert("å­¦ç¿’è¨˜éŒ²ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ"),pe(),s&&s())};return e.jsxs("div",{className:"stats-view",children:[e.jsxs("div",{className:"w-full mb-4 px-2",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-2 flex items-center gap-2",children:["ğŸ“† å­¦ç¿’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"ï¼ˆéå»12é€±é–“ï¼‰"})]}),e.jsx(Ii,{data:d})]}),e.jsxs("div",{className:"w-full mb-4 px-2",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-2 flex items-center gap-2",children:["ğŸ˜° è‹¦æ‰‹å˜èªãƒˆãƒƒãƒ—10",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"ï¼ˆè¦å¾©ç¿’ï¼‰"})]}),A.length>0?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-orange-200 p-6",children:[e.jsx("ul",{className:"space-y-3",children:A.map((P,q)=>e.jsx("li",{className:"p-4 bg-gradient-to-r from-orange-50 to-red-50/30/30 rounded-lg border border-orange-200 hover:shadow-md hover:scale-[1.02] transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 bg-orange-500 text-white font-bold rounded-full text-sm",children:q+1}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:P.word}),P.meaning&&e.jsx("span",{className:"text-sm text-gray-600 mt-1",children:P.meaning}),P.reading&&e.jsx("span",{className:"text-xs text-gray-500 mt-0.5",children:P.reading}),P.etymology&&e.jsxs("span",{className:"text-xs text-blue-600 mt-1",children:["ğŸ“– ",P.etymology]}),P.relatedWords&&e.jsxs("span",{className:"text-xs text-purple-600 mt-0.5",children:["ğŸ”— ",P.relatedWords]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:"px-3 py-1 bg-red-100/50 text-red-700 rounded-full font-medium",children:["âŒ ",P.mistakes,"å›"]}),P.recentAccuracy>0&&e.jsxs("span",{className:"px-3 py-1 bg-blue-100/50 text-blue-700 rounded-full font-medium",children:["æ­£è§£ç‡ ",P.recentAccuracy,"%"]})]})]})},q))}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsxs("button",{onClick:async()=>{try{const P=await Dt(`è‹¦æ‰‹èªå¥é›† ${new Date().toLocaleDateString("ja-JP")}`,20,3,60,t);await Ct(P),c(!0),r&&await r(),alert(`âœ… å•é¡Œã‚»ãƒƒãƒˆã€Œ${P.name}ã€ã‚’${o?"æ›´æ–°":"ä½œæˆ"}ã—ã¾ã—ãŸï¼
å’Œè¨³ãƒ»æš—è¨˜ãƒ»ã‚¹ãƒšãƒ«ã‚¿ãƒ–ã§åˆ©ç”¨ã§ãã¾ã™ã€‚`)}catch(P){p.error("å•é¡Œã‚»ãƒƒãƒˆä½œæˆã‚¨ãƒ©ãƒ¼:",P),alert("âŒ å•é¡Œã‚»ãƒƒãƒˆã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}},className:"flex-1 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center gap-2",children:["ğŸ“š å•é¡Œã‚»ãƒƒãƒˆã‚’",o?"æ›´æ–°":"ä½œæˆ",e.jsx("span",{className:"text-xs opacity-90",children:"(ä¸Šä½20èª)"})]}),e.jsx("button",{onClick:async()=>{const P=prompt("å–å¾—ã™ã‚‹è‹¦æ‰‹èªå¥ã®æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆ1-100ï¼‰","30");if(!P)return;const q=parseInt(P);if(isNaN(q)||q<1||q>100){alert("1ã‹ã‚‰100ã¾ã§ã®æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");return}try{const F=await Dt(`è‹¦æ‰‹èªå¥é›† ${new Date().toLocaleDateString("ja-JP")} (${q}èª)`,q,3,60,t);await Ct(F),c(!0),r&&await r(),alert(`âœ… å•é¡Œã‚»ãƒƒãƒˆã€Œ${F.name}ã€ã‚’${o?"æ›´æ–°":"ä½œæˆ"}ã—ã¾ã—ãŸï¼
å’Œè¨³ãƒ»æš—è¨˜ãƒ»ã‚¹ãƒšãƒ«ã‚¿ãƒ–ã§åˆ©ç”¨ã§ãã¾ã™ã€‚`)}catch(F){p.error("å•é¡Œã‚»ãƒƒãƒˆä½œæˆã‚¨ãƒ©ãƒ¼:",F),alert("âŒ å•é¡Œã‚»ãƒƒãƒˆã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ")}},className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",children:"âš™ï¸ ã‚«ã‚¹ã‚¿ãƒ "})]})]}):e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50/20/20 rounded-xl border-2 border-dashed border-green-300 p-8 text-center",children:[e.jsx("p",{className:"text-xl font-semibold text-green-700",children:"è‹¦æ‰‹ãªå˜èªã¯ã‚ã‚Šã¾ã›ã‚“ï¼ğŸ‰"}),e.jsx("p",{className:"text-sm text-green-600 mt-2",children:"é †èª¿ã«å­¦ç¿’ãŒé€²ã‚“ã§ã„ã¾ã™"})]})]}),e.jsx("div",{className:"w-full mb-4 px-2",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg border-2 border-red-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 flex items-center gap-2",children:"âš ï¸ ãƒ‡ãƒ¼ã‚¿ã®ãƒªã‚»ãƒƒãƒˆ"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ã™ã¹ã¦ã®å­¦ç¿’è¨˜éŒ²ã‚’å‰Šé™¤ã—ã¾ã™ã€‚ã“ã®æ“ä½œã¯å…ƒã«æˆ»ã›ã¾ã›ã‚“ã€‚"})]}),e.jsx("button",{onClick:be,className:"px-8 py-3 bg-red-600 hover:bg-red-700:bg-red-800 text-white font-bold rounded-lg shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-200 flex items-center gap-2",children:"ğŸ—‘ï¸ ãƒªã‚»ãƒƒãƒˆå®Ÿè¡Œ"})]})})}),i&&e.jsxs("div",{className:"w-full mb-4 px-2",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2 flex items-center gap-2",children:"ğŸ’¾ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨é‡"}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-purple-200 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"åˆè¨ˆä½¿ç”¨é‡"}),e.jsxs("span",{className:`text-xl font-bold ${i.totalMB>4?"text-red-600":"text-green-600"}`,children:[i.totalMB.toFixed(2)," MB"," ",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/ ç´„ 5-10 MB"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden relative",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 absolute left-0 top-0 ${i.totalMB>8?"bg-red-600 w-full":i.totalMB>4?"bg-yellow-500":"bg-green-500"}`,"data-progress":Math.min(i.totalMB/10*100,100)})}),i.totalMB>4&&e.jsx("p",{className:"mt-2 text-sm font-medium text-red-600 flex items-center gap-1",children:"âš ï¸ å®¹é‡ãŒä¸è¶³ã—ã¦ã„ã¾ã™"})]}),e.jsxs("details",{className:"mt-4",children:[e.jsx("summary",{className:"cursor-pointer text-blue-600 hover:text-blue-700:text-blue-300 font-medium flex items-center gap-2",children:"ğŸ“Š è©³ç´°ã‚’è¡¨ç¤º"}),e.jsx("ul",{className:"mt-4 space-y-2",children:i.details.map((P,q)=>e.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("code",{className:"text-sm text-gray-700 font-mono",children:P.key}),e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[P.sizeMB.toFixed(2)," MB"]})]},q))}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50/20 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-700 flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:"ğŸ’¡"}),e.jsx("span",{children:"ãƒ’ãƒ³ãƒˆ: ãƒ‡ãƒ¼ã‚¿ãŒå¤§ãããªã‚Šã™ããŸå ´åˆã¯ã€å¤ã„æˆç¸¾ã‚’å‰Šé™¤ã™ã‚‹ã¨å®¹é‡ã‚’ç¯€ç´„ã§ãã¾ã™ã€‚"})]})})]})]})]})]})}function Ii({data:s}){const t=new Date;t.setHours(0,0,0,0);const r=$t(t),a=s.find(N=>N.date===r);if(s.length===0)return e.jsxs("div",{className:"w-full p-8 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300 text-center",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"å­¦ç¿’ã‚’é–‹å§‹ã™ã‚‹ã¨ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ãŒè¡¨ç¤ºã•ã‚Œã¾ã™"}),e.jsxs("p",{className:"text-xs text-red-500 mt-4",children:["DEBUG: ä»Šæ—¥=",r,", ãƒ‡ãƒ¼ã‚¿ä»¶æ•°=",s.length,", ä»Šæ—¥ã®ãƒ‡ãƒ¼ã‚¿=",a?`${a.count}å•`:"ãªã—"]})]});const n=new Date(t);n.setDate(n.getDate()-13);const i=new Map(s.map(N=>[N.date,N])),l=[[],[]],o=new Date(t),c=o.getDay(),d=c===0?6:c-1;o.setDate(o.getDate()-d);const u=new Date(o);u.setDate(u.getDate()-7);const g=new Date(u);for(let N=0;N<2;N++)for(let w=0;w<7;w++){const b=$t(g),k=i.get(b),D=new Date(g);if(D.setHours(0,0,0,0),D.getTime()>t.getTime())l[N].push(null);else{const A=k?Math.round(k.count*k.accuracy/100):0,j=k?{...k,correct:A}:{date:b,count:0,accuracy:0,correct:0};l[N].push(j)}g.setDate(g.getDate()+1)}const x=N=>N===0?"calendar-color-0":N<10?"calendar-color-1":N<20?"calendar-color-2":N<30?"calendar-color-3":"calendar-color-4",S=["æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ","æ—¥"];return e.jsxs("div",{className:"w-full p-6 bg-white rounded-xl shadow-lg border-2 border-blue-200",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-max mx-auto w-fit",children:[e.jsx("div",{className:"flex gap-2 mb-2",children:S.map((N,w)=>e.jsx("div",{className:"w-20 h-8 flex items-center justify-center text-sm font-bold text-gray-700",children:N},w))}),e.jsx("div",{className:"flex flex-col gap-2",children:l.map((N,w)=>e.jsx("div",{className:"flex gap-2",children:N.map((b,k)=>{if(!b)return e.jsx("div",{className:"w-20 h-20 rounded bg-gray-100 border border-dashed border-gray-300"},k);const D=new Date(b.date),A=["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"][D.getDay()],j=b.date===r,z={"calendar-color-0":"bg-gray-200 text-gray-500","calendar-color-1":"bg-blue-300 text-blue-900","calendar-color-2":"bg-blue-400 text-white","calendar-color-3":"bg-blue-500 text-white","calendar-color-4":"bg-blue-600 text-white"};return e.jsx("div",{className:`w-20 h-20 rounded-lg flex items-center justify-center text-xs font-bold transition-all duration-200 hover:scale-105 hover:shadow-xl cursor-pointer border-2 ${z[x(b.count)]} ${j?"ring-4 ring-yellow-400 ring-offset-2 ring-offset-white shadow-2xl border-yellow-400":"border-transparent"}`,title:`${b.date} (${A})${j?" [ä»Šæ—¥]":""}: ${b.count}å• (æ­£ç­”ç‡${b.accuracy.toFixed(0)}%, æ­£è§£${b.correct}å•)`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-base",children:b.correct}),e.jsx("span",{className:"text-[10px] opacity-80",children:"/"}),e.jsx("span",{className:"text-sm",children:b.count})]})},k)})},w))})]})}),e.jsxs("div",{className:"flex flex-col gap-2 mt-6 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"å­¦ç¿’é‡:"}),e.jsx("span",{className:"text-xs",children:"å°‘"}),e.jsx("div",{className:"w-8 h-8 rounded bg-blue-300 border border-gray-300"}),e.jsx("div",{className:"w-8 h-8 rounded bg-blue-400 border border-gray-300"}),e.jsx("div",{className:"w-8 h-8 rounded bg-blue-500 border border-gray-300"}),e.jsx("div",{className:"w-8 h-8 rounded bg-blue-600 border border-gray-300"}),e.jsx("span",{className:"text-xs",children:"å¤š"})]}),e.jsxs("div",{className:"text-center text-xs text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"è¡¨ç¤º:"})," æ­£è§£æ•°/å‡ºé¡Œæ•° |",e.jsx("span",{className:"ml-2 inline-block w-6 h-6 rounded bg-gray-200 border-2 border-yellow-400 align-middle"}),e.jsx("span",{className:"ml-1",children:"= ä»Šæ—¥"})]})]})]})}function _i({allQuestions:s,onStartSession:t}){const[r,a]=m.useState(null),[n,i]=m.useState(null),[l]=m.useState(3),[o,c]=m.useState({totalLearned:0,totalReviewed:0,averageAccuracy:0,estimatedCompletion:90});if(m.useEffect(()=>{const w=localStorage.getItem("learning-schedule-90days");if(w)try{const b=JSON.parse(w),k=Math.floor((Date.now()-b.startDate)/(1e3*60*60*24)),D=b.totalDays;b.currentDay=Math.min(k+1,D);const A=Math.floor(D/3),j=Math.floor(D*2/3);b.phase=b.currentDay<=A?1:b.currentDay<=j?2:3,a(b),i(Ks(b,s))}catch(b){p.error("Failed to load schedule:",b)}},[s]),m.useEffect(()=>{if(r){c(Xs(r));const w=document.querySelector(".progress-bar");if(w){const b=r.currentDay,k=r.totalDays,D=b/k*100;w.style.width=`${D}%`}}},[r]),!r)return null;const d=["åŸºç¤å›ºã‚æœŸ","å¿œç”¨æ‹¡å¤§æœŸ","å®Œæˆãƒ»å®šç€æœŸ"],u=r.phase,g=r.currentDay,x=r.totalDays,S=g/x*100,N=Zs(r);return e.jsxs("div",{className:"learning-plan-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsxs("div",{className:"day-counter",children:[e.jsx("span",{className:"day-number",children:g}),e.jsxs("span",{className:"day-label",children:["/ ",x,"æ—¥ç›®"]})]}),e.jsxs("div",{className:"phase-indicator",children:[e.jsxs("span",{className:`phase-badge phase-${u}`,children:["Phase ",u]}),e.jsx("span",{className:"phase-name",children:d[u-1]})]}),e.jsxs("div",{className:"progress-bar-container",children:[e.jsx("div",{className:`progress-bar phase-${u}`}),e.jsxs("span",{className:"progress-label",children:[S.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"stats-summary",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ“š"}),e.jsx("div",{className:"stat-value",children:o.totalLearned}),e.jsx("div",{className:"stat-label",children:"å­¦ç¿’æ¸ˆã¿å˜èª"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"âœ…"}),e.jsxs("div",{className:"stat-value",children:[o.averageAccuracy.toFixed(1),"%"]}),e.jsx("div",{className:"stat-label",children:"å¹³å‡æ­£ç­”ç‡"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"ğŸ¯"}),e.jsxs("div",{className:"stat-value",children:[N>0?N.toFixed(0):0,"%"]}),e.jsx("div",{className:"stat-label",children:"ä»Šé€±ã®é”æˆç‡"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"â±ï¸"}),e.jsx("div",{className:"stat-value",children:o.estimatedCompletion}),e.jsx("div",{className:"stat-label",children:"å®Œäº†ã¾ã§ï¼ˆæ—¥ï¼‰"})]})]}),n&&e.jsxs("div",{className:"today-plan",children:[e.jsxs("h2",{children:["ğŸ“– ä»Šæ—¥ã®å­¦ç¿’ãƒ—ãƒ©ãƒ³ï¼ˆDay ",g,"ï¼‰"]}),e.jsxs("div",{className:"session-cards",children:[e.jsxs("div",{className:"session-card morning",children:[e.jsxs("div",{className:"session-header",children:[e.jsx("span",{className:"session-icon",children:"ğŸŒ…"}),e.jsxs("div",{className:"session-info",children:[e.jsx("h3",{children:"æœï¼šæ–°è¦å­¦ç¿’"}),e.jsxs("p",{children:[n.morning.newWords.length,"èª Â· 20åˆ†"]})]})]}),e.jsx("button",{onClick:()=>t("morning",n.morning.newWords),className:"btn-start-session",disabled:n.morning.newWords.length===0,children:n.morning.newWords.length===0?"å˜èªãªã—":"é–‹å§‹ã™ã‚‹"})]}),e.jsxs("div",{className:"session-card afternoon",children:[e.jsxs("div",{className:"session-header",children:[e.jsx("span",{className:"session-icon",children:"â˜€ï¸"}),e.jsxs("div",{className:"session-info",children:[e.jsx("h3",{children:"æ˜¼ï¼šå¼±ç‚¹å¾©ç¿’"}),e.jsxs("p",{children:[n.afternoon.reviewWords.length,"èª Â· 15åˆ†"]})]})]}),e.jsx("button",{onClick:()=>t("afternoon",n.afternoon.reviewWords),className:"btn-start-session",disabled:n.afternoon.reviewWords.length===0,children:n.afternoon.reviewWords.length===0?"å˜èªãªã—":"é–‹å§‹ã™ã‚‹"})]}),e.jsxs("div",{className:"session-card evening",children:[e.jsxs("div",{className:"session-header",children:[e.jsx("span",{className:"session-icon",children:"ğŸŒ™"}),e.jsxs("div",{className:"session-info",children:[e.jsx("h3",{children:"å¤œï¼šç·åˆæ¼”ç¿’"}),e.jsxs("p",{children:[n.evening.mixedWords.length,"èª Â· 20åˆ†"]})]})]}),e.jsx("button",{onClick:()=>t("evening",n.evening.mixedWords),className:"btn-start-session",disabled:n.evening.mixedWords.length===0,children:n.evening.mixedWords.length===0?"å˜èªãªã—":"é–‹å§‹ã™ã‚‹"})]})]})]}),e.jsxs("div",{className:"milestones",children:[e.jsx("h2",{children:"ğŸ† ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³"}),e.jsx("div",{className:"milestone-list",children:r.milestones.map((w,b)=>{const k=g>w.day,D=g===w.day,A=o.totalLearned>=w.wordsTarget;return e.jsxs("div",{className:`milestone-item ${A?"achieved":""} ${D?"current":""} ${k?"passed":""}`,children:[e.jsxs("div",{className:"milestone-day",children:["Day ",w.day]}),e.jsx("div",{className:"milestone-title",children:w.title}),e.jsxs("div",{className:"milestone-target",children:[w.wordsTarget,"èª"]}),A&&e.jsx("span",{className:"check-mark",children:"âœ“"})]},b)})})]})]})}function Ti({allQuestions:s,onStartSession:t,_selectedDataSource:r="all",_onDataSourceChange:a,customQuestionSets:n,onOpenCustomSetManagement:i}){const[l,o]=m.useState(()=>{const j=localStorage.getItem("batchSize");return j?parseInt(j,10):20}),[c,d]=m.useState(()=>localStorage.getItem("aiPersonality")||"kind-teacher"),u=j=>{d(j),localStorage.setItem("aiPersonality",j)},[g,x]=m.useState(()=>{const j=localStorage.getItem("voiceGender");return j==="female"||j==="male"?j:"female"}),[S,N]=m.useState(()=>{const j=localStorage.getItem("speechRate");return j?parseFloat(j):.9}),w=j=>{x(j),localStorage.setItem("voiceGender",j)},b=j=>{N(j),localStorage.setItem("speechRate",j.toString())},[k,D]=m.useState(()=>{const j=localStorage.getItem("darkMode");return j==="system"||j==="light"||j==="dark"?j:j==="true"?"dark":j==="false"?"light":"system"}),A=j=>{let z=!1;j==="system"?z=window.matchMedia("(prefers-color-scheme: dark)").matches:z=j==="dark",document.documentElement.classList.toggle("dark",z)};return m.useEffect(()=>{if(A(k),k==="system"){const j=window.matchMedia("(prefers-color-scheme: dark)"),z=()=>{A("system")};return j.addEventListener("change",z),()=>j.removeEventListener("change",z)}},[k]),s.length,e.jsxs("div",{className:"w-full px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"bg-card-bg rounded-xl p-6 shadow-md border-2 border-card-border",children:[e.jsxs("h3",{className:"text-xl font-bold text-text-color mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“š"}),e.jsx("span",{children:"ã‚«ã‚¹ã‚¿ãƒ å•é¡Œã‚»ãƒƒãƒˆ"}),e.jsxs("span",{className:"text-sm font-normal text-text-secondary",children:["(",n.length,"å€‹)"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:i,className:"w-full px-6 py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-center rounded-lg font-semibold hover:from-purple-600 hover:to-pink-600 transition-all shadow-md flex items-center justify-center gap-2",children:[e.jsx("span",{children:"ğŸ“š"}),e.jsx("span",{children:"ã‚«ã‚¹ã‚¿ãƒ ã‚»ãƒƒãƒˆã‚’ç®¡ç†"})]}),e.jsx("p",{className:"text-sm text-text-secondary bg-bg-secondary px-4 py-3 rounded-lg",children:"ğŸ’¡ è‡ªåˆ†ã ã‘ã®ã‚ªãƒªã‚¸ãƒŠãƒ«å•é¡Œã‚»ãƒƒãƒˆã‚’ä½œæˆãƒ»ç®¡ç†ã§ãã¾ã™ã€‚å­¦ç¿’ã—ãŸã„å˜èªã‚’è‡ªç”±ã«è¿½åŠ ã—ã¦ã€åŠ¹ç‡çš„ã«å¾©ç¿’ã—ã¾ã—ã‚‡ã†ã€‚"})]})]}),e.jsx(_i,{allQuestions:s,onStartSession:t}),e.jsxs("div",{className:"bg-card-bg rounded-xl p-6 shadow-md border-2 border-card-border",children:[e.jsxs("h3",{className:"text-xl font-bold text-text-color mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ­"}),e.jsx("span",{children:"AIã®äººæ ¼"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(gn).map(([j,z])=>e.jsxs("button",{className:`flex flex-col items-center gap-2 p-4 rounded-lg border-2 transition-all duration-200 ${c===j?"bg-primary border-primary text-white shadow-lg scale-105":"bg-bg-secondary border-border-color text-text-color hover:border-primary hover:shadow-md hover:scale-102"}`,onClick:()=>u(j),children:[e.jsx("div",{className:"text-3xl",children:z.avatar}),e.jsx("div",{className:"font-semibold text-sm",children:z.name}),e.jsx("div",{className:"text-xs opacity-80 text-center",children:z.description})]},j))})]}),e.jsxs("div",{className:"bg-card-bg rounded-xl p-6 shadow-md border-2 border-card-border",children:[e.jsxs("h3",{className:"text-xl font-bold text-text-color mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ”Š"}),e.jsx("span",{children:"éŸ³å£°è¨­å®š"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-base font-semibold text-text-color mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ¤"}),e.jsx("span",{children:"å£°ã®ç¨®é¡"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{className:`flex flex-col items-center gap-2 px-4 py-4 rounded-lg border-2 transition-all duration-200 ${g==="female"?"bg-primary border-primary text-white shadow-lg scale-105":"bg-bg-secondary border-border-color text-text-color hover:border-primary hover:shadow-md"}`,onClick:()=>w("female"),children:[e.jsx("div",{className:"text-3xl",children:"ğŸ‘©"}),e.jsx("div",{className:"text-sm font-semibold",children:"å¥³æ€§"})]}),e.jsxs("button",{className:`flex flex-col items-center gap-2 px-4 py-4 rounded-lg border-2 transition-all duration-200 ${g==="male"?"bg-primary border-primary text-white shadow-lg scale-105":"bg-bg-secondary border-border-color text-text-color hover:border-primary hover:shadow-md"}`,onClick:()=>w("male"),children:[e.jsx("div",{className:"text-3xl",children:"ğŸ‘¨"}),e.jsx("div",{className:"text-sm font-semibold",children:"ç”·æ€§"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-base font-semibold text-text-color mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"â±ï¸"}),e.jsx("span",{children:"ç™ºéŸ³é€Ÿåº¦"}),e.jsx("span",{className:"text-xs font-normal text-text-secondary",children:"(WPM: Words Per Minute)"})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"font-bold text-primary text-4xl mb-1",children:Math.round(S*150)}),e.jsx("div",{className:"text-sm text-text-secondary",children:"WPM"}),e.jsx("div",{className:"text-xs text-text-secondary mt-2",children:S<.75?"ğŸ¢ ã‚†ã£ãã‚Šã¨ç™ºéŸ³":S>=.95?"ğŸš€ ãƒã‚¤ãƒ†ã‚£ãƒ–ä¸¦ã®é€Ÿåº¦":"ğŸ¯ é«˜æ ¡å…¥è©¦ãƒªã‚¹ãƒ‹ãƒ³ã‚°ç›¸å½“"})]}),e.jsxs("div",{className:"relative mb-8",children:[e.jsx("input",{type:"range",min:"0.6",max:"1.0",step:"0.05",value:S,onChange:j=>b(parseFloat(j.target.value)),className:"w-full h-3 bg-border-color rounded-lg appearance-none cursor-pointer accent-primary","aria-label":"ç™ºéŸ³é€Ÿåº¦"}),e.jsxs("div",{className:"absolute top-0 left-0 w-full h-3 pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/2 left-0 -translate-y-1/2 w-0.5 h-5 bg-gray-400"}),e.jsx("div",{className:"absolute top-1/2 left-[37.5%] -translate-y-1/2 w-0.5 h-5 bg-blue-500"}),e.jsx("div",{className:"absolute top-1/2 left-[75%] -translate-y-1/2 w-0.5 h-5 bg-green-500"}),e.jsx("div",{className:"absolute top-1/2 left-full -translate-y-1/2 -translate-x-0.5 w-0.5 h-5 bg-orange-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center text-xs",children:[e.jsxs("button",{onClick:()=>b(.6),className:"bg-gray-50/50 rounded-lg p-3 border border-gray-200 hover:bg-gray-100:bg-gray-700/50 transition-colors cursor-pointer",children:[e.jsx("div",{className:"font-bold text-gray-600",children:"90 WPM"}),e.jsx("div",{className:"text-gray-500 mt-1",children:"æœ€ä½é€Ÿåº¦"})]}),e.jsxs("button",{onClick:()=>b(.75),className:"bg-blue-50/20 rounded-lg p-3 border border-blue-200 hover:bg-blue-100:bg-blue-800/30 transition-colors cursor-pointer",children:[e.jsx("div",{className:"font-bold text-blue-600",children:"113 WPM"}),e.jsx("div",{className:"text-blue-500 mt-1",children:"åˆå­¦è€…å‘ã‘"})]}),e.jsxs("button",{onClick:()=>b(.9),className:"bg-green-50/20 rounded-lg p-3 border border-green-200 hover:bg-green-100:bg-green-800/30 transition-colors cursor-pointer",children:[e.jsx("div",{className:"font-bold text-green-600",children:"135 WPM"}),e.jsx("div",{className:"text-green-500 mt-1",children:"é«˜æ ¡å…¥è©¦"})]}),e.jsxs("button",{onClick:()=>b(1),className:"bg-orange-50/20 rounded-lg p-3 border border-orange-200 hover:bg-orange-100:bg-orange-800/30 transition-colors cursor-pointer",children:[e.jsx("div",{className:"font-bold text-orange-600",children:"150 WPM"}),e.jsx("div",{className:"text-orange-500 mt-1",children:"ãƒã‚¤ãƒ†ã‚£ãƒ–"})]})]})]})]})]}),e.jsxs("div",{className:"bg-card-bg rounded-xl p-6 shadow-md border-2 border-card-border",children:[e.jsxs("h3",{className:"text-xl font-bold text-text-color mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“‹"}),e.jsx("span",{children:"ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"block w-full px-4 py-3 bg-primary text-white text-center rounded-lg font-semibold hover:bg-btn-primary-hover transition-colors shadow-md",children:"ğŸ“„ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼"}),e.jsx("p",{className:"text-sm text-text-secondary bg-bg-secondary px-4 py-3 rounded-lg text-center",children:"æœ¬ã‚¢ãƒ—ãƒªã¯å€‹äººæƒ…å ±ã‚’åé›†ã›ãšã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶å†…ã«ã®ã¿ä¿å­˜ã•ã‚Œã¾ã™ã€‚"})]})]})]})}const Ei=({isVisible:s,message:t="èª­ã¿è¾¼ã¿ä¸­..."})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 pointer-events-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center gap-6 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-gray-200"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-blue-600 animate-spin"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-800 font-semibold text-lg",children:t}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"æº–å‚™ä¸­ã§ã™..."})]})]})}):null;let bt=null,vt=null;async function Es(){return bt||(bt=(await Ve(()=>Promise.resolve().then(()=>Ni),void 0)).default,bt)}async function Rs(){return vt||(vt=(await Ve(()=>Promise.resolve().then(()=>ji),void 0)).default,vt)}function Ws(){typeof requestIdleCallback<"u"?requestIdleCallback(()=>{Es(),Rs()}):setTimeout(()=>{Es(),Rs()},2e3)}const jr=["è¨€èªåŸºæœ¬","å­¦æ ¡ãƒ»å­¦ç¿’","æ—¥å¸¸ç”Ÿæ´»","äººãƒ»ç¤¾ä¼š","è‡ªç„¶ãƒ»ç’°å¢ƒ","é£Ÿãƒ»å¥åº·","é‹å‹•ãƒ»å¨¯æ¥½","å ´æ‰€ãƒ»ç§»å‹•","æ™‚é–“ãƒ»æ•°é‡","ç§‘å­¦ãƒ»æŠ€è¡“"];function Ri(){try{let s=0;const t=[];for(let a=0;a<localStorage.length;a++){const n=localStorage.key(a);if(n){const i=localStorage.getItem(n);if(i){const l=new Blob([i]).size;s+=l,t.push({key:n,size:l})}}}const r=s/(1024*1024);p.log(`ğŸ“Š LocalStorageä½¿ç”¨é‡: ${r.toFixed(2)}MB`),t.sort((a,n)=>n.size-a.size),t.slice(0,5).forEach(a=>{const n=a.size/1048576;p.log(`  - ${a.key}: ${n.toFixed(2)}MB`)}),r>4&&(p.warn("âš ï¸ LocalStorageã®ä½¿ç”¨é‡ãŒå¤šã„ãŸã‚ã€å¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•å‰Šé™¤ã—ã¦ã„ã¾ã™ã€‚"),Be(),p.log("è‡ªå‹•åœ§ç¸®ãŒå®Œäº†ã—ã¾ã—ãŸã€‚"))}catch(s){p.error("LocalStorageã‚µã‚¤ã‚ºã®ç¢ºèªã‚¨ãƒ©ãƒ¼:",s)}}function Wi(){const[s,t]=m.useState("translation"),[r,a]=m.useState(!1),[n,i]=m.useState([]),[l,o]=m.useState(()=>aa()),[c,d]=m.useState(!1);m.useEffect(()=>{na(l)},[l]),m.useEffect(()=>{!window.location.hostname.includes("github.io")&&Ve(()=>import("./scoreBoardTests-BE5P4cth.js"),__vite__mapDeps([0,1,2])).then(()=>{p.log("âœ… ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ"),p.log("   ä½¿ã„æ–¹: window.runScoreBoardTests()"),p.log('   ã¾ãŸã¯: window.checkCurrentScoreBoardDisplay("translation")')}).catch(C=>{p.error("ãƒ†ã‚¹ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",C)})},[]);const{categoryList:u,setCategoryList:g,selectedCategory:x,setSelectedCategory:S,selectedDifficulty:N,setSelectedDifficulty:w,selectedWordPhraseFilter:b,setSelectedWordPhraseFilter:k,selectedPhraseTypeFilter:D,setSelectedPhraseTypeFilter:A,selectedDataSource:j,setSelectedDataSource:z}=sa(),[V,ce]=m.useState([]),[ie,ee]=m.useState(!1),oe=m.useRef(!1);m.useEffect(()=>{oe.current=!1},[s]),m.useEffect(()=>{ie&&(s==="translation"||s==="spelling")&&!oe.current&&P.questions.length===0&&(oe.current=!0,$())},[ie,s]);const[me]=m.useState(()=>{const E=localStorage.getItem("quiz-adaptive-mode");return E?JSON.parse(E):!1}),{sessionStats:pe,setSessionStats:be,quizState:P,setQuizState:q,reviewFocusMode:F,setReviewFocusMode:X,reviewQuestionPool:G,setReviewQuestionPool:Y,reviewCorrectStreak:ue,setReviewCorrectStreak:U}=ra(),ne=m.useRef(0),Ne=m.useRef(0),Ce=m.useRef([]),De=m.useRef(0),Te=m.useRef([]),Le=m.useRef(null),K=m.useRef(null),Q=m.useRef(new Map),re=m.useRef([]),J=m.useRef([]);ta(),m.useEffect(()=>{const E=L=>{const B=L==="dark"||L==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark-mode",B)},h=localStorage.getItem("darkMode")||"system";E(h);const _=window.matchMedia("(prefers-color-scheme: dark)"),M=()=>{const L=localStorage.getItem("darkMode");(!L||L==="system")&&E("system")};return _.addEventListener("change",M),()=>_.removeEventListener("change",M)},[]),m.useEffect(()=>{(async()=>{try{p.log("ğŸ”„ ãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒã‚§ãƒƒã‚¯ä¸­...");try{await Wr()}catch(Z){p.error("Migration error (continuing):",Z)}Lr();let C=!1;try{const Z=await Be();Z&&Z.wordProgress&&Z.statistics&&Z.questionSetStats?(Ke(Z),p.log("âœ… Progress data loaded successfully"),C=!0):p.warn("âš ï¸ Progress data incomplete, reinitializing")}catch(Z){p.error("Progress load error:",Z)}if(!C){p.log("ğŸ”§ Initializing fresh progress data");const Z={results:[],statistics:{totalQuizzes:0,totalQuestions:0,totalCorrect:0,averageScore:0,bestScore:0,streakDays:0,lastStudyDate:0,studyDates:[]},questionSetStats:{},wordProgress:{},categoryStats:{},difficultyStats:{}};Ke(Z);try{localStorage.setItem("progress-data",JSON.stringify(Z))}catch(ge){p.warn("Failed to save initial progress:",ge)}}Ri();const _=await(await fetch("/data/vocabulary/high-school-entrance-words.csv")).text(),M=ut(_).map(Z=>({...Z,source:"junior"}));let L=[];try{const ge=await(await fetch("/data/vocabulary/high-school-entrance-phrases.csv")).text();L=ut(ge).map(je=>({...je,source:"junior"})),p.log(`ğŸ“š é«˜æ ¡å—é¨“è‹±ç†Ÿèªã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ: ${L.length}å€‹`)}catch(Z){p.warn("é«˜æ ¡å—é¨“è‹±ç†Ÿèªãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:",Z)}let B=[];try{const ge=await(await fetch("/data/vocabulary/high-school-intermediate-words.csv")).text();B=ut(ge).map(je=>({...je,source:"intermediate"})),p.log(`ğŸ“š ä¸­ç´š1800å˜èªã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ: ${B.length}å€‹`)}catch(Z){p.warn("ä¸­ç´š1800å˜èªãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:",Z)}let T=[];try{const ge=await(await fetch("/data/vocabulary/high-school-intermediate-phrases.csv")).text();T=ut(ge).map(je=>({...je,source:"intermediate"})),p.log(`ğŸ“š ä¸­ç´š1800ç†Ÿèªã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ: ${T.length}å€‹`)}catch(Z){p.warn("ä¸­ç´š1800ç†Ÿèªãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:",Z)}const te=new Map;try{for(const Z of[1,2,3])try{const je=await(await fetch(`/data/sentence-ordering-grade${Z}.json`)).json();je.units&&je.units.forEach(ve=>{const Se=`${Z}å¹´ ${ve.unit}`;te.set(ve.unit,`${ve.unit}: ${ve.title}`),te.set(Se,`${Z}å¹´ ${ve.unit}: ${ve.title}`)})}catch(ge){p.warn(`Grade ${Z} sentence ordering data not found:`,ge)}}catch(Z){p.warn("Unit title mapping failed:",Z)}const de=[...M,...L,...B,...T];if(de.length>0){i(de);try{const le=de.map(Re=>({word:Re.word,difficulty:Re.difficulty||"beginner"}));localStorage.setItem("all-questions-cache",JSON.stringify(le))}catch(le){p.warn("Questions cache save failed:",le)}const je=Array.from(new Set(de.map(le=>le.category||"").filter(le=>le))).map(le=>te.has(le)?te.get(le):le).sort((le,Re)=>{const Ie=/(\d+)å¹´\s+Unit\s+(\d+)/i,Oe=le.match(Ie),Ue=Re.match(Ie);if(Oe&&Ue){const He=parseInt(Oe[1],10),Je=parseInt(Ue[1],10);if(He!==Je)return He-Je;const Ye=parseInt(Oe[2],10),Nr=parseInt(Ue[2],10);return Ye-Nr}const it=/Unit\s+(\d+)/i,ke=le.match(it),Fe=Re.match(it);if(ke&&Fe){const He=parseInt(ke[1],10),Je=parseInt(Fe[1],10);return He-Je}return le.localeCompare(Re,"ja")});g(je);const ve={id:"all-set",name:"é«˜æ ¡å—é¨“ç·åˆ",questions:de,createdAt:Date.now(),isBuiltIn:!0,source:"é«˜æ ¡å—é¨“2758èª + é«˜æ ¡å—é¨“æ¨™æº–1791èª"},Se={id:"advanced-set",name:"é«˜æ ¡å—é¨“ä¸Šç´š",questions:de.filter(le=>le.difficulty==="advanced"),createdAt:Date.now(),isBuiltIn:!0,source:"high-school-entrance (å˜èª2662 + ç†Ÿèª96)"},ze={id:"standard-set",name:"é«˜æ ¡å—é¨“æ¨™æº–",questions:de.filter(le=>le.difficulty==="intermediate"||le.difficulty==="beginner"),createdAt:Date.now(),isBuiltIn:!0,source:"high-school-intermediate (å˜èª1579 + ç†Ÿèª212)"},{getCustomQuestionSets:ae}=await Ve(async()=>{const{getCustomQuestionSets:le}=await Promise.resolve().then(()=>Ms);return{getCustomQuestionSets:le}},void 0),we=(await ae()).map(le=>{const Re=new Date(le.createdAt),Ie=`${Re.getMonth()+1}/${Re.getDate()}`,Oe=le.source==="reading"?"é•·æ–‡":le.source==="weak-words"?"è‹¦æ‰‹èªå¥":"æ‰‹å‹•";return{id:le.id,name:`ã‚«ã‚¹ã‚¿ãƒ å•é¡Œï¼ˆ${Oe}_${Ie}ï¼‰`,questions:le.questions,createdAt:le.createdAt,isBuiltIn:!1,source:le.source==="reading"?"é•·æ–‡èª­è§£":le.source==="weak-words"?"è‹¦æ‰‹èªå¥":"æ‰‹å‹•ä½œæˆ"}});ce([ve,Se,ze,...we]),ee(!0)}}catch(C){p.error("è‹±å˜èªãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:",C),alert("è‹±å˜èªãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ")}})()},[]);const Pe=async()=>{try{const{getCustomQuestionSets:E}=await Ve(async()=>{const{getCustomQuestionSets:M}=await Promise.resolve().then(()=>Ms);return{getCustomQuestionSets:M}},void 0),C=await E(),h=V.find(M=>M.isBuiltIn),_=C.map(M=>({id:M.id,name:M.name,questions:M.questions,createdAt:M.createdAt,isBuiltIn:!1,source:M.source==="reading"?"é•·æ–‡èª­è§£":M.source==="weak-words"?"è‹¦æ‰‹èªå¥":"æ‰‹å‹•ä½œæˆ"}));h&&ce([h,..._])}catch(E){p.error("ã‚«ã‚¹ã‚¿ãƒ å•é¡Œã‚»ãƒƒãƒˆã®å†èª­ã¿è¾¼ã¿ã«å¤±æ•—:",E)}};m.useEffect(()=>{localStorage.setItem("quiz-adaptive-mode",JSON.stringify(me))},[me]),m.useEffect(()=>{localStorage.setItem("selectedDataSource",j)},[j]),m.useEffect(()=>{P.questions.length>0&&$()},[j,x,N,b,D]);const fe=()=>{let E=n;if(j!=="all"&&(E=E.filter(C=>C.source===j)),x!=="all"&&(E=E.filter(C=>C.category===x)),N!=="all"){const C={all:"",beginner:"åˆç´š",intermediate:"ä¸­ç´š",advanced:"ä¸Šç´š"};E=E.filter(h=>h.difficulty===C[N])}return b==="words-only"?E=E.filter(C=>!C.word.includes(" ")):b==="phrases-only"&&(E=E.filter(C=>C.word.includes(" ")),D!=="all"&&(E=E.filter(C=>Ys(C.word)===D))),E=ss(E),E},We=(E,C)=>{const h=ia(E,C);o(_=>({..._,sets:[..._.sets,h]})),p.log(`âœ… ã‚«ã‚¹ã‚¿ãƒ ã‚»ãƒƒãƒˆã€Œ${E}ã€ã‚’ä½œæˆã—ã¾ã—ãŸ`)},H=E=>{o(C=>ca(C,E)),p.log("ğŸ—‘ï¸ ã‚«ã‚¹ã‚¿ãƒ ã‚»ãƒƒãƒˆã‚’å‰Šé™¤ã—ã¾ã—ãŸ")},Ee=(E,C,h)=>{o(_=>da(_,E,{name:C,description:h})),p.log(`âœï¸ ã‚«ã‚¹ã‚¿ãƒ ã‚»ãƒƒãƒˆã€Œ${C}ã€ã‚’æ›´æ–°ã—ã¾ã—ãŸ`)},Ae=(E,C)=>{o(h=>oa(h,E,C)),p.log(`â• ã€Œ${C.word}ã€ã‚’ã‚»ãƒƒãƒˆã«è¿½åŠ ã—ã¾ã—ãŸ`)},$e=(E,C)=>{o(h=>la(h,E,C)),p.log(`â– ã€Œ${C.word}ã€ã‚’ã‚»ãƒƒãƒˆã‹ã‚‰å‰Šé™¤ã—ã¾ã—ãŸ`)},$=async()=>{var ze;const E=an();p.log("ğŸ® ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³:",E);const C=Ht();let h=fe();if(h.length===0){alert("æŒ‡å®šã•ã‚ŒãŸæ¡ä»¶ã®å•é¡ŒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");return}if(F){const ae=jt();if(h=h.filter(xe=>ae.some(we=>we&&xe.word&&we.toLowerCase()===xe.word.toLowerCase())),h.length===0){alert("è¦å¾©ç¿’å•é¡ŒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"),X(!1),Y([]);return}Y([...h]),p.log(`ğŸ¯ è£œä¿®ãƒ¢ãƒ¼ãƒ‰é–‹å§‹: ${h.length}å•ã‚’ç¹°ã‚Šè¿”ã—å‡ºé¡Œ`)}const _=ga(n,u),M=nr();M?(ba(_),p.log(`ğŸ“Š æ”¹å–„é€²æ—: ${M.currentDay}æ—¥ç›® - å…¨ä½“é€²æ—${M.overallProgress.toFixed(1)}%`)):_.weakCategories.length>0&&(ya(_),p.log("ğŸ¯ ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆæ”¹å–„ãƒ—ãƒ©ãƒ³ã‚’é–‹å§‹ã—ã¾ã—ãŸ")),_.aiRecommendations.length>0&&(p.log("ğŸ§  AIå­¦ç¿’ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ ã‹ã‚‰ã®æ¨å¥¨:"),_.aiRecommendations.forEach(ae=>p.log(`  ${ae}`))),_.weakCategories.length>0&&x==="all"&&(h=fa(h,_.weakCategories,Math.min(30,h.length)),p.log(`ğŸ’¡ å¼±ç‚¹åˆ†é‡ã‚’å„ªå…ˆå‡ºé¡Œ: ${_.weakCategories.slice(0,3).map(ae=>ae.category).join(", ")}`));const L=jt(),T=as(10).map(ae=>ae.word);let te=[];if(L.length>0){const ae=h.filter(we=>L.some(le=>le&&we.word&&le.toLowerCase()===we.word.toLowerCase()));te=C.maxReviewCount>0?ae.slice(0,C.maxReviewCount):[];const xe=h.filter(we=>!L.some(le=>le&&we.word&&le.toLowerCase()===we.word.toLowerCase()));h=[...te,...xe],te.length>0&&p.log(`ğŸ”„ è¦å¾©ç¿’å•é¡Œ: ${te.length}å•ï¼ˆä¸Šé™: ${C.maxReviewCount}å•ï¼‰`)}if(T.length>0){const ae=h.filter(xe=>T.some(we=>we&&xe.word&&we.toLowerCase()===xe.word.toLowerCase()));if(ae.length>0){const xe=h.filter(we=>!T.some(le=>le&&we.word&&le.toLowerCase()===we.word.toLowerCase()));h=[...ae,...xe],p.log(`ğŸ”— æ··åŒå±¥æ­´: ${ae.length}å•ã‚’å„ªå…ˆå‡ºé¡Œ`)}}if(!F&&h.length>0){const ae=await Be(),xe=new Map;h.forEach(ke=>{const Fe=ae.wordProgress[ke.word];if(Fe&&Fe.learningHistory&&Fe.learningHistory.length>0){const He=Fe.learningHistory.map(Ye=>({timestamp:Ye.timestamp,wasCorrect:Ye.wasCorrect,responseTime:Ye.responseTime,userAnswer:Ye.userAnswer,confidenceLevel:Ye.responseTime<2e3?"instant":Ye.responseTime<5e3?"hesitant":"guessed",sessionContext:{questionIndex:Ye.sessionIndex||0,previousQuestions:[],sessionFatigue:0}})),Je=va(ke.word,Fe,He);xe.set(ke.word,Je)}});const we=Sa(h,ae.wordProgress,xe),le=Ca(we,h.length),Re=$s(Te.current,ne.current);Le.current=Re;const Ie=$a(le,Re),Oe=new Map(Ie.map(ke=>[ke.word,ke]));if(h=h.filter(ke=>Oe.has(ke.word)).sort((ke,Fe)=>{const He=Oe.get(ke.word).priority;return Oe.get(Fe.word).priority-He}),p.log("ğŸ§  å­¦ç¿’æ›²ç·šAI: æœ€é©ãªå‡ºé¡Œé †åºã‚’æ±ºå®š"),p.log("  å‡ºé¡Œæˆ¦ç•¥:",Ie.slice(0,5).map(ke=>`${ke.word}(${ke.strategy}, æˆåŠŸç‡${ke.estimatedSuccessRate.toFixed(0)}%)`).join(", ")),Re.fatigueLevel>40){const ke=Aa(Re);p.log(`âš¡ èªçŸ¥è² è·: ${Re.fatigueLevel.toFixed(0)}% - ${ke}`)}const Ue=Fa(h,ae.wordProgress,J.current),it=new Map;if(Ue.sequence.forEach((ke,Fe)=>{it.set(ke,Fe)}),h=h.sort((ke,Fe)=>{const He=it.get(ke.word)??999,Je=it.get(Fe.word)??999;return He-Je}),p.log("ğŸ”— æ–‡è„ˆå­¦ç¿’AI: æ„å‘³çš„ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°å®Œäº†"),p.log(`  ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼æ•°: ${Ue.clusters.length}`),Ue.transitions.length>0){const ke=Ue.transitions[0];p.log(`  ä¾‹: ${ke.from} â†’ ${ke.to} (${ke.reason})`)}}F?p.log(`ğŸ¯ è£œä¿®ãƒ¢ãƒ¼ãƒ‰: ${h.length}å•ã‚’ç¹°ã‚Šè¿”ã—å‡ºé¡Œä¸­`):p.log(`ğŸ“š å­¦ç¿’æ•°: ${h.length}å•`),q({questions:h,currentIndex:0,score:0,totalAnswered:0,answered:!1,selectedAnswer:null}),be({correct:0,incorrect:0,review:0,mastered:0}),ne.current=Date.now(),Ne.current=Date.now(),Ce.current=[],Te.current=[],Le.current=null;const de=await Be(),Z=Ia(de.wordProgress,re.current);K.current=Z;const ge=h.map(ae=>ae.word),je=((ze=Le.current)==null?void 0:ze.fatigueLevel)??0,ve=La(ge,de.wordProgress,Z,je);Q.current=ve,p.log("ğŸ”® ã‚¨ãƒ©ãƒ¼äºˆæ¸¬AI: èª¤ç­”ãƒªã‚¹ã‚¯åˆ†æå®Œäº†");const Se=Array.from(ve.values()).filter(ae=>ae.warningLevel==="high"||ae.warningLevel==="critical").sort((ae,xe)=>xe.errorRisk-ae.errorRisk);Se.length>0&&(p.log(`  é«˜ãƒªã‚¹ã‚¯å•é¡Œ: ${Se.length}å•`),p.log(`  æœ€é«˜ãƒªã‚¹ã‚¯: ${Se[0].word} (${Se[0].errorRisk.toFixed(0)}% - ${Se[0].primaryPattern})`))},v=()=>{F?(X(!1),Y([]),U(new Map)):(X(!0),U(new Map)),$()},y=()=>{F?(X(!1),Y([]),U(new Map)):(X(!0),U(new Map)),$()},I=E=>{S(E),X(!1),Y([]),P.questions.length>0&&$()},f=E=>{w(E),X(!1),Y([]),P.questions.length>0&&$()},W=async(E,C,h)=>{var de,Z,ge,je;if(P.answered)return;const _=E==="åˆ†ã‹ã‚‰ãªã„",M=E.trim(),L=C.trim(),B=!_&&M===L,T=P.questions[P.currentIndex];!B&&h&&h.word&&(await rs(h.word,T.word),p.log(`ğŸ”— æ··åŒã‚’è¨˜éŒ²: ${h.word} â† ${T.word}`));const te=Date.now()-Ne.current;if(T){const Se=(de=(await Be()).wordProgress)==null?void 0:de[T.word],ae=1-(Se?Se.correctCount/(Se.correctCount+Se.incorrectCount):.5);Te.current.push({timestamp:Date.now(),wasCorrect:B,responseTime:te,questionDifficulty:ae});const xe=$s(Te.current,ne.current);Le.current=xe,(Z=xe.breakRecommendation)!=null&&Z.shouldBreak&&p.log(`ğŸ’¤ ä¼‘æ†©æ¨å¥¨: ${xe.breakRecommendation.reason}`),re.current.push({word:T.word,wasCorrect:B,userAnswer:M}),re.current.length>50&&(re.current=re.current.slice(-50))}if(T){await at(T.word,B,te,void 0,"translation");const Se=(ge=(await Be()).wordProgress)==null?void 0:ge[T.word];let ze=B?"correct":"incorrect";Se&&Se.masteryLevel==="mastered"?ze="mastered":!B&&Se&&Se.incorrectCount>=2&&(ze="review"),be(we=>({...we,correct:we.correct+(ze==="correct"?1:0),incorrect:we.incorrect+(ze==="incorrect"?1:0),review:we.review+(ze==="review"?1:0),mastered:we.mastered+(ze==="mastered"?1:0)})),dt({status:ze,word:T.word,timestamp:Date.now()},"translation"),J.current.push(T.word),J.current.length>10&&(J.current=J.current.slice(-10)),De.current++;const xe=(je=(await Be()).wordProgress)==null?void 0:je[T.word];if(xe&&xe.skippedCount&&xe.skippedCount>0&&(B?ar(T.word):(rr(T.word),p.log("ğŸ¤” AIå­¦ç¿’ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ: ã‚¹ã‚­ãƒƒãƒ—ã—ãŸå˜èªãŒä¸æ­£è§£ã§ã—ãŸã€‚åŒæ™‚æœŸã®å˜èªã‚’å†ç¢ºèªã—ã¾ã™ã€‚"))),ht({id:xt(),questionSetId:"main-set-single",questionSetName:"é«˜æ ¡å—é¨“è‹±å˜èª",score:B?1:0,total:1,percentage:B?100:0,date:Date.now(),timeSpent:Math.floor(te/1e3),incorrectWords:B?[]:[T.word],mode:"translation",category:x!=="all"?x:void 0,difficulty:N!=="all"?N:void 0}),B||Ce.current.push(T.word),F){const we=new Map(ue);if(B){const le=we.get(T.word)||0;if(we.set(T.word,le+1),le+1>=2){const Re=G.filter(Ie=>Ie.word!==T.word);Y(Re),p.log(`âœ… ${T.word} ã‚’è£œä¿®å¯¾è±¡ã‹ã‚‰é™¤å¤– (2å›é€£ç¶šæ­£è§£)`),Re.length===0&&(alert("ğŸ‰ ã™ã¹ã¦ã®è¦å¾©ç¿’å•é¡Œã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸï¼"),X(!1),U(new Map))}}else we.set(T.word,0);U(we)}}q(ve=>({...ve,answered:!0,selectedAnswer:E,score:B?ve.score+1:ve.score,totalAnswered:ve.totalAnswered+1}))},R=()=>{q(E=>{var _;const C=F?G:E.questions,h=E.currentIndex+1;if(!F&&h>=C.length){const M=Date.now(),L=Te.current.reduce((je,ve)=>je+ve.responseTime,0),B=Te.current.length>0?L/Te.current.length:0,T=((_=Le.current)==null?void 0:_.fatigueLevel)??0,te=qa(ne.current,M,E.totalAnswered,E.score,B,T,pe.correct+pe.mastered,pe.review);Ha(te);const de=Va();if(de.length>=3){const je=Ua("user",de),ve=cr(),Se=Ja(je,ve);p.log("ğŸ“Š å­¦ç¿’ã‚¹ã‚¿ã‚¤ãƒ«AI:",Se)}const Z=(M-ne.current)/(1e3*60),ge=rn(E.score,E.totalAnswered,B,Z,pe.correct+pe.mastered,T);p.log("ğŸ® ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³çµæœ:"),p.log(`  ç²å¾—XP: ${ge.xpGained}`),ge.leveledUp&&p.log(`  ğŸ‰ ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—! Lv.${ge.newLevel}`),ge.feedback.forEach(je=>{p.log(`  ${je.icon} ${je.message}`)})}return F&&h>=C.length?(p.log("ğŸ”„ è£œä¿®ãƒ¢ãƒ¼ãƒ‰: å•é¡Œã‚’ç¹°ã‚Šè¿”ã—ã¾ã™"),{...E,questions:C,currentIndex:0,answered:!1,selectedAnswer:null}):{...E,questions:C,currentIndex:h%C.length,answered:!1,selectedAnswer:null}}),Ne.current=Date.now()},O=()=>{q(E=>({...E,currentIndex:E.currentIndex>0?E.currentIndex-1:0,answered:!1,selectedAnswer:null}))},se=async()=>{const E=P.questions[P.currentIndex];if(E){const C=Date.now()-Ne.current;await Rt(E.word,30),sr(E.word),await at(E.word,!0,C,void 0,"translation"),q(h=>({...h,score:h.score+1,totalAnswered:h.totalAnswered+1,currentIndex:(h.currentIndex+1)%h.questions.length,answered:!1,selectedAnswer:null})),be(h=>({...h,correct:h.correct+1,mastered:h.mastered+1})),dt({status:"correct",word:E.word,timestamp:Date.now()},"translation")}else q(C=>({...C,currentIndex:(C.currentIndex+1)%C.questions.length,answered:!1,selectedAnswer:null}));Ne.current=Date.now()},he=E=>{const C=P.questions[P.currentIndex];if(C){const h=Date.now()-Ne.current;at(C.word,P.selectedAnswer===C.meaning,h,E,"translation")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Ei,{isVisible:r,message:"èª­ã¿è¾¼ã¿ä¸­..."}),e.jsxs("div",{className:"flex gap-0 bg-gray-100 shadow-md py-1 sm:py-2",children:[e.jsx("button",{className:`flex-1 py-3 sm:py-4 px-2 sm:px-3 text-sm sm:text-base font-semibold transition-all duration-200 border-b-4 ${s==="memorization"?"bg-white text-blue-600 border-blue-600":"bg-blue-50 text-gray-700 border-transparent hover:bg-blue-100:bg-gray-800"}`,onClick:()=>t("memorization"),children:"ğŸ’¡ æš—è¨˜"}),e.jsx("button",{className:`flex-1 py-3 sm:py-4 px-2 sm:px-3 text-sm sm:text-base font-semibold transition-all duration-200 border-b-4 ${s==="translation"?"bg-white text-blue-600 border-blue-600":"bg-blue-50 text-gray-700 border-transparent hover:bg-blue-100:bg-gray-800"}`,onClick:()=>t("translation"),children:"ğŸ“ å’Œè¨³"}),e.jsx("button",{className:`flex-1 py-3 sm:py-4 px-2 sm:px-3 text-sm sm:text-base font-semibold transition-all duration-200 border-b-4 ${s==="spelling"?"bg-white text-blue-600 border-blue-600":"bg-blue-50 text-gray-700 border-transparent hover:bg-blue-100:bg-gray-800"}`,onClick:()=>t("spelling"),children:"âœï¸ ã‚¹ãƒšãƒ«"}),e.jsx("button",{className:`flex-1 py-3 sm:py-4 px-2 sm:px-3 text-sm sm:text-base font-semibold transition-all duration-200 border-b-4 ${s==="grammar"?"bg-white text-blue-600 border-blue-600":"bg-blue-50 text-gray-700 border-transparent hover:bg-blue-100:bg-gray-800"}`,onClick:()=>{t("grammar"),a(!0),setTimeout(()=>a(!1),1500),Ws()},children:"ğŸ“š æ–‡æ³•"}),e.jsx("button",{className:`flex-1 py-3 sm:py-4 px-2 sm:px-3 text-sm sm:text-base font-semibold transition-all duration-200 border-b-4 ${s==="reading"?"bg-white text-blue-600 border-blue-600":"bg-blue-50 text-gray-700 border-transparent hover:bg-blue-100:bg-gray-800"}`,onClick:()=>{t("reading"),a(!0),setTimeout(()=>a(!1),1500),Ws()},children:"ğŸ“– é•·æ–‡"}),e.jsx("button",{className:`flex-1 py-3 sm:py-4 px-2 sm:px-3 text-sm sm:text-base font-semibold transition-all duration-200 border-b-4 ${s==="grammar-guide"?"bg-white text-blue-600 border-blue-600":"bg-blue-50 text-gray-700 border-transparent hover:bg-blue-100:bg-gray-800"}`,onClick:()=>t("grammar-guide"),children:"ğŸ”– å‚è€ƒ"}),e.jsx("button",{className:`flex-1 py-3 sm:py-4 px-2 sm:px-3 text-sm sm:text-base font-semibold transition-all duration-200 border-b-4 ${s==="dictionary"?"bg-white text-blue-600 border-blue-600":"bg-blue-50 text-gray-700 border-transparent hover:bg-blue-100:bg-gray-800"}`,onClick:()=>t("dictionary"),children:"ğŸ“• è¾æ›¸"}),e.jsx("button",{className:`flex-1 py-3 sm:py-4 px-2 sm:px-3 text-sm sm:text-base font-semibold transition-all duration-200 border-b-4 ${s==="stats"?"bg-white text-blue-600 border-blue-600":"bg-blue-50 text-gray-700 border-transparent hover:bg-blue-100:bg-gray-800"}`,onClick:()=>t("stats"),children:"ğŸ“Š æˆç¸¾"}),e.jsx("button",{className:`flex-1 py-3 sm:py-4 px-2 sm:px-3 text-sm sm:text-base font-semibold transition-all duration-200 border-b-4 ${s==="settings"?"bg-white text-blue-600 border-blue-600":"bg-blue-50 text-gray-700 border-transparent hover:bg-blue-100:bg-gray-800"}`,onClick:()=>t("settings"),children:"âš™ï¸ è¨­å®š"})]}),e.jsx(Pi,{isOpen:c,onClose:()=>d(!1),sets:l.sets,onCreateSet:We,onDeleteSet:H,onEditSet:Ee,onRemoveWord:$e}),e.jsx("div",{className:"p-2 md:p-6 bg-gray-50",children:e.jsx("div",{className:"max-w-app mx-auto",children:s==="memorization"?e.jsx(Si,{allQuestions:n,questionSets:V,customQuestionSets:l.sets,onAddWordToCustomSet:Ae,onRemoveWordFromCustomSet:$e,onOpenCustomSetManagement:()=>d(!0)}):s==="translation"?e.jsx(Kn,{quizState:P,_categoryList:u,selectedCategory:x,onCategoryChange:I,selectedDifficulty:N,onDifficultyChange:f,selectedWordPhraseFilter:b,onWordPhraseFilterChange:k,selectedPhraseTypeFilter:D,onPhraseTypeFilterChange:A,selectedDataSource:j,onDataSourceChange:z,questionSets:V,onStartQuiz:$,onAnswer:W,onNext:R,onPrevious:O,onSkip:se,onDifficultyRate:he,onReviewFocus:v,sessionStats:pe,isReviewFocusMode:F,errorPrediction:P.questions.length>0&&P.currentIndex<P.questions.length?Q.current.get(P.questions[P.currentIndex].word):void 0,customQuestionSets:l.sets,onAddWordToCustomSet:Ae,onRemoveWordFromCustomSet:$e,onOpenCustomSetManagement:()=>d(!0)}):s==="spelling"?e.jsx(ei,{questions:P.questions,_categoryList:u,selectedCategory:x,onCategoryChange:I,selectedDifficulty:N,onDifficultyChange:f,selectedWordPhraseFilter:b,onWordPhraseFilterChange:k,selectedPhraseTypeFilter:D,onPhraseTypeFilterChange:A,selectedDataSource:j,onDataSourceChange:z,onStartQuiz:$,onReviewFocus:y,isReviewFocusMode:F,customQuestionSets:l.sets,onAddWordToCustomSet:Ae,onRemoveWordFromCustomSet:$e,onOpenCustomSetManagement:()=>d(!0)}):s==="reading"?e.jsx(vr,{customQuestionSets:l.sets,onAddWordToCustomSet:Ae,onRemoveWordFromCustomSet:$e,onOpenCustomSetManagement:()=>d(!0),onSaveUnknownWords:async E=>{if(E.length===0)return;const C=new Date,_=`é•·æ–‡å˜èªé›† (${`${C.getMonth()+1}/${C.getDate()}`})`,M=prompt(`${E.length}å€‹ã®å˜èªãŒé¸æŠã•ã‚Œã¦ã„ã¾ã™ã€‚
å•é¡Œé›†ã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:`,_);if(!M)return;const L={id:xt(),name:M,questions:E.map(T=>({word:T.word,reading:T.reading||"",meaning:T.meaning,etymology:T.etymology||"",relatedWords:T.relatedWords||"",relatedFields:T.relatedFields||"",difficulty:T.difficulty||"intermediate"})),createdAt:Date.now(),isBuiltIn:!1,source:"é•·æ–‡èª­è§£"},B=[...V,L];ce(B),Vs(B),alert(`âœ… å•é¡Œé›†ã€Œ${M}ã€ã‚’ä½œæˆã—ã¾ã—ãŸï¼ˆ${E.length}èªï¼‰`)}}):s==="grammar"?e.jsx(wr,{}):s==="grammar-guide"?e.jsx(ki,{}):s==="dictionary"?e.jsx($i,{}):s==="stats"?e.jsx(Ai,{questionSets:V,allQuestions:n,categoryList:u,onResetComplete:()=>t("stats"),onQuestionSetsUpdated:Pe}):e.jsx(Ti,{allQuestions:n,_selectedDataSource:j,_onDataSourceChange:z,customQuestionSets:l.sets,onOpenCustomSetManagement:()=>d(!0),onStartSession:(E,C)=>{q({questions:C,currentIndex:0,score:0,totalAnswered:0,answered:!1,selectedAnswer:null}),ne.current=Date.now(),Ne.current=Date.now(),Ce.current=[],t("translation")}})})})]})}const Li=()=>{const s=localStorage.getItem("darkMode");let t="system";s==="system"||s==="light"||s==="dark"?t=s:s==="true"?(t="dark",localStorage.setItem("darkMode","dark")):s==="false"&&(t="light",localStorage.setItem("darkMode","light"));let r=!1;t==="system"?r=window.matchMedia("(prefers-color-scheme: dark)").matches:r=t==="dark",document.documentElement.classList.toggle("dark",r)};Li();Bt.createRoot(document.getElementById("root")).render(e.jsx(kr.StrictMode,{children:e.jsx(Wi,{})}));export{Fn as a,p as b,ns as c,Wt as d,kt as e,Nt as f,Vt as g,qs as h,hr as i,Gs as j,Fi as k,ye as l};
//# sourceMappingURL=index-C1iREqvT.js.map
