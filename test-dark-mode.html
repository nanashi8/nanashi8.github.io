<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ - Quiz App</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .test-container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      border-bottom: 3px solid #667eea;
      padding-bottom: 10px;
    }
    .test-section {
      margin: 20px 0;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    .test-section h2 {
      color: #667eea;
      margin-top: 0;
    }
    .test-result {
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      font-family: monospace;
    }
    .success {
      background: #d1fae5;
      border: 1px solid #10b981;
      color: #065f46;
    }
    .error {
      background: #fee2e2;
      border: 1px solid #ef4444;
      color: #991b1b;
    }
    .info {
      background: #e7f3ff;
      border: 1px solid #2196f3;
      color: #0056b3;
    }
    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
      font-size: 14px;
    }
    button:hover {
      background: #5568d3;
    }
    .iframe-container {
      margin: 20px 0;
      border: 2px solid #667eea;
      border-radius: 5px;
      overflow: hidden;
    }
    iframe {
      width: 100%;
      height: 600px;
      border: none;
    }
    .test-controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin: 15px 0;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>ğŸŒ“ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-section">
      <h2>1. CSSå¤‰æ•°ã®ç¢ºèª</h2>
      <div class="test-controls">
        <button onclick="checkCSSVariables()">CSSå¤‰æ•°ã‚’ãƒã‚§ãƒƒã‚¯</button>
      </div>
      <div id="css-test-results"></div>
    </div>

    <div class="test-section">
      <h2>2. ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚¯ãƒ©ã‚¹ã®ç¢ºèª</h2>
      <div class="test-controls">
        <button onclick="checkDarkModeClass()">ã‚¯ãƒ©ã‚¹çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯</button>
        <button onclick="toggleDarkMode()">ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿</button>
      </div>
      <div id="class-test-results"></div>
    </div>

    <div class="test-section">
      <h2>3. localStorageç¢ºèª</h2>
      <div class="test-controls">
        <button onclick="checkLocalStorage()">localStorageç¢ºèª</button>
        <button onclick="setLightMode()">ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰è¨­å®š</button>
        <button onclick="setDarkMode()">ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰è¨­å®š</button>
        <button onclick="setSystemMode()">ã‚·ã‚¹ãƒ†ãƒ è¨­å®š</button>
      </div>
      <div id="storage-test-results"></div>
    </div>

    <div class="test-section">
      <h2>4. å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</h2>
      <p class="info">
        ä¸‹ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã§å®Ÿéš›ã«ã‚¢ãƒ—ãƒªã‚’é–‹ãã€è¨­å®šã‚¿ãƒ–ã‹ã‚‰ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚
      </p>
      <div class="iframe-container">
        <iframe src="http://localhost:5173/" id="app-frame"></iframe>
      </div>
    </div>

    <div class="test-section">
      <h2>5. ãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼</h2>
      <button onclick="runAllTests()">å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ</button>
      <div id="summary-results"></div>
    </div>
  </div>

  <script>
    let testResults = [];

    function addResult(section, message, type = 'info') {
      const result = { section, message, type, timestamp: new Date().toISOString() };
      testResults.push(result);
      return result;
    }

    function displayResult(elementId, message, type = 'info') {
      const element = document.getElementById(elementId);
      const div = document.createElement('div');
      div.className = `test-result ${type}`;
      div.textContent = message;
      element.appendChild(div);
    }

    function clearResults(elementId) {
      document.getElementById(elementId).innerHTML = '';
    }

    function checkCSSVariables() {
      clearResults('css-test-results');
      
      const frame = document.getElementById('app-frame');
      const frameDoc = frame.contentDocument || frame.contentWindow.document;
      const root = frameDoc.documentElement;
      const styles = window.getComputedStyle(root);
      
      const varsToCheck = [
        '--text-color',
        '--background',
        '--bg-secondary',
        '--success-color',
        '--error-color',
        '--card-bg',
        '--btn-primary-bg'
      ];

      let allFound = true;
      varsToCheck.forEach(varName => {
        const value = styles.getPropertyValue(varName).trim();
        if (value) {
          displayResult('css-test-results', `âœ“ ${varName}: ${value}`, 'success');
          addResult('CSS Variables', `${varName} found: ${value}`, 'success');
        } else {
          displayResult('css-test-results', `âœ— ${varName}: æœªå®šç¾©`, 'error');
          addResult('CSS Variables', `${varName} not found`, 'error');
          allFound = false;
        }
      });

      if (allFound) {
        displayResult('css-test-results', 'âœ“ å…¨ã¦ã®CSSå¤‰æ•°ãŒæ­£ã—ãå®šç¾©ã•ã‚Œã¦ã„ã¾ã™', 'success');
      }
    }

    function checkDarkModeClass() {
      clearResults('class-test-results');
      
      const frame = document.getElementById('app-frame');
      const frameDoc = frame.contentDocument || frame.contentWindow.document;
      const root = frameDoc.documentElement;
      
      const hasDarkMode = root.classList.contains('dark-mode');
      
      if (hasDarkMode) {
        displayResult('class-test-results', 'âœ“ dark-modeã‚¯ãƒ©ã‚¹ãŒé©ç”¨ã•ã‚Œã¦ã„ã¾ã™', 'success');
        addResult('Dark Mode Class', 'dark-mode class is active', 'success');
      } else {
        displayResult('class-test-results', 'â„¹ dark-modeã‚¯ãƒ©ã‚¹ã¯é©ç”¨ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼ˆãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼‰', 'info');
        addResult('Dark Mode Class', 'dark-mode class is not active (light mode)', 'info');
      }

      // èƒŒæ™¯è‰²ã‚’ãƒã‚§ãƒƒã‚¯
      const bgColor = window.getComputedStyle(frameDoc.body).backgroundColor;
      displayResult('class-test-results', `èƒŒæ™¯è‰²: ${bgColor}`, 'info');
    }

    function toggleDarkMode() {
      const frame = document.getElementById('app-frame');
      const frameDoc = frame.contentDocument || frame.contentWindow.document;
      const root = frameDoc.documentElement;
      
      root.classList.toggle('dark-mode');
      checkDarkModeClass();
    }

    function checkLocalStorage() {
      clearResults('storage-test-results');
      
      try {
        const darkMode = localStorage.getItem('darkMode');
        if (darkMode) {
          displayResult('storage-test-results', `âœ“ darkMode: "${darkMode}"`, 'success');
          addResult('LocalStorage', `darkMode value: ${darkMode}`, 'success');
        } else {
          displayResult('storage-test-results', 'â„¹ darkModeè¨­å®šãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“', 'info');
          addResult('LocalStorage', 'No darkMode value stored', 'info');
        }
      } catch (error) {
        displayResult('storage-test-results', `âœ— ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
        addResult('LocalStorage', `Error: ${error.message}`, 'error');
      }
    }

    function setLightMode() {
      localStorage.setItem('darkMode', 'light');
      displayResult('storage-test-results', 'âœ“ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã«è¨­å®šã—ã¾ã—ãŸ', 'success');
      displayResult('storage-test-results', 'â„¹ ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ç¢ºèªã—ã¦ãã ã•ã„', 'info');
    }

    function setDarkMode() {
      localStorage.setItem('darkMode', 'dark');
      displayResult('storage-test-results', 'âœ“ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«è¨­å®šã—ã¾ã—ãŸ', 'success');
      displayResult('storage-test-results', 'â„¹ ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ç¢ºèªã—ã¦ãã ã•ã„', 'info');
    }

    function setSystemMode() {
      localStorage.setItem('darkMode', 'system');
      displayResult('storage-test-results', 'âœ“ ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã«è¨­å®šã—ã¾ã—ãŸ', 'success');
      displayResult('storage-test-results', 'â„¹ ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ç¢ºèªã—ã¦ãã ã•ã„', 'info');
    }

    function runAllTests() {
      clearResults('summary-results');
      testResults = [];
      
      displayResult('summary-results', 'ğŸ” ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™...', 'info');
      
      setTimeout(() => {
        checkCSSVariables();
        checkDarkModeClass();
        checkLocalStorage();
        
        setTimeout(() => {
          const successCount = testResults.filter(r => r.type === 'success').length;
          const errorCount = testResults.filter(r => r.type === 'error').length;
          
          displayResult('summary-results', `ãƒ†ã‚¹ãƒˆå®Œäº†: âœ“ ${successCount} æˆåŠŸ, âœ— ${errorCount} å¤±æ•—`, 
            errorCount > 0 ? 'error' : 'success');
          
          if (errorCount === 0) {
            displayResult('summary-results', 'âœ“ å…¨ã¦ã®ãƒ†ã‚¹ãƒˆã«åˆæ ¼ã—ã¾ã—ãŸï¼', 'success');
          } else {
            displayResult('summary-results', 'âš  ä¸€éƒ¨ã®ãƒ†ã‚¹ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
          }
        }, 500);
      }, 100);
    }

    // åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚ã«åŸºæœ¬ãƒã‚§ãƒƒã‚¯
    window.addEventListener('load', () => {
      setTimeout(() => {
        displayResult('summary-results', 'â„¹ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èª­ã¿è¾¼ã¿ã‚’å¾…ã£ã¦ã„ã¾ã™...', 'info');
        
        const frame = document.getElementById('app-frame');
        frame.addEventListener('load', () => {
          displayResult('summary-results', 'âœ“ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ', 'success');
          displayResult('summary-results', 'â„¹ å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„', 'info');
        });
      }, 1000);
    });
  </script>
</body>
</html>
