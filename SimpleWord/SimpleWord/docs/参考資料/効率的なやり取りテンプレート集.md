# SimpleWord プロジェクト - 効率的なやり取りテンプレート集

**作成日**: 2025年10月28日  
**対象**: GitHub Copilot とのコミュニケーション最適化

このドキュメントは、AIアシスタントとのやり取りを効率化するためのテンプレート集です。
事実ベースで具体的に伝えることで、原因特定と修正が数倍速くなります。

---

## 📋 目次

1. [バグ報告](#1-バグ報告)
2. [機能変更依頼](#2-機能変更依頼)
3. [機能削除依頼](#3-機能削除依頼)
4. [新機能追加依頼](#4-新機能追加依頼)
5. [パフォーマンス問題](#5-パフォーマンス問題)
6. [UI/UX改善](#6-uiux改善)
7. [リファクタリング依頼](#7-リファクタリング依頼)
8. [コードレビュー依頼](#8-コードレビュー依頼)

---

## 1. バグ報告

### ✅ 推奨テンプレート

```markdown
## バグ報告

### 環境
- デバイス: [iPhone 15 Pro / iPad Air / シミュレータ]
- iOS バージョン: [17.0]
- ビルド: [Debug / Release]

### 再現手順
1. アプリを起動
2. 「クイズをはじめる」をタップ
3. 中学歴史CSVを選択
4. 回答後の選択肢カードを確認

### 期待する動作
選択肢カードは以下の順序で表示されるべき（CSVの列順）:
```
年号: 1192
登場人物: 源頼朝
史実名: 鎌倉幕府成立
解説: 源頼朝が征夷大将軍に...
```

### 実際の動作
選択肢カードは以下の順序で表示されている:
```
年号: 1192
史実名: 鎌倉幕府成立
解説: 源頼朝が征夷大将軍に...
登場人物: 源頼朝
```

### 差分
- 「登場人物」と「史実名」の位置が入れ替わっている
- 「解説」の位置も正しくない

### 参考情報
- CSV ファイル: `SimpleWord/Resources/中学歴史.csv`
- 該当 View: `ChoiceCardView.swift` と思われる
```

### 🎯 ポイント
- **実際の表示内容**を具体的に記載（スクリーンショットも可）
- **期待する動作**を明確に記載
- データソース（CSV）の内容も併記
- 推測でも良いので該当ファイルを記載

---

## 2. 機能変更依頼

### ✅ 推奨テンプレート

```markdown
## 機能変更依頼

### 対象機能
クイズの自動進行機能

### 現在の動作
- 正解時のみ1.5秒後に自動で次の問題へ進む
- 不正解時は自動進行しない

### 変更したい動作
- 正解・不正解に関わらず、回答後2秒で自動進行
- 設定画面で自動進行の秒数を変更可能（1〜5秒）

### 理由
- 不正解時も確認後すぐに次に進みたい
- 学習テンポを自分で調整したい

### 影響範囲（任意）
- QuizView.swift の自動進行ロジック
- QuizSettingsView.swift に秒数設定を追加
- QuizSettings.swift に設定値を保存
```

### 🎯 ポイント
- **現在の動作**と**変更後の動作**を対比
- 変更理由を記載（優先度判断に役立つ）
- 影響範囲の推測があれば記載

---

## 3. 機能削除依頼

### ✅ 推奨テンプレート

```markdown
## 機能削除依頼

### 削除対象
NavigatorView（単語リスト機能）

### 理由
- 現在使用されていない
- QuizViewから直接出題する方式に変更済み
- コード保守コストの削減

### 依存関係の確認
以下のファイル/機能で使用されている可能性:
- ContentView.swift のナビゲーションリンク
- CSVManagerView からの参照（あれば）

### 削除後の代替機能
- 単語確認は「学習結果」画面から可能
- 直接編集は「問題集管理」から可能

### 期待する結果
- NavigatorView.swift の削除
- 関連する import、@EnvironmentObject の削除
- Xcode プロジェクトからの削除手順の案内
```

### 🎯 ポイント
- 削除理由を明確に
- 依存関係を確認済みか記載
- 代替機能があれば記載

---

## 4. 新機能追加依頼

### ✅ 推奨テンプレート

```markdown
## 新機能追加依頼

### 機能名
クイズ履歴のエクスポート機能

### 目的
- 学習記録をバックアップしたい
- Excel で分析したい

### 詳細な仕様
#### 入力
- 「学習結果」画面に「エクスポート」ボタンを追加
- タップで共有シートを表示

#### 処理
- ScoreStore の全履歴を CSV 形式に変換
- フォーマット: `日時,CSV名,総問題数,正解数,正答率,学習モード`

#### 出力
- ファイル名: `SimpleWord学習履歴_YYYYMMDD.csv`
- AirDrop、Files、メール等で共有可能

### 参考実装（任意）
- FileUtils.swift に CSV 書き出しメソッドあり
- QuizResult 構造体が履歴データを保持

### 優先度
- [ ] 高（必須機能）
- [x] 中（あると便利）
- [ ] 低（将来的に）
```

### 🎯 ポイント
- 機能の**目的**を明確に
- 入力→処理→出力の流れで仕様を記載
- 既存の類似実装があれば参照
- 優先度を記載

---

## 5. パフォーマンス問題

### ✅ 推奨テンプレート

```markdown
## パフォーマンス問題

### 症状
CSV読み込みに5秒以上かかる

### 発生条件
- CSV: 中学英単語.csv（約2000行）
- デバイス: iPhone 12
- タイミング: QuizView表示時

### 測定データ
- 中学英単語（2000行）: 約5秒
- 中学歴史（500行）: 約1秒
- サンプル単語（100行）: 瞬時

### 予想される原因
- CSV パース処理が O(n²) になっている？
- メインスレッドでブロッキング処理？

### 期待する改善
- 2000行のCSVを1秒以内で読み込み
- ローディング表示の追加も可

### 該当コード（推測）
- CSVLoader.swift
- QuestionItemRepository.swift
```

### 🎯 ポイント
- **具体的な数値**を記載（秒数、行数）
- 複数パターンで測定
- 予想原因があれば記載

---

## 6. UI/UX改善

### ✅ 推奨テンプレート

```markdown
## UI/UX改善提案

### 対象画面
QuizView（クイズ画面）

### 現在の問題
- 正解時の緑色が眩しい
- アニメーションが速すぎて見づらい
- 選択肢のフォントが小さくて読みづらい

### 改善案

#### 1. カラー調整
- 正解時の背景色: `Color.green.opacity(0.9)` → `Color.green.opacity(0.7)`
- 不正解時の背景色: `Color.red.opacity(0.9)` → `Color.red.opacity(0.7)`

#### 2. アニメーション速度
- 現在: 1.2秒
- 提案: 1.5秒

#### 3. フォントサイズ
- 選択肢テキスト: `.body` → `.body.font(.system(size: 18))`
- 詳細情報: `.caption` → `.caption.font(.system(size: 14))`

### 参考
- iOS ヒューマンインターフェースガイドライン
- アクセシビリティ: ダークモードでも見やすく
```

### 🎯 ポイント
- **現在の値**と**提案する値**を具体的に
- デザインガイドラインがあれば参照
- アクセシビリティへの配慮を記載

---

## 7. リファクタリング依頼

### ✅ 推奨テンプレート

```markdown
## リファクタリング依頼

### 対象コード
QuizSettings.swift の QuizSettingsModel 構造体

### 現在の問題
- プロパティが20個以上あり、肥大化している
- UI設定、バッチ設定、フィルタ設定が混在
- 新規プロパティ追加時に全体への影響が大きい

### リファクタリング案

#### 分割後の構造
```swift
// UI設定
struct QuizUISettings {
    var numberOfChoices: Int
    var isTimerEnabled: Bool
    var timeLimit: Int
    var isRandomOrder: Bool
    var isSpeechEnabled: Bool
    var appearance: String
}

// バッチ設定
struct QuizBatchSettings {
    var questionsPerBatch: Int
    var repeatCount: Int
    var successThreshold: Double
    var autoAdvance: Bool
}

// フィルタ設定
struct QuizFilterSettings {
    var selectedCSV: String?
    var selectedFields: [String]
    var difficulties: [String]
    var learningMode: LearningMode
}

// 統合モデル
struct QuizSettingsModel {
    var ui: QuizUISettings
    var batch: QuizBatchSettings
    var filter: QuizFilterSettings
}
```

### メリット
- 責務が明確になる
- テストしやすくなる
- 変更の影響範囲が限定される

### 影響範囲
- QuizSettings.swift
- QuizSettingsView.swift（プロパティアクセスを変更）
- QuizView.swift（設定参照を変更）

### 後方互換性
- UserDefaults の保存形式は維持
- マイグレーション処理で対応
```

### 🎯 ポイント
- 現在の問題を明確に
- 具体的なコード構造を提示
- メリットと影響範囲を記載

---

## 8. コードレビュー依頼

### ✅ 推奨テンプレート

```markdown
## コードレビュー依頼

### レビュー対象
- ファイル: `QuizViewModel.swift`（新規作成）
- 変更内容: QuizView のロジックを ViewModel に分離

### レビュー観点
- [ ] アーキテクチャ: MVVM パターンに準拠しているか
- [ ] パフォーマンス: 不要な再描画が発生しないか
- [ ] メモリ管理: メモリリークの可能性はないか
- [ ] エラーハンドリング: 適切にエラー処理されているか
- [ ] テスタビリティ: ユニットテストが書きやすいか
- [ ] コーディング規約: プロジェクトの規約に準拠しているか

### 特に確認してほしい点
1. `@Published` プロパティの使い方は適切か
2. `Combine` のメモリリークがないか（`weak self` の使用）
3. CSV ロードを ViewModel で行うのは適切か

### コンテキスト
- SimpleWord では SwiftUI + Combine を使用
- Feature-First アーキテクチャを採用
- ViewModel は ObservableObject を継承
```

### 🎯 ポイント
- レビュー観点をチェックリスト形式で
- 特に注目してほしい点を明記
- プロジェクトのコンテキストを提供

---

## 💡 一般的なヒント

### ❌ 避けるべき表現
- 「何か変です」
- 「動きません」
- 「エラーが出ます」
- 「直してください」

### ✅ 推奨する表現
- 「QuizView で選択肢をタップすると、以下のエラーが出ます: [エラー内容]」
- 「中学歴史CSVのロード時に、`term` フィールドが空になっています」
- 「期待: A の動作、実際: B の動作、差分: C」
- 「[ファイル名] の [行数] 付近を確認してください」

---

## 📊 情報提供のレベル

### Level 1: 最小限（推奨しない）
「バグがあります」

### Level 2: 基本
「クイズ画面で選択肢の順序がおかしいです」

### Level 3: 詳細（推奨）
「クイズ画面（QuizView）で、中学歴史CSVの選択肢の表示順序が、CSVの列順と異なります。
CSV: 年号→登場人物→史実名→解説
UI: 年号→史実名→解説→登場人物
ChoiceCardView.swift の displayHistoryDetails() を確認してください」

### Level 4: 完璧
上記に加えて：
- スクリーンショット
- 再現手順
- 期待する動作と実際の動作の対比
- 該当コードの特定
- 修正案（あれば）

---

## 🎯 効率化のコツ

### 1. ファイル名を明記
❌ 「表示がおかしい」
✅ 「ChoiceCardView.swift の表示がおかしい」

### 2. 行動ではなく結果を記載
❌ 「データが取れない」
✅ 「QuestionItem.term が空文字列になっている」

### 3. 期待と実際を対比
❌ 「順序が違う」
✅ 「期待: A→B→C、実際: A→C→B」

### 4. コンテキストを提供
❌ 「ここを修正して」
✅ 「中学歴史CSVでのみ発生。英単語CSVでは正常」

### 5. 推測を含める
❌ 「原因不明」
✅ 「CSV パース時のヘッダマッピングが原因と推測」

---

## 📁 関連ドキュメント

- `プロジェクト構造.md` - ファイル配置の理解
- `コーディング規約.md` - コーディングスタイル
- `アーキテクチャ設計.md` - 設計方針
- `エラー対処ガイド.md` - よくあるエラーと対処法

---

## 🔄 このドキュメントの更新

新しいパターンや改善点があれば、このドキュメントに追加してください。

**最終更新**: 2025年10月28日
