# AI作業実行テンプレート（シミュレーションポリシー適用版）

**最終更新**: 2025年10月24日

このテンプレートは、AIが作業を実行する際の標準フォーマットです。
**シミュレーションポリシー**に基づき、事前確認を含みます。

---

## 📋 基本フォーマット

### 1. 作業開始時

```markdown
## 作業内容: [機能名/修正内容]

### 影響範囲
- 変更ファイル: X件
- 追加ファイル: Y件
- 変更行数: 約Z行

### 実装方針
[簡潔な説明]

それでは実装を開始します。
```

---

### 2. 実装中

```markdown
## 実装状況

✅ [ファイル名] - [変更内容]
✅ [ファイル名] - [変更内容]
⏳ [ファイル名] - 実装中...
```

---

### 3. 実装完了時（⭐ シミュレーション確認）

```markdown
## ✅ 実装完了

### 変更内容
- ✅ [ファイル1]: [変更内容]
- ✅ [ファイル2]: [変更内容]
- ✅ [ファイル3]: [変更内容]

### 変更サマリー
- 変更ファイル: X件
- 追加ファイル: Y件
- 変更行数: Z行

---

## 🔍 ビルドチェックとシミュレーション

以下の検証を実行しますか？

### 実行内容
- 静的解析（構文チェック）
- ビルドチェック（xcodebuild）
- エラー/警告の確認

### 推奨デバイス
- iPhone 16 Pro
- iPhone SE (第3世代)

### オプション
- 詳細なビルドログ
- 特定デバイスのみ

---

**選択してください**:
- `y` または `yes`: 標準検証を実行
- `n` または `no`: スキップ（ユーザー側で実施）
- `custom`: デバイスやオプションを指定

📖 詳細: `.copilot/SIMULATION_POLICY.md`
```

---

### 4-A. ユーザーが `y` を選択した場合

```markdown
## 🔄 ビルドチェック実行中...

[ビルド実行]

---

## 📊 ビルド結果

✅ BUILD SUCCEEDED

### 警告
- [警告内容] - [対処方法]

### 次のステップ
1. シミュレーターで動作確認
2. 実機でのテスト
3. [関連する機能]の動作確認

作業完了です。
```

---

### 4-B. ユーザーが `n` を選択した場合

```markdown
## ✅ 実装完了

ビルドチェックはスキップしました。
実装内容をご確認ください。

### 推奨確認事項
1. ビルドの成功
2. エラー/警告の確認
3. 動作テスト

作業完了です。
```

---

### 4-C. ユーザーが `custom` を指定した場合

```markdown
## 🔧 カスタム検証

どのような検証を実行しますか？

**オプション例**:
- `iPhone SE のみ`: iPhone SEでビルド
- `エラーのみ`: 警告を無視してエラーのみ確認
- `詳細ログ`: フルビルドログを出力
- `複数デバイス`: iPhone 16 Pro + iPad Pro

ご指示ください。
```

---

## 🎯 作業タイプ別テンプレート

### タイプA: 小規模修正（10-50行）

```markdown
## 小規模修正: [内容]

### 変更内容
- [ファイル名]: [変更内容（1-2行で説明）]

修正完了しました。

---

ビルドチェックを実行しますか？ (y/n)
※小規模修正のため、スキップを推奨します。
```

---

### タイプB: 中規模実装（新機能、100-500行）

```markdown
## 新機能実装: [機能名]

### 実装内容
- ✅ [コンポーネント1]
- ✅ [コンポーネント2]
- ✅ [テスト追加]

### 変更サマリー
- 新規ファイル: 3件
- 変更ファイル: 2件
- 変更行数: 約250行

---

## ビルドチェックとシミュレーション

以下の検証を実行しますか？

実行内容:
- ビルドチェック
- iPhone 16 Pro でのシミュレーション
- 新機能の動作確認

選択: (y/n/custom)
```

---

### タイプC: 大規模変更（リファクタリング、500行以上）

```markdown
## 大規模リファクタリング: [内容]

### フェーズ1: [説明]
- ✅ 完了

### フェーズ2: [説明]
- ✅ 完了

### フェーズ3: [説明]
- ✅ 完了

### 変更サマリー
- 変更ファイル: 15件
- 新規ファイル: 5件
- 削除ファイル: 3件
- 変更行数: 約1,200行

---

## 包括的検証

以下のフル検証を実行しますか？

実行内容:
1. ビルドチェック
2. 複数デバイスでの動作確認
3. パフォーマンステスト
4. リグレッションテスト

推定時間: 5-10分

選択: (y/n/custom)
```

---

## 🚨 エラー修正時の特別フォーマット

```markdown
## 🔧 エラー修正: [エラー内容]

### エラーの症状
- [症状の詳細]

### 原因
- [根本原因]

### 修正内容
- ✅ [ファイル1]: [修正内容]
- ✅ [ファイル2]: [修正内容]

---

## 修正検証（必須）

エラー修正のため、以下の検証を実行します。

実行内容:
1. コンパイルエラーチェック
2. ビルド成功確認
3. 問題の再現テスト
4. リグレッション確認

実行しますか？ (y/n)

⚠️ エラー修正時は検証を推奨します。
📖 詳細: `docs/ERROR_RESOLUTION_PROTOCOL.md`
```

---

## 📚 関連ドキュメント

- **シミュレーションポリシー**: `.copilot/SIMULATION_POLICY.md`
- **エラー解決プロトコル**: `docs/ERROR_RESOLUTION_PROTOCOL.md`
- **AI自動化ガイド**: `.copilot/AI-TRIGGER-GUIDE.md`
- **使用ガイド**: `.copilot/USAGE_GUIDE.md`

---

## 💡 ベストプラクティス

### 事前確認を求めるタイミング
1. ✅ ビルド実行前
2. ✅ シミュレーター起動前
3. ✅ 実行時テスト前
4. ✅ パフォーマンス測定前

### 事前確認が不要なもの
1. ✅ 静的チェック（構文確認）
2. ✅ ファイル存在確認
3. ✅ ドキュメント生成
4. ✅ レポート作成

### 即座実行が許可されるケース
ユーザーが以下のフレーズを使用した場合:
- "ビルドして"
- "今すぐビルド"
- "自動で実行"
- "確認せずに実行"

---

**このテンプレートに従うことで、ユーザーが作業のコントロールを保ちつつ、効率的な開発が可能になります。**
