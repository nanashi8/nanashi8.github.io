# GitHub Copilot 動作の仕組み - 完全図解ガイド

**小学生でも分かる！Copilot・スクリプト・CI/CDの連携**

最終更新: 2025年10月20日

---

## 🎓 この資料について

「Copilotに『バージョン管理してください』と言うと自動で動く」と聞いても、**実際にどうやって動いているのか分からない**ですよね。

さらに、**スクリプト**や**CI/CD**、**GitHub Actions**といった言葉が出てきて混乱していませんか？

このガイドでは、**Copilot・スクリプト・CI/CDの関係**を、図と具体例で詳しく説明します。

---

## 📚 目次

1. [登場人物の紹介](#登場人物の紹介)
2. [Copilotって何？](#copilotって何)
3. [スクリプトって何？](#スクリプトって何)
4. [CI/CDって何？](#cicdって何)
5. [3つの関係図](#3つの関係図)
6. [Copilotが読むファイルの種類](#copilotが読むファイルの種類)
7. [Copilotが動く3つのステップ](#copilotが動く3つのステップ)
8. [実際の動作フロー図](#実際の動作フロー図)
9. [具体例1: 小規模変更](#具体例1-小規模変更)
10. [具体例2: バージョン管理の完全フロー](#具体例2-バージョン管理の完全フロー)
11. [具体例3: CI/CDの自動実行](#具体例3-cicdの自動実行)
12. [SimpleWordプロジェクトの実例](#simplewordプロジェクトの実例)
13. [よくある質問](#よくある質問)

---

## 🎭 登場人物の紹介

### 1. あなた（開発者）👤
- コードを書く人
- 「○○してください」と指示する人

### 2. GitHub Copilot 🤖
- AIアシスタント
- あなたの指示を受けて、ファイルを読んで、作業を実行する
- **手作業を自動化**してくれる

### 3. スクリプト 📜
- コンピューターが実行できる**命令書**
- 例：「Gitコマンドを10個実行する」を1つにまとめたもの
- **繰り返し作業を自動化**する

### 4. CI/CD（GitHub Actions）⚙️
- **自動実行ロボット**
- GitHubにコードをプッシュすると**自動的に**動く
- 例：自動でテスト、自動でビルド、自動でデプロイ

### 5. Git Hooks 🪝
- **Gitの番犬**
- コミット前やプッシュ前に**自動的に**チェック
- 問題があれば止めてくれる

---

## 🤖 Copilotって何？

### 簡単に言うと

**Copilot = あなたの作業を手伝ってくれる賢いアシスタント**

例えるなら：
- あなた = 料理人
- Copilot = 優秀な料理アシスタント
- プロジェクトのファイル = レシピ本

### Copilotができること

```
┌─────────────────────────────────────┐
│  あなた: 「○○してください」       │
│          ↓                          │
│  Copilot: ファイルを読む            │
│          ↓                          │
│  Copilot: 何をすべきか理解する      │
│          ↓                          │
│  Copilot: 実際に実行する            │
│          ↓                          │
│  あなた: 「完了しました！」         │
└─────────────────────────────────────┘
```

---

## 📜 スクリプトって何？

### 簡単に言うと

**スクリプト = 連続した作業をまとめた命令書**

### 例：手作業の場合

```bash
# バージョン管理を手作業でやる場合（大変！）

1. git diff --stat で変更行数を確認
2. 変更行数を見て、バージョン番号を決める
3. git checkout -b でブランチを作る
4. git add . でファイルを追加
5. git commit -m でコミット
6. git tag -a でタグを作る
7. ドキュメントを作る
8. changelogを更新する
9. xcodebuild でビルドテスト
10. レポートを作る

→ 毎回10個の作業！面倒！
```

### スクリプトにすると

```bash
# スクリプト: auto-version.sh

./auto-version.sh "説明文"

→ 1つのコマンドで全部自動実行！
```

### SimpleWordプロジェクトのスクリプト

```
.copilot/scripts/
└── auto-version.sh  ← バージョン管理の自動化スクリプト
```

**ただし注意！**
SimpleWordでは、このスクリプトを**Copilotが自動で実行**します。
あなたが直接実行する必要はありません！

---

## ⚙️ CI/CDって何？

### CI = Continuous Integration（継続的インテグレーション）

**簡単に言うと**: コードをプッシュしたら**自動でテスト・ビルド**

```
あなた: git push
    ↓
GitHub: 「新しいコードが来た！」
    ↓
CI: 自動でビルド
CI: 自動でテスト
CI: 自動でコード品質チェック
    ↓
CI: 「✅ 全部OK！」または「❌ エラーあり！」
```

### CD = Continuous Deployment（継続的デプロイ）

**簡単に言うと**: テストが通ったら**自動でリリース**

```
CI: 「✅ 全部OK！」
    ↓
CD: 自動でApp Storeにアップロード
CD: 自動でバージョン番号を更新
CD: 自動でリリースノートを作成
```

### GitHub Actions = CI/CDを実現するツール

**場所**: `.github/workflows/*.yml`

**何が書いてある？**
- いつ実行するか（例：mainブランチにプッシュした時）
- 何を実行するか（例：ビルド、テスト）
- 失敗したらどうするか

### SimpleWordプロジェクトのCI/CD

```
.github/workflows/
└── code-quality.yml  ← コード品質チェックの自動化
```

**内容**:
1. **SwiftLintチェック**: コーディング規約違反を自動検出
2. **非推奨構文チェック**: 古い書き方を自動検出
3. **ビルドテスト**: 実際にビルドできるか確認
4. **警告チェック**: ビルド警告を自動検出

---

## 🔗 3つの関係図

### 全体像：誰がいつ動くか

```
┌─────────────────────────────────────────────────────────────────┐
│                        【開発フェーズ】                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  あなた 👤                                                       │
│    ↓                                                             │
│  「バージョン管理してください」                                  │
│    ↓                                                             │
│  Copilot 🤖 が起動                                               │
│    ↓                                                             │
│  ファイルを読む → スクリプトを実行 → 完了                       │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│                      【コミット前チェック】                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  あなた 👤                                                       │
│    ↓                                                             │
│  git commit                                                      │
│    ↓                                                             │
│  Git Hooks 🪝 が自動起動                                         │
│    ↓                                                             │
│  スクリプトを実行（非推奨構文チェック）                          │
│    ↓                                                             │
│  ✅ OK → コミット成功                                           │
│  ❌ NG → コミット中止                                           │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│                       【プッシュ後の自動化】                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  あなた 👤                                                       │
│    ↓                                                             │
│  git push                                                        │
│    ↓                                                             │
│  GitHub Actions ⚙️ が自動起動                                    │
│    ↓                                                             │
│  CI: ビルド、テスト、コード品質チェック                          │
│    ↓                                                             │
│  ✅ 全部成功 → グリーンバッジ 🟢                                │
│  ❌ 失敗 → レッドバッジ 🔴 + 通知                               │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 詳細：それぞれの役割

```
┌──────────────────────────────────────────────────────────────┐
│                    【Copilot 🤖】                            │
├──────────────────────────────────────────────────────────────┤
│ タイミング: あなたが指示した時                               │
│ 場所: あなたのPC（ローカル）                                 │
│ 役割: 手作業の自動化                                         │
│                                                              │
│ 具体例:                                                      │
│ ✓ ファイルを読む                                            │
│ ✓ コードを書く                                              │
│ ✓ コマンドを実行する                                        │
│ ✓ ドキュメントを生成する                                    │
│                                                              │
│ 使う人: あなた（対話的に）                                  │
└──────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────┐
│                  【スクリプト 📜】                           │
├──────────────────────────────────────────────────────────────┤
│ タイミング: Copilotが呼び出した時                            │
│           または手動実行した時                               │
│ 場所: あなたのPC（ローカル）                                 │
│ 役割: 複数のコマンドをまとめて実行                           │
│                                                              │
│ 具体例:                                                      │
│ ✓ git diffでファイル変更を確認                              │
│ ✓ バージョン番号を計算                                      │
│ ✓ gitコマンドを連続実行                                     │
│ ✓ ファイルを作成・編集                                      │
│                                                              │
│ 使う人: Copilot（自動）またはあなた（手動）                 │
└──────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────┐
│                 【Git Hooks 🪝】                             │
├──────────────────────────────────────────────────────────────┤
│ タイミング: git commit時に自動起動                           │
│ 場所: あなたのPC（ローカル）                                 │
│ 役割: コミット前の品質チェック                               │
│                                                              │
│ 具体例:                                                      │
│ ✓ 非推奨構文をチェック                                      │
│ ✓ コーディング規約違反をチェック                            │
│ ✓ 問題があればコミットを中止                                │
│                                                              │
│ 使う人: 誰でもない（完全自動）                              │
└──────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────┐
│              【CI/CD (GitHub Actions) ⚙️】                   │
├──────────────────────────────────────────────────────────────┤
│ タイミング: git push時に自動起動                             │
│ 場所: GitHubのサーバー（クラウド）                           │
│ 役割: プッシュ後の自動テスト・デプロイ                       │
│                                                              │
│ 具体例:                                                      │
│ ✓ ビルドテスト                                              │
│ ✓ ユニットテスト                                            │
│ ✓ コード品質チェック                                        │
│ ✓ 自動デプロイ                                              │
│                                                              │
│ 使う人: 誰でもない（完全自動）                              │
└──────────────────────────────────────────────────────────────┘
```

### 時系列フロー

```
【1. 開発中】
─────────────────────────────────────
あなた: コードを書く
    ↓
あなた: 「バージョン管理してください」
    ↓
Copilot 🤖: Custom Instruction読む
    ↓
Copilot 🤖: Promptファイル読む
    ↓
Copilot 🤖: スクリプト実行（任意）
    ↓
Copilot 🤖: Gitコマンド実行
    ↓
Copilot 🤖: 「完了しました！」

【2. コミット時】
─────────────────────────────────────
あなた: git commit
    ↓
Git Hooks 🪝: 自動起動
    ↓
Git Hooks 🪝: 非推奨構文チェック
    ↓
✅ OK: コミット成功
❌ NG: コミット中止 + エラー表示

【3. プッシュ後】
─────────────────────────────────────
あなた: git push
    ↓
GitHub: 「新しいコードが来た！」
    ↓
GitHub Actions ⚙️: 自動起動
    ↓
GitHub Actions ⚙️: code-quality.yml実行
    ├─ SwiftLintチェック
    ├─ 非推奨パターンチェック
    ├─ ビルドテスト
    └─ 警告チェック
    ↓
✅ 全部成功: グリーンバッジ 🟢
❌ 失敗: レッドバッジ 🔴 + メール通知
```

---

## 🤖 Copilotって何？

### 簡単に言うと

**Copilot = あなたの作業を手伝ってくれる賢いアシスタント**

例えるなら：
- あなた = 料理人
- Copilot = 優秀な料理アシスタント
- プロジェクトのファイル = レシピ本

### Copilotができること

```
┌─────────────────────────────────────┐
│  あなた: 「○○してください」       │
│          ↓                          │
│  Copilot: ファイルを読む            │
│          ↓                          │
│  Copilot: 何をすべきか理解する      │
│          ↓                          │
│  Copilot: 実際に実行する            │
│          ↓                          │
│  あなた: 「完了しました！」         │
└─────────────────────────────────────┘
```

---

## 📁 Copilotが読むファイルの種類

Copilotは、あなたがお願いをすると、自動的に**特定のファイル**を読みに行きます。

### 1. Custom Instructions（カスタム指示書）

**場所**: `.github/instructions/CustumInstruction.instructions.md`

**何が書いてある？**
- プロジェクト全体のルール
- コーディング規約
- 「○○と言われたら××を読め」という指示

**例え**: レストランの**接客マニュアル**

```
┌──────────────────────────────────────┐
│ Custom Instruction                   │
├──────────────────────────────────────┤
│ 「バージョン管理して」と言われたら  │
│ → .copilot/AI-TRIGGER-GUIDE.md を    │
│    読んで自動実行する                │
│                                      │
│ 作業開始前は必ず                     │
│ → .copilot/structure-map.md を確認   │
└──────────────────────────────────────┘
```

### 2. Prompts（作業手順書）

**場所**: `.copilot/prompts/*.md`

**何が書いてある？**
- 具体的な作業手順
- ステップバイステップの指示
- 実行するコマンド

**例え**: 料理の**詳しいレシピ**

```
┌──────────────────────────────────────┐
│ .copilot/prompts/auto-versioning.md  │
├──────────────────────────────────────┤
│ ステップ1: 変更行数を数える          │
│ ステップ2: バージョン番号を決める    │
│ ステップ3: ブランチを作る            │
│ ステップ4: コミットする              │
│ ステップ5: ドキュメントを作る        │
└──────────────────────────────────────┘
```

### 3. Structure Map（設計図）

**場所**: `.copilot/structure-map.md`

**何が書いてある？**
- プロジェクトの全体構造
- ファイル間の関係
- どこに何があるか

**例え**: 家の**設計図・間取り図**

```
┌──────────────────────────────────────┐
│ .copilot/structure-map.md            │
├──────────────────────────────────────┤
│ QuizView.swift (264行)               │
│ ├─ QuizSettings （設定）             │
│ ├─ ScoreStore （成績管理）           │
│ └─ CSVLoader （データ読込）          │
└──────────────────────────────────────┘
```

### 4. Quick Reference（よく使うパターン集）

**場所**: `.copilot/quick-ref.md`

**何が書いてある？**
- よく使うコードパターン
- 変数の使い方
- アニメーションの作り方

**例え**: 料理の**時短テクニック集**

### 5. Scripts（自動化スクリプト）

**場所**: `.copilot/scripts/*.sh`

**何が書いてある？**
- 実際に実行するコマンド
- シェルスクリプト

**例え**: 自動で動く**調理器具**

---

## 🔄 Copilotが動く3つのステップ

### ステップ1: 指示を受け取る

```
あなた 👤
  ↓
  💬 「バージョン管理してください」
  ↓
Copilot 🤖
```

### ステップ2: ファイルを読む

```
Copilot 🤖
  ↓
  📖 Custom Instruction を読む
  ↓
  📖 「AI-TRIGGER-GUIDE.md を読め」という指示を発見
  ↓
  📖 AI-TRIGGER-GUIDE.md を読む
  ↓
  📖 「auto-versioning.md を実行しろ」という指示を発見
  ↓
  📖 auto-versioning.md を読む
```

### ステップ3: 実行する

```
Copilot 🤖
  ↓
  ⚙️ ステップ1を実行
  ⚙️ ステップ2を実行
  ⚙️ ステップ3を実行
  ...
  ↓
  ✅ 完了レポートを表示
```

---

## 🗺️ 実際の動作フロー図

### 全体像（鳥の目で見る）

```
┌─────────────────────────────────────────────────────────────────┐
│                        【あなた】                                │
│                    「バージョン管理して」                        │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│                     【Copilot 起動】                             │
│                 何をすべきか調べ始める                           │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
        ┌───────────────────┴───────────────────┐
        │                                       │
        ↓                                       ↓
┌────────────────┐                    ┌─────────────────┐
│【読み込み①】  │                    │【読み込み②】   │
│ Custom         │───────────────────→│ AI-TRIGGER-     │
│ Instruction    │  「これを読め」と   │ GUIDE.md        │
│                │  書いてある         │                 │
└────────────────┘                    └────────┬────────┘
                                               │
                                               ↓
                                      ┌─────────────────┐
                                      │【読み込み③】   │
                                      │ auto-           │
                                      │ versioning.md   │
                                      │                 │
                                      └────────┬────────┘
                                               │
                                               ↓
                              ┌────────────────┴────────────────┐
                              │【理解】                          │
                              │ ステップ1: 変更行数を数える      │
                              │ ステップ2: バージョン決定         │
                              │ ステップ3: ブランチ作成          │
                              │ ステップ4: コミット              │
                              │ ...                              │
                              └────────┬────────────────────────┘
                                       │
                                       ↓
                              ┌────────────────────────────────┐
                              │【実行】                        │
                              │ git diff --stat                │
                              │ git checkout -b v1.2.0...      │
                              │ git commit -m "..."            │
                              │ git tag -a v1.2.0              │
                              │ ...                            │
                              └────────┬───────────────────────┘
                                       │
                                       ↓
                              ┌────────────────────────────────┐
                              │【完了】                        │
                              │ ✅ ブランチ作成完了            │
                              │ ✅ ドキュメント生成完了        │
                              │ ✅ ビルドテスト成功            │
                              └────────────────────────────────┘
```

---

## 🔍 具体例1: 小規模変更

### シナリオ
QuizView.swiftに新しいアニメーションを追加した（15行の変更）

### フロー

```
【ステップ1】あなたが言う
─────────────────────────────────────────
👤 「.copilot/structure-map.md を確認してください」

【ステップ2】Copilotが読む
─────────────────────────────────────────
🤖 Custom Instruction を読む
   ↓
   📄 「作業開始前は必ず structure-map.md を確認」
   と書いてある
   ↓
🤖 structure-map.md を開く
   ↓
   📄 QuizView.swift の情報を発見
   ```
   QuizView.swift (264行)
   ├─ アニメーション管理
   │  ├─ shouldAnimatePassedCount
   │  └─ shouldAnimateTotalCount
   ```
   ↓
🤖 「QuizViewのアニメーションの構造を理解しました」

【ステップ3】あなたが実装する
─────────────────────────────────────────
👤 コードを書く（15行追加）

【ステップ4】あなたが言う
─────────────────────────────────────────
👤 「バージョン管理してください」

【ステップ5】Copilotが自動実行
─────────────────────────────────────────
🤖 Custom Instruction を読む
   ↓
   📄 「バージョン管理と言われたら
       AI-TRIGGER-GUIDE.md を読め」
   ↓
🤖 AI-TRIGGER-GUIDE.md を読む
   ↓
   📄 「auto-versioning.md を実行しろ」
   ↓
🤖 auto-versioning.md を読む
   ↓
   📄 ステップ1: 変更行数を数える
   📄 ステップ2: バージョン決定
   📄 ステップ3: ブランチ作成
   📄 ...
   ↓
🤖 実行開始！

   ⚙️ git diff --stat を実行
   ⚙️ 15行変更 → パッチ版番号アップ（v1.2.0 → v1.2.1）
   ⚙️ git checkout -b v1.2.1_feature/add-animation
   ⚙️ git commit -m "feat: 新しいアニメーション追加"
   ⚙️ git tag -a v1.2.1
   ⚙️ ドキュメント生成
   ⚙️ xcodebuild でビルドテスト
   ↓
🤖 ✅ 完了レポート表示
```

---

## 🔥 具体例2: バージョン管理の自動実行

### 詳細フロー（裏で何が起きているか）

```
┌─────────────────────────────────────────────────────────────────┐
│ 1️⃣ あなたが言う: 「バージョン管理してください」                │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 2️⃣ Copilotが Custom Instruction を読む                          │
├─────────────────────────────────────────────────────────────────┤
│ ファイル: .github/instructions/CustumInstruction.instructions.md│
│                                                                  │
│ 📄 内容:                                                         │
│   「バージョン管理してください」と言われたら                    │
│   → .copilot/AI-TRIGGER-GUIDE.md を参照                         │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 3️⃣ Copilotが AI-TRIGGER-GUIDE.md を読む                         │
├─────────────────────────────────────────────────────────────────┤
│ ファイル: .copilot/AI-TRIGGER-GUIDE.md                          │
│                                                                  │
│ 📄 内容:                                                         │
│   トリガーフレーズ:                                              │
│   - "バージョン管理してください" ← これに反応！                 │
│   - "バージョン管理して"                                         │
│                                                                  │
│   自動実行する内容:                                              │
│   1. 変更内容を分析                                              │
│   2. バージョン番号を決定                                        │
│   3. ブランチを作成                                              │
│   ...                                                            │
│                                                                  │
│   詳細手順: .copilot/prompts/auto-versioning.md を実行          │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 4️⃣ Copilotが auto-versioning.md を読む                          │
├─────────────────────────────────────────────────────────────────┤
│ ファイル: .copilot/prompts/auto-versioning.md                   │
│                                                                  │
│ 📄 内容（ステップバイステップ）:                                │
│                                                                  │
│   ステップ1: 変更規模の判定                                     │
│   ┌────────────────────────────────────┐                        │
│   │ コマンド: git diff --stat          │                        │
│   │ 出力例: 15 files changed, 264 ins  │                        │
│   │ 判定: 264行 → マイナーアップデート │                        │
│   └────────────────────────────────────┘                        │
│                                                                  │
│   ステップ2: 現在のバージョン取得                               │
│   ┌────────────────────────────────────┐                        │
│   │ コマンド: git describe --tags      │                        │
│   │ 出力: v1.1.0                       │                        │
│   └────────────────────────────────────┘                        │
│                                                                  │
│   ステップ3: 新バージョン計算                                   │
│   ┌────────────────────────────────────┐                        │
│   │ 現在: v1.1.0                       │                        │
│   │ 変更: 264行（マイナー）            │                        │
│   │ 新版: v1.2.0                       │                        │
│   └────────────────────────────────────┘                        │
│                                                                  │
│   ステップ4: ブランチ作成                                       │
│   ┌────────────────────────────────────┐                        │
│   │ コマンド:                          │                        │
│   │ git checkout -b                    │                        │
│   │   v1.2.0_feature/quizview-complete │                        │
│   └────────────────────────────────────┘                        │
│                                                                  │
│   ステップ5: コミット作成                                       │
│   ┌────────────────────────────────────┐                        │
│   │ コマンド:                          │                        │
│   │ git commit -m                      │                        │
│   │   "feat: QuizView v1.2.0 完全実装" │                        │
│   └────────────────────────────────────┘                        │
│                                                                  │
│   ステップ6: タグ作成                                           │
│   ┌────────────────────────────────────┐                        │
│   │ コマンド:                          │                        │
│   │ git tag -a v1.2.0 -m "..."         │                        │
│   └────────────────────────────────────┘                        │
│                                                                  │
│   ステップ7: ドキュメント生成                                   │
│   ┌────────────────────────────────────┐                        │
│   │ 作成:                              │                        │
│   │ .copilot/versions/                 │                        │
│   │   v1.2.0-quizview-complete.md      │                        │
│   └────────────────────────────────────┘                        │
│                                                                  │
│   ステップ8: changelog更新                                      │
│   ┌────────────────────────────────────┐                        │
│   │ 更新: .copilot/changelog.md        │                        │
│   │ 追記: v1.2.0の変更内容             │                        │
│   └────────────────────────────────────┘                        │
│                                                                  │
│   ステップ9: ビルドテスト                                       │
│   ┌────────────────────────────────────┐                        │
│   │ コマンド:                          │                        │
│   │ xcodebuild -scheme SimpleWord      │                        │
│   │ 結果: ✅ BUILD SUCCEEDED           │                        │
│   └────────────────────────────────────┘                        │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 5️⃣ Copilotが各ステップを実行                                    │
├─────────────────────────────────────────────────────────────────┤
│ 🔧 ステップ1実行中...                                           │
│    → git diff --stat                                            │
│    → 264行変更を検出                                            │
│    ✅ 完了                                                      │
│                                                                  │
│ 🔧 ステップ2実行中...                                           │
│    → git describe --tags                                        │
│    → v1.1.0 を取得                                              │
│    ✅ 完了                                                      │
│                                                                  │
│ 🔧 ステップ3実行中...                                           │
│    → バージョン計算                                             │
│    → v1.2.0 に決定                                              │
│    ✅ 完了                                                      │
│                                                                  │
│ 🔧 ステップ4実行中...                                           │
│    → git checkout -b v1.2.0_feature/quizview-complete           │
│    ✅ 完了                                                      │
│                                                                  │
│ 🔧 ステップ5実行中...                                           │
│    → git commit                                                 │
│    ✅ 完了                                                      │
│                                                                  │
│ 🔧 ステップ6実行中...                                           │
│    → git tag -a v1.2.0                                          │
│    ✅ 完了                                                      │
│                                                                  │
│ 🔧 ステップ7実行中...                                           │
│    → ドキュメント生成                                           │
│    ✅ 完了                                                      │
│                                                                  │
│ 🔧 ステップ8実行中...                                           │
│    → changelog更新                                              │
│    ✅ 完了                                                      │
│                                                                  │
│ 🔧 ステップ9実行中...                                           │
│    → xcodebuild                                                 │
│    ✅ BUILD SUCCEEDED                                           │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 6️⃣ Copilotが完了レポートを表示                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━                                │
│   バージョン管理完了レポート                                    │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━                                │
│ ✅ ブランチ作成: v1.2.0_feature/quizview-complete               │
│ ✅ コミット作成: c7ad702                                        │
│ ✅ タグ作成: v1.2.0                                             │
│ ✅ ドキュメント生成: 完了                                       │
│ ✅ ビルドテスト: ✅ BUILD SUCCEEDED                             │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━                                │
│                                                                  │
│ すべて完了しました！                                            │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🔥 具体例3: CI/CDの自動実行

### シナリオ
QuizViewの変更をコミットして、GitHubにプッシュした

### 完全フロー

```
┌─────────────────────────────────────────────────────────────────┐
│ 1️⃣ あなたがコードを書く                                         │
├─────────────────────────────────────────────────────────────────┤
│ ファイル: QuizView.swift                                         │
│ 変更: アニメーション機能を追加（50行）                           │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 2️⃣ Copilotにバージョン管理を依頼                                │
├─────────────────────────────────────────────────────────────────┤
│ あなた: 「バージョン管理してください」                           │
│    ↓                                                             │
│ Copilot: [自動実行]                                              │
│    ↓                                                             │
│ ✅ ブランチ作成: v1.2.1_feature/add-animation                   │
│ ✅ ファイルステージング: git add .                              │
│ ✅ コミット準備完了                                             │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 3️⃣ あなたがコミット                                             │
├─────────────────────────────────────────────────────────────────┤
│ あなた: git commit -m "feat: アニメーション追加"                 │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 4️⃣ Git Hooks 🪝 が自動起動（コミット前チェック）                │
├─────────────────────────────────────────────────────────────────┤
│ ファイル: .git/hooks/pre-commit                                  │
│                                                                  │
│ 🔧 実行中: 非推奨構文チェック                                   │
│    ↓                                                             │
│    ┌────────────────────────────────────┐                       │
│    │ grep -r "\.onChange(of:.*) { _ in"│                       │
│    │ SimpleWord/                        │                       │
│    └────────────────────────────────────┘                       │
│    ↓                                                             │
│    検出結果: なし                                                │
│    ↓                                                             │
│ ✅ チェック完了: 非推奨構文なし                                 │
│                                                                  │
│ 🔧 実行中: SwiftLintチェック                                    │
│    ↓                                                             │
│    ┌────────────────────────────────────┐                       │
│    │ swiftlint lint                     │                       │
│    └────────────────────────────────────┘                       │
│    ↓                                                             │
│ ✅ チェック完了: 規約違反なし                                   │
│                                                                  │
│ ✅ 全てのチェック完了 → コミット成功！                          │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 5️⃣ あなたがプッシュ                                             │
├─────────────────────────────────────────────────────────────────┤
│ あなた: git push origin v1.2.1_feature/add-animation             │
│    ↓                                                             │
│ GitHub: 「新しいコードを受信しました！」                         │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 6️⃣ GitHub Actions ⚙️ が自動起動                                 │
├─────────────────────────────────────────────────────────────────┤
│ ファイル: .github/workflows/code-quality.yml                     │
│                                                                  │
│ トリガー: push イベント検出                                      │
│ ブランチ: v1.2.1_feature/add-animation                           │
│                                                                  │
│ 🚀 ワークフロー開始...                                          │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 7️⃣ Job 1: SwiftLintチェック                                     │
├─────────────────────────────────────────────────────────────────┤
│ 実行環境: macOS（GitHubのサーバー）                             │
│                                                                  │
│ Step 1: コードをチェックアウト                                   │
│    ┌────────────────────────────────────┐                       │
│    │ actions/checkout@v3                │                       │
│    └────────────────────────────────────┘                       │
│    ✅ 完了                                                      │
│                                                                  │
│ Step 2: SwiftLintをインストール                                 │
│    ┌────────────────────────────────────┐                       │
│    │ brew install swiftlint             │                       │
│    └────────────────────────────────────┘                       │
│    ✅ 完了（約30秒）                                            │
│                                                                  │
│ Step 3: SwiftLintを実行                                         │
│    ┌────────────────────────────────────┐                       │
│    │ swiftlint lint --reporter          │                       │
│    │   github-actions-logging           │                       │
│    └────────────────────────────────────┘                       │
│    ↓                                                             │
│    📊 結果:                                                      │
│       - SimpleWord/QuizView.swift: 0 errors, 0 warnings         │
│       - SimpleWord/Models/QuizState.swift: 0 errors             │
│       ...                                                        │
│    ✅ 完了                                                      │
│                                                                  │
│ ✅ Job 1 完了: SwiftLintチェック成功                            │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 8️⃣ Job 2: 非推奨パターンチェック                                │
├─────────────────────────────────────────────────────────────────┤
│ 実行環境: macOS（GitHubのサーバー）                             │
│                                                                  │
│ Step 1: コードをチェックアウト                                   │
│    ✅ 完了                                                      │
│                                                                  │
│ Step 2: 非推奨onChange構文チェック                              │
│    ┌────────────────────────────────────┐                       │
│    │ echo "🔍 Checking..."              │                       │
│    │ if grep -r "\.onChange(of:.*)"    │                       │
│    │      "{ _ in" SimpleWord/; then    │                       │
│    │   echo "❌ ERROR"                  │                       │
│    │   exit 1                           │                       │
│    │ else                               │                       │
│    │   echo "✅ No deprecated syntax"   │                       │
│    │ fi                                 │                       │
│    └────────────────────────────────────┘                       │
│    ↓                                                             │
│    🔍 Checking for deprecated onChange syntax...                │
│    ✅ No deprecated onChange syntax found                       │
│                                                                  │
│ Step 3: NavigationViewチェック                                  │
│    ┌────────────────────────────────────┐                       │
│    │ if grep -r "NavigationView"        │                       │
│    │      SimpleWord/; then             │                       │
│    │   echo "⚠️  WARNING"               │                       │
│    │ fi                                 │                       │
│    └────────────────────────────────────┘                       │
│    ↓                                                             │
│    ✅ No NavigationView usage found                             │
│                                                                  │
│ ✅ Job 2 完了: 非推奨パターンなし                               │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 9️⃣ Job 3: ビルドテスト                                          │
├─────────────────────────────────────────────────────────────────┤
│ 実行環境: macOS（GitHubのサーバー）                             │
│                                                                  │
│ Step 1: コードをチェックアウト                                   │
│    ✅ 完了                                                      │
│                                                                  │
│ Step 2: Xcodeバージョン選択                                     │
│    ┌────────────────────────────────────┐                       │
│    │ sudo xcode-select -s               │                       │
│    │   /Applications/Xcode.app          │                       │
│    └────────────────────────────────────┘                       │
│    ✅ 完了                                                      │
│                                                                  │
│ Step 3: プロジェクトビルド                                      │
│    ┌────────────────────────────────────┐                       │
│    │ xcodebuild clean build             │                       │
│    │   -project SimpleWord.xcodeproj    │                       │
│    │   -scheme SimpleWord               │                       │
│    │   -destination 'platform=iOS       │                       │
│    │     Simulator,name=iPhone 15'      │                       │
│    │   | tee build.log                  │                       │
│    └────────────────────────────────────┘                       │
│    ↓                                                             │
│    🔨 Building...                                                │
│    📦 Compiling Swift source files...                           │
│    🔗 Linking...                                                 │
│    ↓                                                             │
│    ✅ BUILD SUCCEEDED                                           │
│    ⏱️  Time: 2m 34s                                              │
│                                                                  │
│ Step 4: ビルド警告チェック                                      │
│    ┌────────────────────────────────────┐                       │
│    │ echo "🔍 Checking..."              │                       │
│    │ if grep -i "deprecated"            │                       │
│    │      build.log; then               │                       │
│    │   echo "⚠️  WARNING"               │                       │
│    │   exit 1                           │                       │
│    │ else                               │                       │
│    │   echo "✅ No warnings"            │                       │
│    │ fi                                 │                       │
│    └────────────────────────────────────┘                       │
│    ↓                                                             │
│    🔍 Checking for deprecation warnings...                      │
│    ✅ No deprecation warnings found                             │
│                                                                  │
│ ✅ Job 3 完了: ビルド成功                                       │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 🎉 全ジョブ完了                                                 │
├─────────────────────────────────────────────────────────────────┤
│ ✅ SwiftLintチェック: 成功                                      │
│ ✅ 非推奨パターンチェック: 成功                                 │
│ ✅ ビルドテスト: 成功                                           │
│                                                                  │
│ 🟢 グリーンバッジ表示                                           │
│                                                                  │
│ 📧 通知:                                                         │
│    件名: [SimpleWord] Build passed on v1.2.1_feature/...        │
│    宛先: あなたのメール                                          │
└─────────────────────────────────────────────────────────────────┘
```

### もし失敗したら？

```
┌─────────────────────────────────────────────────────────────────┐
│ ❌ Job 2: 非推奨パターンチェック - 失敗                         │
├─────────────────────────────────────────────────────────────────┤
│ Step 2: 非推奨onChange構文チェック                              │
│    ↓                                                             │
│    🔍 Checking for deprecated onChange syntax...                │
│    ❌ ERROR: Found deprecated onChange syntax                   │
│    SimpleWord/QuizView.swift:45: .onChange(of: score) { _ in }  │
│    ↓                                                             │
│    exit 1                                                        │
│                                                                  │
│ ❌ Job 2 失敗                                                   │
└─────────────────────────────────────────────────────────────────┘
                            │
                            ↓
┌─────────────────────────────────────────────────────────────────┐
│ 🔴 レッドバッジ表示                                             │
│                                                                  │
│ 📧 通知:                                                         │
│    件名: [SimpleWord] ❌ Build failed on v1.2.1_feature/...     │
│    宛先: あなたのメール                                          │
│    内容: 非推奨構文が検出されました                              │
│          SimpleWord/QuizView.swift:45を修正してください          │
└─────────────────────────────────────────────────────────────────┘
```

### CI/CDの利点

```
✅ 自動チェック
   → コミット忘れ、見落としを防ぐ

✅ 統一された環境
   → 「私のPCでは動くのに...」がなくなる

✅ 並列実行
   → 複数のテストを同時に実行して時短

✅ 履歴が残る
   → いつ何が失敗したか記録される

✅ 通知が来る
   → 問題があればすぐに気づける
```

---

## 🏢 SimpleWordプロジェクトの実例

### プロジェクト構造（完全版）

```
SimpleWord/
│
├── .github/
│   ├── instructions/
│   │   └── CustumInstruction.instructions.md  ← 【Copilotの最高司令塔】
│   │
│   └── workflows/                              ← 【CI/CD定義】
│       └── code-quality.yml                    ← GitHub Actionsの設定
│
├── .git/
│   └── hooks/
│       └── pre-commit                          ← 【Git Hooks】コミット前チェック
│
├── .copilot/
│   ├── README.md                               ← メインガイド
│   ├── AI-TRIGGER-GUIDE.md                     ← トリガー一覧
│   ├── structure-map.md                        ← 設計図
│   ├── quick-ref.md                            ← パターン集
│   ├── changelog.md                            ← 変更履歴
│   ├── deprecated-patterns.md                  ← 非推奨パターン集
│   │
│   ├── prompts/                                ← 【Copilot用作業手順書】
│   │   ├── auto-versioning.md                 ← 自動バージョン管理
│   │   ├── add-feature.md                     ← 新機能追加
│   │   ├── fix-bug.md                         ← バグ修正
│   │   ├── refactor-component.md              ← リファクタリング
│   │   └── code-review.md                     ← コードレビュー手順
│   │
│   ├── scripts/                                ← 【シェルスクリプト】
│   │   └── auto-version.sh                    ← バージョン管理の自動化
│   │
│   └── versions/                               ← バージョン履歴
│       └── v1.2.0-quizview-complete.md
│
├── .swiftlint.yml                              ← SwiftLint設定
│
└── SimpleWord/
    └── QuizView.swift                          ← 実際のコード
```

### 各ファイルの役割

#### 📋 Copilot関連

| ファイル | 役割 | 使用者 |
|---------|------|--------|
| `CustumInstruction.instructions.md` | Copilotの行動指針 | Copilot（自動） |
| `.copilot/prompts/*.md` | 作業手順書 | Copilot（自動） |
| `.copilot/structure-map.md` | プロジェクト設計図 | Copilot（参照） |
| `.copilot/quick-ref.md` | 実装パターン集 | Copilot（参照） |

#### 🔧 スクリプト関連

| ファイル | 役割 | 実行タイミング |
|---------|------|---------------|
| `.copilot/scripts/auto-version.sh` | バージョン管理自動化 | Copilotが呼び出し |
| `.git/hooks/pre-commit` | コミット前チェック | git commit時 |

#### ⚙️ CI/CD関連

| ファイル | 役割 | 実行タイミング |
|---------|------|---------------|
| `.github/workflows/code-quality.yml` | コード品質チェック | git push時 |
| `.swiftlint.yml` | コーディング規約 | SwiftLint実行時 |

### ファイル間の完全な連携フロー

```
┌──────────────────────────────────────────────────────────────────┐
│                    【レイヤー1: Copilot】                         │
├──────────────────────────────────────────────────────────────────┤
│                                                                   │
│  あなた: 「バージョン管理してください」                          │
│     ↓                                                             │
│  CustumInstruction.instructions.md を読む                         │
│     ↓                                                             │
│  AI-TRIGGER-GUIDE.md を読む                                       │
│     ↓                                                             │
│  auto-versioning.md を読む                                        │
│     ↓                                                             │
│  【判断】スクリプトを使う？直接コマンド？                        │
│     ↓                                                             │
│  gitコマンド実行（ブランチ作成、コミット準備）                   │
│     ↓                                                             │
│  ドキュメント生成（changelog.md, versions/*.md）                  │
│                                                                   │
└────────────────────────────┬─────────────────────────────────────┘
                             │
                             ↓
┌──────────────────────────────────────────────────────────────────┐
│                    【レイヤー2: Git Hooks】                       │
├──────────────────────────────────────────────────────────────────┤
│                                                                   │
│  あなた: git commit                                               │
│     ↓                                                             │
│  .git/hooks/pre-commit が自動起動                                 │
│     ↓                                                             │
│  非推奨構文チェック（grep検索）                                   │
│     ↓                                                             │
│  SwiftLintチェック（.swiftlint.yml参照）                          │
│     ↓                                                             │
│  ✅ OK → コミット続行                                            │
│  ❌ NG → コミット中止 + エラー表示                               │
│                                                                   │
└────────────────────────────┬─────────────────────────────────────┘
                             │
                             ↓
┌──────────────────────────────────────────────────────────────────┐
│                   【レイヤー3: CI/CD】                            │
├──────────────────────────────────────────────────────────────────┤
│                                                                   │
│  あなた: git push                                                 │
│     ↓                                                             │
│  GitHub: pushイベント検出                                         │
│     ↓                                                             │
│  .github/workflows/code-quality.yml 起動                          │
│     ↓                                                             │
│  【Job 1】SwiftLint実行                                           │
│     └─ .swiftlint.yml の設定に従う                               │
│     └─ カスタムルールで非推奨構文検出                            │
│     ↓                                                             │
│  【Job 2】非推奨パターンチェック                                  │
│     └─ .copilot/deprecated-patterns.md 参照                       │
│     └─ grep検索で検出                                            │
│     ↓                                                             │
│  【Job 3】ビルドテスト                                            │
│     └─ xcodebuild実行                                            │
│     └─ 警告・エラーをチェック                                    │
│     ↓                                                             │
│  結果を集約                                                       │
│     ↓                                                             │
│  ✅ 全成功 → グリーンバッジ 🟢 + 通知                            │
│  ❌ 失敗 → レッドバッジ 🔴 + エラー通知                          │
│                                                                   │
└──────────────────────────────────────────────────────────────────┘
```

### 実際の連携フロー

```
【シーン: QuizViewに新機能を追加した後】

┌──────────────────────────────────────┐
│ あなた: 「バージョン管理してください」│
└────────────┬─────────────────────────┘
             │
             ↓
┌──────────────────────────────────────┐
│ Copilot: 🔍 Custom Instruction読む   │
│                                      │
│ ファイル:                            │
│ .github/instructions/                │
│   CustumInstruction.instructions.md  │
│                                      │
│ 📄 発見した指示:                     │
│   「バージョン管理と言われたら       │
│    AI-TRIGGER-GUIDE.md を見ろ」      │
└────────────┬─────────────────────────┘
             │
             ↓
┌──────────────────────────────────────┐
│ Copilot: 🔍 AI-TRIGGER-GUIDE読む     │
│                                      │
│ ファイル:                            │
│ .copilot/AI-TRIGGER-GUIDE.md         │
│                                      │
│ 📄 発見した指示:                     │
│   トリガー検出！                     │
│   → auto-versioning.md を実行        │
└────────────┬─────────────────────────┘
             │
             ↓
┌──────────────────────────────────────┐
│ Copilot: 🔍 auto-versioning読む      │
│                                      │
│ ファイル:                            │
│ .copilot/prompts/auto-versioning.md  │
│                                      │
│ 📄 発見した手順:                     │
│   ステップ1: git diff --stat         │
│   ステップ2: バージョン決定          │
│   ステップ3: git checkout -b         │
│   ...                                │
└────────────┬─────────────────────────┘
             │
             ↓
┌──────────────────────────────────────┐
│ Copilot: ⚙️ 実行開始                 │
│                                      │
│ 🔧 git diff --stat                   │
│    → 264行変更                       │
│                                      │
│ 🔧 バージョン計算                    │
│    → v1.1.0 → v1.2.0                 │
│                                      │
│ 🔧 git checkout -b                   │
│      v1.2.0_feature/quizview-...     │
│                                      │
│ 🔧 git commit -m "..."               │
│                                      │
│ 🔧 git tag -a v1.2.0                 │
│                                      │
│ 🔧 ドキュメント生成                  │
│    → .copilot/versions/v1.2.0-...md  │
│                                      │
│ 🔧 changelog更新                     │
│    → .copilot/changelog.md           │
│                                      │
│ 🔧 structure-map更新                 │
│    → .copilot/structure-map.md       │
│                                      │
│ 🔧 xcodebuild                        │
│    → ✅ BUILD SUCCEEDED              │
└────────────┬─────────────────────────┘
             │
             ↓
┌──────────────────────────────────────┐
│ Copilot: 📊 完了レポート表示         │
│                                      │
│ ✅ すべて完了しました！              │
└──────────────────────────────────────┘
```

---

## 🎯 連携の重要ポイント

### ポイント1: ファイルの連鎖

```
Custom Instruction
    ↓ 「これを読め」
AI-TRIGGER-GUIDE
    ↓ 「これを実行しろ」
auto-versioning
    ↓ 「このコマンドを実行しろ」
実際の実行
```

**まるでドミノ倒し！**

### ポイント2: トリガーワード

```
あなたが言う言葉
    ↓
Custom Instructionに書いてある「トリガーワード」と一致
    ↓
自動的に次のファイルを読む
    ↓
実行される
```

**まるで合言葉！**

### ポイント3: Copilotは賢い

Copilotは：
- ✅ ファイルの内容を理解できる
- ✅ 「○○してください」を実際の作業に変換できる
- ✅ コマンドを実行できる
- ✅ ファイルを作成・編集できる

**人間のアシスタントのように働く！**

---

## 🔄 他の作業パターン

### パターン1: 新機能追加

```
あなた: 「新しいアニメーション機能を追加したいです」
  ↓
Copilot: Custom Instruction読む
  ↓ 「新機能の場合は structure-map を確認」
Copilot: structure-map.md 読む
  ↓ QuizViewの構造を理解
Copilot: quick-ref.md 読む
  ↓ アニメーションパターンを取得
Copilot: 「こう実装するのがいいですよ」と提案
  ↓
あなた: コードを書く
  ↓
あなた: 「バージョン管理してください」
  ↓
Copilot: [自動実行]
```

### パターン2: バグ修正

```
あなた: 「タイマーがうまく動きません」
  ↓
Copilot: Custom Instruction読む
  ↓ 「バグ修正の場合は structure-map を確認」
Copilot: structure-map.md 読む
  ↓ タイマー関連のコードを特定
Copilot: quick-ref.md 読む
  ↓ タイマーのパターンを確認
Copilot: 「ここが問題です」と指摘
  ↓
あなた: 修正する
  ↓
あなた: 「バージョン管理してください」
  ↓
Copilot: [自動実行]
```

### パターン3: リファクタリング

```
あなた: 「QuizViewをリファクタリングしたいです」
  ↓
Copilot: Custom Instruction読む
  ↓ 「大規模変更の場合は refactor-component.md を読め」
Copilot: structure-map.md 読む
  ↓ 全体構造を理解
Copilot: refactor-component.md 読む
  ↓ リファクタリング手順を取得
Copilot: 「3つのフェーズに分けましょう」と提案
  ↓
あなた: フェーズ1を実装
  ↓
あなた: 「バージョン管理してください」
  ↓
Copilot: [自動実行]
  ↓
あなた: フェーズ2を実装
  ↓
あなた: 「バージョン管理してください」
  ↓
Copilot: [自動実行]
```

---

## 📊 ファイル間の関係図

```
                    ┌──────────────────────────────┐
                    │  Custom Instruction          │
                    │  (最上位の司令塔)            │
                    └──────────┬───────────────────┘
                               │
                 ┌─────────────┼─────────────┐
                 │             │             │
                 ↓             ↓             ↓
    ┌────────────────┐ ┌──────────────┐ ┌──────────────┐
    │ AI-TRIGGER-    │ │ structure-   │ │ quick-ref    │
    │ GUIDE          │ │ map          │ │              │
    │ (トリガー管理) │ │ (設計図)     │ │ (パターン集) │
    └────────┬───────┘ └──────────────┘ └──────────────┘
             │
             ↓
    ┌────────────────────────────────┐
    │ prompts/                        │
    │ (具体的な作業手順書)            │
    ├────────────────────────────────┤
    │ ├─ auto-versioning.md          │
    │ ├─ add-feature.md              │
    │ ├─ fix-bug.md                  │
    │ └─ refactor-component.md       │
    └────────┬───────────────────────┘
             │
             ↓
    ┌────────────────────────────────┐
    │ scripts/                        │
    │ (実行スクリプト)                │
    ├────────────────────────────────┤
    │ └─ auto-version.sh             │
    └────────────────────────────────┘
```

---

## ❓ よくある質問

### Q1: Copilotはどうやってファイルを見つけるの？

**A**: Custom Instructionに**パスが書いてある**からです。

例：
```markdown
詳細は `.copilot/AI-TRIGGER-GUIDE.md` を参照
```

↑ この文章を読んで、Copilotは自動的に`.copilot/AI-TRIGGER-GUIDE.md`を開きます。

---

### Q2: なぜ「バージョン管理してください」と言うだけで動くの？

**A**: Custom Instructionに**トリガーワードが定義されている**からです。

```markdown
**トリガーフレーズ**（これを言うだけで全自動実行）:
- "バージョン管理してください"
- "バージョン管理して"
```

↑ Copilotはこの言葉を検出すると、自動的に次のステップに進みます。

---

### Q3: Copilotはスクリプトも実行できるの？

**A**: はい！Copilotは：
- ✅ ターミナルコマンドを実行できる
- ✅ ファイルを作成・編集できる
- ✅ Gitコマンドを実行できる
- ✅ ビルドコマンドを実行できる

---

### Q4: 自分で新しいトリガーを追加できる？

**A**: できます！

1. Custom Instructionにトリガーワードを追加
2. 対応するPromptファイルを作成
3. 実行手順を書く

例：
```markdown
<!-- Custom Instruction に追加 -->
**新しいトリガー**: "テストを実行して"
→ .copilot/prompts/run-tests.md を実行
```

---

### Q5: なぜこんなに複雑なの？

**A**: 実は**シンプル**なんです！

人間の仕事と同じ：
1. 📖 マニュアルを読む（Custom Instruction）
2. 📋 作業手順書を確認（Prompts）
3. 🔧 実際に作業する（Scripts実行）
4. ✅ 報告する（レポート表示）

Copilotは人間と同じ流れで働いています！

---

### Q6: ファイルを読む順番は決まってるの？

**A**: はい、必ず**Custom Instruction → その他**の順です。

```
必ず最初: Custom Instruction
    ↓
次に読むファイルの指示を取得
    ↓
指示されたファイルを読む
    ↓
実行
```

---

### Q7: Copilotが間違えることはある？

**A**: あります。でも、**ファイルの書き方を明確にする**ことで防げます。

良い書き方：
```markdown
✅ 「バージョン管理してください」と言われたら
   → .copilot/prompts/auto-versioning.md を実行する
```

悪い書き方：
```markdown
❌ バージョン管理は適切に行う
```

**具体的に**書くことが重要！

---

### Q8: 他のプロジェクトでも使える？

**A**: はい！この仕組みは**どのプロジェクトでも使えます**。

必要なもの：
1. `.github/instructions/` にCustom Instruction
2. `.copilot/` にPrompts
3. トリガーワードの定義

これだけで、あなたのプロジェクトでも自動化できます！

---

### Q9: CopilotとCI/CDの違いは何？

**A**: **実行場所**と**実行タイミング**が違います。

| 項目 | Copilot | CI/CD |
|------|---------|-------|
| 実行場所 | あなたのPC | GitHubのサーバー |
| 実行タイミング | あなたが指示した時 | git push時（自動） |
| 用途 | 手作業の自動化 | 品質チェックの自動化 |
| 対話性 | あり（質問できる） | なし（決められた処理のみ） |

**例え**:
- Copilot = あなたの隣にいるアシスタント
- CI/CD = 工場の検査ライン

---

### Q10: スクリプトはいつ使う？

**A**: **Copilotが内部で使う**ことがあります。

```
シナリオ1: Copilotが直接実行
─────────────────────────────
Copilot → git diff を実行
Copilot → バージョン計算
Copilot → git checkout を実行
→ スクリプト不要

シナリオ2: Copilotがスクリプトを呼び出し
─────────────────────────────
Copilot → auto-version.sh を実行
→ スクリプトが一連の処理を実行

シナリオ3: あなたが直接実行
─────────────────────────────
あなた → ./auto-version.sh "説明"
→ スクリプトが実行される
```

**SimpleWordでは、Copilotが判断して最適な方法を選びます。**

---

### Q11: Git Hooksって何？いつ動く？

**A**: **Gitコマンドの前後に自動実行されるスクリプト**です。

```
┌─────────────────────────────────┐
│ Git Hooksの種類                 │
├─────────────────────────────────┤
│ pre-commit                      │
│ → git commit の直前に実行       │
│                                 │
│ pre-push                        │
│ → git push の直前に実行         │
│                                 │
│ post-commit                     │
│ → git commit の直後に実行       │
└─────────────────────────────────┘
```

**SimpleWordでは**:
- `pre-commit`: コミット前に非推奨構文チェック
- 問題があればコミットを中止

**例え**: 玄関のセンサー（出る前に忘れ物チェック）

---

### Q12: CI/CDが失敗したらどうなる？

**A**: **通知が来て、バッジが赤くなります**。でも安心！

```
失敗時の対応フロー
───────────────────────────────
1. メールで通知が来る
   「❌ Build failed」
   
2. GitHubで詳細を確認
   どのJobが失敗したか
   何が原因か
   
3. ローカルで修正
   問題を修正してコミット
   
4. 再度プッシュ
   CI/CDが自動的に再実行される
   
5. 成功！
   🟢 グリーンバッジに変わる
```

**失敗しても問題ありません！むしろ早期発見できてラッキー！**

---

### Q13: SwiftLintって何？

**A**: **Swiftのコーディング規約チェックツール**です。

```
SwiftLintがチェックすること
───────────────────────────────
✓ インデントは正しいか
✓ 行の長さは適切か
✓ 変数名は規約に従っているか
✓ 非推奨構文を使っていないか
✓ 空白は適切か
...
```

**SimpleWordでは**:
1. `.swiftlint.yml` に設定を記述
2. Git Hooksで自動実行（コミット前）
3. CI/CDで自動実行（プッシュ後）

**例え**: 作文の添削先生

---

### Q14: GitHub Actionsの.ymlファイルの書き方は？

**A**: **YAMLという形式**で書きます。基本構造：

```yaml
name: ワークフロー名

on:  # いつ実行するか
  push:
    branches: [ main ]

jobs:  # 何を実行するか
  job1:
    name: ジョブ名
    runs-on: macos-latest  # 実行環境
    
    steps:  # 実行ステップ
    - name: ステップ1
      run: コマンド
      
    - name: ステップ2
      run: コマンド
```

**SimpleWordの例**:
```yaml
# .github/workflows/code-quality.yml
name: Swift Code Quality Check

on:
  push:
    branches: [ main, develop ]

jobs:
  swiftlint:
    runs-on: macos-latest
    steps:
    - name: コードチェックアウト
      uses: actions/checkout@v3
    
    - name: SwiftLint実行
      run: swiftlint lint
```

---

### Q15: CI/CDが重いと遅くならない？

**A**: **GitHubのサーバーで実行される**ので、あなたのPCは影響ありません！

```
あなたのPC                GitHubのサーバー
─────────────────────────────────────────
git push                  ←コードを送信
                          
作業を続ける              CI/CD実行中...
                          (数分かかる)
                          
別の作業                  完了！
                          
メール通知受信 ←─────────  結果を送信
```

**並行作業OK！CI/CDの完了を待つ必要なし！**

---

### Q16: Copilot、スクリプト、CI/CDの使い分けは？

**A**: それぞれ得意分野が違います。

| 用途 | 使うもの | 理由 |
|------|---------|------|
| 手作業の自動化 | Copilot | 柔軟に判断できる |
| 繰り返し作業 | スクリプト | 決まった処理を高速実行 |
| 品質チェック | CI/CD | 客観的・自動的にチェック |
| コミット前チェック | Git Hooks | 問題を早期発見 |

**SimpleWordでは全部を組み合わせて使っています！**

---

### Q17: 自分でCI/CDをカスタマイズできる？

**A**: できます！`.github/workflows/code-quality.yml`を編集するだけ。

**追加例1: ユニットテストを追加**
```yaml
- name: Run Tests
  run: |
    xcodebuild test \
      -project SimpleWord.xcodeproj \
      -scheme SimpleWord \
      -destination 'platform=iOS Simulator,name=iPhone 15'
```

**追加例2: Slackに通知**
```yaml
- name: Notify Slack
  if: failure()
  run: |
    curl -X POST $SLACK_WEBHOOK \
      -d '{"text": "Build failed!"}'
```

**可能性は無限大！**

---

## 🎓 まとめ

### 完全な自動化の流れ（全体像）

```
【フェーズ1: 開発】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
👤 あなた: コードを書く
    ↓
👤 あなた: 「バージョン管理してください」
    ↓
🤖 Copilot: Custom Instruction読む
    ↓
🤖 Copilot: Promptsを読む
    ↓
🤖 Copilot: Gitコマンド実行
    ↓
🤖 Copilot: ドキュメント生成
    ↓
✅ ブランチ作成、コミット準備完了


【フェーズ2: コミット前】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
👤 あなた: git commit
    ↓
🪝 Git Hooks: 自動起動（pre-commit）
    ↓
📜 スクリプト実行: 非推奨構文チェック
    ↓
📜 SwiftLint実行: コーディング規約チェック
    ↓
✅ OK: コミット成功
❌ NG: コミット中止 + エラー表示


【フェーズ3: プッシュ後】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
👤 あなた: git push
    ↓
⚙️ GitHub Actions: 自動起動
    ↓
⚙️ CI/CD実行:
   ├─ SwiftLintチェック
   ├─ 非推奨パターンチェック
   ├─ ビルドテスト
   └─ 警告チェック
    ↓
✅ 全成功: 🟢 グリーンバッジ
❌ 失敗: 🔴 レッドバッジ + 通知
```

### 5つの登場人物の役割

```
┌─────────────────────────────────────────────┐
│ 👤 あなた（開発者）                         │
├─────────────────────────────────────────────┤
│ 役割: コードを書く、指示を出す              │
│ 場所: ローカルPC                            │
│ タイミング: 常時                            │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│ 🤖 Copilot                                  │
├─────────────────────────────────────────────┤
│ 役割: 手作業を自動化                        │
│ 場所: ローカルPC                            │
│ タイミング: あなたが指示した時              │
│ 強み: 柔軟、対話的、判断できる              │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│ 📜 スクリプト                               │
├─────────────────────────────────────────────┤
│ 役割: 決まった処理を高速実行                │
│ 場所: ローカルPC                            │
│ タイミング: Copilotまたはあなたが呼び出し   │
│ 強み: 高速、確実、再現性                    │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│ 🪝 Git Hooks                                │
├─────────────────────────────────────────────┤
│ 役割: コミット前の品質チェック              │
│ 場所: ローカルPC                            │
│ タイミング: git commit時（完全自動）        │
│ 強み: 問題の早期発見、強制チェック          │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│ ⚙️ CI/CD (GitHub Actions)                   │
├─────────────────────────────────────────────┤
│ 役割: プッシュ後の自動テスト・デプロイ      │
│ 場所: GitHubのサーバー（クラウド）          │
│ タイミング: git push時（完全自動）          │
│ 強み: 客観的、並列実行、履歴管理            │
└─────────────────────────────────────────────┘
```

### ファイル連携の全体像

```
Custom Instruction
  ↓ 【Copilotが読む】
AI-TRIGGER-GUIDE
  ↓ 【Copilotが読む】
Prompts (auto-versioning.md)
  ↓ 【Copilotが読む】
Scripts (auto-version.sh)
  ↓ 【Copilotが実行（任意）】
Gitコマンド実行
  ↓
コミット
  ↓ 【Git Hooksが割り込み】
pre-commit
  ↓ 【スクリプト実行】
非推奨構文チェック、SwiftLint
  ↓
プッシュ
  ↓ 【GitHub Actionsが起動】
code-quality.yml
  ↓ 【.swiftlint.yml参照】
CI/CD実行
  ↓
結果通知
```

### 最も重要なポイント

#### 1. **Copilot = 賢いアシスタント**
- あなたの指示を理解する
- ファイルを読んで判断する
- 柔軟に作業を実行する

#### 2. **スクリプト = 自動化の道具**
- 決まった処理を高速実行
- Copilotが内部で使うことも

#### 3. **Git Hooks = 門番**
- コミット前に自動チェック
- 問題があれば通さない

#### 4. **CI/CD = 品質保証ライン**
- プッシュ後に自動テスト
- 問題があれば通知

#### 5. **全部が連携して働く**
- それぞれが得意分野を担当
- 多重防御で品質を守る

### SimpleWordでの実践

```
1. あなたがすること
   ├─ コードを書く
   ├─ 「バージョン管理してください」と言う
   ├─ git commit
   └─ git push

2. 自動で実行されること
   ├─ Copilotが作業を自動化
   ├─ Git Hooksが品質をチェック
   └─ CI/CDが最終確認

3. あなたが受け取るもの
   ├─ 完了レポート（Copilot）
   ├─ エラー通知（Git Hooks）
   └─ ビルド結果通知（CI/CD）
```

### 3つの自動化レベル

```
レベル1: 半自動（Copilot）
────────────────────────────
あなたが指示 → Copilotが実行
メリット: 柔軟、対話的
用途: 手作業の自動化

レベル2: 自動（Git Hooks）
────────────────────────────
git commit → 自動チェック
メリット: 強制、早期発見
用途: コミット前の品質保証

レベル3: 完全自動（CI/CD）
────────────────────────────
git push → 自動テスト・デプロイ
メリット: 客観的、並列実行
用途: 統合テスト、デプロイ
```

---

## 🚀 これであなたも完全マスター！

このガイドを読めば：

### ✅ 理解できること
- Copilotがどう動くか
- スクリプトの役割
- CI/CDの仕組み
- Git Hooksの動作
- ファイル間の連携

### ✅ できるようになること
- Copilotに適切な指示を出す
- CI/CDをカスタマイズする
- Git Hooksを設定する
- 問題をトラブルシューティングする
- 自分のプロジェクトに応用する

### ✅ 得られる効果
- 🚀 開発速度が向上
- 🛡️ コード品質が向上
- 😌 ミスが減る
- 📊 作業が可視化される
- 🤝 チーム開発が円滑に

---

## 📖 参考資料

### SimpleWordプロジェクトの他のドキュメント

1. **`.copilot作業経路ガイド.md`**
   - 作業フローの詳細
   - どのファイルをいつ使うか

2. **`.copilot/README.md`**
   - .copilotフォルダの全体像
   - 作業規模別のワークフロー

3. **`.copilot/AI-TRIGGER-GUIDE.md`**
   - トリガーフレーズ一覧
   - 自動実行の詳細

4. **`.copilot/structure-map.md`**
   - プロジェクト全体構造
   - ファイル間の依存関係

5. **`DEPRECATION_GUIDE.md`**
   - 非推奨構文の対策
   - セットアップ方法

---

## 🎉 おわりに

**Copilot・スクリプト・CI/CDの組み合わせ**は、現代のソフトウェア開発における最強の武器です。

SimpleWordプロジェクトでは、この3つを完璧に連携させることで：

- ✅ 手作業をほぼゼロに
- ✅ コード品質を自動保証
- ✅ 開発者の負担を大幅削減

**あなたも、この仕組みを使いこなして、効率的に開発しましょう！** 🚀

---

**最終更新: 2025年10月20日**
**バージョン: 2.0.0 - CI/CD・スクリプト完全解説版**
**対象プロジェクト: SimpleWord**
**作成者: GitHub Copilot**
