# ファイル索引

**最終更新: 2025-10-30**

このドキュメントは、SimpleWord プロジェクトの主要ファイルと仕様書の索引です。

## ⚠️ 重要: 復元のための情報

このファイルは、プロジェクトの全仕様書と主要ファイルの位置を示します。機能喪失時の復元に不可欠です。

---

## 🎯 仕様書バージョンについて

### v3マスター仕様書（最優先）⭐ NEW
**ファイル**: `00_機能復元マスター仕様書_v3.md`  
**作成日**: 2025年10月30日  
**特徴**:
- ✅ プロジェクト全体の包括的な仕様
- ✅ 全機能の概要を一元化
- ✅ データフロー・アーキテクチャ・アルゴリズムを詳細に記載
- ✅ 復元可能性: ★★★★★
- ✅ コード例が非常に豊富

**使用推奨**: 
- 機能喪失時の復元（最優先）
- 新規開発者のオンボーディング
- プロジェクト全体の理解
- 設計方針の確認

### v2仕様書（機能別・最新）
**作成日**: 2025年10月28日～30日  
**特徴**:
- ✅ 各機能の詳細仕様
- ✅ 現在の実装と完全一致
- ✅ 簡素化後のアーキテクチャを反映
- ✅ 復元可能性: ★★★★★
- ✅ コード例が豊富

**使用推奨**: 特定機能の詳細確認、機能復元、新機能追加、バグ修正

### v1仕様書（旧版・参考用）
**特徴**:
- 📚 AdaptiveScheduler時代の設計
- 📚 適応型学習の詳細仕様
- 📚 簡素化前の複雑なアーキテクチャ

**使用推奨**: 設計思想の理解、適応型学習の再実装

---

## 仕様書一覧（docs/仕様書/）

編集作業を始める前に、該当する仕様書を確認してください。

### 00_機能復元マスター仕様書_v3.md ⭐ 最優先
- **内容**: プロジェクト全体の包括的な仕様書
- **最近の更新**: 2025-10-30（新規作成）
- **復元可能性**: ★★★★★（完全復元可能）
- **特徴**:
  - 全機能の概要を一元化
  - アーキテクチャ原則とデータフロー
  - 主要アルゴリズムの詳細実装
  - コアモデルの完全な定義
  - データ永続化戦略
  - UI/UXパターン集
- **使用シーン**:
  - 機能喪失時の復元（最優先参照）
  - 新規開発者のオンボーディング
  - プロジェクト全体像の把握
  - 設計方針の確認

### 00_編集ガイド.md
- **内容**: プロジェクト全体の編集ガイドライン
- **対象者**: 開発者・編集者
- **確認タイミング**: 初回編集時、大規模変更前

---

### 01_クイズ機能_仕様書.md ⭐ 最新
- **内容**: クイズ画面（QuizView）の完全な仕様
- **最近の更新**: 2025-10-30（v2から統合）
- **関連ファイル**: 
  - `QuizView.swift`
  - `QuizSessionStore.swift`
  - `QuizComponents/*.swift`
- **復元可能性**: ★★★★★（完全復元可能）
- **特徴**:
  - シンプルなバッチ学習フローを詳細に記載
  - セッション管理の完全な仕様
  - ラウンドロビン配置アルゴリズムの実装例
  - 各処理のコード例が豊富

---

### 02_出題設定_仕様書.md ⭐ 最新
- **内容**: 出題設定画面（QuizSettingsView）の完全な仕様
- **最近の更新**: 2025-10-30（v2から統合）
- **関連ファイル**:
  - `QuizSettingsView.swift`
  - `QuizSettings.swift`
  - `CurrentCSV.swift`
- **復元可能性**: ★★★★★（完全復元可能）
- **特徴**:
  - CSV別設定管理の内部構造を詳細に記載
  - PerCSVSettingsによる保存方式
  - 分野・難易度抽出ロジック（QuestionItemRepository使用）
  - 完全なバインディングパターン

---

### 03_問題集管理_CSV_仕様書.md ⭐ 最新
- **内容**: CSV管理機能の完全な仕様
- **最近の更新**: 2025-10-30（v2から統合）
- **関連ファイル**:
  - `FileUtils.swift`
  - `QuestionItemRepository.swift`
  - `CSVHeaderParser.swift`
- **復元可能性**: ★★★★☆
- **特徴**:
  - CSVフォーマット仕様（ヘッダ駆動型）
  - ファイル操作の詳細
  - CSV管理画面の復元ガイド
  - インポート・エクスポート機能

---

### 04_ナビゲーター機能_仕様書.md
- **内容**: 単語一覧表示機能
- **関連機能**: ファイル監視、検索・フィルタ
- **関連ファイル**: `NavigatorView.swift`, `FileWatcher.swift`
- **復元可能性**: ★★★☆☆
- **注意**: 現在は使用頻度が低い機能

---

### 05_成績表示_仕様書.md ⭐ 最新
- **内容**: 成績表示機能の完全な仕様
- **最近の更新**: 2025-10-30（v2から統合）
- **関連ファイル**:
  - `ScoreView.swift`
  - `QuizResultsByCSVView.swift`
  - `QuizResultsDetailView.swift`
  - `WordScoresView.swift`
  - `ScoreStore.swift`
  - `WordScoreStore.swift`
- **復元可能性**: ★★★★☆
- **特徴**:
  - データモデル（WordScore, QuizResult）の完全定義
  - ストアの詳細実装（CSV別管理）
  - UI実装の完全なコード例
  - 並び替え・フィルタ機能

---

### 06_IDマップ管理_仕様書.md
- **内容**: 単語IDの整合性管理
- **関連機能**: ID生成、整合性チェック、修復
- **関連ファイル**: `IDMapAdminView.swift`, `IDFactory.swift`
- **復元可能性**: ★★★☆☆

---

### 07_CSV編集_仕様書.md
- **内容**: アプリ内CSV編集機能
- **注意**: 大規模編集は外部ツール推奨
- **関連ファイル**: `CSVEditorView.swift`, `CSVLoader.swift`
- **復元可能性**: ★★☆☆☆

---

### 08_外観_仕様書.md
- **内容**: ライト/ダークモード切り替え
- **関連機能**: システム設定追従、カスタムテーマ
- **関連ファイル**: `Appearance.swift`, `SimpleWordApp.swift`
- **復元可能性**: ★★★☆☆

---

### 09_出題ロジック_仕様書.md ⭐ 最新
- **内容**: シンプルバッチ学習の完全な仕様
- **最近の更新**: 2025-10-30（v2から統合）
- **関連ファイル**:
  - `QuizView.swift`
  - `QuizSessionStore.swift`
  - `WordScoreStore.swift`
  - `ScoreStore.swift`
  - `QuizBatchManager.swift`
- **復元可能性**: ★★★★★（完全復元可能）
- **特徴**:
  - シンプルなバッチ学習アルゴリズム
  - ラウンドロビン配置の詳細
  - セッション管理の完全な仕様
  - 成績管理の役割分担
  - 将来の拡張案（適応型学習の再実装）

---

### 10_記憶定着度表示_仕様書.md
- **内容**: 記憶定着度の進捗表示（MemoryProgressView）
- **関連機能**: 6段階の記憶レベル、習熟率表示
- **関連ファイル**: `MemoryProgressView.swift`, `MemoryStage.swift`
- **復元可能性**: ★★★★★

---

### 11_学習モード推奨_仕様書.md
- **内容**: 学習モード別の推奨設定表示（LearningModeRecommendationView）
- **関連機能**: モード別の説明、推奨シーン、学習のコツ
- **関連ファイル**: `LearningModeRecommendationView.swift`
- **復元可能性**: ★★★★★

---

### 12_クイズUIコンポーネント_仕様書.md
- **内容**: クイズ画面のUIコンポーネント群
- **関連機能**: 問題カード、選択肢カード、統計表示、ナビゲーション
- **関連ファイル**: `QuizComponents/*.swift`
  - `QuestionCardView.swift`
  - `ChoiceCardView.swift`
  - `DontKnowCardView.swift`
  - `QuizStatisticsView.swift`
  - `QuizNavigationButtonsView.swift`
- **復元可能性**: ★★★★★

---

## 主要ファイル索引

### アプリケーション
```
SimpleWordApp.swift             - アプリのエントリーポイント
ContentView.swift               - メインナビゲーション
```

### クイズ関連
```
QuizView.swift (1100行)        - クイズメイン画面
QuestionDetailView.swift        - 単語詳細表示
```

### 設定・管理
```
QuizSettingsView.swift          - 出題設定画面
CSVManagerView.swift            - CSV管理画面
NavigatorView.swift             - 単語一覧画面
```

### 成績表示
```
ScoreView.swift                 - 成績切り替え画面
QuizResultsByCSVView.swift      - CSV別成績
QuizResultsDetailView.swift     - CSV詳細
WordScoresView.swift            - 単語別成績
```

### データモデル
```
QuestionItem.swift              - 問題データ構造
QuizSettings.swift              - 設定データ
StudyRecord.swift               - 学習履歴
```

### ストア（状態管理）
```
QuizSettings.swift              - 出題設定（@EnvironmentObject）
ScoreStore.swift                - CSV別成績の永続化
WordScoreStore.swift            - 単語別成績の永続化
CurrentCSV.swift                - 現在のCSV名
AppearanceManager.swift         - 外観設定
```

### ユーティリティ
```
CSVLoader.swift                 - CSV読み込み・解析
FileUtils.swift                 - ファイル操作
FileWatcher.swift               - ファイル変更監視
IDFactory.swift                 - ID生成・管理
```

### ビジネスロジック
```
AdaptiveScheduler.swift         - 適応型学習スケジューラ
LearningAnalytics.swift         - 学習傾向分析
FileStudyProgressRepository.swift - 学習進捗永続化
```

### UIコンポーネント
```
StyleGuide.swift                - 共通UIコンポーネント
  - SectionCard                 - カード型コンテナ
  - SectionHeader               - セクションヘッダ
  - DifficultyBadge             - 難易度バッジ
  - TagCapsule                  - タグ表示
```

## AI作業効率化ファイル（.copilot/）

**表示方法**: Finder で `⌘ + Shift + .` を押す

```
.copilot/
├── README.md                   - AI作業ガイド（必読）
├── structure-map.md            - アーキテクチャマップ
├── quick-ref.md                - 実装パターン集
├── changelog.md                - 変更履歴
├── task-template.md            - タスク分割テンプレート
├── components/                 - コンポーネント仕様書
│   ├── QuizStatisticsView.md
│   ├── QuestionCardView.md
│   ├── ChoiceCardView.md
│   ├── DontKnowCardView.md
│   └── QuizNavigationButtonsView.md
└── prompts/                    - プロンプトテンプレート
    ├── refactor-component.md   - リファクタリング手順
    ├── add-feature.md          - 新機能追加手順
    └── fix-bug.md              - バグ修正手順
```

## 編集時の参照順序

### 小規模変更（単一ファイル、100行以内）
1. `.copilot/quick-ref.md` - 実装パターン確認
2. 該当する仕様書（01_〜09_）
3. `.copilot/changelog.md` に記録

### 中規模変更（複数ファイル、新機能）
1. `.copilot/structure-map.md` - 影響範囲確認
2. `.copilot/prompts/add-feature.md` - 手順確認
3. 該当する仕様書（01_〜09_）
4. `.copilot/components/` - 分割仕様（必要に応じて）
5. `.copilot/changelog.md` に記録

### 大規模リファクタリング
1. `.copilot/structure-map.md` - 全体像把握
2. `.copilot/prompts/refactor-component.md` - 手順確認
3. `.copilot/task-template.md` - タスク分割
4. 各フェーズで該当仕様書を参照
5. `.copilot/structure-map.md` を更新
6. `.copilot/changelog.md` に詳細記録

## CSV ファイル（Resources/）

```
中学古典単語.csv
中学歴史.csv
中学英会話.csv
中学英単語.csv
高校単語.csv
サンプル単語.csv
```

**CSV形式**:
```csv
語句,読み（ひらがな）,意味,語源等解説（日本語）,関連語と意味,関連分野,難易度
いと,いと,とても,古語で強調を表す副詞,いみじ:非常に,家族,1
```

または発音付き:
```csv
語句,発音（カタカナ）,和訳,語源等解説（日本語）,関連語（英語）と意味（日本語）,関連分野（日本語）,難易度
Hello!,ハロー,こんにちは,英語の挨拶の定番,Hi:やあ,感情,1
```

**注意事項**:
- エンコーディング: UTF-8
- 区切り文字: カンマ（,）
- 複数値の区切り: セミコロン（;）
  - relatedWords: `word1;word2;word3`
  - relatedFields: `field1;field2`

## テストファイル

```
SimpleWordTests/
├── SimpleWordTests.swift       - 基本的なユニットテスト
└── (その他のテストファイル)

SimpleWordUITests/
├── SimpleWordUITests.swift     - UIテスト
└── SimpleWordUITestsLaunchTests.swift
```

## プロジェクト設定

```
SimpleWord.xcodeproj/           - Xcodeプロジェクトファイル
  ├── project.pbxproj           - プロジェクト設定（直接編集非推奨）
  └── xcuserdata/               - ユーザー固有設定（Git管理外）
```

## その他の重要ファイル

```
.github/instructions/
└── CustumInstruction.instructions.md  - GitHub Copilot 指示

README.md                       - プロジェクト概要

.gitignore                      - Git除外設定
```

## ファイル検索のヒント

### Xcode での検索
- `⌘ + Shift + O`: ファイル名で開く
- `⌘ + Shift + F`: プロジェクト全体を検索
- `⌘ + F`: 現在のファイル内を検索

### ターミナルでの検索
```bash
# ファイル名で検索
find . -name "QuizView.swift"

# 内容で検索（grep）
grep -r "AdaptiveScheduler" SimpleWord/

# AI効率化ファイルの確認
ls -la .copilot/
```

## 更新履歴

- **2025-10-19**: 
  - 全仕様書を「復元ガイド」から「編集ガイド」に改訂
  - AI作業効率化ファイル（.copilot/）の索引を追加
  - 最新の実装状況（アニメーション機能等）を反映
  - 編集者向けの実用的な内容に変更

## 関連リンク

- `.copilot/README.md` - AI作業効率化の詳細
- `00_編集ガイド.md` - 編集開始前の必読ガイド
- Apple Developer Documentation - SwiftUI
- GitHub Copilot Documentation
