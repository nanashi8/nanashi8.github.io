# æˆç¸¾è¡¨ç¤ºæ©Ÿèƒ½_ä»•æ§˜æ›¸ v2

**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ30æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… æœ€æ–°ï¼ˆå®Ÿè£…ã¨ä¸€è‡´ï¼‰  
**å¾©å…ƒå¯èƒ½æ€§**: â˜…â˜…â˜…â˜…â˜†

---

## ğŸ¯ ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„

SimpleWordã®æˆç¸¾è¡¨ç¤ºæ©Ÿèƒ½ã®å®Œå…¨ãªä»•æ§˜ã‚’è¨˜è¿°ã—ã¾ã™ã€‚æ©Ÿèƒ½æå¤±æ™‚ã«ã€ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰å¾©å…ƒã§ãã¾ã™ã€‚

---

## æ¦‚è¦

### ä½•ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã‹
- **CSVåˆ¥æˆç¸¾**: å•é¡Œé›†ã”ã¨ã®å­¦ç¿’å±¥æ­´ã¨çµ±è¨ˆ
- **å˜èªåˆ¥æˆç¸¾**: å€‹åˆ¥å˜èªã®è©³ç´°çµ±è¨ˆ
- **æˆç¸¾ã®ãƒªã‚»ãƒƒãƒˆ**: CSVåˆ¥ã¾ãŸã¯å…¨ä½“ã®ãƒªã‚»ãƒƒãƒˆ
- **è©³ç´°è¡¨ç¤º**: å„æˆç¸¾ã®è©³ç´°æƒ…å ±

### åŸºæœ¬çš„ãªæ“ä½œãƒ•ãƒ­ãƒ¼
```
ãƒ›ãƒ¼ãƒ ç”»é¢ â†’ å­¦ç¿’çµæœ â†’ [CSVåˆ¥/å˜èªåˆ¥] ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
                           â†“
                    CSVé¸æŠ â†’ è©³ç´°è¡¨ç¤º
                    å˜èªé¸æŠ â†’ è©³ç´°è¡¨ç¤º
```

---

## ç”»é¢æ§‹æˆ

### ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆScoreViewï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å­¦ç¿’çµæœ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [CSVåˆ¥]   [å˜èªåˆ¥]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ï¼ˆé¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã®å†…å®¹ï¼‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CSVåˆ¥æˆç¸¾ç”»é¢ï¼ˆQuizResultsByCSVViewï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸­å­¦è‹±å˜èª.csv                  â”‚
â”‚ æ­£ç­”ç‡: 85% ãƒ» æ­£è§£æ•°: 42/50   â”‚
â”‚ æœ€çµ‚å­¦ç¿’: 2025-10-30 14:30     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¸­å­¦å¤å…¸å˜èª.csv                â”‚
â”‚ æ­£ç­”ç‡: 92% ãƒ» æ­£è§£æ•°: 23/25   â”‚
â”‚ æœ€çµ‚å­¦ç¿’: 2025-10-29 10:15     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒªã‚»ãƒƒãƒˆ...                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CSVåˆ¥è©³ç´°ç”»é¢ï¼ˆQuizResultsDetailViewï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸­å­¦è‹±å˜èª.csv                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š å…¨ä½“çµ±è¨ˆ                     â”‚
â”‚ ç·å‡ºé¡Œæ•°: 150å•                 â”‚
â”‚ ç·æ­£è§£æ•°: 128å•                 â”‚
â”‚ å¹³å‡æ­£ç­”ç‡: 85.3%               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“… å­¦ç¿’å±¥æ­´ï¼ˆæœ€æ–°10ä»¶ï¼‰         â”‚
â”‚ 2025-10-30 14:30               â”‚
â”‚ 10å•ä¸­8å•æ­£è§£ (80%)            â”‚
â”‚                                 â”‚
â”‚ 2025-10-29 16:45               â”‚
â”‚ 15å•ä¸­13å•æ­£è§£ (86%)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ã“ã®CSVã®æˆç¸¾ã‚’ãƒªã‚»ãƒƒãƒˆ]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å˜èªåˆ¥æˆç¸¾ç”»é¢ï¼ˆWordScoresViewï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [CSVé¸æŠ: ä¸­å­¦è‹±å˜èª.csv â–¼]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ä¸¦ã³æ›¿ãˆ: æ­£ç­”ç‡ â–¼]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ example                         â”‚
â”‚ ä¾‹ã€è¦‹æœ¬                        â”‚
â”‚ æ­£ç­”ç‡: 100% (3/3)              â”‚
â”‚ æœ€çµ‚å­¦ç¿’: 2025-10-30           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ practice                        â”‚
â”‚ ç·´ç¿’ã€å®Ÿè·µ                      â”‚
â”‚ æ­£ç­”ç‡: 67% (2/3)               â”‚
â”‚ æœ€çµ‚å­¦ç¿’: 2025-10-29           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ã“ã®CSVã®æˆç¸¾ã‚’ãƒªã‚»ãƒƒãƒˆ]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### WordScoreï¼ˆå˜èªåˆ¥æˆç¸¾ï¼‰
```swift
public struct WordScore: Codable {
    public var attempts: Int = 0          // è©¦è¡Œå›æ•°
    public var correct: Int = 0           // æ­£è§£æ•°
    public var lastStudied: Date?         // æœ€çµ‚å­¦ç¿’æ—¥æ™‚
    
    // æ­£ç­”ç‡ã‚’è¨ˆç®—
    public var accuracy: Double {
        guard attempts > 0 else { return 0.0 }
        return Double(correct) / Double(attempts)
    }
    
    // å›ç­”ã‚’è¨˜éŒ²
    public mutating func record(correct: Bool) {
        attempts += 1
        if correct {
            self.correct += 1
        }
        lastStudied = Date()
    }
}
```

### QuizResultï¼ˆã‚¯ã‚¤ã‚ºçµæœï¼‰
```swift
public struct QuizResult: Identifiable, Codable {
    public let id: UUID
    public let date: Date
    public let total: Int                 // ç·å•é¡Œæ•°
    public let correct: Int               // æ­£è§£æ•°
    public let settings: QuizSettingsModel
    
    // æ­£ç­”ç‡ã‚’è¨ˆç®—
    public var accuracy: Double {
        guard total > 0 else { return 0.0 }
        return Double(correct) / Double(total)
    }
    
    // ã‚¤ãƒ‹ã‚·ãƒ£ãƒ©ã‚¤ã‚¶
    public init(total: Int, correct: Int, settings: QuizSettingsModel) {
        self.id = UUID()
        self.date = Date()
        self.total = total
        self.correct = correct
        self.settings = settings
    }
}
```

---

## ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–

### WordScoreStoreï¼ˆå˜èªåˆ¥æˆç¸¾ã®ç®¡ç†ï¼‰

#### ä¿å­˜å ´æ‰€
- **UserDefaults**
- **ã‚­ãƒ¼**: `"SimpleWord.WordScoreStore.v2"`
- **å½¢å¼**: `[String: [UUID: WordScore]]` ã® JSON
  - å¤–å´ã®è¾æ›¸: CSVå â†’ å˜èªåˆ¥æˆç¸¾è¾æ›¸
  - å†…å´ã®è¾æ›¸: å˜èªID (UUID) â†’ WordScore

#### ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
```swift
public final class WordScoreStore: ObservableObject {
    // ç¾åœ¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªå•é¡Œé›†ã® UUID -> WordScore
    @Published private(set) var scores: [UUID: WordScore] = [:]
    
    // ç¾åœ¨ãƒ­ãƒ¼ãƒ‰ä¸­ã®å•é¡Œé›†å
    @Published private(set) var currentCSVName: String? = nil
    
    // å…¨å•é¡Œé›†ã®ãƒ‡ãƒ¼ã‚¿: CSVName -> [UUID: WordScore]
    private var allScores: [String: [UUID: WordScore]] = [:]
    
    // å•é¡Œé›†ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
    public func switchToCSV(_ csvName: String) {
        currentCSVName = csvName
        scores = allScores[csvName] ?? [:]
    }
    
    // çµæœã‚’è¨˜éŒ²
    public func recordResult(itemID: UUID, correct: Bool) {
        guard let csvName = currentCSVName else { return }
        
        var entry = scores[itemID] ?? WordScore()
        entry.record(correct: correct)
        scores[itemID] = entry
        allScores[csvName] = scores
        saveAsync()
    }
    
    // æŒ‡å®šå˜èªã®ã‚¹ã‚³ã‚¢ã‚’å–å¾—
    public func score(for itemID: UUID) -> WordScore {
        return scores[itemID] ?? WordScore()
    }
    
    // ç¾åœ¨ã®å•é¡Œé›†ã®å­¦ç¿’çµæœã‚’ãƒªã‚»ãƒƒãƒˆ
    public func resetCurrentCSV() {
        guard let csvName = currentCSVName else { return }
        scores.removeAll()
        allScores[csvName] = nil
        saveAsync()
    }
    
    // æŒ‡å®šã—ãŸå•é¡Œé›†ã®å­¦ç¿’çµæœã‚’ãƒªã‚»ãƒƒãƒˆ
    public func reset(csvName: String) {
        allScores[csvName] = nil
        if currentCSVName == csvName {
            scores.removeAll()
        }
        saveAsync()
    }
    
    // å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ
    public func resetAll() {
        scores.removeAll()
        allScores.removeAll()
        currentCSVName = nil
        saveAsync()
    }
}
```

### ScoreStoreï¼ˆCSVåˆ¥æˆç¸¾ã®ç®¡ç†ï¼‰

#### ä¿å­˜å ´æ‰€
- **UserDefaults**
- **ã‚­ãƒ¼**: CSVåã”ã¨ã« `"QuizResults_\(csvName)"`
- **å½¢å¼**: `[QuizResult]` ã® JSONé…åˆ—

#### ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
```swift
public final class ScoreStore: ObservableObject {
    // ç¾åœ¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªCSVã®çµæœä¸€è¦§
    @Published private(set) var results: [QuizResult] = []
    
    // ç¾åœ¨ã®CSVå
    @Published private(set) var currentCSVName: String? = nil
    
    // å•é¡Œé›†ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
    public func switchToCSV(_ csvName: String) {
        currentCSVName = csvName
        loadResults()
    }
    
    // çµæœã‚’è¿½åŠ 
    public func addResult(_ result: QuizResult) {
        results.insert(result, at: 0)
        saveResults()
    }
    
    // å…¨ä½“çµ±è¨ˆã‚’è¨ˆç®—
    public func calculateOverallStats() -> (totalQuestions: Int, totalCorrect: Int, accuracy: Double) {
        let totalQuestions = results.reduce(0) { $0 + $1.total }
        let totalCorrect = results.reduce(0) { $0 + $1.correct }
        let accuracy = totalQuestions > 0 ? Double(totalCorrect) / Double(totalQuestions) : 0.0
        return (totalQuestions, totalCorrect, accuracy)
    }
    
    // ç¾åœ¨ã®CSVã®æˆç¸¾ã‚’ãƒªã‚»ãƒƒãƒˆ
    public func resetCurrentCSV() {
        guard let csvName = currentCSVName else { return }
        results.removeAll()
        saveResults()
    }
    
    // å…¨CSVã®æˆç¸¾ã‚’å–å¾—
    public func allCSVStats() -> [(csvName: String, accuracy: Double, count: Int)] {
        var stats: [(String, Double, Int)] = []
        let allKeys = UserDefaults.standard.dictionaryRepresentation().keys
            .filter { $0.hasPrefix("QuizResults_") }
        
        for key in allKeys {
            let csvName = key.replacingOccurrences(of: "QuizResults_", with: "")
            if let data = UserDefaults.standard.data(forKey: key),
               let results = try? JSONDecoder().decode([QuizResult].self, from: data) {
                let totalQuestions = results.reduce(0) { $0 + $1.total }
                let totalCorrect = results.reduce(0) { $0 + $1.correct }
                let accuracy = totalQuestions > 0 ? Double(totalCorrect) / Double(totalQuestions) : 0.0
                stats.append((csvName, accuracy, results.count))
            }
        }
        
        return stats.sorted { $0.csvName < $1.csvName }
    }
}
```

---

## å®Ÿè£…è©³ç´°

### ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«
```
SimpleWord/Features/Results/
â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ ScoreView.swift                # ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆï¼‰
â”‚   â”œâ”€â”€ QuizResultsByCSVView.swift     # CSVåˆ¥ä¸€è¦§
â”‚   â”œâ”€â”€ QuizResultsDetailView.swift    # CSVåˆ¥è©³ç´°
â”‚   â””â”€â”€ WordScoresView.swift           # å˜èªåˆ¥ä¸€è¦§
â””â”€â”€ Components/
    â””â”€â”€ ï¼ˆå°†æ¥çš„ã«åˆ†é›¢äºˆå®šï¼‰
```

### ScoreViewï¼ˆãƒ¡ã‚¤ãƒ³ç”»é¢ï¼‰
```swift
struct ScoreView: View {
    @EnvironmentObject var scoreStore: ScoreStore
    @EnvironmentObject var wordScoreStore: WordScoreStore
    @EnvironmentObject var currentCSV: CurrentCSV
    
    @State private var selectedTab = 0  // 0: CSVåˆ¥, 1: å˜èªåˆ¥
    
    var body: some View {
        VStack(spacing: 0) {
            // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
            Picker("", selection: $selectedTab) {
                Text("CSVåˆ¥").tag(0)
                Text("å˜èªåˆ¥").tag(1)
            }
            .pickerStyle(.segmented)
            .padding()
            
            // ã‚¿ãƒ–å†…å®¹
            if selectedTab == 0 {
                QuizResultsByCSVView()
            } else {
                WordScoresView()
            }
        }
        .navigationTitle("å­¦ç¿’çµæœ")
        .navigationBarTitleDisplayMode(.inline)
    }
}
```

### QuizResultsByCSVViewï¼ˆCSVåˆ¥ä¸€è¦§ï¼‰
```swift
struct QuizResultsByCSVView: View {
    @EnvironmentObject var scoreStore: ScoreStore
    @State private var csvStats: [(csvName: String, accuracy: Double, count: Int)] = []
    
    var body: some View {
        List {
            ForEach(csvStats, id: \.csvName) { stat in
                NavigationLink(destination: QuizResultsDetailView(csvName: stat.csvName)) {
                    VStack(alignment: .leading, spacing: 4) {
                        Text(stat.csvName)
                            .font(.headline)
                        HStack {
                            Text("æ­£ç­”ç‡: \(Int(stat.accuracy * 100))%")
                            Text("ãƒ»")
                            Text("\(stat.count)å›å­¦ç¿’")
                        }
                        .font(.caption)
                        .foregroundColor(.secondary)
                    }
                }
            }
            
            // ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³
            Section {
                Button("å…¨æˆç¸¾ã‚’ãƒªã‚»ãƒƒãƒˆ", role: .destructive) {
                    resetAllConfirm()
                }
            }
        }
        .onAppear {
            loadStats()
        }
    }
    
    private func loadStats() {
        csvStats = scoreStore.allCSVStats()
    }
    
    private func resetAllConfirm() {
        // ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤ºã—ã¦ãƒªã‚»ãƒƒãƒˆ
    }
}
```

### QuizResultsDetailViewï¼ˆCSVåˆ¥è©³ç´°ï¼‰
```swift
struct QuizResultsDetailView: View {
    let csvName: String
    @EnvironmentObject var scoreStore: ScoreStore
    
    var body: some View {
        List {
            // å…¨ä½“çµ±è¨ˆ
            Section(header: Text("å…¨ä½“çµ±è¨ˆ")) {
                let stats = scoreStore.calculateOverallStats()
                HStack {
                    Text("ç·å‡ºé¡Œæ•°")
                    Spacer()
                    Text("\(stats.totalQuestions)å•")
                }
                HStack {
                    Text("ç·æ­£è§£æ•°")
                    Spacer()
                    Text("\(stats.totalCorrect)å•")
                }
                HStack {
                    Text("å¹³å‡æ­£ç­”ç‡")
                    Spacer()
                    Text("\(Int(stats.accuracy * 100))%")
                }
            }
            
            // å­¦ç¿’å±¥æ­´
            Section(header: Text("å­¦ç¿’å±¥æ­´ï¼ˆæœ€æ–°10ä»¶ï¼‰")) {
                ForEach(scoreStore.results.prefix(10)) { result in
                    VStack(alignment: .leading, spacing: 4) {
                        Text(result.date, style: .date)
                            .font(.caption)
                            .foregroundColor(.secondary)
                        Text("\(result.total)å•ä¸­\(result.correct)å•æ­£è§£ (\(Int(result.accuracy * 100))%)")
                            .font(.body)
                    }
                }
            }
            
            // ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³
            Section {
                Button("ã“ã®CSVã®æˆç¸¾ã‚’ãƒªã‚»ãƒƒãƒˆ", role: .destructive) {
                    resetConfirm()
                }
            }
        }
        .navigationTitle(csvName)
        .navigationBarTitleDisplayMode(.inline)
        .onAppear {
            scoreStore.switchToCSV(csvName)
        }
    }
    
    private func resetConfirm() {
        // ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤ºã—ã¦ãƒªã‚»ãƒƒãƒˆ
    }
}
```

### WordScoresViewï¼ˆå˜èªåˆ¥ä¸€è¦§ï¼‰
```swift
struct WordScoresView: View {
    @EnvironmentObject var wordScoreStore: WordScoreStore
    @EnvironmentObject var currentCSV: CurrentCSV
    @State private var items: [QuestionItem] = []
    @State private var sortBy = SortOption.accuracy
    
    enum SortOption: String, CaseIterable {
        case accuracy = "æ­£ç­”ç‡"
        case attempts = "å‡ºé¡Œå›æ•°"
        case lastStudied = "æœ€çµ‚å­¦ç¿’æ—¥"
    }
    
    var body: some View {
        VStack {
            // CSVé¸æŠ
            Picker("CSV", selection: $currentCSV.name) {
                // CSVä¸€è¦§
            }
            .pickerStyle(.menu)
            .padding()
            
            // ä¸¦ã³æ›¿ãˆ
            Picker("ä¸¦ã³æ›¿ãˆ", selection: $sortBy) {
                ForEach(SortOption.allCases, id: \.self) { option in
                    Text(option.rawValue).tag(option)
                }
            }
            .pickerStyle(.segmented)
            .padding(.horizontal)
            
            // å˜èªãƒªã‚¹ãƒˆ
            List {
                ForEach(sortedItems) { item in
                    let score = wordScoreStore.score(for: item.id)
                    VStack(alignment: .leading, spacing: 4) {
                        Text(item.term)
                            .font(.headline)
                        Text(item.meaning)
                            .font(.body)
                        HStack {
                            Text("æ­£ç­”ç‡: \(Int(score.accuracy * 100))%")
                            Text("(\(score.correct)/\(score.attempts))")
                            if let lastStudied = score.lastStudied {
                                Text("ãƒ»")
                                Text(lastStudied, style: .date)
                            }
                        }
                        .font(.caption)
                        .foregroundColor(.secondary)
                    }
                }
                
                // ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³
                Section {
                    Button("ã“ã®CSVã®æˆç¸¾ã‚’ãƒªã‚»ãƒƒãƒˆ", role: .destructive) {
                        wordScoreStore.resetCurrentCSV()
                    }
                }
            }
        }
        .onAppear {
            loadItems()
        }
        .onChange(of: currentCSV.name) { _ in
            loadItems()
        }
    }
    
    private var sortedItems: [QuestionItem] {
        switch sortBy {
        case .accuracy:
            return items.sorted {
                wordScoreStore.score(for: $0.id).accuracy >
                wordScoreStore.score(for: $1.id).accuracy
            }
        case .attempts:
            return items.sorted {
                wordScoreStore.score(for: $0.id).attempts >
                wordScoreStore.score(for: $1.id).attempts
            }
        case .lastStudied:
            return items.sorted {
                (wordScoreStore.score(for: $0.id).lastStudied ?? Date.distantPast) >
                (wordScoreStore.score(for: $1.id).lastStudied ?? Date.distantPast)
            }
        }
    }
    
    private func loadItems() {
        guard let csvName = currentCSV.name else { return }
        wordScoreStore.switchToCSV(csvName)
        
        let base = csvName.replacingOccurrences(of: ".csv", with: "")
        let repo = QuestionItemRepository(fileName: base)
        switch repo.fetch() {
        case .success(let loadedItems):
            items = loadedItems
        case .failure:
            items = []
        }
    }
}
```

---

## æ©Ÿèƒ½æå¤±æ™‚ã®å¾©å…ƒã‚¬ã‚¤ãƒ‰

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®ç¢ºèª
- WordScore ã¨ QuizResult ã®å®šç¾©ã‚’ç¢ºèª
- Codable æº–æ‹ ã‚’ç¢ºèª

### ã‚¹ãƒ†ãƒƒãƒ—2: ã‚¹ãƒˆã‚¢ã®å®Ÿè£…
- WordScoreStore ã‚’å®Ÿè£…ï¼ˆCSVåˆ¥ç®¡ç†ï¼‰
- ScoreStore ã‚’å®Ÿè£…ï¼ˆCSVåˆ¥ç®¡ç†ï¼‰
- UserDefaults ã§ã®æ°¸ç¶šåŒ–

### ã‚¹ãƒ†ãƒƒãƒ—3: UIå®Ÿè£…
- ScoreViewï¼ˆã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆï¼‰
- QuizResultsByCSVViewï¼ˆCSVåˆ¥ä¸€è¦§ï¼‰
- QuizResultsDetailViewï¼ˆCSVåˆ¥è©³ç´°ï¼‰
- WordScoresViewï¼ˆå˜èªåˆ¥ä¸€è¦§ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—4: ç’°å¢ƒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ³¨å…¥
```swift
// SimpleWordApp.swift
@StateObject private var scoreStore = ScoreStore()
@StateObject private var wordScoreStore = WordScoreStore()

// ...

.environmentObject(scoreStore)
.environmentObject(wordScoreStore)
```

---

## å°†æ¥ã®æ‹¡å¼µæ¡ˆ

### 1. ã‚°ãƒ©ãƒ•è¡¨ç¤º
- æ­£ç­”ç‡ã®æ¨ç§»ã‚°ãƒ©ãƒ•
- å­¦ç¿’æ™‚é–“ã®ã‚°ãƒ©ãƒ•
- é€±æ¬¡ãƒ»æœˆæ¬¡ã®çµ±è¨ˆ

### 2. ç¿’ç†Ÿåº¦ãƒ¬ãƒ™ãƒ«
- 6æ®µéšã®è¨˜æ†¶å®šç€åº¦è¡¨ç¤º
- ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—é€šçŸ¥

### 3. ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
- CSVå½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- PDFãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

### 4. æ¯”è¼ƒæ©Ÿèƒ½
- CSVé–“ã®æ¯”è¼ƒ
- æœŸé–“æ¯”è¼ƒ

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `00_æ©Ÿèƒ½å¾©å…ƒãƒã‚¹ã‚¿ãƒ¼ä»•æ§˜æ›¸_v3.md` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®æ¦‚è¦
- `01_ã‚¯ã‚¤ã‚ºæ©Ÿèƒ½_ä»•æ§˜æ›¸_v2.md` - ã‚¯ã‚¤ã‚ºæ©Ÿèƒ½ã¨ã®é€£æº
- `10_è¨˜æ†¶å®šç€åº¦è¡¨ç¤º_ä»•æ§˜æ›¸.md` - è¨˜æ†¶æ®µéšã®è¡¨ç¤º

---

## å¤‰æ›´å±¥æ­´

### v2 (2025-10-30)
- ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³ã«åˆã‚ã›ã¦å…¨é¢æ”¹è¨‚
- ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã¨ã‚¹ãƒˆã‚¢ã®è©³ç´°ã‚’è¿½åŠ 
- å¾©å…ƒã‚¬ã‚¤ãƒ‰ã‚’è¿½åŠ 
- ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’è±Šå¯Œã«è¨˜è¼‰

### v1 (2025-10-19)
- åˆç‰ˆä½œæˆ
