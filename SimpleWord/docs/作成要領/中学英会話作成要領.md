# 中学英会話問題CSV 作成・拡充ガイド

このドキュメントは、アプリで読み込みやすい形式で `中学英会話.csv` を作成・拡張するための手順です。現状の `Resources/中学英会話.csv`（サンプル）に合わせて、ヘッダ名やフォーマットの注意点、例、検証方法を具体的に示します。

---

## 概要
- 目的: 中学生が学習する日常英会話フレーズを、アプリに取り込みやすいCSV形式で整理する。
- エンコーディング: UTF-8 を推奨（BOMなし）。
- 改行: Unix 形式（\n）推奨。
- 区切り: カンマ (,) を列区切りに使用。セル内にカンマを含める場合はダブルクォートで囲む。
- 関連語・関連分野の複数列挙にはセミコロン (;) を使う（例: `apple:りんご;banana:バナナ`）。

---

## 推奨ヘッダ（ファイルの1行目）
アプリの `CSVLoader` は複数のヘッダ名に柔軟に対応しますが、推奨する「正確なヘッダ」は次の通りです。既存のCSVはこのヘッダ順で整っています。

1. 語句
2. 発音（カタカナ）
3. 和訳
4. 語源等解説（日本語）
5. 関連語（英語）と意味（日本語）
6. 関連分野（日本語）
7. 難易度

ヘッダが存在しないCSVも読み込み可能ですが、列の位置がずれると誤ったマッピングになるため、可能なら必ずヘッダ行を付けてください。

CSVLoader が受け付ける主なヘッダの同義語（参考）:
- 語句: `term`, `word`, `question`, `語句`, `単語`, `フレーズ`
- 発音: `reading`, `読み`, `読み方`, `読み（カタカナ）`
- 和訳: `meaning`, `definition`, `translation`, `意味`, `和訳`, `意味（日本語）`
- 語源等解説: `etymology`, `語源等解説`, `解説`
- 関連語: `related words`, `関連語`, `関連語と意味`（CSV内で英語:日本語 のペアをセミコロン区切りで並べるのが推奨）
- 関連分野: `related fields`, `関連分野`（セミコロン区切り）
- 難易度: `difficulty`, `難易度`（数値 1〜3）

---

## 各列の詳細と記入ルール
### 1) 語句
- 英語のフレーズを記入します。疑問符や感嘆符を含めて構いません（例: `How are you?`, `Hello!`）。
- 表記は自然な会話文を推奨。

### 2) 発音（カタカナ）
- 中学生が読みやすいカタカナで発音を表記します。長いフレーズは単語ごとに区切って書いてください（例: `ハウ アー ユー`）。
- 空でも問題ありませんが、あると学習時に便利です。

### 3) 和訳
- 日本語訳を簡潔に記述します（例: `こんにちは`, `どちらの出身ですか`）。
- 複数意味がある場合は代表的な訳を1つか、スラッシュ等で簡潔に分ける（過度な長文は避ける）。

### 4) 語源等解説（日本語）
- フレーズの使い方のヒント、語源、例文ヒントなどを短く書きます（任意）。長文は許容しますが、CSVセル内で改行する場合はダブルクォートで囲む必要があります。

### 5) 関連語（英語）と意味（日本語）
- 関連するフレーズや語を `英語:意味` の形式で列挙し、複数はセミコロン `;` で区切ります。
- 例: `Where do you live?:どこに住んでいますか;I'm from Osaka:大阪出身です`
- ここに記載した英語単語はアプリ内でナビゲーション（関連語リンク）として参照されます。可能であれば、CSV 内に存在する `語句` と一致する英語表記を優先してください。

### 6) 関連分野（日本語）
- 単一の分野名を一語で記述します。
- 例: `日常`, `学校`,`時間`, `旅行`, `買い物`, `食事`, `趣味`, `健康`
- 分野の粒度は他のCSVと合わせておおむね20カテゴリ程度に統一してください（プロジェクト内の `CSVLoader` に簡易EN→JPマッピングが実装されています）。

<!-- 共通ルール（関連分野） -->
## 共通ルール（関連分野）
このプロジェクトの全作成要領に共通する必須ルールです。CSV の `関連分野（日本語）` 列には、必ず下記の「20 個」のいずれか1語（単一語）を指定してください。

必須事項：
- 必ず一語（空白や句読点を含まない単語）で入力すること。
- 複数指定は禁止（セミコロン `;` やカンマ `,` での複数記載はしない）。
- 該当するカテゴリが無い場合は `その他` を指定すること。
- 表記ゆれ（全角半角、末尾空白等）を避け、下記の語を正確に使うこと。

利用可能な20カテゴリ（必ずこの中から1つを選んで入力）:
1. 日常
2. 学校
3. 家族
4. 食べ物
5. 交通
6. 旅行
7. 健康
8. 動物
9. 自然
10. 地理
11. 科学
12. 文法
13. 文化
14. 時間
15. テクノロジー
16. 買い物
17. 職業
18. スポーツ
19. 感情
20. その他

管理上の注意:
- カテゴリを追加・変更する場合は `SimpleWord/docs/作成要領/中学英単語_カテゴリ一覧.md` を更新し、すべての作成要領で整合性を取ってください。
- CSV 編集時は必ずカテゴリ一覧を参照し、上記の語のいずれかを入力してください。

### 7) 難易度
- 数値で `1`（簡単）〜`3`（難しい）を指定します。
- 目安: 1=中1レベル、2=中2レベル、3=中3/入試対策レベル。

---

## 書式上の注意（よくあるミスと対処）
- セル内にカンマが含まれる場合は `"` でセルを囲んでください。例: `"I'm fine, thank you."`。
- セル内で改行を入れる場合もダブルクォートで囲みますが、可能な限り解説は短く1行に収めてください。
- 関連語の区切りはセミコロン `;` を使うこと。コンマ `,` は列区切りと誤認されます。
- 同じ `語句` を複数行で重複させないこと。表記ゆれ（大文字小文字・末尾の句読点）にも注意して一意に保ってください。
- 数字だけを変えた単純なバリエーション（例: "バッグを1個持っています。","バッグを2個持っています。"）は避けてください。

---

## 例（ヘッダと1行）
```
語句,発音（カタカナ）,和訳,語源等解説（日本語）,関連語（英語）と意味（日本語）,関連分野（日本語）,難易度
Hello!,ハロー,こんにちは,英語の挨拶の定番,Hi:やあ,日常,1
```

---

## 編集フローと検証方法
1. CSV を編集する際は Git ブランチを切る（例: `edit/chukyu-eikaiwa`）。
2. まず少数行を編集してアプリのロードで期待どおりに表示されるか確認する。
3. ローカルで簡易検証ツールを実行:

```bash
# CSV のフォーマットチェック（リポジトリ内のスクリプトを利用）
python3 Tools/csv_validator.py Resources/中学英会話.csv
```

4. `CSVLoader` の挙動を手早く確認したい場合は、リポジトリ内のチェックスクリプトを利用できます（Swift スクリプトやユニットテストを参照）。

---

## 作成時の品質ガイドライン（運用上のルール）
- 実際に中学生が使う/聞くであろう自然な表現だけを追加すること。
- 同じ意味・用途のフレーズを重複して登録しないこと。
- 関連語に登録する英語表記は可能な限り `語句` 列と一致させ、リンクできるようにする。
- 関連分野はプロジェクト内での整合性を保つ。必要なら既存CSVを参照してカテゴリ語を揃える。
- 難易度判定は保守的に行い、レビューで調整するプロセスを持つこと。

---

## 変更履歴
- 2025-10-13: 現行 `Resources/中学英会話.csv` の実例に合わせてヘッダとフォーマット例を明確化。

---

ご希望があれば、このガイドに沿ったテンプレートCSV（空のヘッダ入りファイル）を自動生成してコミット用に作成します。どうしますか？
