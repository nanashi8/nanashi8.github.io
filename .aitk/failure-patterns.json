{
  "version": "1.0.0",
  "lastUpdated": "2026-01-09",
  "metadata": {
    "totalFailures": 4,
    "totalRecoveries": 4,
    "learningRate": 0.1,
    "convergenceThreshold": 0.95,
    "lastUpdated": "2026-01-18",
    "gitHistoryLearned": true,
    "gitHistoryLearnedAt": "2026-01-18T01:34:17.506Z"
  },
  "failurePatterns": {
    "markdown-code-span-spaces": {
      "id": "markdown-code-span-spaces",
      "category": "markdown-lint",
      "severity": "low",
      "occurrences": 1,
      "lastOccurred": "2026-01-09",
      "recoveries": 1,
      "weight": 0.5,
      "description": "Markdownのコードスパン（バッククォート）内に不要なスペース",
      "detectionPattern": {
        "errorMessage": "MD038/no-space-in-code: Spaces inside code span elements",
        "files": ["**/*.md"]
      },
      "prevention": {
        "checkType": "lint",
        "command": "npm run lint",
        "instructionsFile": ".aitk/instructions/markdown-quality.instructions.md",
        "autoFixable": true
      },
      "examples": [
        {
          "date": "2026-01-09",
          "file": "docs/private/vscode-updates/v1.108/agents-and-chat.md",
          "error": "Quick Open（⌘P）から `agent ` でアクセスできる",
          "fix": "Quick Open（⌘P）から `agent` でアクセスできる",
          "note": "バッククォート内の末尾スペースを削除",
          "testsFailed": 0,
          "source": "manual-detection"
        }
      ],
      "prevention_checklist": [
        "バッククォート（`）内の先頭・末尾にスペースを入れない",
        "コマンド例やコード例を記述する際は、余分なスペースに注意",
        "VS Codeの問題パネルで保存前にMD038エラーを確認"
      ],
      "related_docs": [
        ".aitk/instructions/markdown-quality.instructions.md",
        "https://github.com/DavidAnson/markdownlint/blob/main/doc/md038.md"
      ],
      "impact": "低（品質の問題だが機能には影響なし）",
      "recovery_time": "1分以内",
      "automated_detection": true,
      "automated_fix": true
    },
    "property-naming-error": {
      "id": "property-naming-error",
      "category": "type-error",
      "severity": "critical",
      "occurrences": 192,
      "lastOccurred": "2025-12-20",
      "recoveries": 1,
      "weight": 1,
      "description": "型定義を確認せずにプロパティ名を推測",
      "detectionPattern": {
        "errorMessage": "Property .* does not exist on type",
        "files": ["src/**/*.ts", "src/**/*.tsx"]
      },
      "prevention": {
        "checkType": "static-analysis",
        "command": "npm run type-check",
        "instructionsFile": ".aitk/instructions/property-naming-convention.instructions.md",
        "autoFixable": false
      },
      "examples": [
        {
          "date": "2026-01-18",
          "error": "            actualCorrect !== log.progress.correctCount",
          "fix": "        attempts: progress.memorizationAttempts",
          "testsFailed": 0,
          "source": "git-history"
        },
        {
          "date": "2026-01-18",
          "error": "**修正前**: `        const totalCorrect = (wp.correctCount`",
          "fix": "**修正後**: `return (progress.memorizationAttempts",
          "testsFailed": 0,
          "source": "git-history"
        },
        {
          "date": "2026-01-18",
          "error": "        const totalCorrect = (wp.correctCount",
          "fix": "    return (progress.memorizationAttempts",
          "testsFailed": 0,
          "source": "git-history"
        },
        {
          "date": "2026-01-18",
          "error": "      attempts: (wordProgress.correctCount || 0) + (wordProgress.incorrectCount",
          "fix": "        modeAttempts = wordProgress.memorizationAttempts",
          "testsFailed": 0,
          "source": "git-history"
        },
        {
          "date": "2026-01-18",
          "error": "**修正前**: `    wordProgress.incorrectCount+",
          "fix": "          \"fix\": \"      const transCorrect = wordStat.translationCorrect",
          "testsFailed": 0,
          "source": "git-history"
        },
        {
          "date": "2026-01-18",
          "error": "      const totalAttempts = (wordProgress.correctCount || 0) + (wordProgress.incorrectCount",
          "fix": "  wordProgress.memorizationAttempts = (wordProgress.memorizationAttempts",
          "testsFailed": 0,
          "source": "git-history"
        },
        {
          "date": "2026-01-18",
          "error": "    wordProgress.incorrectCount+",
          "fix": "const correct = progress.memorizationCorrect",
          "testsFailed": 0,
          "source": "git-history"
        },
        {
          "date": "2026-01-18",
          "error": "        } else if (wordProgress.incorrectCount && wordProgress.incorrectCount",
          "fix": "      if (wordProgress?.memorizationAttempts && wordProgress.memorizationAttempts",
          "testsFailed": 0,
          "source": "git-history"
        },
        {
          "date": "2026-01-18",
          "error": "    if (ctx.attemptCount",
          "fix": " (wordProgress.spellingAttempts || 0) + (wordProgress.grammarAttempts || 0) + (wordProgress.memorizationAttempts",
          "testsFailed": 0,
          "source": "git-history"
        },
        {
          "date": "2026-01-18",
          "error": "      wordStat.correctCount",
          "fix": "      const transCorrect = wordStat.translationCorrect",
          "testsFailed": 0,
          "source": "git-history"
        }
      ],
      "learningMetrics": {
        "successRate": 0.5,
        "averageRecoveryTime": "30min",
        "preventionEffectiveness": 1
      }
    },
    "refactoring-logic-change": {
      "id": "refactoring-logic-change",
      "category": "logic-error",
      "severity": "high",
      "occurrences": 0,
      "lastOccurred": null,
      "recoveries": 0,
      "weight": 0.8,
      "description": "リファクタリング時に元のロジックを変更",
      "detectionPattern": {
        "errorMessage": "Test failed.*expected.*received",
        "files": ["src/**/*.ts"]
      },
      "prevention": {
        "checkType": "test",
        "command": "npm run test:unit",
        "instructionsFile": ".aitk/instructions/refactoring-safety-guide.instructions.md",
        "autoFixable": false
      },
      "examples": [],
      "learningMetrics": {
        "successRate": 1,
        "averageRecoveryTime": null,
        "preventionEffectiveness": 0.8
      }
    },
    "logic-error": {
      "id": "logic-error",
      "category": "unknown",
      "severity": "medium",
      "occurrences": 4905,
      "lastOccurred": "2025-12-20",
      "recoveries": 1,
      "weight": 1,
      "description": "perf(grammar): handleStartQuizの無限ループを修正してパフォーマンス改善",
      "detectionPattern": {
        "errorMessage": "perf(grammar): handleStartQuizの無限ループを修正してパフォーマンス改善",
        "files": ["src/components/GrammarQuizView.tsx"]
      },
      "prevention": {
        "checkType": "manual",
        "command": null,
        "instructionsFile": null,
        "autoFixable": false
      },
      "examples": [],
      "learningMetrics": {
        "successRate": 1,
        "averageRecoveryTime": null,
        "preventionEffectiveness": 0.5
      }
    },
    "type-error": {
      "id": "type-error",
      "category": "unknown",
      "severity": "medium",
      "occurrences": 385,
      "lastOccurred": "2025-12-20",
      "recoveries": 1,
      "weight": 1,
      "description": "fix: TypeScriptエラー修正(TimeBasedStats, NetworkConfig, Question型)",
      "detectionPattern": {
        "errorMessage": "fix: TypeScriptエラー修正(TimeBasedStats, NetworkConfig, Question型)",
        "files": [
          "src/ai/nodes/TimeBasedPriorityAI.ts",
          "src/utils/questionPrioritySorter.ts",
          "tests/unit/learningAI.test.ts"
        ]
      },
      "prevention": {
        "checkType": "manual",
        "command": null,
        "instructionsFile": null,
        "autoFixable": false
      },
      "examples": [],
      "learningMetrics": {
        "successRate": 1,
        "averageRecoveryTime": null,
        "preventionEffectiveness": 0.5
      }
    },
    "test-error": {
      "id": "test-error",
      "category": "unknown",
      "severity": "medium",
      "occurrences": 364,
      "lastOccurred": "2025-12-20",
      "recoveries": 1,
      "weight": 1,
      "description": "test: カバレッジ目標達成 - 94.74%",
      "detectionPattern": {
        "errorMessage": "test: カバレッジ目標達成 - 94.74%",
        "files": ["tests/unit/useAdaptiveLearning.test.ts"]
      },
      "prevention": {
        "checkType": "manual",
        "command": null,
        "instructionsFile": null,
        "autoFixable": false
      },
      "examples": [],
      "learningMetrics": {
        "successRate": 1,
        "averageRecoveryTime": null,
        "preventionEffectiveness": 0.5
      }
    }
  },
  "guardRules": {
    "pre-commit": {
      "enabled": true,
      "checks": [
        "type-check",
        "lint",
        "dark-mode-check",
        "specification-compliance"
      ],
      "weight": 1
    },
    "ci-cd": {
      "enabled": true,
      "checks": [
        "property-naming",
        "logic-duplication",
        "unit-tests",
        "integration-tests"
      ],
      "weight": 0.9
    },
    "instructions": {
      "enabled": true,
      "priority": "critical",
      "weight": 0.7
    }
  },
  "convergenceMetrics": {
    "currentSuccessRate": 0.5,
    "targetSuccessRate": 0.95,
    "convergenceProgress": 0.526,
    "estimatedConvergenceDate": "2026-01-20",
    "recentFailures": [
      {
        "date": "2025-12-20",
        "patternId": "property-naming-error",
        "recovered": true,
        "recoveryTime": 30
      }
    ]
  },
  "hotspots": [
    {
      "file": "src/components/ReadingPassageView.tsx",
      "modificationCount": 11,
      "riskLevel": "high"
    },
    {
      "file": "src/components/ExplanationBoard.tsx",
      "modificationCount": 11,
      "riskLevel": "high"
    },
    {
      "file": "extensions/servant/src/ui/states/OverviewState.ts",
      "modificationCount": 10,
      "riskLevel": "medium"
    },
    {
      "file": "extensions/servant/src/extension.ts",
      "modificationCount": 9,
      "riskLevel": "medium"
    },
    {
      "file": "extensions/servant/src/ui/ConstellationViewPanel.ts",
      "modificationCount": 8,
      "riskLevel": "medium"
    },
    {
      "file": "extensions/servant/src/autopilot/AutopilotController.ts",
      "modificationCount": 7,
      "riskLevel": "medium"
    },
    {
      "file": "src/utils/passageDataLoader.ts",
      "modificationCount": 6,
      "riskLevel": "medium"
    },
    {
      "file": "src/components/MemorizationView.tsx",
      "modificationCount": 6,
      "riskLevel": "medium"
    },
    {
      "file": "extensions/servant/src/ui/ServantWarningLogger.ts",
      "modificationCount": 5,
      "riskLevel": "low"
    },
    {
      "file": "extensions/servant/src/monitoring/ActionsHealthMonitor.ts",
      "modificationCount": 5,
      "riskLevel": "low"
    }
  ]
}
