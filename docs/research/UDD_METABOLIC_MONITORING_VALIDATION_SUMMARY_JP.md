# 未知駆動開発(UDD)の代謝監視の検証可能性について（要約）

## 1. 概要

UDDを代謝データ監視に適用できるかを「検証可能な形」で評価する。成果は性能の断言ではなく：

- **手続きの固定**：分割設計・リーク対策・前処理を固定し、評価が破綻せずに回る
- **原因分解**："壊れ方"を分類し、次の観測や設計変更へ接続できる

## 2. 基本方針

1. **全観測を捨てない**：未同定ピーク含め、追跡可能な形（m/z, RT等）で保つ
2. **偽性を先に疑う**：バッチ、欠損、前処理差、機器ドリフトに支配された結論を避ける
3. **未知を分類管理**：失敗原因を分類してログに残す

## 3. 検証可能性の定義

- **手続きが破綻しない**：分割・前処理・指標が固定され、再現可能なログで評価が回る
- **原因分解ができる**：失敗を分布/観測/ラベル/評価の4分類で記録できる

## 4. データ形による目的分岐

- **時系列あり**：リードタイム×偽警報率で評価
- **時系列なし**：外部分割での再現性＋キャリブレーション＋不確実性/OODの原因内訳

## 5. 評価設計の核

**設計原則**：

1. 前処理のfitは訓練側のみ
2. 時間順/患者リーク禁止
3. 可能ならバッチ/施設で外部分割
4. ベースライン比較（マーカー固定・ルールベース・全観測非逐次）
5. 運用指標含む（偽警報・閾値・キャリブレーション・再現性）

**分割キー最優先**：患者ID、時点、バッチ、施設。無い場合は検証不能としてNo-Go。

## 6. 全観測とベースライン比較

- 未同定ピークも追跡ID（m/z, RT）でログ保存。同一性崩れは観測未知として前処理差分実験で明示
- ベースライン3系統：①マーカー固定 ②ルールベース ③全観測非逐次。UDD要素を段階追加しアブレーション記録

## 7. 停止条件とGo/No-Go

**停止条件**：外部分割崩壊/偽警報運用不能/データ品質で結論決定/前処理変更で結論反転（偽性支配）

**Go/No-Go判断**：「性能向上」でなく「壊れ方分解＋次手定義」の可否
- **Go**：外部分割で最低限再現、失敗が未知分類済、追加観測具体化
- **No-Go**：分割・前処理変更で結論揺れ、原因切り分け不能

## 8. 監査可能性

記録必須項目：取得元/DOI/ライセンス、アーカイブハッシュ、メタデータ列、前処理手順、乱数、評価指標、未知分類ログ

## 9. 次のアクション

公開データ1つ選定後、A案（後追いシミュレーション）実施：

- **データカード**：アクセッション/DOI/ライセンス、ラベル定義、分割キー有無、バッチ/QC情報、既知欠損点
- **評価プロトコル**：分割方法、ベースライン、指標、停止条件
- **未知分類ログ**：失敗を4分類で記録

## 10. 公開データ利用の注意

- ライセンス（研究/再配布/商用）明記、個人同定リスク確認、ラベル定義・判定追跡可能か確認
- 時系列なしは外部分割設計（例：バッチA学習→バッチB評価）、指標は再現性/キャリブレーション/閾値運用/不確実性内訳

## 11. A案の限界

A案で検証できるのは評価手続き・偽性切り分け・未知分類の可否のみ。**リアルタイム運用や介入有効性は保証しない。**目的は次フェーズGo/No-Go判断のための透明で再現可能な検証の型。

## 12. 再開時の最短ルート

候補データ1つに絞り、①データカード（取得情報・ラベル・分割キー・欠損点） ②評価プロトコル（分割/ベースライン/指標/停止条件） ③未知分類ログを揃えて初回A案実施。

