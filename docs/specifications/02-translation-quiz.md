# 02. å’Œè¨³ã‚¯ã‚¤ã‚º

## ğŸ“Œ æ¦‚è¦

è‹±å˜èªãƒ»ãƒ•ãƒ¬ãƒ¼ã‚ºã‹ã‚‰æ—¥æœ¬èªè¨³ã‚’é¸ã¶4æŠã‚¯ã‚¤ã‚ºæ©Ÿèƒ½ã€‚
æœ€ã‚‚åŸºæœ¬çš„ãªå­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã§ã€èªå½™ã®æ„å‘³ç†è§£ã«é‡ç‚¹ã‚’ç½®ãã€‚

**ãƒ‡ãƒ¼ã‚¿ä»•æ§˜å‚ç…§**:
- å˜èªãƒ‡ãƒ¼ã‚¿: [19-junior-high-vocabulary.md](./19-junior-high-vocabulary.md)
- ãƒ•ãƒ¬ãƒ¼ã‚ºãƒ‡ãƒ¼ã‚¿: [20-junior-high-phrases.md](./20-junior-high-phrases.md)
- ãƒ‡ãƒ¼ã‚¿æ§‹é€ : [15-data-structures.md](./15-data-structures.md)

## ğŸ¯ æ©Ÿèƒ½ä»•æ§˜

### åŸºæœ¬ãƒ•ãƒ­ãƒ¼

1. **å•é¡Œè¡¨ç¤º**: è‹±å˜èªãƒ»ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’è¡¨ç¤º
2. **é¸æŠè‚¢æç¤º**: 3ã¤ã®æ—¥æœ¬èªè¨³ + ã€Œåˆ†ã‹ã‚‰ãªã„ã€ã®4æŠã‚’æç¤º
3. **è§£ç­”**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ1ã¤é¸æŠ
4. **åˆ¤å®š**: å³åº§ã«æ­£èª¤åˆ¤å®š
5. **ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: AIã‚³ãƒ¡ãƒ³ãƒˆè¡¨ç¤ºï¼ˆæ¡ä»¶ä»˜ãï¼‰
6. **æ¬¡ã®å•é¡Œ**: è‡ªå‹•çš„ã«æ¬¡ã¸é€²ã‚€

### å‡ºé¡Œå½¢å¼

```
å•é¡Œ: abandon
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
é¸æŠè‚¢:
â–¡ 1. æ¨ã¦ã‚‹ã€æ”¾æ£„ã™ã‚‹
â–¡ 2. å—ã‘å…¥ã‚Œã‚‹
â–¡ 3. é”æˆã™ã‚‹
â–¡ 4. åˆ†ã‹ã‚‰ãªã„
```

### å­¦ç¿’çŠ¶æ…‹ã®ç®¡ç†

| çŠ¶æ…‹ | æ¡ä»¶ | å‡ºé¡Œé »åº¦ |
|------|------|---------|
| **å®šç€æ¸ˆã¿** | 1ç™ºæ­£è§£ ã¾ãŸã¯ é€£ç¶š2å›ä»¥ä¸Šæ­£è§£ | ã—ã°ã‚‰ãå‡ºé¡Œã‚’è¦‹é€ã‚Š |
| **å­¦ç¿’ä¸­** | 1å›ç›®ä¸æ­£è§£ï¼ˆã€Œåˆ†ã‹ã‚‰ãªã„ã€å«ã‚€ï¼‰ | ç¶™ç¶šã—ã¦å‡ºé¡Œ |
| **è¦å¾©ç¿’** | 2å›ä»¥ä¸Šä¸æ­£è§£ | å„ªå…ˆçš„ã«å‡ºé¡Œ |

**æ³¨æ„**: ã€Œåˆ†ã‹ã‚‰ãªã„ã€ã‚’é¸æŠã—ãŸå ´åˆã¯ä¸æ­£è§£æ‰±ã„ã¨ãªã‚Šã€è¦å¾©ç¿’ã«ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã¾ã™ã€‚

## ğŸ›ï¸ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½

### é›£æ˜“åº¦ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

| ãƒ¬ãƒ™ãƒ« | å¯¾è±¡ | å˜èªæ•° |
|--------|------|--------|
| All | å…¨ãƒ¬ãƒ™ãƒ« | ~1,300èª |
| Beginner | åˆç´šï¼ˆåŸºç¤å˜èªï¼‰ | ~400èª |
| Intermediate | ä¸­ç´šï¼ˆä¸­å­¦å—é¨“é »å‡ºï¼‰ | ~600èª |
| Advanced | ä¸Šç´šï¼ˆé›£é–¢æ ¡å¯¾å¿œï¼‰ | ~300èª |

### å˜èª/ãƒ•ãƒ¬ãƒ¼ã‚ºãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

| ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ | èª¬æ˜ | ä¾‹ |
|-----------|------|-----|
| All | ã™ã¹ã¦è¡¨ç¤º | - |
| Words Only | å˜èªã®ã¿ | abandon, accept |
| Phrases Only | ãƒ•ãƒ¬ãƒ¼ã‚ºã®ã¿ | give up, look forward to |

### ãƒ•ãƒ¬ãƒ¼ã‚ºã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

å¥å‹•è©ã‚„ã‚¤ãƒ‡ã‚£ã‚ªãƒ ã‚’ã•ã‚‰ã«ç´°åˆ†åŒ–:

| ã‚¿ã‚¤ãƒ— | èª¬æ˜ | ä¾‹ |
|--------|------|-----|
| All | ã™ã¹ã¦ã®ãƒ•ãƒ¬ãƒ¼ã‚º | - |
| Phrasal Verb | å¥å‹•è© | give up, look after |
| Idiom | ã‚¤ãƒ‡ã‚£ã‚ªãƒ  | break the ice, piece of cake |
| Collocation | é€£èª | make a decision, take a look |
| Other | ãã®ä»–ã®è¡¨ç¾ | as well as, in order to |

## ğŸ”Š éŸ³å£°æ©Ÿèƒ½

### èª­ã¿ä¸Šã’æ©Ÿèƒ½

- **å¯¾å¿œ**: è‹±å˜èªãƒ»ãƒ•ãƒ¬ãƒ¼ã‚ºã®éŸ³å£°èª­ã¿ä¸Šã’
- **ã‚¨ãƒ³ã‚¸ãƒ³**: Web Speech API (speechSynthesis)
- **è¨€èª**: en-USï¼ˆã‚¢ãƒ¡ãƒªã‚«è‹±èªï¼‰
- **é€Ÿåº¦**: 0.9å€é€Ÿï¼ˆèãå–ã‚Šã‚„ã™ã„é€Ÿåº¦ï¼‰

```typescript
function speakEnglish(text: string) {
  if (!isSpeechSynthesisSupported()) return;
  
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'en-US';
  utterance.rate = 0.9;
  utterance.pitch = 1.0;
  
  speechSynthesis.speak(utterance);
}
```

### å¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶

- âœ… Chrome/Edgeï¼ˆé«˜å“è³ªï¼‰
- âœ… Safariï¼ˆiOSå¯¾å¿œï¼‰
- âœ… Firefox
- âŒ ä¸€éƒ¨å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶

## ğŸ¨ UI/UX

### é¸æŠè‚¢ã®ãƒ‡ã‚¶ã‚¤ãƒ³

#### é€šå¸¸çŠ¶æ…‹
```css
.choice-btn {
  padding: 16px;
  font-size: max(16px, 1em);
  border: 2px solid #c0c0c0;
  border-radius: 10px;
  background: #fafafa;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  color: #2c3e50;
  font-weight: 500;
}
```

#### ãƒ›ãƒãƒ¼æ™‚
```css
.choice-btn:hover:not(:disabled) {
  border-color: #667eea;
  background: #f0f4ff;
}
```

#### æ­£è§£æ™‚
```css
.choice-btn.correct {
  background: #d4edda;
  border-color: #28a745;
  color: #155724;
  font-weight: 600;
}
```

#### ä¸æ­£è§£æ™‚
```css
.choice-btn.incorrect {
  background: #f8d7da;
  border-color: #dc3545;
  color: #721c24;
}
```

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

#### PC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼ˆæ¨ªå‘ãï¼‰
- 2åˆ—ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º
- gap: 14px

#### ã‚¹ãƒãƒ›ï¼ˆç¸¦å‘ãï¼‰
- 1åˆ—è¡¨ç¤º
- gap: 12px

### å›ºå®šé«˜ã•ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

ç”»é¢ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’é˜²ããŸã‚å›ºå®šé«˜ã•ã‚’è¨­å®š:

```css
.question-content-inline {
  min-height: 100px;
  justify-content: center;
}

.comment-bar-container {
  min-height: 80px;
  margin-bottom: 16px;
}
```

## ğŸ“Š é¸æŠè‚¢ç”Ÿæˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

### åŸºæœ¬æ–¹é‡

1. **æ­£è§£**: å•é¡Œã®æ­£ã—ã„è¨³
2. **èª¤ç­”1**: åŒã˜ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‹ã‚‰é¸æŠ
3. **èª¤ç­”2**: ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠ
4. **ã€Œåˆ†ã‹ã‚‰ãªã„ã€**: å›ºå®šã§æœ€å¾Œã«é…ç½®

### ã‚«ãƒ†ã‚´ãƒªãƒ¼åŒä¸€åŒ–

æ··åŒã‚’èª˜ç™ºã™ã‚‹ãŸã‚ã€åŒã˜å“è©ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‹ã‚‰é¸æŠ:

```typescript
function generateChoicesWithQuestions(
  currentQuestion: Question,
  allQuestions: Question[],
  currentIndex: number
): Array<{ text: string; question: Question | null }> {
  // èª¤ç­”ã‚’2ã¤é¸æŠ
  const wrongQuestions = selectWrongQuestions(allQuestions, currentQuestion, 2);
  
  // æ­£è§£ã¨èª¤ç­”2ã¤ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
  const firstThreeChoices = shuffle([
    { text: currentQuestion.meaning, question: currentQuestion },
    ...wrongQuestions.map(q => ({ text: q.meaning, question: q }))
  ]);
  
  // æœ€å¾Œã«ã€Œåˆ†ã‹ã‚‰ãªã„ã€ã‚’è¿½åŠ 
  return [
    ...firstThreeChoices,
    { text: 'åˆ†ã‹ã‚‰ãªã„', question: null }
  ];
}
```
  
  const wrongChoice1 = sameCategory[Math.floor(Math.random() * sameCategory.length)];
  
  // ãƒ©ãƒ³ãƒ€ãƒ ã‹ã‚‰1ã¤
  const wrongChoice2 = allQuestions
    .filter(q => q.meaning !== correctAnswer && q.meaning !== wrongChoice1);
  
  return shuffle([correctAnswer, wrongChoice1, wrongChoice2]);
}
```

## ğŸ§  AIé€£æº

### ã‚¨ãƒ©ãƒ¼äºˆæ¸¬AI

éå»ã®èª¤ç­”ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰è‹¦æ‰‹å˜èªã‚’äºˆæ¸¬:

```typescript
const prediction = await predictErrorRisk(word, userProgress);
if (prediction.risk > 0.7) {
  // é«˜ãƒªã‚¹ã‚¯å˜èªã¯è­¦å‘Šè¡¨ç¤º
  showWarning('ã“ã®å˜èªã¯é–“é•ãˆã‚„ã™ã„ã®ã§æ³¨æ„ï¼');
}
```

### èªçŸ¥è² è·AI

ç–²åŠ´åº¦ã‚’æ¸¬å®šã—ã¦é›£æ˜“åº¦ã‚’è‡ªå‹•èª¿æ•´:

```typescript
const cognitiveLoad = calculateCognitiveLoad(sessionResponses);
if (cognitiveLoad.fatigue > 0.8) {
  // é›£æ˜“åº¦ã‚’ä¸‹ã’ã‚‹
  difficulty = adjustDifficulty(difficulty, -1);
  showMessage(generateFatigueMessage(cognitiveLoad));
}
```

### æ–‡è„ˆå­¦ç¿’AI

é–¢é€£å˜èªã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦é€£ç¶šå‡ºé¡Œ:

```typescript
const sequence = generateContextualSequence(
  nextWord,
  allQuestions,
  userProgress
);
// é¡ç¾©èªãƒ»åç¾©èªãƒ»èªæºãŒåŒã˜å˜èªã‚’é€£ç¶šã§å‡ºé¡Œ
```

## ğŸ“± ã‚¿ãƒƒãƒæœ€é©åŒ–

### iOSå¯¾å¿œ

```css
.choice-btn {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
  touch-action: manipulation;
}
```

### æœ€å°ã‚¿ãƒƒãƒã‚µã‚¤ã‚º

```css
.choice-btn {
  min-height: 56px; /* iOSæ¨å¥¨44pxä»¥ä¸Š */
}
```

## ğŸ“ˆ é€²æ—è¨˜éŒ²

### è§£ç­”ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜

```typescript
interface QuizResult {
  questionId: string;
  word: string;
  meaning: string;
  userAnswer: string;
  correctAnswer: string;
  isCorrect: boolean;
  responseTime: number; // ãƒŸãƒªç§’
  timestamp: number;
}
```

### å˜èªã”ã¨ã®é€²æ—

```typescript
interface WordProgress {
  word: string;
  correctCount: number;
  incorrectCount: number;
  lastAttempt: number;
  retentionRate: number; // 0-100%
  masteryLevel: 'struggling' | 'learning' | 'mastered';
  averageResponseTime: number;
}
```

### ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

- **IndexedDB**: wordProgressã®ä¿å­˜ï¼ˆå¤§å®¹é‡å¯¾å¿œï¼‰
- **ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã®é«˜é€Ÿã‚¢ã‚¯ã‚»ã‚¹

## ğŸ® ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

| ã‚­ãƒ¼ | å‹•ä½œ |
|------|------|
| 1 | é¸æŠè‚¢1ã‚’é¸æŠ |
| 2 | é¸æŠè‚¢2ã‚’é¸æŠ |
| 3 | é¸æŠè‚¢3ã‚’é¸æŠ |
| 4 | é¸æŠè‚¢4ã‚’é¸æŠï¼ˆåˆ†ã‹ã‚‰ãªã„ï¼‰ |
| Space | éŸ³å£°å†ç”Ÿ |
| Enter | æ¬¡ã®å•é¡Œã¸ï¼ˆè§£ç­”å¾Œï¼‰ |

## ğŸ”„ é©å¿œå‹å‡ºé¡Œ

### å„ªå…ˆåº¦è¨ˆç®—

```typescript
function calculateQuestionPriorities(
  questions: Question[],
  progress: UserProgress
): Question[] {
  return questions.map(q => {
    const wordProgress = progress.wordProgress[q.word];
    
    // å„ªå…ˆåº¦ã‚¹ã‚³ã‚¢è¨ˆç®—
    let priority = 0;
    
    // 1. æœªå­¦ç¿’å˜èªã¯æœ€å„ªå…ˆ
    if (!wordProgress) priority += 100;
    
    // 2. è¦å¾©ç¿’å˜èªã¯é«˜å„ªå…ˆåº¦
    if (wordProgress?.masteryLevel === 'struggling') priority += 80;
    
    // 3. æœ€çµ‚å­¦ç¿’ã‹ã‚‰ã®çµŒéæ™‚é–“
    const daysSince = (Date.now() - wordProgress?.lastAttempt) / (1000 * 60 * 60 * 24);
    priority += Math.min(daysSince * 5, 50);
    
    // 4. æ­£ç­”ç‡ãŒä½ã„å˜èª
    const accuracy = wordProgress 
      ? wordProgress.correctCount / (wordProgress.correctCount + wordProgress.incorrectCount)
      : 0;
    priority += (1 - accuracy) * 30;
    
    return { ...q, priority };
  }).sort((a, b) => b.priority - a.priority);
}
```

## ğŸ› ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼

```typescript
try {
  const questions = await loadQuestions();
} catch (error) {
  console.error('å•é¡Œãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:', error);
  showErrorMessage('å•é¡Œãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚');
}
```

### éŸ³å£°å†ç”Ÿã‚¨ãƒ©ãƒ¼

```typescript
if (!isSpeechSynthesisSupported()) {
  console.warn('éŸ³å£°æ©Ÿèƒ½ã¯éå¯¾å¿œã§ã™');
  // éŸ³å£°ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
}
```

## ğŸ“Š çµ±è¨ˆæƒ…å ±

### ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ±è¨ˆ

```typescript
interface SessionStats {
  totalQuestions: number;
  correctCount: number;
  incorrectCount: number;
  accuracy: number;
  currentStreak: number;
  maxStreak: number;
  averageResponseTime: number;
  sessionDuration: number;
}
```

## ğŸ“ é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [01-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](./01-project-overview.md)
- [03-ã‚¹ãƒšãƒ«ã‚¯ã‚¤ã‚º](./03-spelling-quiz.md)
- [08-ã‚¨ãƒ©ãƒ¼äºˆæ¸¬AI](./08-error-prediction-ai.md)
- [15-ãƒ‡ãƒ¼ã‚¿æ§‹é€ ](./15-data-structures.md)
