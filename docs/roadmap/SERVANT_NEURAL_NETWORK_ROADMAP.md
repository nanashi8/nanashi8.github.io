# サーバント・ニューラルネットワーク ロードマップ

**最終更新**: 2026年1月5日  
**ステータス**: 計画中

---

## 🎯 目的

サーバント（VS Code拡張）が、プロジェクトの「実装結合（ファイル間依存・同時変更・違反発生）」を **ニューラルネットワーク的な重み付きグラフ** として扱い、
AI作業の自己評価→学習→最適化のフィードバックループを回して **次の作業の成功確率と効率を上げる**。

---

## ✅ 前提（このリポジトリの現実）

- 実装の主戦場は VS Code 拡張の `extensions/servant/`。
- ローカル処理中心（クラウド学習前提にしない）。
- ルールベース/ガード（AdaptiveGuard 等）を壊さず、**学習が不安定でも安全にフォールバック**できる設計を維持する。

---

## 📌 参照（詳細版ロードマップ）

この領域はすでに拡張側で詳細な工程計画があるため、本ファイルは「全体像と成果物の粒度」を SSOT とし、
工程の詳細は以下を参照する。

- 詳細版: `extensions/servant/NEURAL_SERVANT_ROADMAP.md`
- 自動学習（Git履歴/失敗パターン学習）: `docs/SERVANT_AUTO_LEARNING.md`
- サーバント進化計画（全体）: `docs/plans/SERVANT_EVOLUTION_MASTER_PLAN.md`

---

## 🧭 スコープ（今回のロードマップで扱う範囲）

### 対象
- AI自己評価（作業結果の評価・履歴化）
- 重み付き依存関係グラフ（ニューラルネットワーク的表現）
- 学習伝播（順伝播/逆伝播）と最適化（次に触るべき場所の提案）

### 非対象（後回し）
- クラウド学習基盤、外部GPU前提の訓練
- “完全自動コミット” のような破壊的自動化（必ずガード/承認経路を残す）

---

## 🗺️ フェーズ設計（要点）

### Phase A: AI自己評価とフィードバックループ
**狙い**: AIが自分の作業結果を評価し、次回の「注意点」と「成功パターン」に反映する。

**成果物**（例）:
- AI作業ログ（タスク単位・ファイル変更単位）
- メトリクス（違反増減、テスト結果、手戻り量）
- 評価履歴（時系列）
- “次回の注意” をコンテキストに注入する仕組み

**完了条件**:
- 変更の追跡が安定し、評価ログが継続的に残る
- フォールバック時でも動作が壊れない

---

### Phase B: ニューラルネットワーク的依存関係グラフ
**狙い**: ファイル間の結合を重み付きグラフとして表現し、関連ファイル推定の精度を上げる。

**成果物**（例）:
- グラフ構築（import/参照/同時変更/違反の関係を統合）
- ノード/エッジ重み（重要度・リスク・関連度）
- `.vscode/` 配下への保存形式（JSON 等）

**完了条件**:
- 実プロジェクトでグラフが再現性を持って構築できる
- 「タスク→関連ファイル」推定がルール単独より改善する

---

### Phase C: 学習伝播と最適化エンジン
**狙い**: 失敗や成功のフィードバックを、グラフ重みに学習として反映し、次の作業順序を最適化する。

**成果物**（例）:
- 順伝播: タスク起点→影響範囲推定
- 逆伝播: 失敗起点→原因候補推定
- 学習履歴と収束の可視化（重み変動）

**完了条件**:
- 失敗時の“原因候補”の提示が有意に役立つ
- 学習が暴れても安全に抑制できる（学習率/正則化/リセット）

---

## 🔒 安全設計（MUST）

- 学習は **補助**。ガード/検証の結果に反する自動判断はしない。
- 出力は「提案」と「根拠（ログ/グラフ）」をセットにする。
- 学習データはローカルに保存し、破損時に復旧可能な形式にする。

---

## ✅ 次の具体アクション（再開時の入口）

- `extensions/servant/NEURAL_SERVANT_ROADMAP.md` の工程を、
  - 依存関係グラフのSSOT
  - フィードバックの入力フォーマット
  - 収束/リセット戦略
  の3点に絞って「実装順」を確定する。
