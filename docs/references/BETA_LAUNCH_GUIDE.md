# ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸è©¦é¨“é‹ç”¨ï¼ˆãƒ™ãƒ¼ã‚¿ï¼‰é–‹å§‹ã‚¬ã‚¤ãƒ‰

æœ¬ç•ªç’°å¢ƒã¸ã®å…¬é–‹å‰ã«ç¢ºèªãƒ»å®Ÿæ–½ã™ã¹ãé …ç›®ã‚’ã¾ã¨ã‚ãŸãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã¨å®Ÿè£…ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚

---

## ğŸ“‹ ç›®æ¬¡

1. [è©¦é¨“é‹ç”¨å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ](#è©¦é¨“é‹ç”¨å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ)
2. [æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ](#æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ)
3. [ãƒ‡ãƒ—ãƒ­ã‚¤ã¨CI/CD](#ãƒ‡ãƒ—ãƒ­ã‚¤ã¨cicd)
4. [ç›£è¦–ãƒ»éšœå®³é€šçŸ¥](#ç›£è¦–éšœå®³é€šçŸ¥)
5. [ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½è·¡ã¨çµ±è¨ˆ](#ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½è·¡ã¨çµ±è¨ˆ)
6. [ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](#ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)
7. [ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—](#ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—)
8. [ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆä½“åˆ¶](#ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆä½“åˆ¶)
9. [é‹ç”¨ãƒ•ãƒ­ãƒ¼](#é‹ç”¨ãƒ•ãƒ­ãƒ¼)
10. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## è©¦é¨“é‹ç”¨å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### å¿…é ˆé …ç›®ï¼ˆMust Haveï¼‰

- [ ] **æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ**: ä¸»è¦ãƒ•ãƒ­ãƒ¼ãŒå‹•ä½œã™ã‚‹ï¼ˆã‚¯ã‚¤ã‚ºã€èª­è§£ã€ã‚¹ã‚³ã‚¢ä¿å­˜ï¼‰
- [ ] **ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›**: Chromeã€Safariã€Firefoxã€iOS Safariã§å‹•ä½œç¢ºèª
- [ ] **ãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª**: GitHub Pagesã¸ã®è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå‹•ä½œ
- [ ] **ã‚¨ãƒ©ãƒ¼ç›£è¦–**: Sentryã¾ãŸã¯ä»£æ›¿ãƒ„ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼åé›†
- [ ] **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼**: `/privacy` ãƒšãƒ¼ã‚¸ã‚’ä½œæˆãƒ»å…¬é–‹
- [ ] **å•ã„åˆã‚ã›å…ˆ**: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ãŸã¯ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¨­ç½®
- [ ] **HTTPS**: å…¨ãƒšãƒ¼ã‚¸ãŒHTTPSã§é…ä¿¡ï¼ˆGitHub Pagesæ¨™æº–å¯¾å¿œï¼‰

### æ¨å¥¨é …ç›®ï¼ˆShould Haveï¼‰

- [ ] **CookieåŒæ„ãƒãƒŠãƒ¼**: åˆå›è¨ªå•æ™‚ã«åŒæ„ã‚’å–å¾—
- [ ] **ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆ**: ãƒ¦ãƒ‹ãƒ¼ã‚¯ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ãƒ»å­¦ç¿’å˜èªæ•°ã®åé›†
- [ ] **å¯ç”¨æ€§ç›£è¦–**: Uptime Robotãªã©ã§5åˆ†é–“éš”ã®æ­»æ´»ç›£è¦–
- [ ] **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼**: CSPã€X-Frame-Optionsã®è¨­å®š
- [ ] **ä¾å­˜é–¢ä¿‚ã‚¹ã‚­ãƒ£ãƒ³**: GitHub Dependabotã®æœ‰åŠ¹åŒ–
- [ ] **ãƒ­ã‚°ä¿æŒæœŸé–“**: 90æ—¥é–“ä¿å­˜ãƒ»è‡ªå‹•å‰Šé™¤ã®è¨­å®š
- [ ] **ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½**: ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã‚„ãƒã‚°å ±å‘Šãƒ•ã‚©ãƒ¼ãƒ 

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®ï¼ˆNice to Haveï¼‰

- [ ] **A/Bãƒ†ã‚¹ãƒˆ**: Feature flagã§æ®µéšçš„ãƒ­ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆ
- [ ] **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬**: Lighthouse CIã€Core Web Vitals
- [ ] **å›½éš›åŒ–ï¼ˆi18nï¼‰**: è‹±èªå¯¾å¿œï¼ˆå°†æ¥çš„ï¼‰
- [ ] **PWAå¯¾å¿œ**: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å­¦ç¿’æ©Ÿèƒ½
- [ ] **ã‚½ãƒ¼ã‚·ãƒ£ãƒ«å…±æœ‰**: OGPè¨­å®šï¼ˆTwitterã‚«ãƒ¼ãƒ‰ãªã©ï¼‰

---

## æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

### ä¸»è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼

#### 1. æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆåˆå›è¨ªå•ï¼‰

```
ã‚¢ã‚¯ã‚»ã‚¹ â†’ ãƒ›ãƒ¼ãƒ ç”»é¢è¡¨ç¤º â†’ ã‚¯ã‚¤ã‚ºé–‹å§‹ â†’ 10å•è§£ç­” â†’ ã‚¹ã‚³ã‚¢è¡¨ç¤º â†’ å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ä¿å­˜ç¢ºèª
```

**ç¢ºèªé …ç›®**:
- [ ] LocalStorage/IndexedDBã«ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã‚‹
- [ ] ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰ã«æ­£ã—ã„çµ±è¨ˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚‚ãƒ‡ãƒ¼ã‚¿ãŒä¿æŒã•ã‚Œã‚‹

#### 2. ãƒªãƒ”ãƒ¼ã‚¿ãƒ¼ï¼ˆ2å›ç›®ä»¥é™ï¼‰

```
ã‚¢ã‚¯ã‚»ã‚¹ â†’ å‰å›ã®ç¶šãã‹ã‚‰é–‹å§‹ â†’ é–“é•ãˆãŸå˜èªãŒå„ªå…ˆå‡ºé¡Œ â†’ å­¦ç¿’å±¥æ­´ã®ç´¯ç©
```

**ç¢ºèªé …ç›®**:
- [ ] å‰å›ã®é€²æ—ãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã‚‹
- [ ] é©å¿œçš„å­¦ç¿’ï¼ˆè‹¦æ‰‹å˜èªã®å„ªå…ˆå‡ºé¡Œï¼‰ãŒæ©Ÿèƒ½
- [ ] é€£ç¶šå­¦ç¿’æ—¥æ•°ãŒæ­£ã—ãã‚«ã‚¦ãƒ³ãƒˆ

#### 3. ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹

```
ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ‡æ–­ â†’ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³é€šçŸ¥ â†’ å†æ¥ç¶š â†’ ãƒ‡ãƒ¼ã‚¿åŒæœŸ
```

**ç¢ºèªé …ç›®**:
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- [ ] LocalStorageã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‹•ä½œ
- [ ] ãƒ‡ãƒ¼ã‚¿æå¤±ãŒãªã„

### ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm install
npm run dev

# æœ¬ç•ªãƒ“ãƒ«ãƒ‰ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
npm run build
npm run preview

# å‹ãƒã‚§ãƒƒã‚¯
npx tsc --noEmit

# ãƒªãƒ³ã‚¿ãƒ¼
npm run lint
```

### ãƒ–ãƒ©ã‚¦ã‚¶åˆ¥ãƒ†ã‚¹ãƒˆ

| ãƒ–ãƒ©ã‚¦ã‚¶ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ãƒ†ã‚¹ãƒˆé …ç›® |
|---------|-----------|-----------|
| Chrome | æœ€æ–° | å…¨æ©Ÿèƒ½ |
| Safari | æœ€æ–° | éŸ³å£°åˆæˆã€LocalStorage |
| Firefox | æœ€æ–° | åŸºæœ¬æ©Ÿèƒ½ |
| iOS Safari | iOS 15+ | ã‚¿ãƒƒãƒæ“ä½œã€éŸ³å£° |
| Android Chrome | æœ€æ–° | ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–UI |

---

## ãƒ‡ãƒ—ãƒ­ã‚¤ã¨CI/CD

### GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

ç¾åœ¨ã®è¨­å®š:
```yaml
# .github/workflows/deploy.yml (æ—¢å­˜ã®å ´åˆ)
name: Deploy to GitHub Pages
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm run build
      - run: npm run deploy
```

### ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

**é€šå¸¸ãƒ‡ãƒ—ãƒ­ã‚¤**:
```bash
# ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "æ©Ÿèƒ½è¿½åŠ : XXX"

# ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒˆãƒªã‚¬ãƒ¼ï¼‰
git push origin main

# ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ç¢ºèªï¼ˆç´„2-5åˆ†ï¼‰
# https://nanashi8.github.io/ ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª
```

**ç·Šæ€¥ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯**:
```bash
# ç›´å‰ã®ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã—
git revert HEAD
git push origin main

# ã¾ãŸã¯ç‰¹å®šã®ã‚³ãƒŸãƒƒãƒˆã«æˆ»ã™
git reset --hard <commit-hash>
git push -f origin main  # æ³¨æ„: force push
```

### ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

GitHub Pagesã¯æœ¬ç•ªã®ã¿ãªã®ã§ã€ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ãŒå¿…è¦ãªå ´åˆ:

**æ–¹æ³•1: Netlifyãƒ–ãƒ©ãƒ³ãƒãƒ‡ãƒ—ãƒ­ã‚¤**
```bash
# staging ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b staging
git push origin staging

# Netlifyè¨­å®š: staging ãƒ–ãƒ©ãƒ³ãƒ â†’ preview-nanashi8.netlify.app
```

**æ–¹æ³•2: Vercel Preview**
```bash
# Vercel CLIã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
npm i -g vercel
vercel --prod=false
```

---

## ç›£è¦–ãƒ»éšœå®³é€šçŸ¥

### 1. ã‚¨ãƒ©ãƒ¼ç›£è¦–ï¼ˆSentryï¼‰

#### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

**1. Sentryã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ**
- https://sentry.io/ ã§ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆç„¡æ–™: æœˆ5,000ã‚¤ãƒ™ãƒ³ãƒˆï¼‰
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ â†’ DSNå–å¾—

**2. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```bash
npm install @sentry/react @sentry/tracing
```

**3. åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰è¿½åŠ **

`src/main.tsx` ã¾ãŸã¯ `src/index.tsx`:
```typescript
import * as Sentry from "@sentry/react";
import { BrowserTracing } from "@sentry/tracing";

Sentry.init({
  dsn: import.meta.env.VITE_SENTRY_DSN,
  integrations: [new BrowserTracing()],
  environment: import.meta.env.MODE, // 'production' or 'development'
  tracesSampleRate: 0.1, // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬ï¼ˆ10%ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼‰
  
  // ã‚¨ãƒ©ãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
  beforeSend(event, hint) {
    // LocalStorageã‚¨ãƒ©ãƒ¼ã¯ç„¡è¦–
    if (event.exception?.values?.[0]?.value?.includes('localStorage')) {
      return null;
    }
    return event;
  }
});
```

**4. ç’°å¢ƒå¤‰æ•°è¨­å®š**

`.env.production`:
```
VITE_SENTRY_DSN=https://xxxxx@o123456.ingest.sentry.io/7890123
```

GitHub Secretsï¼ˆæ¨å¥¨ï¼‰:
```bash
# Settings â†’ Secrets â†’ New repository secret
# Name: VITE_SENTRY_DSN
# Value: https://...
```

#### ã‚¨ãƒ©ãƒ¼é€šçŸ¥è¨­å®š

Sentry Dashboard â†’ Alerts â†’ New Alert Rule:
- **æ¡ä»¶**: ã‚¨ãƒ©ãƒ¼æ•° > 10ä»¶/æ™‚é–“
- **é€šçŸ¥å…ˆ**: ãƒ¡ãƒ¼ãƒ«ã€Slackã€Discordç­‰
- **å„ªå…ˆåº¦**: Criticalã€Highã€Medium

---

### 2. å¯ç”¨æ€§ç›£è¦–ï¼ˆUptime Robotï¼‰

#### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

**1. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ**
- https://uptimerobot.com/ ï¼ˆç„¡æ–™: 50ãƒ¢ãƒ‹ã‚¿ãƒ¼ï¼‰

**2. ãƒ¢ãƒ‹ã‚¿ãƒ¼è¿½åŠ **
- Type: HTTP(s)
- URL: `https://nanashi8.github.io/`
- Interval: 5åˆ†
- Alert Contacts: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹

**3. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒšãƒ¼ã‚¸ä½œæˆ**
- Public Status Page: `https://stats.uptimerobot.com/xxxxx`
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«éšœå®³æƒ…å ±ã‚’å…±æœ‰å¯èƒ½

#### ç›£è¦–é …ç›®

| é …ç›® | ç›®æ¨™å€¤ | ã‚¢ãƒ©ãƒ¼ãƒˆæ¡ä»¶ |
|------|--------|--------------|
| ç¨¼åƒç‡ | 99.9% | 2å›é€£ç¶šãƒ€ã‚¦ãƒ³ |
| ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ | < 2ç§’ | > 5ç§’ãŒ5åˆ†ç¶™ç¶š |
| SSLè¨¼æ˜æ›¸ | æœ‰åŠ¹ | 30æ—¥å‰ã«è­¦å‘Š |

---

### 3. ãƒ­ã‚°ç›£è¦–

#### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ­ã‚°

**é–‹ç™ºæ™‚ã®ãƒ‡ãƒãƒƒã‚°**:
```typescript
// src/utils/logger.ts
export const logger = {
  info: (msg: string, data?: any) => {
    if (import.meta.env.DEV) {
      console.log(`[INFO] ${msg}`, data);
    }
  },
  error: (msg: string, error?: Error) => {
    console.error(`[ERROR] ${msg}`, error);
    // Sentryã«é€ä¿¡
    Sentry.captureException(error);
  }
};
```

#### ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ï¼ˆã‚µãƒ¼ãƒãƒ¬ã‚¹é–¢æ•°ï¼‰

Netlify Functions ã®ä¾‹:
```javascript
// netlify/functions/track-stats.js
exports.handler = async (event) => {
  console.log('[INFO] Stats received:', {
    userId: event.body.userId,
    timestamp: new Date().toISOString()
  });
  
  try {
    // å‡¦ç†
  } catch (error) {
    console.error('[ERROR] DB save failed:', error);
    // ã‚¨ãƒ©ãƒ¼é€šçŸ¥
    await notifySlack(`DB Error: ${error.message}`);
    return { statusCode: 500 };
  }
};
```

**ãƒ­ã‚°ç¢ºèª**:
```bash
# Netlify CLI
netlify functions:log track-stats

# AWS CloudWatchï¼ˆLambdaï¼‰
aws logs tail /aws/lambda/track-stats --follow
```

---

## ãƒ¦ãƒ¼ã‚¶ãƒ¼è¿½è·¡ã¨çµ±è¨ˆ

### UUIDç”Ÿæˆã¨ãƒ‡ãƒ¼ã‚¿é€ä¿¡

#### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…

`src/utils/analytics.ts`:
```typescript
// ãƒ¦ãƒ¼ã‚¶ãƒ¼IDç”Ÿæˆï¼ˆåˆå›ã®ã¿ï¼‰
export function getUserId(): string {
  let userId = localStorage.getItem('user-id');
  if (!userId) {
    userId = crypto.randomUUID();
    localStorage.setItem('user-id', userId);
    localStorage.setItem('user-created-at', new Date().toISOString());
  }
  return userId;
}

// å­¦ç¿’çµ±è¨ˆã‚’é€ä¿¡
export async function trackLearningStats(progress: UserProgress) {
  const userId = getUserId();
  
  const stats = {
    userId,
    timestamp: new Date().toISOString(),
    learnedWords: Object.keys(progress.wordProgress).length,
    totalQuestions: progress.statistics.totalQuestions,
    totalCorrect: progress.statistics.totalCorrect,
    accuracy: (progress.statistics.totalCorrect / progress.statistics.totalQuestions * 100).toFixed(1),
    studyDays: progress.statistics.studyDates.length,
    lastStudyDate: progress.statistics.lastStudyDate,
    // ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±
    userAgent: navigator.userAgent,
    screenWidth: screen.width,
    screenHeight: screen.height
  };
  
  try {
    await fetch('/.netlify/functions/track-stats', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(stats),
      keepalive: true
    });
  } catch (error) {
    console.warn('Stats tracking failed:', error);
  }
}

// é€ä¿¡ã‚¿ã‚¤ãƒŸãƒ³ã‚°
export function setupAnalytics(progress: UserProgress) {
  // ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚
  window.addEventListener('beforeunload', () => {
    trackLearningStats(progress);
  });
  
  // 5åˆ†ã”ã¨
  setInterval(() => {
    trackLearningStats(progress);
  }, 5 * 60 * 1000);
}
```

#### ã‚µãƒ¼ãƒãƒ¼å®Ÿè£…ï¼ˆNetlify Functionsï¼‰

`netlify/functions/track-stats.js`:
```javascript
const { createClient } = require('@supabase/supabase-js');

const supabase = createClient(
  process.env.SUPABASE_URL,
  process.env.SUPABASE_KEY
);

exports.handler = async (event) => {
  // CORS
  const headers = {
    'Access-Control-Allow-Origin': '*',
    'Access-Control-Allow-Headers': 'Content-Type',
  };
  
  if (event.httpMethod === 'OPTIONS') {
    return { statusCode: 204, headers };
  }
  
  try {
    const stats = JSON.parse(event.body);
    
    // ãƒ‡ãƒ¼ã‚¿ä¿å­˜
    const { error } = await supabase
      .from('user_stats')
      .insert({
        user_id: stats.userId,
        timestamp: stats.timestamp,
        learned_words: stats.learnedWords,
        total_questions: stats.totalQuestions,
        total_correct: stats.totalCorrect,
        accuracy: parseFloat(stats.accuracy),
        study_days: stats.studyDays,
        user_agent: stats.userAgent,
        screen_width: stats.screenWidth,
        screen_height: stats.screenHeight
      });
    
    if (error) throw error;
    
    return {
      statusCode: 204,
      headers
    };
  } catch (error) {
    console.error('Stats error:', error);
    return {
      statusCode: 500,
      headers,
      body: JSON.stringify({ error: 'Internal error' })
    };
  }
};
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒï¼ˆSupabaseï¼‰

```sql
-- user_stats ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
CREATE TABLE user_stats (
  id BIGSERIAL PRIMARY KEY,
  user_id UUID NOT NULL,
  timestamp TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  learned_words INTEGER,
  total_questions INTEGER,
  total_correct INTEGER,
  accuracy DECIMAL(5,2),
  study_days INTEGER,
  user_agent TEXT,
  screen_width INTEGER,
  screen_height INTEGER,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_user_stats_user_id ON user_stats(user_id);
CREATE INDEX idx_user_stats_timestamp ON user_stats(timestamp DESC);

-- è‡ªå‹•å‰Šé™¤ï¼ˆ90æ—¥å¾Œï¼‰
CREATE OR REPLACE FUNCTION delete_old_stats()
RETURNS void AS $$
BEGIN
  DELETE FROM user_stats
  WHERE timestamp < NOW() - INTERVAL '90 days';
END;
$$ LANGUAGE plpgsql;

-- cronï¼ˆæ¯æ—¥1å›å®Ÿè¡Œï¼‰
SELECT cron.schedule(
  'delete-old-stats',
  '0 2 * * *', -- æ¯æ—¥2æ™‚
  $$SELECT delete_old_stats();$$
);
```

### çµ±è¨ˆãƒ‡ãƒ¼ã‚¿å–å¾—

#### SQLã‚¯ã‚¨ãƒªä¾‹

```sql
-- 1. ç·ãƒ¦ãƒ‹ãƒ¼ã‚¯ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°
SELECT COUNT(DISTINCT user_id) as total_users
FROM user_stats;

-- 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥å­¦ç¿’å˜èªæ•°ï¼ˆä¸Šä½100ï¼‰
SELECT 
  user_id,
  MAX(learned_words) as words,
  MAX(timestamp) as last_access,
  MIN(timestamp) as first_access
FROM user_stats
GROUP BY user_id
ORDER BY words DESC
LIMIT 100;

-- 3. ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆéå»7æ—¥é–“ï¼‰
SELECT COUNT(DISTINCT user_id) as active_users
FROM user_stats
WHERE timestamp > NOW() - INTERVAL '7 days';

-- 4. æ—¥åˆ¥æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼
SELECT 
  DATE(first_access) as date,
  COUNT(*) as new_users
FROM (
  SELECT user_id, MIN(timestamp) as first_access
  FROM user_stats
  GROUP BY user_id
) sub
GROUP BY DATE(first_access)
ORDER BY date DESC;

-- 5. å­¦ç¿’å˜èªæ•°ã®åˆ†å¸ƒ
SELECT 
  CASE 
    WHEN max_words < 10 THEN '1-10èª'
    WHEN max_words < 50 THEN '11-50èª'
    WHEN max_words < 100 THEN '51-100èª'
    WHEN max_words < 500 THEN '101-500èª'
    ELSE '500èªä»¥ä¸Š'
  END as range,
  COUNT(*) as users
FROM (
  SELECT user_id, MAX(learned_words) as max_words
  FROM user_stats
  GROUP BY user_id
) sub
GROUP BY range
ORDER BY range;
```

#### CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

```bash
# Supabase CLIã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
supabase db dump --data-only -t user_stats > stats.sql

# PostgreSQLã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§
psql $DATABASE_URL -c "COPY (
  SELECT user_id, MAX(learned_words) as words, MAX(timestamp) as last_access
  FROM user_stats GROUP BY user_id
) TO STDOUT WITH CSV HEADER" > user-stats.csv
```

---

## ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼

`public/privacy.html` ã‚’ä½œæˆ:

```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
    h1 { border-bottom: 2px solid #333; padding-bottom: 10px; }
    h2 { margin-top: 30px; color: #555; }
  </style>
</head>
<body>
  <h1>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</h1>
  <p>æœ€çµ‚æ›´æ–°æ—¥: 2025å¹´11æœˆ21æ—¥</p>
  
  <h2>1. åé›†ã™ã‚‹æƒ…å ±</h2>
  <p>å½“ã‚µã‚¤ãƒˆã§ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹æ”¹å–„ã®ãŸã‚ä»¥ä¸‹ã®æƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚</p>
  <ul>
    <li><strong>å­¦ç¿’ãƒ‡ãƒ¼ã‚¿</strong>: å­¦ç¿’ã—ãŸå˜èªæ•°ã€æ­£ç­”ç‡ã€å­¦ç¿’æ—¥æ•°</li>
    <li><strong>åˆ©ç”¨æƒ…å ±</strong>: ã‚¢ã‚¯ã‚»ã‚¹æ—¥æ™‚ã€é–²è¦§ãƒšãƒ¼ã‚¸ã€ãƒªãƒ•ã‚¡ãƒ©</li>
    <li><strong>ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±</strong>: ãƒ–ãƒ©ã‚¦ã‚¶ç¨®é¡ã€OSã€ç”»é¢ã‚µã‚¤ã‚º</li>
    <li><strong>åŒ¿åè­˜åˆ¥å­</strong>: ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆã•ã‚ŒãŸUUIDï¼ˆå€‹äººã‚’ç‰¹å®šã—ãªã„ï¼‰</li>
  </ul>
  
  <h2>2. æƒ…å ±ã®åˆ©ç”¨ç›®çš„</h2>
  <ul>
    <li>ã‚µãƒ¼ãƒ“ã‚¹ã®æ”¹å–„ã¨æ©Ÿèƒ½é–‹ç™º</li>
    <li>åˆ©ç”¨çŠ¶æ³ã®çµ±è¨ˆåˆ†æ</li>
    <li>æŠ€è¡“çš„ãªå•é¡Œã®è¨ºæ–­ã¨ã‚µãƒãƒ¼ãƒˆ</li>
  </ul>
  
  <h2>3. æƒ…å ±ã®ä¿å­˜æœŸé–“</h2>
  <p>åé›†ã—ãŸæƒ…å ±ã¯<strong>90æ—¥é–“</strong>ä¿å­˜ã—ã€ãã‚Œä»¥é™ã¯è‡ªå‹•å‰Šé™¤ã•ã‚Œã¾ã™ã€‚</p>
  
  <h2>4. ç¬¬ä¸‰è€…æä¾›</h2>
  <p>åé›†ã—ãŸæƒ…å ±ã¯ã€ä»¥ä¸‹ã®å ´åˆã‚’é™¤ãç¬¬ä¸‰è€…ã«æä¾›ã—ã¾ã›ã‚“ã€‚</p>
  <ul>
    <li>æ³•ä»¤ã«åŸºã¥ãé–‹ç¤ºè«‹æ±‚ãŒã‚ã£ãŸå ´åˆ</li>
    <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŒæ„ãŒã‚ã‚‹å ´åˆ</li>
  </ul>
  
  <h2>5. Cookieï¼ˆã‚¯ãƒƒã‚­ãƒ¼ï¼‰ã®ä½¿ç”¨</h2>
  <p>å½“ã‚µã‚¤ãƒˆã§ã¯ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«LocalStorageï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã®ä¿å­˜æ©Ÿèƒ½ï¼‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</p>
  <p>å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆGoogle Analyticsç­‰ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€CookieãŒè¨­å®šã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p>
  
  <h2>6. ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤</h2>
  <p>ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ãŸã„å ´åˆ:</p>
  <ul>
    <li>ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‹ã‚‰ã€Œã‚µã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æ¶ˆå»ã€ã‚’å®Ÿè¡Œ</li>
    <li>ã¾ãŸã¯ support@example.com ã¸ãƒ¡ãƒ¼ãƒ«ã§å‰Šé™¤ä¾é ¼</li>
  </ul>
  
  <h2>7. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</h2>
  <p>HTTPSé€šä¿¡ã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿ã®ç›—è´ã‚„æ”¹ã–ã‚“ã‚’é˜²æ­¢ã—ã¦ã„ã¾ã™ã€‚</p>
  
  <h2>8. ãŠå•ã„åˆã‚ã›</h2>
  <p>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã«é–¢ã™ã‚‹ã”è³ªå•ã¯ã€ä»¥ä¸‹ã¾ã§ã”é€£çµ¡ãã ã•ã„ã€‚</p>
  <p>ãƒ¡ãƒ¼ãƒ«: <a href="mailto:support@example.com">support@example.com</a></p>
  
  <h2>9. ãƒãƒªã‚·ãƒ¼ã®å¤‰æ›´</h2>
  <p>æœ¬ãƒãƒªã‚·ãƒ¼ã¯äºˆå‘Šãªãå¤‰æ›´ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚å¤‰æ›´æ™‚ã¯æœ¬ãƒšãƒ¼ã‚¸ã§é€šçŸ¥ã—ã¾ã™ã€‚</p>
</body>
</html>
```

### CookieåŒæ„ãƒãƒŠãƒ¼

`src/components/CookieBanner.tsx`:
```typescript
import { useState, useEffect } from 'react';

export function CookieBanner() {
  const [showBanner, setShowBanner] = useState(false);
  
  useEffect(() => {
    const consent = localStorage.getItem('cookie-consent');
    if (!consent) {
      setShowBanner(true);
    } else if (consent === 'accepted') {
      // ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°é–‹å§‹
      initializeTracking();
    }
  }, []);
  
  const accept = () => {
    localStorage.setItem('cookie-consent', 'accepted');
    setShowBanner(false);
    initializeTracking();
  };
  
  const reject = () => {
    localStorage.setItem('cookie-consent', 'rejected');
    setShowBanner(false);
  };
  
  if (!showBanner) return null;
  
  return (
    <div style={{
      position: 'fixed',
      bottom: 0,
      left: 0,
      right: 0,
      background: '#333',
      color: 'white',
      padding: '20px',
      display: 'flex',
      justifyContent: 'space-between',
      alignItems: 'center',
      zIndex: 10000
    }}>
      <p style={{ margin: 0 }}>
        å½“ã‚µã‚¤ãƒˆã§ã¯å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã¨çµ±è¨ˆåˆ†æã®ãŸã‚LocalStorageã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
        <a href="/privacy.html" style={{ color: '#4a9eff', marginLeft: '10px' }}>
          è©³ç´°
        </a>
      </p>
      <div>
        <button onClick={accept} style={{
          background: '#4CAF50',
          color: 'white',
          border: 'none',
          padding: '10px 20px',
          marginLeft: '10px',
          cursor: 'pointer',
          borderRadius: '4px'
        }}>
          åŒæ„ã™ã‚‹
        </button>
        <button onClick={reject} style={{
          background: '#666',
          color: 'white',
          border: 'none',
          padding: '10px 20px',
          marginLeft: '10px',
          cursor: 'pointer',
          borderRadius: '4px'
        }}>
          æ‹’å¦
        </button>
      </div>
    </div>
  );
}

function initializeTracking() {
  // ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èª­ã¿è¾¼ã¿
  const script = document.createElement('script');
  script.src = '/analytics.js';
  document.head.appendChild(script);
}
```

`App.tsx` ã«è¿½åŠ :
```typescript
import { CookieBanner } from './components/CookieBanner';

function App() {
  return (
    <>
      {/* æ—¢å­˜ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */}
      <CookieBanner />
    </>
  );
}
```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼

#### Netlifyè¨­å®š

`netlify.toml`:
```toml
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    X-XSS-Protection = "1; mode=block"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "geolocation=(), microphone=(), camera=()"
    Content-Security-Policy = """
      default-src 'self';
      script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
      style-src 'self' 'unsafe-inline';
      img-src 'self' data: https:;
      font-src 'self' data:;
      connect-src 'self' https://*.supabase.co;
    """
```

#### GitHub Pagesï¼ˆ_headers ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

`public/_headers`:
```
/*
  X-Frame-Options: DENY
  X-Content-Type-Options: nosniff
  X-XSS-Protection: 1; mode=block
  Referrer-Policy: strict-origin-when-cross-origin
```

### ä¾å­˜é–¢ä¿‚ã‚¹ã‚­ãƒ£ãƒ³

#### GitHub Dependabotæœ‰åŠ¹åŒ–

`.github/dependabot.yml`:
```yaml
version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 10
    labels:
      - "dependencies"
```

Settings â†’ Security â†’ Dependabot alerts â†’ Enable

#### npm auditè‡ªå‹•åŒ–

`.github/workflows/security.yml`:
```yaml
name: Security Scan
on:
  schedule:
    - cron: '0 0 * * *' # æ¯æ—¥0æ™‚
  push:
    branches: [main]

jobs:
  audit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm audit --audit-level=high
      - run: npm outdated || true
```

---

## ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

### ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒãƒªã‚·ãƒ¼

| ãƒ‡ãƒ¼ã‚¿ç¨®é¡ | ä¿å­˜å ´æ‰€ | ä¿æŒæœŸé–“ | å‰Šé™¤æ–¹æ³• |
|-----------|---------|---------|---------|
| å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ | LocalStorage/IndexedDB | ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ã¾ã§ | ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¯ãƒªã‚¢ |
| ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚° | Supabase/S3 | 90æ—¥ | è‡ªå‹•å‰Šé™¤ï¼ˆcronï¼‰ |
| ã‚¨ãƒ©ãƒ¼ãƒ­ã‚° | Sentry | 30æ—¥ | Sentryè‡ªå‹•å‰Šé™¤ |
| ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | S3/Supabase | 30æ—¥ | è‡ªå‹•å‰Šé™¤ |

### è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

#### Supabaseè‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

Supabase Dashboard â†’ Settings â†’ Backup:
- **é »åº¦**: æ¯æ—¥
- **ä¿æŒ**: 30æ—¥é–“
- **å¾©å…ƒ**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯

#### æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

`scripts/backup-db.sh`:
```bash
#!/bin/bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

DATE=$(date +%Y%m%d)
BACKUP_DIR="./backups"
mkdir -p $BACKUP_DIR

# Supabase PostgreSQLãƒ€ãƒ³ãƒ—
pg_dump $DATABASE_URL > "$BACKUP_DIR/db-$DATE.sql"

# åœ§ç¸®
gzip "$BACKUP_DIR/db-$DATE.sql"

# S3ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
aws s3 cp "$BACKUP_DIR/db-$DATE.sql.gz" s3://my-backups/

# 30æ—¥ä»¥ä¸Šå¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å‰Šé™¤
find $BACKUP_DIR -name "*.sql.gz" -mtime +30 -delete

echo "âœ… Backup completed: db-$DATE.sql.gz"
```

å®Ÿè¡Œ:
```bash
chmod +x scripts/backup-db.sh
./scripts/backup-db.sh

# cronè¨­å®šï¼ˆæ¯æ—¥2æ™‚ï¼‰
crontab -e
# 0 2 * * * /path/to/backup-db.sh
```

### ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

#### å¤ã„ãƒ­ã‚°ã®è‡ªå‹•å‰Šé™¤

`scripts/cleanup-logs.js`:
```javascript
const { createClient } = require('@supabase/supabase-js');

const supabase = createClient(
  process.env.SUPABASE_URL,
  process.env.SUPABASE_KEY
);

async function cleanupOldData() {
  const cutoffDate = new Date();
  cutoffDate.setDate(cutoffDate.getDate() - 90); // 90æ—¥å‰
  
  const { data, error } = await supabase
    .from('user_stats')
    .delete()
    .lt('timestamp', cutoffDate.toISOString());
  
  if (error) {
    console.error('Cleanup failed:', error);
  } else {
    console.log(`âœ… Deleted ${data?.length || 0} old records`);
  }
}

cleanupOldData();
```

GitHub Actionsã§å®šæœŸå®Ÿè¡Œ:
```yaml
# .github/workflows/cleanup.yml
name: Cleanup Old Data
on:
  schedule:
    - cron: '0 3 * * 0' # æ¯é€±æ—¥æ›œ3æ™‚

jobs:
  cleanup:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install @supabase/supabase-js
      - run: node scripts/cleanup-logs.js
        env:
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_KEY: ${{ secrets.SUPABASE_KEY }}
```

---

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆä½“åˆ¶

### å•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ 

#### Netlify Formsï¼ˆæœ€ã‚‚ç°¡å˜ï¼‰

`public/contact.html`:
```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãŠå•ã„åˆã‚ã›</title>
</head>
<body>
  <h1>ãŠå•ã„åˆã‚ã›</h1>
  
  <form name="contact" method="POST" data-netlify="true">
    <input type="hidden" name="form-name" value="contact">
    
    <label>
      ãŠåå‰ï¼ˆä»»æ„ï¼‰<br>
      <input type="text" name="name">
    </label><br><br>
    
    <label>
      ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆä»»æ„ï¼‰<br>
      <input type="email" name="email">
    </label><br><br>
    
    <label>
      ãŠå•ã„åˆã‚ã›å†…å®¹<br>
      <textarea name="message" rows="10" required></textarea>
    </label><br><br>
    
    <label>
      <input type="checkbox" name="consent" required>
      ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã«åŒæ„ã—ã¾ã™
    </label><br><br>
    
    <button type="submit">é€ä¿¡</button>
  </form>
</body>
</html>
```

Netlify Dashboard â†’ Forms ã§å—ä¿¡ç¢ºèªã€‚ãƒ¡ãƒ¼ãƒ«é€šçŸ¥è¨­å®šå¯èƒ½ã€‚

#### Google Formsï¼ˆä»£æ›¿ï¼‰

```html
<!-- Google Formsã®åŸ‹ã‚è¾¼ã¿ -->
<iframe src="https://docs.google.com/forms/d/e/xxxxx/viewform?embedded=true" 
  width="640" height="800" frameborder="0">
</iframe>
```

### ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†

#### ã‚¢ãƒ—ãƒªå†…ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒœã‚¿ãƒ³

`src/components/FeedbackButton.tsx`:
```typescript
export function FeedbackButton() {
  const openFeedback = () => {
    window.open('/contact.html', '_blank');
  };
  
  return (
    <button
      onClick={openFeedback}
      style={{
        position: 'fixed',
        bottom: '20px',
        right: '20px',
        background: '#4CAF50',
        color: 'white',
        border: 'none',
        borderRadius: '50px',
        padding: '15px 25px',
        cursor: 'pointer',
        boxShadow: '0 4px 6px rgba(0,0,0,0.2)',
        fontSize: '16px',
        zIndex: 1000
      }}
    >
      ğŸ’¬ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
    </button>
  );
}
```

#### ç°¡æ˜“ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ

ã‚¯ã‚¤ã‚ºçµ‚äº†å¾Œã«ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º:
```typescript
function showSurvey() {
  const satisfaction = prompt('æº€è¶³åº¦ã‚’æ•™ãˆã¦ãã ã•ã„ï¼ˆ1-5ï¼‰:');
  if (satisfaction) {
    fetch('/.netlify/functions/survey', {
      method: 'POST',
      body: JSON.stringify({ satisfaction, timestamp: new Date() })
    });
  }
}
```

---

## é‹ç”¨ãƒ•ãƒ­ãƒ¼

### æ—¥å¸¸é‹ç”¨ï¼ˆé€±æ¬¡ï¼‰

**æœˆæ›œ 10:00**:
```bash
# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª
# Sentry Dashboard â†’ Issuesï¼ˆéå»7æ—¥é–“ï¼‰

# ã‚¢ã‚¯ã‚»ã‚¹æ•°ç¢ºèª
# Uptime Robot â†’ Logs

# ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆç¢ºèª
psql $DATABASE_URL -c "
  SELECT COUNT(DISTINCT user_id) as users
  FROM user_stats
  WHERE timestamp > NOW() - INTERVAL '7 days';
"
```

### å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ï¼ˆæœˆæ¬¡ï¼‰

**æ¯æœˆ1æ—¥**:
- [ ] ä¾å­˜é–¢ä¿‚ã®æ›´æ–°ï¼ˆ`npm outdated` â†’ æ›´æ–°æ¤œè¨ï¼‰
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒé©ç”¨ï¼ˆ`npm audit fix`ï¼‰
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ç¢ºèªï¼ˆS3/Supabaseï¼‰
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ç¢ºèª
- [ ] çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆä½œæˆï¼ˆCSVå‡ºåŠ›ï¼‰

### ç·Šæ€¥å¯¾å¿œãƒ•ãƒ­ãƒ¼

#### éšœå®³ç™ºç”Ÿæ™‚

1. **æ¤œçŸ¥**: Uptime Robot/Sentryã‹ã‚‰ã‚¢ãƒ©ãƒ¼ãƒˆ
2. **ç¢ºèª**: ãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿéš›ã«ã‚¢ã‚¯ã‚»ã‚¹
3. **åŸå› ç‰¹å®š**: 
   - Sentry â†’ ã‚¨ãƒ©ãƒ¼ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹
   - Netlify Logs â†’ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°
   - GitHub Actions â†’ ãƒ“ãƒ«ãƒ‰ãƒ­ã‚°
4. **å¯¾å¿œ**:
   - è»½å¾®: ä¿®æ­£ â†’ ã‚³ãƒŸãƒƒãƒˆ â†’ è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
   - é‡å¤§: ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ â†’ ä¿®æ­£ â†’ å†ãƒ‡ãƒ—ãƒ­ã‚¤
5. **å ±å‘Š**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é€šçŸ¥ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

#### ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †

```bash
# ç›´å‰ã®ã‚³ãƒŸãƒƒãƒˆã«æˆ»ã™
git log --oneline  # ã‚³ãƒŸãƒƒãƒˆå±¥æ­´ç¢ºèª
git revert <commit-hash>
git push origin main

# ã¾ãŸã¯å¼·åˆ¶çš„ã«æˆ»ã™
git reset --hard <good-commit-hash>
git push -f origin main

# ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ã‚’ç¢ºèª
# https://nanashi8.github.io/ ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

#### 1. ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œãªã„

**åŸå› **:
- LocalStorageãŒç„¡åŠ¹
- ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰
- å®¹é‡è¶…é

**è§£æ±º**:
```typescript
// storageInfo.ts ã§ãƒã‚§ãƒƒã‚¯
const info = getStorageInfo();
if (info.localStorage.percentage > 80) {
  // å¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤
  cleanupOldData();
}
```

#### 2. ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¤±æ•—ã™ã‚‹

**ç¢ºèªé …ç›®**:
```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ç¢ºèª
npm run build

# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª
# GitHub Actions â†’ è©²å½“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ â†’ ãƒ­ã‚°

# ã‚ˆãã‚ã‚‹åŸå› 
# - å‹ã‚¨ãƒ©ãƒ¼ï¼ˆnpm run type-checkï¼‰
# - ä¾å­˜é–¢ä¿‚ä¸è¶³ï¼ˆnpm installï¼‰
# - ç’°å¢ƒå¤‰æ•°æœªè¨­å®šï¼ˆSecretsç¢ºèªï¼‰
```

#### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé…ã„

**è¨ºæ–­**:
```bash
# Lighthouseå®Ÿè¡Œ
npx lighthouse https://nanashi8.github.io/ --view

# ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºç¢ºèª
npm run build -- --analyze
```

**æ”¹å–„**:
- ç”»åƒã®æœ€é©åŒ–ï¼ˆWebPå¤‰æ›ï¼‰
- ã‚³ãƒ¼ãƒ‰åˆ†å‰²ï¼ˆReact.lazyï¼‰
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®šï¼ˆservice workerï¼‰

#### 4. ã‚¨ãƒ©ãƒ¼ãŒé »ç™º

**Sentryç¢ºèª**:
- Dashboard â†’ Issues â†’ ã‚½ãƒ¼ãƒˆï¼ˆé »åº¦é †ï¼‰
- ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‹ã‚‰åŸå› ç‰¹å®š
- ä¿®æ­£ â†’ ãƒ‡ãƒ—ãƒ­ã‚¤

---

## å‚è€ƒãƒªãƒ³ã‚¯

- [GitHub Pages ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.github.com/ja/pages)
- [Netlify Functions ã‚¬ã‚¤ãƒ‰](https://docs.netlify.com/functions/overview/)
- [Supabase ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://supabase.com/docs)
- [Sentry React SDK](https://docs.sentry.io/platforms/javascript/guides/react/)
- [Uptime Robot](https://uptimerobot.com/)
- [Lighthouse CI](https://github.com/GoogleChrome/lighthouse-ci)

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ21æ—¥
