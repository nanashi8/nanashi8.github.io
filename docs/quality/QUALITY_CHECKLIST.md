# 品質チェックリスト統合

## 📋 概要

このドキュメントは、各作業タイプの品質チェック項目を1箇所に集約し、作業完了前の最終確認を効率化します。

---

## 🎨 1. UI開発・変更

### CSS変数使用チェック ⚠️ 最重要

- [ ] **すべての色がCSS変数を使用**（`var(--background)`、`var(--text-color)`等）
- [ ] **ハードコード色ゼロ**（`#ffffff`、`rgb()`、`white`等の直接指定なし）
- [ ] 新しい色を追加した場合、`src/index.css`と`src/App.css`の両方に定義
- [ ] CSS変数名が既存の命名規則に従っている

### ライト/ダークモード対応

- [ ] **ライトモードで動作確認**（すべての要素が適切に表示）
- [ ] **ダークモードで動作確認**（設定タブで切り替えてテスト）
- [ ] ライトモード→ダークモード切り替え時にすべての色が変更される
- [ ] ダークモード→ライトモード切り替え時にすべての色が変更される
- [ ] テキストと背景のコントラスト比が十分（WCAG AA基準）

### レスポンシブデザイン

- [ ] **デスクトップ（1024px以上）**で正しく表示
- [ ] **タブレット（768-1023px）**で正しく表示
- [ ] **モバイル（767px以下）**で正しく表示
- [ ] 画面幅を変更しても要素が崩れない
- [ ] タッチ操作に適したボタンサイズ（モバイル）

### アクセシビリティ

- [ ] キーボード操作可能（Tab、Enterキーで操作可能）
- [ ] フォーカス状態が視覚的に明確
- [ ] alt属性（画像の代替テキスト）設定
- [ ] セマンティックHTML使用（適切なタグ選択）
- [ ] スクリーンリーダー対応（aria属性等）

### パフォーマンス

- [ ] 不必要な再レンダリングなし
- [ ] 画像サイズ最適化
- [ ] CSSアニメーションのパフォーマンス確認

### コード品質

- [ ] TypeScript型エラーなし
- [ ] ESLint警告なし
- [ ] 未使用のimportなし
- [ ] コンソールエラーなし
- [ ] コンソール警告なし

### ビルド・デプロイ

- [ ] `npm run build` エラーなし
- [ ] `npm run preview` で動作確認
- [ ] ブラウザコンソールにエラーなし

---

## 📝 2. 文法問題（NEW HORIZON準拠）

### 2.1 文並び替え問題

#### 基本要件

- [ ] **語数: 3-11語**（ガイドライン範囲内）
- [ ] **単一の文法項目に焦点**（複数文法を混ぜない）
- [ ] NEW HORIZON教科書に準拠
- [ ] 学年・単元に適した難易度

#### 問題内容

- [ ] 日本語訳が正確
- [ ] 英語の答えが文法的に正しい
- [ ] wordsとcorrectOrderが一致
- [ ] grammarPointが適切に設定
- [ ] difficulty（easy/medium/hard）が適切

#### データ構造

- [ ] JSON構文エラーなし
- [ ] 必須フィールドすべて存在
  - `question`（日本語訳）
  - `words`（単語配列）
  - `correctOrder`（正解順序）
  - `answer`（正解文）
  - `grammarPoint`（文法ポイント）
  - `difficulty`（難易度）
- [ ] unitsの該当unitに正しく配置
- [ ] totalQuestions更新済み

#### 品質基準

- [ ] 重複問題なし
- [ ] 誤字・脱字なし
- [ ] 中学生に適切な語彙・内容
- [ ] 文化的配慮（差別的・不適切な内容なし）

### 2.2 動詞変化問題

- [ ] 文法項目が明確（現在形、過去形、現在進行形等）
- [ ] 動詞の原形と変化形が正確
- [ ] 日本語訳が適切
- [ ] JSON構文エラーなし
- [ ] totalQuestions更新済み

### 2.3 穴埋め問題

- [ ] 空欄の位置が適切
- [ ] 正解が文法的に正しい
- [ ] 日本語訳が適切
- [ ] JSON構文エラーなし
- [ ] totalQuestions更新済み

### 動作確認

- [ ] ローカル環境（`npm run dev`）で問題が表示される
- [ ] 正解を選ぶと正しく判定される
- [ ] 不正解を選ぶと正しく判定される
- [ ] 文法フィルターで正しく絞り込める
- [ ] 学年フィルターで正しく絞り込める

---

## 📖 3. 長文パッセージ作成

### 基本要件

#### 語数

- [ ] Beginner: 800-1,500語
- [ ] Intermediate: 1,500-2,500語
- [ ] Advanced: 2,500-4,000語

#### フォーマット

- [ ] **段落インデント: 各段落の最初の行に4スペース**（最重要）
- [ ] 継続行にインデントなし
- [ ] セクションヘッダーはインデントなし
- [ ] ファイル名規則: `{level}-{topic-slug}.txt`

### 内容品質

- [ ] トピックが教育的価値を持つ
- [ ] 年齢適合性（中学生向け）
- [ ] 文化的配慮（差別的・不適切な内容なし）
- [ ] 語彙レベルがレベルに適合
- [ ] 文法難易度がレベルに適合

### 文章品質

- [ ] 自然な文章（テンプレート感なし）
- [ ] 繰り返し表現の排除
- [ ] 単調な構文パターンの排除
- [ ] 論理的な展開
- [ ] 段落構成が適切

### ファイル配置

- [ ] `public/data/passages/{level}-{topic-slug}.txt` に配置
- [ ] ファイル名が規則に従っている
- [ ] 文字エンコーディング: UTF-8

### 辞書・フレーズJSON

- [ ] `dictionaries/{level}-{topic}.json` 作成済み
- [ ] 重要単語・フレーズが網羅されている
- [ ] 日本語訳が正確
- [ ] JSON構文エラーなし

### 動作確認

- [ ] 長文読解モードで正しく表示される
- [ ] セグメント分割が適切
- [ ] 音声読み上げが正常動作
- [ ] 辞書機能が正常動作
- [ ] 未学習単語の抽出が正常動作

---

## 🐛 4. バグ修正

### 問題の特定

- [ ] バグの再現手順が明確
- [ ] 期待される動作と実際の動作の差が明確
- [ ] 影響範囲が特定されている

### 修正実装

- [ ] 最小限の変更で修正
- [ ] 既存機能への影響なし
- [ ] 該当ガイドライン遵守（UI変更の場合）
- [ ] コメント・ドキュメント更新

### テスト

- [ ] バグが再現しない
- [ ] 関連機能が正常動作
- [ ] リグレッションテスト完了
- [ ] エッジケース確認

### コード品質

- [ ] TypeScript型エラーなし
- [ ] ESLint警告なし
- [ ] コンソールエラー・警告なし
- [ ] `npm run build` エラーなし

---

## ✨ 5. 新機能追加

### 要件定義

- [ ] 機能の目的が明確
- [ ] ターゲットユーザーが定義されている
- [ ] 既存機能との統合ポイントが明確
- [ ] データ構造が設計されている

### 設計

- [ ] コンポーネント構成が適切
- [ ] 状態管理方法が適切
- [ ] データフローが設計されている
- [ ] UI/UXデザインが検討されている

### 実装

- [ ] TypeScript/React実装
- [ ] UI実装ガイドライン遵守
  - [ ] CSS変数使用
  - [ ] ライト/ダークモード対応
  - [ ] レスポンシブ対応
- [ ] データ処理ロジック実装
- [ ] ストレージ連携実装

### テスト

- [ ] 単体テスト実施
- [ ] 統合テスト実施
- [ ] ライトモード動作確認
- [ ] ダークモード動作確認
- [ ] レスポンシブ表示確認（3サイズ）
- [ ] エッジケーステスト

### ドキュメント

- [ ] 機能仕様書作成または更新
- [ ] データ構造ドキュメント更新
- [ ] README更新
- [ ] チェンジログ記録

### デプロイ

- [ ] `npm run build` エラーなし
- [ ] プレビュー確認
- [ ] デプロイ成功確認

---

## 📊 6. データ追加（単語・フレーズ）

### データ品質

- [ ] CSV形式が正しい（7列: 語句,読み,意味,語源等解説,関連語,関連分野,難易度）
- [ ] 重複データなし
- [ ] 日本語訳が正確
- [ ] **カテゴリーが10個の正式カテゴリのいずれか**
  - 言語基本 / 学校・学習 / 日常生活 / 人・社会 / 自然・環境
  - 食・健康 / 運動・娯楽 / 場所・移動 / 時間・数量 / 科学・技術
- [ ] **カテゴリー名が厳密一致**（例: 「学校学習」❌ → 「学校・学習」✅）
- [ ] 難易度設定が適切（初級/中級/上級）

### データ構造

- [ ] 必須フィールドすべて存在
- [ ] データ型が正しい
- [ ] 特殊文字のエスケープ処理（カンマは引用符で囲む）
- [ ] UTF-8エンコーディング

### ファイル配置

- [ ] `public/data/vocabulary/junior-high-entrance-words.csv`（単語）
- [ ] `public/data/vocabulary/junior-high-entrance-phrases.csv`（フレーズ）
- [ ] ファイルパスが正しい

### バリデーション

- [ ] CSVパーサーで読み込みエラーなし
- [ ] **カテゴリー値が10個の正式カテゴリのいずれか**
- [ ] 難易度が定義済みの値のみ（初級/中級/上級）
- [ ] 中学生に適切な内容

### カテゴリ正規化（既存データ修正時）

- [ ] `python3 scripts/normalize_categories_to_10.py` 実行
- [ ] バックアップ作成確認
- [ ] 変換レポート確認
- [ ] カテゴリが10個になったことを確認

### 動作確認

- [ ] 和訳クイズで新データが表示される
- [ ] スペルクイズで新データが表示される
- [ ] **学習設定で10カテゴリ+「全ての分野」が表示される**
- [ ] フィルター機能で正しく絞り込める
- [ ] 統計表示に反映される

---

## 🚀 7. デプロイ

### ビルド前チェック

- [ ] すべての変更がコミット済み
- [ ] TypeScript型エラーなし
- [ ] ESLint警告なし
- [ ] コンソールエラー・警告なし
- [ ] 該当する品質チェックリスト完了

### ビルド

- [ ] `npm run build` 成功
- [ ] ビルド警告なし
- [ ] `dist/` ディレクトリ生成確認

### プレビュー

- [ ] `npm run preview` で動作確認
- [ ] ライトモード確認
- [ ] ダークモード確認
- [ ] 主要機能の動作確認
  - [ ] 和訳クイズ
  - [ ] スペルクイズ
  - [ ] 長文読解
  - [ ] 統計表示
  - [ ] 設定
- [ ] レスポンシブ表示確認
- [ ] ブラウザコンソールエラーなし

### デプロイ

- [ ] `npm run deploy` または `gh-pages -d dist` 実行
- [ ] デプロイ成功メッセージ確認
- [ ] GitHub Pagesでの表示確認
- [ ] 本番環境で主要機能動作確認

### デプロイ後確認

- [ ] https://nanashi8.github.io/ でアクセス可能
- [ ] すべての画像・データファイル読み込み成功
- [ ] ライト/ダークモード切り替え動作
- [ ] すべての機能が正常動作
- [ ] モバイル表示確認

---

## 📝 8. ドキュメント更新

### 内容品質

- [ ] 情報が正確
- [ ] 最新の実装に合っている
- [ ] 日本語として自然
- [ ] 誤字・脱字なし

### 構造

- [ ] Markdown構文が正しい
- [ ] 見出し階層が適切
- [ ] リンクが正しい（相対パス）
- [ ] コードブロックが正しくフォーマット

### 網羅性

- [ ] 必要な情報がすべて記載されている
- [ ] 例が適切に提供されている
- [ ] エッジケースが説明されている

### 整合性

- [ ] 他のドキュメントと矛盾なし
- [ ] 命名規則の一貫性
- [ ] バージョン情報更新

### 目次更新

- [ ] `docs/README.md` に新ドキュメントのリンク追加
- [ ] カテゴリー分類が適切
- [ ] 番号付けが正しい（該当する場合）

---

## 🔄 チェックリスト使用ガイド

### 使用タイミング

1. **作業開始前**: 該当するセクションを確認し、要件を把握
1. **実装中**: 随時チェックし、漏れを防ぐ
1. **作業完了前**: すべての項目をチェックし、品質を保証
1. **レビュー時**: レビュアーがチェック項目を確認

### チェック方法

- [ ] チェックボックスにマーク（Markdownエディタで）
- メモとして使用（コピー＆ペースト）
- PRのコメントとして活用

### カスタマイズ

- プロジェクト特有の項目を追加
- 不要な項目を削除
- 定期的に見直し・更新

---

## 📞 参照ドキュメント

各チェックリストの詳細は以下のドキュメントを参照：

- **UI開発**: [UI_DEVELOPMENT_GUIDELINES.md](../development/UI_DEVELOPMENT_GUIDELINES.md)
- **文法問題**: [NEW_HORIZON_GRAMMAR_GUIDELINES.md](../guidelines/grammar/NEW_HORIZON_GRAMMAR_GUIDELINES.md)
- **長文作成**: [PASSAGE_CREATION_GUIDELINES.md](../guidelines/passage/PASSAGE_CREATION_GUIDELINES.md)
- **デプロイ**: [23-deployment.md](../specifications/23-deployment.md)
- **ワークフロー**: [AI_WORKFLOW_INSTRUCTIONS.md](../references/AI_WORKFLOW_INSTRUCTIONS.md)

---

**最終更新**: 2025年11月25日  
**バージョン**: 1.0.0
