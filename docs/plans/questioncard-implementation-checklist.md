# QuestionCard カスタムセット機能実装 - 進捗チェックリスト

## 📅 実装開始日: __________

---

## Phase 1: 準備と検証 ⏱️ 推定10分

### Task 1.1: 参照実装の詳細確認 (5分)
- [ ] QuizView.tsx (390-392行目) を確認
- [ ] MemorizationView.tsx (530-542行目) を確認
- [ ] ComprehensiveReadingView.tsx (1476-1488行目) を確認
- [ ] 3つの実装の共通パターンを把握
- [ ] AddToCustomButtonの配置位置を特定

**メモ:**
```
配置位置: ___________________________
共通のprops: _________________________
```

### Task 1.2: QuestionCardの現状コード読解 (5分)
- [ ] QuestionCard.tsxの全体構造を確認
- [ ] 既存のJSX構造を把握
- [ ] 適切な挿入箇所を特定 (2-3箇所の候補)
- [ ] 既存クラス名・スタイルを確認

**候補挿入箇所:**
1. □ choices の直後
2. □ question-content-inline の直後
3. □ その他: ___________________

**選択した挿入箇所:** ___________________

---

## Phase 2: 最小限の実装 ⏱️ 推定15分

### Task 2.1: CustomWordオブジェクト生成ロジックの追加 (8分)
- [ ] src/types/customQuestions.ts を開いてCustomWord型を確認
- [ ] 必須フィールドをリストアップ
- [ ] QuestionCard.tsx内にcustomWord変数を追加
- [ ] useMemoで最適化
- [ ] TypeScriptエラーがないことを確認

**CustomWordの必須フィールド:**
```
- word: ✓
- meaning: ✓
- reading: ✓
- その他: ___________________
```

**実装コード確認:**
```typescript
const customWord: CustomWord = useMemo(() => ({
  word: question.word,
  meaning: question.meaning,
  reading: question.reading || '',
  // 追加フィールド...
}), [question.word, question.meaning, question.reading]);
```
- [ ] 上記コードを実装済み

### Task 2.2: 条件分岐の実装 (7分)
- [ ] propsの存在チェック条件を記述
- [ ] 短絡評価を使用
- [ ] ネストの深さを確認 (4階層以下)
- [ ] TypeScriptエラーなし
- [ ] ビルド成功

**実装確認:**
```tsx
{onAddWordToCustomSet && 
 onRemoveWordFromCustomSet && 
 onOpenCustomSetManagement && 
 customQuestionSets && (
  // ボタン配置
)}
```
- [ ] 上記条件分岐を実装済み

---

## Phase 3: AddToCustomButtonの配置 ⏱️ 推定20分

### Task 3.1: 最もシンプルな位置に配置 (12分)
- [ ] 選択した挿入箇所にコードを追加
- [ ] インデントを正しく設定
- [ ] classNameを設定 (`mt-4`, `px-4` など)
- [ ] AddToCustomButtonのpropsを正しく渡す
- [ ] ビルドエラーなし

**実装したclassName:**
```
_________________________________
```

**配置したコード:**
```tsx
<div className="mt-4 px-4">
  <AddToCustomButton
    word={customWord}
    sets={customQuestionSets}
    onAddWord={onAddWordToCustomSet}
    onRemoveWord={onRemoveWordFromCustomSet}
    onOpenManagement={onOpenCustomSetManagement}
    size="medium"
    variant="both"
  />
</div>
```
- [ ] 上記コードを実装済み

### Task 3.2: 動作確認 (8分)
- [ ] `npm run dev` でサーバー起動
- [ ] ブラウザで http://localhost:5173 を開く
- [ ] QuizViewに移動
- [ ] ボタンが表示されることを確認
- [ ] ボタンをクリックできることを確認
- [ ] メニューが開くことを確認 (複数セットの場合)
- [ ] セットへの追加が動作
- [ ] セットからの削除が動作
- [ ] セット管理画面が開く
- [ ] コンソールエラーなし

**テスト結果:**
```
✓/✗ ボタン表示: _____
✓/✗ クリック可能: _____
✓/✗ メニュー表示: _____
✓/✗ 追加機能: _____
✓/✗ 削除機能: _____
✓/✗ 管理画面: _____
```

---

## Phase 4: UI/UX調整 ⏱️ 推定15分

### Task 4.1: スタイリング調整 (10分)
- [ ] デスクトップ表示で確認
- [ ] タブレット表示で確認 (開発者ツール)
- [ ] モバイル表示で確認 (開発者ツール)
- [ ] ダークモードで確認
- [ ] 他のViewと一貫性のあるスタイルか確認
- [ ] マージン・パディングを調整
- [ ] 必要に応じて色を調整

**調整した項目:**
```
マージン: ___________________
パディング: ___________________
色: ___________________
その他: ___________________
```

**デバイス別確認:**
- [ ] デスクトップ (1920x1080): ✓/✗
- [ ] タブレット (768x1024): ✓/✗
- [ ] モバイル (375x667): ✓/✗
- [ ] ダークモード: ✓/✗

### Task 4.2: アクセシビリティ確認 (5分)
- [ ] Tabキーでフォーカス可能
- [ ] Enterキーで操作可能
- [ ] Spaceキーで操作可能
- [ ] aria-label等が適切に設定されている
- [ ] コントラスト比が十分
- [ ] アクセシビリティ警告なし

**アクセシビリティチェック:**
- [ ] キーボードナビゲーション: ✓/✗
- [ ] スクリーンリーダー対応: ✓/✗
- [ ] 色のコントラスト: ✓/✗

---

## Phase 5: テストと最終確認 ⏱️ 推定20分

### Task 5.1: 統合テスト (10分)

**基本シナリオ:**
- [ ] 問題に回答 → カスタムセットに追加 → 次の問題へ
- [ ] 前の問題に戻る → 追加した単語を削除
- [ ] 複数の問題で繰り返し

**エッジケーステスト:**
- [ ] セットが0個の場合 → 管理画面が開く
- [ ] セットが1個の場合 → 直接追加/削除
- [ ] セットが複数の場合 → メニューが開く
- [ ] 既に追加済みの単語の場合 → ボタンが緑色
- [ ] 未回答の状態での表示
- [ ] 回答後の状態での表示

**テスト結果:**
```
基本シナリオ: ✓/✗
セット0個: ✓/✗
セット1個: ✓/✗
セット複数: ✓/✗
追加済み表示: ✓/✗
未回答時: ✓/✗
回答後: ✓/✗
```

### Task 5.2: パフォーマンス確認 (5分)
- [ ] React DevToolsで不要な再レンダリングを確認
- [ ] メモリリークがないことを確認
- [ ] 動作のもたつきがないことを確認
- [ ] Chrome DevToolsのPerformanceタブで確認

**パフォーマンス測定結果:**
```
再レンダリング回数: _____ 回/操作
メモリ使用量: _____ MB
FPS: _____ (目標60fps)
```

### Task 5.3: コードレビュー (5分)
- [ ] TypeScriptエラー: 0件
- [ ] ESLint警告: 0件
- [ ] 適切なコメントを追加
- [ ] 不要なconsole.logを削除
- [ ] 未使用の変数を削除
- [ ] インポート順序を整理
- [ ] コードの可読性を確認

**品質チェック:**
```bash
# 実行コマンド
npm run lint
tsc --noEmit
```

**結果:**
- [ ] TypeScript: エラー ___ 件
- [ ] ESLint: 警告 ___ 件
- [ ] コメント: 追加済み
- [ ] 不要コード: 削除済み

---

## 最終確認

### ビルドとテスト
```bash
# ビルド確認
npm run build

# 型チェック
tsc --noEmit

# リンター
npm run lint

# テスト (もしあれば)
npm test
```

- [ ] ビルド成功
- [ ] 型チェック合格
- [ ] リンター合格
- [ ] テスト合格

### 動作確認サマリー
- [ ] デスクトップで正常動作
- [ ] モバイルで正常動作
- [ ] ダークモードで正常動作
- [ ] すべてのエッジケースで正常動作
- [ ] パフォーマンスに問題なし
- [ ] アクセシビリティに問題なし

---

## Git コミット

### コミット前チェック
- [ ] 変更内容を確認 (`git diff`)
- [ ] 不要なファイルが含まれていないか確認
- [ ] コミットメッセージを考える

### コミット実行
```bash
git add src/components/QuestionCard.tsx
git commit -m "feat: QuestionCardにカスタムセット機能を追加

- AddToCustomButtonコンポーネントを統合
- CustomWordオブジェクト生成ロジックを追加
- レスポンシブ対応、ダークモード対応
- 他のViewと一貫性のあるUI/UX

Closes #___"
```

- [ ] コミット完了

---

## 完了！ 🎉

**実装完了日時:** __________ __:__

**総所要時間:** _____ 分

**気づいた点・改善点:**
```
_________________________________
_________________________________
_________________________________
```

**次のステップ:**
- [ ] プルリクエスト作成
- [ ] コードレビュー依頼
- [ ] ドキュメント更新
- [ ] リリースノート記載

---

## 問題が発生した場合

### ロールバック手順
```bash
# 変更を取り消し
git checkout src/components/QuestionCard.tsx

# または特定のコミットに戻る
git reset --hard HEAD~1
```

### 問題のログ
**発生した問題:**
```
日時: __________
問題: _________________________________
解決方法: _________________________________
```

---

**このチェックリストをコピーして使用してください。各項目をチェックしながら進めることで、確実に実装を完了できます。**
