# SimpleWord - CSV駆動型の単語学習アプリ

**バージョン**: 3.0  
**最終更新**: 2025年10月30日  
**対応OS**: iOS 15.0以降

---

## 📖 プロジェクト概要

SimpleWordは、CSV形式の単語リストから4択クイズを生成し、効率的な単語学習を実現するiOSアプリケーションです。

### 主な特徴

- ✅ **CSVベース**: 独自のCSVファイルで学習可能
- ✅ **バッチ学習**: 効率的な短期集中学習を実現
- ✅ **詳細な成績管理**: CSV別・単語別の成績を記録
- ✅ **柔軟なフィルタ**: 分野・難易度で出題範囲をカスタマイズ
- ✅ **セッション管理**: アプリを閉じても続きから再開可能
- ✅ **Feature-First**: 保守性の高いアーキテクチャ

---

## 🚀 クイックスタート

### 必要な環境

- **macOS**: Ventura (13.0) 以降
- **Xcode**: 15.0 以降
- **iOS**: 15.0 以降（実機またはシミュレータ）

### インストール

```bash
# リポジトリのクローン
git clone <repository-url>
cd SimpleWord

# Xcodeで開く
open SimpleWord.xcodeproj

# ビルド・実行（⌘ + R）
```

### 初回起動

1. アプリを起動
2. 「出題設定」でCSVファイルを選択
3. 分野・難易度を設定（オプション）
4. 「クイズをはじめる」をタップ
5. 学習開始！

---

## 📚 主要機能

### 1. クイズ機能 🎯
4択形式で単語を学習します。

**特徴**:
- バッチ学習で集中力維持
- ラウンドロビン配置で同じ問題の連続を回避
- 前へ/次へボタンで自由に移動
- 光るアニメーションで進捗を実感
- セッション管理で中断・再開が可能

### 2. 出題設定 ⚙️
CSV別に出題条件を設定できます。

**設定項目**:
- CSV選択
- 分野フィルタ
- 難易度フィルタ
- バッチサイズ
- 繰り返し回数
- 選択肢の数
- 学習モード
- 自動進行

### 3. 成績管理 📊
学習結果を詳細に記録します。

**CSV別成績**:
- ファイルごとの学習履歴
- 正答率、出題数、正解数
- 学習履歴の時系列表示

**単語別成績**:
- 個別単語の詳細統計
- 正答率、出題回数
- 最終学習日
- ソート・フィルタ機能

### 4. CSV管理 📁
単語リストのインポート・エクスポートが可能です。

**機能**:
- Bundle内のCSV（アプリ同梱）
- Documents内のCSV（ユーザー追加）
- ファイルアプリからのインポート
- CSV内容のプレビュー

### 5. 単語一覧 📝
CSV内の全単語を一覧表示します。

**機能**:
- 全単語リスト表示
- 詳細情報の確認
- ファイル変更の自動検知

---

## 🏗️ アーキテクチャ

### 設計原則

**Feature-First / Vertical Slice Architecture**を採用し、機能ごとに垂直方向でコードを分割しています。

```
SimpleWord/
├── Features/              # 機能別モジュール
│   ├── Quiz/             # クイズ機能
│   ├── QuizSettings/     # 出題設定
│   ├── Results/          # 成績表示
│   ├── Navigator/        # 単語一覧
│   ├── CSVEditor/        # CSV編集
│   └── IDMap/            # ID管理
├── Common/               # 共通モジュール
│   ├── Models/           # データモデル
│   ├── Data/             # データアクセス層
│   └── Utility/          # ユーティリティ
├── Appearance/           # 外観設定
└── Resources/            # リソース（CSV等）
```

### 主要コンポーネント

| コンポーネント | 責務 | 場所 |
|---|---|---|
| QuizView | クイズ画面本体 | Features/Quiz/ |
| QuizSettings | 出題設定の管理 | Features/QuizSettings/ |
| WordScoreStore | 単語別成績の管理 | Features/Quiz/ViewModels/ |
| ScoreStore | CSV別成績の管理 | Features/Quiz/ViewModels/ |
| QuestionItemRepository | CSV読み込み | Common/Data/Repository/ |

---

## 📝 CSVフォーマット

### ヘッダ駆動型（推奨）

CSVの1行目のヘッダから列を自動認識します。列順は自由です。

#### 必須列
- `term` または `語句`: 語句（問題文）
- `meaning` または `意味` または `和訳`: 意味（正解）

#### オプション列
- `reading` または `読み` または `発音`: 読み仮名または発音
- `etymology` または `語源` または `語源等解説`: 語源・解説
- `relatedWords` または `関連語`: 関連語（セミコロン区切り）
- `relatedFields` または `関連分野` または `分野`: 関連分野（セミコロン区切り）
- `difficulty` または `難易度`: 難易度

### 例: 中学古典単語
```csv
語句,読み（ひらがな）,意味,語源等解説（日本語）,関連語と意味,関連分野,難易度
いと,いと,とても,古語で強調を表す副詞,いみじ:非常に,副詞,1
をかし,をかし,趣がある,美的感覚を表す形容詞,あはれ:しみじみ,形容詞,2
```

### 例: 中学英会話
```csv
語句,発音（カタカナ）,和訳,語源等解説（日本語）,関連語（英語）と意味（日本語）,関連分野（日本語）,難易度
Hello!,ハロー,こんにちは,英語の挨拶の定番,Hi:やあ,挨拶,1
Thank you,サンキュー,ありがとう,感謝を表す表現,Thanks:ありがと,感謝,1
```

**エンコーディング**: UTF-8必須

---

## 📖 ドキュメント

### 🎓 まず読むべきドキュメント

1. **`SimpleWord/docs/仕様書/00_機能復元マスター仕様書_v3.md`** ⭐ 最重要
   - プロジェクト全体の包括的な仕様
   - アーキテクチャ、データフロー、アルゴリズムの詳細
   - 機能損失時の復元に最優先で参照

2. **`SimpleWord/docs/仕様書/99_ファイル索引.md`**
   - 全仕様書とファイルの索引
   - 仕様書のバージョン管理

3. **`SPECIFICATION_REVISION_COMPLETION_REPORT.md`**
   - 仕様書改訂の完了レポート（2025-10-30）
   - 新規作成した仕様書の説明

### 機能別詳細仕様書（v2シリーズ）

すべて `SimpleWord/docs/仕様書/` 配下にあります：

| 仕様書 | 内容 | 復元可能性 |
|-------|------|-----------|
| `01_クイズ機能_仕様書_v2.md` | クイズ画面の詳細 | ★★★★★ |
| `02_出題設定_仕様書_v2.md` | 設定画面の詳細 | ★★★★★ |
| `03_問題集管理_CSV_仕様書_v2.md` | CSV管理機能 | ★★★★☆ |
| `05_成績表示_仕様書_v2.md` | 成績表示機能 | ★★★★☆ |
| `09_出題ロジック_仕様書_v2.md` | 出題アルゴリズム | ★★★★★ |
| `10_記憶定着度表示_仕様書.md` | 記憶段階表示 | ★★★★★ |
| `11_学習モード推奨_仕様書.md` | モード推奨 | ★★★★★ |
| `12_クイズUIコンポーネント_仕様書.md` | UIコンポーネント | ★★★★★ |

---

## 🛠️ 開発

### コーディング規約

- **インデント**: スペース4つ
- **命名**: 説明的な名前を使用
- **コメント**: 日本語で意図を明記
- **Feature-First Architectureを遵守**
- **非推奨構文を使用しない**

詳細は `SimpleWord/docs/仕様書/00_編集ガイド.md` を参照。

### ブランチ戦略

- `main`: 安定版
- `feature/*`: 新機能開発
- `fix/*`: バグ修正
- `refactor/*`: リファクタリング

---

## 🧪 テスト

### テスト実行

```bash
# すべてのテストを実行
xcodebuild test -project SimpleWord.xcodeproj \
  -scheme SimpleWord \
  -destination 'platform=iOS Simulator,name=iPhone 15'
```

### カバレッジ目標

- ビジネスロジック: 80%以上
- UI層: 50%以上

---

## 📦 依存関係

このプロジェクトは外部ライブラリを使用していません。SwiftUIとCombineのみで実装されています。

---

## 🔄 バージョン履歴

### v3.0（2025-10-30）

**主な変更点**:
- 仕様書の全面改訂（機能復元マスター仕様書の作成）
- 成績表示機能の仕様書を詳細化
- CSV管理機能の仕様書を詳細化
- ドキュメント体系の整理

### v2.0（2025-10-28）

**主な変更点**:
- バッチ学習システムの実装
- セッション管理の追加
- UIコンポーネントの分離
- 包括的ドキュメントの整備

---

## 🤝 貢献

### 貢献の流れ

1. Issueを作成して問題を報告
2. フォークしてブランチを作成
3. 変更を実装
4. テストを追加・実行
5. プルリクエストを作成

---

## 📄 ライセンス

このプロジェクトは[MITライセンス](LICENSE)の下で公開されています。

---

## 📞 サポート

### 問題が発生した場合

1. [`00_機能復元マスター仕様書_v3.md`](SimpleWord/docs/仕様書/00_機能復元マスター仕様書_v3.md)を確認
2. [`99_ファイル索引.md`](SimpleWord/docs/仕様書/99_ファイル索引.md)で関連仕様書を検索
3. Issueを作成して報告

---

## 🎉 まとめ

SimpleWordは、**完全に復元可能な仕様書**を持つ、保守性の高い単語学習アプリです。

- ✅ すべての主要機能を仕様書から復元可能
- ✅ 新規開発者が短期間で理解可能
- ✅ アーキテクチャ原則の明文化により一貫性を保持
- ✅ 設計思想・実装パターンを文書化

**最終更新**: 2025年10月30日  
**バージョン**: 3.0  
**ステータス**: ✅ 安定版
