# データ品質レポート

**生成日時**: 2025年12月7日  
**対象**: nanashi8.github.io プロジェクト全データ

---

## 📊 検証結果サマリー

| 項目 | 件数 |
|------|------|
| チェックしたファイル数 | 69 |
| チェックしたエントリ数 | 15,269 |
| 🔴 **エラー** | **1,000** |
| 🟡 **警告** | **574** |

---

## 🔴 エラー詳細（優先度順）

### 1. 🔥 高優先度（データ欠損）

#### IPA_MISSING - 336件
**問題**: CSV形式でIPA発音が欠損（カタカナのみ）

**正しい形式**:
```csv
語句,読み,意味
February,ˈfɛbruɛri (フェ́ブルアリー),2月
```

**誤った形式**:
```csv
語句,読み,意味
February,フェ́ブルアリー,2月
```

**影響**: 発音学習機能が正しく動作しない

**修正方法**: IPA発音記号を追加
- 対象ファイル: `public/data/vocabulary/all-words.csv`
- 修正件数: 336件

---

#### KATAKANA_ENGLISH_MIXED - 436件
**問題**: カタカナフィールドに英語が混入

**正しい形式**:
```csv
August,ɔːˈɡʌst (オーガ́スト),8月
```

**誤った形式**:
```csv
August,ɔːˈɡʌst (August),8月
```

**影響**: カタカナ読みが表示されない

**修正方法**: 英語をカタカナに変換
- 対象ファイル: `public/data/vocabulary/all-words.csv`
- 修正件数: 436件

---

### 2. ⚠️ 中優先度（データ不整合）

#### MISSING_REQUIRED_FIELD - 150件
**問題**: 必須フィールド（word, meaning）が欠損

**対象ファイル**:
- `public/data/constants.json`
- `public/data/grammar/grammar_grade*.json`

**修正方法**: データ構造を確認し、欠損フィールドを補完

---

#### IPA_INVALID_CHARS - 76件
**問題**: 未対応のIPA記号が含まれている

**検出された文字**: 
- 稀な補助記号や方言記号

**修正方法**: 
- チェッカーのIPA文字セットに追加（技術的対応）
- または該当データの発音記号を標準的な記号に変更

---

### 3. ℹ️ 低優先度（軽微な問題）

#### IPA_UPPERCASE - 2件
**問題**: IPA発音に大文字が含まれている

**具体例**:
```csv
on one's way to,On One'S Way To (オン ワンズ ウェイ トゥ)
```

**修正方法**: 小文字に変換

---

#### IPA_SAME_AS_WORD - 15件
**問題**: IPA発音が単語と同じ（変換忘れの可能性）

**修正方法**: 正しいIPA発音記号を入力

---

## 🟡 警告詳細

### KATAKANA_INVALID_CHARS - 407件
**問題**: カタカナフィールドに特殊文字（ハイフン"-"等）が含まれている

**具体例**:
```json
"500": {
  "reading": "-"
}
```

**影響**: 軽微（説明文や特殊ケース）

**修正方法**: 必要に応じて適切なカタカナに変換

---

### MEANING_NO_JAPANESE - 152件
**問題**: 意味フィールドに日本語が含まれていない（数字のみ）

**具体例**:
```json
"two": {
  "meaning": "2"
}
```

**影響**: 軽微（数字は許容範囲）

**修正方法**: 必要に応じて日本語訳を追加（例: "2", "二"）

---

## 🛠️ 推奨修正手順

### フェーズ1: 高優先度エラー修正（必須）

1. **IPA_MISSING (336件)** の修正
   ```bash
   # 対象: public/data/vocabulary/all-words.csv
   # February,フェ́ブルアリー,2月
   # ↓
   # February,ˈfɛbruɛri (フェ́ブルアリー),2月
   ```

1. **KATAKANA_ENGLISH_MIXED (436件)** の修正
   ```bash
   # 対象: public/data/vocabulary/all-words.csv
   # August,ɔːˈɡʌst (August),8月
   # ↓
   # August,ɔːˈɡʌst (オーガ́スト),8月
   ```

**影響**: これらを修正することで、発音学習機能が完全に動作します。

---

### フェーズ2: 中優先度エラー修正（推奨）

1. **MISSING_REQUIRED_FIELD (150件)** の修正
   - データ構造を確認
   - 空のエントリや不要な行を削除
   - 必要なフィールドを補完

1. **IPA_INVALID_CHARS (76件)** の確認
   - 稀な記号が本当に必要かを検証
   - 必要ならチェッカーに追加
   - 不要なら標準記号に変更

---

### フェーズ3: 軽微な問題の修正（任意）

1. **IPA_UPPERCASE (2件)** の修正
1. **IPA_SAME_AS_WORD (15件)** の修正
1. 警告の確認と必要に応じた修正

---

## 📈 改善状況

| 段階 | エラー数 | 改善率 |
|------|---------|--------|
| 初期検証 | 4,272件 | - |
| IPA文字セット拡張後 | 1,775件 | 58%↓ |
| 完全IPA対応後 | 1,000件 | 76%↓ |
| **目標（フェーズ1完了後）** | **228件** | **95%↓** |

---

## 🔧 自動修正ツールの提案

優先修正対象のエラーは自動修正スクリプトで対応可能:

```python
# scripts/auto-fix-data-quality.py
# 1. IPA_MISSING: IPA発音を自動生成（または手動リスト）
# 2. KATAKANA_ENGLISH_MIXED: 英語→カタカナ変換辞書
# 3. IPA_UPPERCASE: 小文字変換
```

---

## 📝 まとめ

### ✅ 完了事項
- データ品質チェックシステム構築
- 包括的なエラー検出（15,269エントリ検証）
- IPA記号セットの完全対応
- CSV/JSON両形式の検証ロジック実装

### 🎯 次のステップ
1. **IPA_MISSING（336件）を修正** → 発音機能が完全動作
1. **KATAKANA_ENGLISH_MIXED（436件）を修正** → カタカナ表示が正常化
1. 継続的なデータ品質チェックをCI/CDに統合

### 📌 重要な注意点
- **データ形式を壊さない**: `IPA (カタカナ́)` 形式を厳守
- **アクセント記号を保持**: `́` は発音学習に必須
- **段階的な修正**: 高優先度から順に対応
