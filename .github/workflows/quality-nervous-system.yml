name: å“è³ªç¥çµŒç³»çµ± CI

on:
  push:
    branches: [ main ]
    paths:
      - 'public/data/**/*-grade*.json'
  pull_request:
    branches: [ main ]
    paths:
      - 'public/data/**/*-grade*.json'

jobs:
  quality-nervous-system:
    name: å“è³ªç¥çµŒç³»çµ±ãƒã‚§ãƒƒã‚¯
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      
      - name: ğŸ§  å“è³ªç¥çµŒç³»çµ± èµ·å‹•
        run: |
          echo "ğŸ§  å“è³ªç¥çµŒç³»çµ±ã‚’èµ·å‹•ã—ã¾ã™"
          echo "ç›®çš„: å•é¡Œä½œæˆãƒ—ãƒ­ã‚»ã‚¹ã®ç•°å¸¸ã‚’å³åº§ã«æ¤œçŸ¥"
          echo "åŸå‰‡: ä¸‹è«‹ã‘ã®æ‰‹æŠœãã‚’è¨±ã•ãªã„"
          echo ""
          
          python3 scripts/quality_nervous_system.py
      
      - name: çµæœé€šçŸ¥
        if: failure()
        run: |
          echo "ğŸš¨ å“è³ªç¥çµŒç³»çµ±ãŒç•°å¸¸ã‚’æ¤œçŸ¥ã—ã¾ã—ãŸ"
          echo "   å³åº§ã«ä¿®æ­£ã—ã¦ãã ã•ã„"
          echo "   --no-verify ã§ã®ãƒã‚¤ãƒ‘ã‚¹ã¯ç„¡åŠ¹ã§ã™"
          exit 1
